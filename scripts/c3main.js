// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

Nn=function(t){if("undefined"!=typeof require)return require.apply(this,arguments);throw Error('Dynamic require of "'+t+'" is not supported')};var _n,In,Cn,En,Pn,Rn,An,Fn,On,xn,Mn,Dn,Ln,kn,Nn,Bn,Wn,jn,Gn,Un,Tn,Vn,Hn,zn,Jn,qn,$n,Xn,Yn,Zn,Kn,Qn,tr,sr,ir,er,nr,rr,hr,or,ar,O,D,L,k,N="undefined"!=typeof require?require:"undefined"!=typeof Proxy?new Proxy(Nn,{get:(t,s)=>("undefined"!=typeof require?require:t)[s]}):Nn;{let L=function(t){Mn=t},k=function(t){return t*kn},N=function(t,s){return Math.abs(t-s)<=xn*Math.max(1,Math.abs(t),Math.abs(s))},B=function(){var t=new Mn(4);return Mn!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},W=function(t){var s=new Mn(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},j=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},U=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},V=function(t,s,i,e){var n=new Mn(4);return n[0]=t,n[1]=s,n[2]=i,n[3]=e,n},H=function(t,s,i,e,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t},z=function(t,s){var i;return t===s?(i=s[1],t[1]=s[2],t[2]=i):(t[0]=s[0],t[1]=s[2],t[2]=s[1],t[3]=s[3]),t},J=function(t,s){var i=s[0],e=s[1],n=s[2],r=i*(s=s[3])-n*e;return r?(t[0]=s*(r=1/r),t[1]=-e*r,t[2]=-n*r,t[3]=i*r,t):null},q=function(t,s){var i=s[0];return t[0]=s[3],t[1]=-s[1],t[2]=-s[2],t[3]=i,t},$=function(t){return t[0]*t[3]-t[2]*t[1]},t=function(t,s,i){var e=s[0],n=s[1],r=s[2],s=s[3],h=i[0],o=i[1],a=i[2],i=i[3];return t[0]=e*h+r*o,t[1]=n*h+s*o,t[2]=e*a+r*i,t[3]=n*a+s*i,t},X=function(t,s,i){var e=s[0],n=s[1],r=s[2],s=s[3],h=Math.sin(i),i=Math.cos(i);return t[0]=e*i+r*h,t[1]=n*i+s*h,t[2]=e*-h+r*i,t[3]=n*-h+s*i,t},Y=function(t,s,i){var e=s[0],n=s[1],r=s[2],s=s[3],h=i[0],i=i[1];return t[0]=e*h,t[1]=n*h,t[2]=r*i,t[3]=s*i,t},Z=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t},K=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t},Q=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},tt=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},st=function(t,s,i,e){return t[2]=e[2]/e[0],i[0]=e[0],i[1]=e[1],i[3]=e[3]-t[2]*i[1],[t,s,i]},it=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},s=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},et=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},nt=function(t,s){var i=t[0],e=t[1],n=t[2],t=t[3],r=s[0],h=s[1],o=s[2],s=s[3];return Math.abs(i-r)<=xn*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(e-h)<=xn*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(n-o)<=xn*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(t-s)<=xn*Math.max(1,Math.abs(t),Math.abs(s))},rt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},ht=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},ot=function(){var t=new Mn(6);return Mn!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},at=function(t){var s=new Mn(6);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s},lt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t},ut=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},ct=function(t,s,i,e,n,r){var h=new Mn(6);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h[4]=n,h[5]=r,h},ft=function(t,s,i,e,n,r,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t},dt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],s=s[5],o=i*r-e*n;return o?(t[0]=r*(o=1/o),t[1]=-e*o,t[2]=-n*o,t[3]=i*o,t[4]=(n*s-r*h)*o,t[5]=(e*h-i*s)*o,t):null},pt=function(t){return t[0]*t[3]-t[1]*t[2]},i=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],s=s[5],a=i[0],l=i[1],u=i[2],c=i[3],f=i[4],i=i[5];return t[0]=e*a+r*l,t[1]=n*a+h*l,t[2]=e*u+r*c,t[3]=n*u+h*c,t[4]=e*f+r*i+o,t[5]=n*f+h*i+s,t},mt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],s=s[5],a=Math.sin(i),i=Math.cos(i);return t[0]=e*i+r*a,t[1]=n*i+h*a,t[2]=e*-a+r*i,t[3]=n*-a+h*i,t[4]=o,t[5]=s,t},gt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],s=s[5],a=i[0],i=i[1];return t[0]=e*a,t[1]=n*a,t[2]=r*i,t[3]=h*i,t[4]=o,t[5]=s,t},yt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],s=s[5],a=i[0],i=i[1];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=e*a+r*i+o,t[5]=n*a+h*i+s,t},wt=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t[4]=0,t[5]=0,t},St=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t[4]=0,t[5]=0,t},vt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=s[0],t[5]=s[1],t},bt=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},xt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},Mt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t},e=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t},Gt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t},Tt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t},_t=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]},It=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],t=t[5],o=s[0],a=s[1],l=s[2],u=s[3],c=s[4],s=s[5];return Math.abs(i-o)<=xn*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(e-a)<=xn*Math.max(1,Math.abs(e),Math.abs(a))&&Math.abs(n-l)<=xn*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-u)<=xn*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(h-c)<=xn*Math.max(1,Math.abs(h),Math.abs(c))&&Math.abs(t-s)<=xn*Math.max(1,Math.abs(t),Math.abs(s))},n=function(){var t=new Mn(9);return Mn!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},Ct=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[4],t[4]=s[5],t[5]=s[6],t[6]=s[8],t[7]=s[9],t[8]=s[10],t},Et=function(t){var s=new Mn(9);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s},Pt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},Rt=function(t,s,i,e,n,r,h,o,a){var l=new Mn(9);return l[0]=t,l[1]=s,l[2]=i,l[3]=e,l[4]=n,l[5]=r,l[6]=h,l[7]=o,l[8]=a,l},At=function(t,s,i,e,n,r,h,o,a,l){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t},Ft=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ot=function(t,s){var i,e,n;return t===s?(i=s[1],e=s[2],n=s[5],t[1]=s[3],t[2]=s[6],t[3]=i,t[5]=s[7],t[6]=e,t[7]=n):(t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8]),t},Dt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=(s=s[8])*h-o*l,c=-s*r+o*a,f=l*r-h*a,d=i*u+e*c+n*f;return d?(t[0]=u*(d=1/d),t[1]=(-s*e+n*l)*d,t[2]=(o*e-n*h)*d,t[3]=c*d,t[4]=(s*i-n*a)*d,t[5]=(-o*i+n*r)*d,t[6]=f*d,t[7]=(-l*i+e*a)*d,t[8]=(h*i-e*r)*d,t):null},Lt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],s=s[8];return t[0]=h*s-o*l,t[1]=n*l-e*s,t[2]=e*o-n*h,t[3]=o*a-r*s,t[4]=i*s-n*a,t[5]=n*r-i*o,t[6]=r*l-h*a,t[7]=e*a-i*l,t[8]=i*h-e*r,t},kt=function(t){var s=t[0],i=t[3],e=t[4],n=t[5],r=t[6],h=t[7],o=t[8];return s*(o*e-n*h)+t[1]*(-o*i+n*r)+t[2]*(h*i-e*r)},r=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=i[0],f=i[1],d=i[2],p=i[3],m=i[4],g=i[5],y=i[6],w=i[7],i=i[8];return t[0]=c*e+f*h+d*l,t[1]=c*n+f*o+d*u,t[2]=c*r+f*a+d*s,t[3]=p*e+m*h+g*l,t[4]=p*n+m*o+g*u,t[5]=p*r+m*a+g*s,t[6]=y*e+w*h+i*l,t[7]=y*n+w*o+i*u,t[8]=y*r+w*a+i*s,t},Nt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=i[0],i=i[1];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=c*e+i*h+l,t[7]=c*n+i*o+u,t[8]=c*r+i*a+s,t},Bt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=Math.sin(i),i=Math.cos(i);return t[0]=i*e+c*h,t[1]=i*n+c*o,t[2]=i*r+c*a,t[3]=i*h-c*e,t[4]=i*o-c*n,t[5]=i*a-c*r,t[6]=l,t[7]=u,t[8]=s,t},Wt=function(t,s,i){var e=i[0],i=i[1];return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=i*s[3],t[4]=i*s[4],t[5]=i*s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},jt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=s[0],t[7]=s[1],t[8]=1,t},Ut=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=0,t[3]=-i,t[4]=s,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Vt=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=s[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ht=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=0,t[3]=s[2],t[4]=s[3],t[5]=0,t[6]=s[4],t[7]=s[5],t[8]=1,t},zt=function(t,s){var i=s[0],e=s[2],n=e+e,i=i*(l=i+i),r=(h=s[1])*l,h=h*(u=h+h),o=e*l,a=e*u,l=(s=s[3])*l,u=s*u,s=s*n;return t[0]=1-h-(e=e*n),t[3]=r-s,t[6]=o+u,t[1]=r+s,t[4]=1-i-e,t[7]=a-l,t[2]=o-u,t[5]=a+l,t[8]=1-i-h,t},Jt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*h,w=i*a-n*h,S=i*l-r*h,v=e*a-n*o,b=e*l-r*o,x=n*l-r*a,M=u*m-c*p,G=u*g-f*p,T=c*g-f*m;return(d=y*(f=f*(s=s[15])-d*g)-w*(c=c*s-d*m)+S*T+v*(u=u*s-d*p)-b*G+x*M)?(t[0]=(o*f-a*c+l*T)*(d=1/d),t[1]=(a*u-h*f-l*G)*d,t[2]=(h*c-o*u+l*M)*d,t[3]=(n*c-e*f-r*T)*d,t[4]=(i*f-n*u+r*G)*d,t[5]=(e*u-i*c-r*M)*d,t[6]=(m*x-g*b+s*v)*d,t[7]=(g*S-p*x-s*w)*d,t[8]=(p*b-m*S+s*y)*d,t):null},qt=function(t,s,i){return t[0]=2/s,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},$t=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},Xt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},Yt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t},h=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t},Zt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t},Kt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t},Qt=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]},ts=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=t[6],l=t[7],t=t[8],u=s[0],c=s[1],f=s[2],d=s[3],p=s[4],m=s[5],g=s[6],y=s[7],s=s[8];return Math.abs(i-u)<=xn*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(e-c)<=xn*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(n-f)<=xn*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-d)<=xn*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(h-p)<=xn*Math.max(1,Math.abs(h),Math.abs(p))&&Math.abs(o-m)<=xn*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-g)<=xn*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(l-y)<=xn*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(t-s)<=xn*Math.max(1,Math.abs(t),Math.abs(s))},ss=function(){var t=new Mn(16);return Mn!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},is=function(t){var s=new Mn(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},es=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},ns=function(t,s,i,e,n,r,h,o,a,l,u,c,f,d,p,m){var g=new Mn(16);return g[0]=t,g[1]=s,g[2]=i,g[3]=e,g[4]=n,g[5]=r,g[6]=h,g[7]=o,g[8]=a,g[9]=l,g[10]=u,g[11]=c,g[12]=f,g[13]=d,g[14]=p,g[15]=m,g},rs=function(t,s,i,e,n,r,h,o,a,l,u,c,f,d,p,m,g){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t[9]=u,t[10]=c,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=g,t},p=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},hs=function(t,s){var i,e,n,r,h,o;return t===s?(i=s[1],e=s[2],n=s[3],r=s[6],h=s[7],o=s[11],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=i,t[6]=s[9],t[7]=s[13],t[8]=e,t[9]=r,t[11]=s[14],t[12]=n,t[13]=h,t[14]=o):(t[0]=s[0],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=s[1],t[5]=s[5],t[6]=s[9],t[7]=s[13],t[8]=s[2],t[9]=s[6],t[10]=s[10],t[11]=s[14],t[12]=s[3],t[13]=s[7],t[14]=s[11],t[15]=s[15]),t},os=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*h,w=i*a-n*h,S=i*l-r*h,v=e*a-n*o,b=e*l-r*o,x=n*l-r*a,M=u*m-c*p,G=u*g-f*p,T=u*(s=s[15])-d*p,_=c*g-f*m,I=c*s-d*m,C=f*s-d*g,E=y*C-w*I+S*_+v*T-b*G+x*M;return E?(t[0]=(o*C-a*I+l*_)*(E=1/E),t[1]=(n*I-e*C-r*_)*E,t[2]=(m*x-g*b+s*v)*E,t[3]=(f*b-c*x-d*v)*E,t[4]=(a*T-h*C-l*G)*E,t[5]=(i*C-n*T+r*G)*E,t[6]=(g*S-p*x-s*w)*E,t[7]=(u*x-f*S+d*w)*E,t[8]=(h*I-o*T+l*M)*E,t[9]=(e*T-i*I-r*M)*E,t[10]=(p*b-m*S+s*y)*E,t[11]=(c*S-u*b-d*y)*E,t[12]=(o*G-h*_-a*M)*E,t[13]=(i*_-e*G+n*M)*E,t[14]=(m*w-p*v-g*y)*E,t[15]=(u*v-c*w+f*y)*E,t):null},as=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*h,w=i*a-n*h,S=i*l-r*h,v=e*a-n*o,b=e*l-r*o,x=n*l-r*a,M=u*m-c*p,G=u*g-f*p,T=u*(s=s[15])-d*p,_=c*g-f*m,I=c*s-d*m,C=f*s-d*g;return t[0]=o*C-a*I+l*_,t[1]=n*I-e*C-r*_,t[2]=m*x-g*b+s*v,t[3]=f*b-c*x-d*v,t[4]=a*T-h*C-l*G,t[5]=i*C-n*T+r*G,t[6]=g*S-p*x-s*w,t[7]=u*x-f*S+d*w,t[8]=h*I-o*T+l*M,t[9]=e*T-i*I-r*M,t[10]=p*b-m*S+s*y,t[11]=c*S-u*b-d*y,t[12]=o*G-h*_-a*M,t[13]=i*_-e*G+n*M,t[14]=m*w-p*v-g*y,t[15]=u*v-c*w+f*y,t},ls=function(t){var s=t[0],i=t[1],e=t[2],n=t[4],r=t[5],h=t[6],o=t[8],a=t[9],l=t[10],u=t[12],c=t[13],f=t[14],d=s*r-i*n,p=s*h-e*n,m=i*h-e*r,g=o*c-a*u,y=o*f-l*u,w=a*f-l*c;return t[7]*(s*w-i*y+e*g)-t[3]*(n*w-r*y+h*g)+t[15]*(o*m-a*p+l*d)-t[11]*(u*m-c*p+f*d)},o=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],m=s[12],g=s[13],y=s[14],s=s[15],w=i[0],S=i[1],v=i[2],b=i[3];return t[0]=w*e+S*o+v*c+b*m,t[1]=w*n+S*a+v*f+b*g,t[2]=w*r+S*l+v*d+b*y,t[3]=w*h+S*u+v*p+b*s,t[4]=(w=i[4])*e+(S=i[5])*o+(v=i[6])*c+(b=i[7])*m,t[5]=w*n+S*a+v*f+b*g,t[6]=w*r+S*l+v*d+b*y,t[7]=w*h+S*u+v*p+b*s,t[8]=(w=i[8])*e+(S=i[9])*o+(v=i[10])*c+(b=i[11])*m,t[9]=w*n+S*a+v*f+b*g,t[10]=w*r+S*l+v*d+b*y,t[11]=w*h+S*u+v*p+b*s,t[12]=(w=i[12])*e+(S=i[13])*o+(v=i[14])*c+(b=i[15])*m,t[13]=w*n+S*a+v*f+b*g,t[14]=w*r+S*l+v*d+b*y,t[15]=w*h+S*u+v*p+b*s,t},us=function(t,s,i){var e,n,r,h,o,a,l,u,c,f,d,p,m=i[0],g=i[1],i=i[2];return s===t?(t[12]=s[0]*m+s[4]*g+s[8]*i+s[12],t[13]=s[1]*m+s[5]*g+s[9]*i+s[13],t[14]=s[2]*m+s[6]*g+s[10]*i+s[14],t[15]=s[3]*m+s[7]*g+s[11]*i+s[15]):(e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=l,t[7]=u,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=e*m+o*g+c*i+s[12],t[13]=n*m+a*g+f*i+s[13],t[14]=r*m+l*g+d*i+s[14],t[15]=h*m+u*g+p*i+s[15]),t},cs=function(t,s,i){var e=i[0],n=i[1],i=i[2];return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*n,t[5]=s[5]*n,t[6]=s[6]*n,t[7]=s[7]*n,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},fs=function(t,s,i,e){var n,r,h,o,a,l,u,c,f,d,p,m,g,y,w,S,v,b,x,M,G=e[0],T=e[1],e=e[2],_=Math.hypot(G,T,e);return _<xn?null:(G*=_=1/_,T*=_,e*=_,_=Math.sin(i),i=Math.cos(i),r=s[0],h=s[1],o=s[2],a=s[3],u=s[5],c=s[6],f=s[7],p=s[9],m=s[10],g=s[11],w=G*T*(n=1-i)-e*_,S=T*T*n+i,v=e*T*n+G*_,b=G*e*n+T*_,x=T*e*n-G*_,M=e*e*n+i,t[0]=r*(i=G*G*n+i)+(l=s[4])*(y=T*G*n+e*_)+(d=s[8])*(e=e*G*n-T*_),t[1]=h*i+u*y+p*e,t[2]=o*i+c*y+m*e,t[3]=a*i+f*y+g*e,t[4]=r*w+l*S+d*v,t[5]=h*w+u*S+p*v,t[6]=o*w+c*S+m*v,t[7]=a*w+f*S+g*v,t[8]=r*b+l*x+d*M,t[9]=h*b+u*x+p*M,t[10]=o*b+c*x+m*M,t[11]=a*b+f*x+g*M,s!==t&&(t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t)},ds=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),n=s[4],r=s[5],h=s[6],o=s[7],a=s[8],l=s[9],u=s[10],c=s[11];return s!==t&&(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[4]=n*i+a*e,t[5]=r*i+l*e,t[6]=h*i+u*e,t[7]=o*i+c*e,t[8]=a*i-n*e,t[9]=l*i-r*e,t[10]=u*i-h*e,t[11]=c*i-o*e,t},ps=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),n=s[0],r=s[1],h=s[2],o=s[3],a=s[8],l=s[9],u=s[10],c=s[11];return s!==t&&(t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=n*i-a*e,t[1]=r*i-l*e,t[2]=h*i-u*e,t[3]=o*i-c*e,t[8]=n*e+a*i,t[9]=r*e+l*i,t[10]=h*e+u*i,t[11]=o*e+c*i,t},ms=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),n=s[0],r=s[1],h=s[2],o=s[3],a=s[4],l=s[5],u=s[6],c=s[7];return s!==t&&(t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=n*i+a*e,t[1]=r*i+l*e,t[2]=h*i+u*e,t[3]=o*i+c*e,t[4]=a*i-n*e,t[5]=l*i-r*e,t[6]=u*i-h*e,t[7]=c*i-o*e,t},gs=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},ys=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=s[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ws=function(t,s,i){var e,n=i[0],r=i[1],i=i[2],h=Math.hypot(n,r,i);return h<xn?null:(n*=h=1/h,r*=h,i*=h,h=Math.sin(s),s=Math.cos(s),t[0]=n*n*(e=1-s)+s,t[1]=r*n*e+i*h,t[2]=i*n*e-r*h,t[3]=0,t[4]=n*r*e-i*h,t[5]=r*r*e+s,t[6]=i*r*e+n*h,t[7]=0,t[8]=n*i*e+r*h,t[9]=r*i*e-n*h,t[10]=i*i*e+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},Ss=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},vs=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},bs=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},f=function(t,s,i){var e=s[0],n=s[2],r=n+n,h=e*(u=e+e),o=e*(c=(l=s[1])+l),e=e*r,a=l*c,l=l*r,u=(s=s[3])*u,c=s*c,s=s*r;return t[0]=1-(a+(n=n*r)),t[1]=o+s,t[2]=e-c,t[3]=0,t[4]=o-s,t[5]=1-(h+n),t[6]=l+u,t[7]=0,t[8]=e+c,t[9]=l-u,t[10]=1-(h+a),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},xs=function(t,s){var i=new Mn(3),e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=e*e+n*n+r*r+h*h;return 0<c?(i[0]=2*(o*h+u*e+a*r-l*n)/c,i[1]=2*(a*h+u*n+l*e-o*r)/c,i[2]=2*(l*h+u*r+o*n-a*e)/c):(i[0]=2*(o*h+u*e+a*r-l*n),i[1]=2*(a*h+u*n+l*e-o*r),i[2]=2*(l*h+u*r+o*n-a*e)),f(t,s,i),t},a=function(t,s){return t[0]=s[12],t[1]=s[13],t[2]=s[14],t},d=function(t,s){var i=s[0],e=s[4],n=s[5],r=s[6],h=s[8],o=s[9],a=s[10];return t[0]=Math.hypot(i,s[1],s[2]),t[1]=Math.hypot(e,n,r),t[2]=Math.hypot(h,o,a),t},l=function(t,s){var i=new Mn(3),e=(d(i,s),1/i[0]),n=s[0]*e,r=s[1]*(u=1/i[1]),h=s[2]*(i=1/i[2]),o=s[4]*e,a=s[5]*u,l=s[6]*i,e=s[8]*e,u=s[9]*u,c=0;return 0<(i=n+a+(s=s[10]*i))?(c=2*Math.sqrt(1+i),t[3]=.25*c,t[0]=(l-u)/c,t[1]=(e-h)/c,t[2]=(r-o)/c):a<n&&s<n?(c=2*Math.sqrt(1+n-a-s),t[3]=(l-u)/c,t[0]=.25*c,t[1]=(r+o)/c,t[2]=(e+h)/c):s<a?(c=2*Math.sqrt(1+a-n-s),t[3]=(e-h)/c,t[0]=(r+o)/c,t[1]=.25*c,t[2]=(l+u)/c):(c=2*Math.sqrt(1+s-n-a),t[3]=(r-o)/c,t[0]=(e+h)/c,t[1]=(l+u)/c,t[2]=.25*c),t},Ms=function(t,s,i,e){s[0]=e[12],s[1]=e[13],s[2]=e[14];var s=e[0],n=e[1],r=e[2],h=e[4],o=e[5],a=e[6],l=e[8],u=e[9],e=e[10],c=(i[0]=Math.hypot(s,n,r),i[1]=Math.hypot(h,o,a),i[2]=Math.hypot(l,u,e),1/i[0]),f=1/i[1],s=s*c,n=n*f,r=r*(i=1/i[2]),h=h*c,a=a*i,l=l*c,c=u*f,u=e*i,e=0;return 0<(f=s+(o=o*f)+u)?(e=2*Math.sqrt(1+f),t[3]=.25*e,t[0]=(a-c)/e,t[1]=(l-r)/e,t[2]=(n-h)/e):o<s&&u<s?(e=2*Math.sqrt(1+s-o-u),t[3]=(a-c)/e,t[0]=.25*e,t[1]=(n+h)/e,t[2]=(l+r)/e):u<o?(e=2*Math.sqrt(1+o-s-u),t[3]=(l-r)/e,t[0]=(n+h)/e,t[1]=.25*e,t[2]=(a+c)/e):(e=2*Math.sqrt(1+u-s-o),t[3]=(n-h)/e,t[0]=(l+r)/e,t[1]=(a+c)/e,t[2]=.25*e),t},Gs=function(t,s,i,e){var n=(h=s[0])*(u=h+h),r=h*(c=(a=s[1])+a),h=h*(f=(l=s[2])+l),o=a*c,a=a*f,l=l*f,u=(s=s[3])*u,c=s*c,s=s*f,f=e[0],d=e[1],e=e[2];return t[0]=(1-(o+l))*f,t[1]=(r+s)*f,t[2]=(h-c)*f,t[3]=0,t[4]=(r-s)*d,t[5]=(1-(n+l))*d,t[6]=(a+u)*d,t[7]=0,t[8]=(h+c)*e,t[9]=(a-u)*e,t[10]=(1-(n+o))*e,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},Ts=function(t,s,i,e,n){var r=(o=s[0])*(c=o+o),h=o*(f=(l=s[1])+l),o=o*(d=(u=s[2])+u),a=l*f,l=l*d,u=u*d,c=(s=s[3])*c,f=s*f,s=s*d,d=e[0],p=e[1],e=e[2],m=n[0],g=n[1],n=n[2],y=(1-(a+u))*d,w=(h+s)*d,d=(o-f)*d,h=(h-s)*p,s=(1-(r+u))*p,u=(l+c)*p,p=(o+f)*e,o=(l-c)*e,f=(1-(r+a))*e;return t[0]=y,t[1]=w,t[2]=d,t[3]=0,t[4]=h,t[5]=s,t[6]=u,t[7]=0,t[8]=p,t[9]=o,t[10]=f,t[11]=0,t[12]=i[0]+m-(y*m+h*g+p*n),t[13]=i[1]+g-(w*m+s*g+o*n),t[14]=i[2]+n-(d*m+u*g+f*n),t[15]=1,t},_s=function(t,s){var i=s[0],e=s[2],n=e+e,i=i*(l=i+i),r=(h=s[1])*l,h=h*(u=h+h),o=e*l,a=e*u,l=(s=s[3])*l,u=s*u,s=s*n;return t[0]=1-h-(e=e*n),t[1]=r+s,t[2]=o-u,t[3]=0,t[4]=r-s,t[5]=1-i-e,t[6]=a+l,t[7]=0,t[8]=o+u,t[9]=a-l,t[10]=1-i-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Is=function(t,s,i,e,n,r,h){var o=1/(i-s),a=1/(n-e),l=1/(r-h);return t[0]=2*r*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*a,t[6]=0,t[7]=0,t[8]=(i+s)*o,t[9]=(n+e)*a,t[10]=(h+r)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=h*r*2*l,t[15]=0,t},u=function(t,s,i,e,n){return s=1/Math.tan(s/2),t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0?(t[10]=(n+e)*(i=1/(e-n)),t[14]=2*n*e*i):(t[10]=-1,t[14]=-2*e),t},Cs=function(t,s,i,e,n){return s=1/Math.tan(s/2),t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0?(t[10]=n*(i=1/(e-n)),t[14]=n*e*i):(t[10]=-1,t[14]=-e),t},Es=function(t,s,i,e){var n=Math.tan(s.upDegrees*Math.PI/180),r=Math.tan(s.downDegrees*Math.PI/180),h=Math.tan(s.leftDegrees*Math.PI/180),o=2/(h+(s=Math.tan(s.rightDegrees*Math.PI/180))),a=2/(n+r);return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=-(h-s)*o*.5,t[9]=(n-r)*a*.5,t[10]=e/(i-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*i/(i-e),t[15]=0,t},c=function(t,s,i,e,n,r,h){var o=1/(s-i),a=1/(e-n),l=1/(r-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(s+i)*o,t[13]=(n+e)*a,t[14]=(h+r)*l,t[15]=1,t},Ps=function(t,s,i,e,n,r,h){var o=1/(s-i),a=1/(e-n),h=1/(r-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=h,t[11]=0,t[12]=(s+i)*o,t[13]=(n+e)*a,t[14]=r*h,t[15]=1,t},Rs=function(t,s,i,e){var n,r,h,o,a=s[0],l=s[1],s=s[2],u=e[0],c=e[1],e=e[2],f=i[0],d=i[1],i=i[2];return Math.abs(a-f)<xn&&Math.abs(l-d)<xn&&Math.abs(s-i)<xn?p(t):(f=a-f,d=l-d,i=s-i,n=c*(i*=o=1/Math.hypot(f,d,i))-e*(d*=o),e=e*(f*=o)-u*i,u=u*d-c*f,(o=Math.hypot(n,e,u))?(n*=o=1/o,e*=o,u*=o):u=e=n=0,c=d*u-i*e,r=i*n-f*u,h=f*e-d*n,(o=Math.hypot(c,r,h))?(c*=o=1/o,r*=o,h*=o):h=r=c=0,t[0]=n,t[1]=c,t[2]=f,t[3]=0,t[4]=e,t[5]=r,t[6]=d,t[7]=0,t[8]=u,t[9]=h,t[10]=i,t[11]=0,t[12]=-(n*a+e*l+u*s),t[13]=-(c*a+r*l+h*s),t[14]=-(f*a+d*l+i*s),t[15]=1,t)},As=function(t,s,i,e){var n=s[0],r=s[1],s=s[2],h=e[0],o=e[1],e=e[2],a=n-i[0],l=r-i[1],u=a*a+l*l+(i=s-i[2])*i,c=(0<u&&(a*=u=1/Math.sqrt(u),l*=u,i*=u),o*i-e*l);return 0<(u=c*c+(e=e*a-h*i)*e+(h=h*l-o*a)*h)&&(c*=u=1/Math.sqrt(u),e*=u,h*=u),t[0]=c,t[1]=e,t[2]=h,t[3]=0,t[4]=l*h-i*e,t[5]=i*c-a*h,t[6]=a*e-l*c,t[7]=0,t[8]=a,t[9]=l,t[10]=i,t[11]=0,t[12]=n,t[13]=r,t[14]=s,t[15]=1,t},Fs=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},Os=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},Ds=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t[9]=s[9]+i[9],t[10]=s[10]+i[10],t[11]=s[11]+i[11],t[12]=s[12]+i[12],t[13]=s[13]+i[13],t[14]=s[14]+i[14],t[15]=s[15]+i[15],t},Ls=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t[9]=s[9]-i[9],t[10]=s[10]-i[10],t[11]=s[11]-i[11],t[12]=s[12]-i[12],t[13]=s[13]-i[13],t[14]=s[14]-i[14],t[15]=s[15]-i[15],t},ks=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12]*i,t[13]=s[13]*i,t[14]=s[14]*i,t[15]=s[15]*i,t},Ns=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t[9]=s[9]+i[9]*e,t[10]=s[10]+i[10]*e,t[11]=s[11]+i[11]*e,t[12]=s[12]+i[12]*e,t[13]=s[13]+i[13]*e,t[14]=s[14]+i[14]*e,t[15]=s[15]+i[15]*e,t},Bs=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]&&t[9]===s[9]&&t[10]===s[10]&&t[11]===s[11]&&t[12]===s[12]&&t[13]===s[13]&&t[14]===s[14]&&t[15]===s[15]},Ws=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11],p=t[12],m=t[13],g=t[14],t=t[15],y=s[0],w=s[1],S=s[2],v=s[3],b=s[4],x=s[5],M=s[6],G=s[7],T=s[8],_=s[9],I=s[10],C=s[11],E=s[12],P=s[13],R=s[14],s=s[15];return Math.abs(i-y)<=xn*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(e-w)<=xn*Math.max(1,Math.abs(e),Math.abs(w))&&Math.abs(n-S)<=xn*Math.max(1,Math.abs(n),Math.abs(S))&&Math.abs(r-v)<=xn*Math.max(1,Math.abs(r),Math.abs(v))&&Math.abs(h-b)<=xn*Math.max(1,Math.abs(h),Math.abs(b))&&Math.abs(o-x)<=xn*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(a-M)<=xn*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(l-G)<=xn*Math.max(1,Math.abs(l),Math.abs(G))&&Math.abs(u-T)<=xn*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(c-_)<=xn*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(f-I)<=xn*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(d-C)<=xn*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(p-E)<=xn*Math.max(1,Math.abs(p),Math.abs(E))&&Math.abs(m-P)<=xn*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(g-R)<=xn*Math.max(1,Math.abs(g),Math.abs(R))&&Math.abs(t-s)<=xn*Math.max(1,Math.abs(t),Math.abs(s))},m=function(){var t=new Mn(3);return Mn!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},js=function(t){var s=new Mn(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s},Us=function(t){var s=t[0];return Math.hypot(s,t[1],t[2])},g=function(t,s,i){var e=new Mn(3);return e[0]=t,e[1]=s,e[2]=i,e},Vs=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},Hs=function(t,s,i,e){return t[0]=s,t[1]=i,t[2]=e,t},zs=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t},Js=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t},qs=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t},$s=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t},Xs=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t},Ys=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t},Zs=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t},Ks=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t},Qs=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t},ti=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},si=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t},ii=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1],s[2]-t[2])},ei=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e+(s=s[2]-t[2])*s},ni=function(t){var s=t[0],i=t[1];return s*s+i*i+(t=t[2])*t},ri=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t},hi=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t},y=function(t,s){var i=s[0],e=s[1],n=s[2];return 0<(i=i*i+e*e+n*n)&&(i=1/Math.sqrt(i)),t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},w=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]},S=function(t,s,i){var e=s[0],n=s[1],s=s[2],r=i[0],h=i[1],i=i[2];return t[0]=n*i-s*h,t[1]=s*r-e*i,t[2]=e*h-n*r,t},oi=function(t,s,i,e){var n=s[0],r=s[1],s=s[2];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t[2]=s+e*(i[2]-s),t},ai=function(t,s,i,e){var n=Math.acos(Math.min(Math.max(w(s,i),-1),1)),r=Math.sin(n),h=Math.sin((1-e)*n)/r,e=Math.sin(e*n)/r;return t[0]=h*s[0]+e*i[0],t[1]=h*s[1]+e*i[1],t[2]=h*s[2]+e*i[2],t},li=function(t,s,i,e,n,r){var h=r*r,o=h*(2*r-3)+1,a=h*(r-2)+r,l=h*(r-1);return t[0]=s[0]*o+i[0]*a+e[0]*l+n[0]*(h=h*(3-2*r)),t[1]=s[1]*o+i[1]*a+e[1]*l+n[1]*h,t[2]=s[2]*o+i[2]*a+e[2]*l+n[2]*h,t},ui=function(t,s,i,e,n,r){var h=1-r,o=h*h,a=r*r,l=o*h;return t[0]=s[0]*l+i[0]*(o=3*r*o)+e[0]*(h=3*a*h)+n[0]*(a=a*r),t[1]=s[1]*l+i[1]*o+e[1]*h+n[1]*a,t[2]=s[2]*l+i[2]*o+e[2]*h+n[2]*a,t},ci=function(t,s){s=s||1;var i=2*Dn()*Math.PI,e=2*Dn()-1,n=Math.sqrt(1-e*e)*s;return t[0]=Math.cos(i)*n,t[1]=Math.sin(i)*n,t[2]=e*s,t},fi=function(t,s,i){var e=s[0],n=s[1],s=s[2],r=i[3]*e+i[7]*n+i[11]*s+i[15];return t[0]=(i[0]*e+i[4]*n+i[8]*s+i[12])/(r=r||1),t[1]=(i[1]*e+i[5]*n+i[9]*s+i[13])/r,t[2]=(i[2]*e+i[6]*n+i[10]*s+i[14])/r,t},di=function(t,s,i){var e=s[0],n=s[1],s=s[2];return t[0]=e*i[0]+n*i[3]+s*i[6],t[1]=e*i[1]+n*i[4]+s*i[7],t[2]=e*i[2]+n*i[5]+s*i[8],t},pi=function(t,s,i){var e=i[0],n=i[1],r=s[0],h=s[1],o=n*(s=s[2])-(c=i[2])*h,a=c*r-e*s,l=e*h-n*r,u=n*l-c*a,c=c*o-e*l,e=e*a-n*o;return a*=n=2*i[3],l*=n,c*=2,e*=2,t[0]=r+(o*=n)+(u*=2),t[1]=h+a+c,t[2]=s+l+e,t},mi=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[0],r[1]=n[1]*Math.cos(e)-n[2]*Math.sin(e),r[2]=n[1]*Math.sin(e)+n[2]*Math.cos(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},gi=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[2]*Math.sin(e)+n[0]*Math.cos(e),r[1]=n[1],r[2]=n[2]*Math.cos(e)-n[0]*Math.sin(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},yi=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[0]*Math.cos(e)-n[1]*Math.sin(e),r[1]=n[0]*Math.sin(e)+n[1]*Math.cos(e),r[2]=n[2],t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},wi=function(t,s){var i=t[0],e=t[1],n=t[2],r=s[0],h=s[1],o=s[2],e=(i=Math.sqrt((i*i+e*e+n*n)*(r*r+h*h+o*o)))&&w(t,s)/i;return Math.acos(Math.min(Math.max(e,-1),1))},Si=function(t){return t[0]=0,t[1]=0,t[2]=0,t},vi=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},bi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]},xi=function(t,s){var i=t[0],e=t[1],t=t[2],n=s[0],r=s[1],s=s[2];return Math.abs(i-n)<=xn*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(e-r)<=xn*Math.max(1,Math.abs(e),Math.abs(r))&&Math.abs(t-s)<=xn*Math.max(1,Math.abs(t),Math.abs(s))},v=function(){var t=new Mn(4);return Mn!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},Mi=function(t){var s=new Mn(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},Gi=function(t,s,i,e){var n=new Mn(4);return n[0]=t,n[1]=s,n[2]=i,n[3]=e,n},Ti=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},_i=function(t,s,i,e,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t},Ii=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},Ci=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},Ei=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t[3]=s[3]*i[3],t},Pi=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t[3]=s[3]/i[3],t},Ri=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t[3]=Math.ceil(s[3]),t},Ai=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t[3]=Math.floor(s[3]),t},Fi=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t[3]=Math.min(s[3],i[3]),t},Oi=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t[3]=Math.max(s[3],i[3]),t},Di=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t[3]=Math.round(s[3]),t},Li=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},ki=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},Ni=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1],s[2]-t[2],s[3]-t[3])},Bi=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2];return i*i+e*e+n*n+(s=s[3]-t[3])*s},b=function(t){var s=t[0];return Math.hypot(s,t[1],t[2],t[3])},x=function(t){var s=t[0],i=t[1],e=t[2];return s*s+i*i+e*e+(t=t[3])*t},Wi=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=-s[3],t},ji=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t[3]=1/s[3],t},Ui=function(t,s){var i=s[0],e=s[1],n=s[2],r=i*i+e*e+n*n+(s=s[3])*s;return 0<r&&(r=1/Math.sqrt(r)),t[0]=i*r,t[1]=e*r,t[2]=n*r,t[3]=s*r,t},M=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]+t[3]*s[3]},Vi=function(t,s,i,e){var n=i[0]*e[1]-i[1]*e[0],r=i[0]*e[2]-i[2]*e[0],h=i[0]*e[3]-i[3]*e[0],o=i[1]*e[2]-i[2]*e[1],a=i[1]*e[3]-i[3]*e[1],i=i[2]*e[3]-i[3]*e[2],e=s[0],l=s[1],u=s[2],s=s[3];return t[0]=l*i-u*a+s*o,t[1]=-e*i+u*h-s*r,t[2]=e*a-l*h+s*n,t[3]=-e*o+l*r-u*n,t},Hi=function(t,s,i,e){var n=s[0],r=s[1],h=s[2],s=s[3];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t[2]=h+e*(i[2]-h),t[3]=s+e*(i[3]-s),t},zi=function(t,s){var i,e,n,r,h,o;for(s=s||1;1<=(h=(i=2*Dn()-1)*i+(e=2*Dn()-1)*e););for(;1<=(o=(n=2*Dn()-1)*n+(r=2*Dn()-1)*r););var a=Math.sqrt((1-h)/o);return t[0]=s*i,t[1]=s*e,t[2]=s*n*a,t[3]=s*r*a,t},Ji=function(t,s,i){var e=s[0],n=s[1],r=s[2],s=s[3];return t[0]=i[0]*e+i[4]*n+i[8]*r+i[12]*s,t[1]=i[1]*e+i[5]*n+i[9]*r+i[13]*s,t[2]=i[2]*e+i[6]*n+i[10]*r+i[14]*s,t[3]=i[3]*e+i[7]*n+i[11]*r+i[15]*s,t},qi=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=i[0],o=i[1],a=i[2],l=(i=i[3])*e+o*r-a*n,u=i*n+a*e-h*r,c=i*r+h*n-o*e;return t[0]=l*i+(e=-h*e-o*n-a*r)*-h+u*-a-c*-o,t[1]=u*i+e*-o+c*-h-l*-a,t[2]=c*i+e*-a+l*-o-u*-h,t[3]=s[3],t},$i=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},Xi=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},Yi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},Zi=function(t,s){var i=t[0],e=t[1],n=t[2],t=t[3],r=s[0],h=s[1],o=s[2],s=s[3];return Math.abs(i-r)<=xn*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(e-h)<=xn*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(n-o)<=xn*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(t-s)<=xn*Math.max(1,Math.abs(t),Math.abs(s))},G=function(){var t=new Mn(4);return Mn!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},Ki=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},T=function(t,s,i){i*=.5;var e=Math.sin(i);return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=Math.cos(i),t},Qi=function(t,s){var i=2*Math.acos(s[3]),e=Math.sin(i/2);return xn<e?(t[0]=s[0]/e,t[1]=s[1]/e,t[2]=s[2]/e):(t[0]=1,t[1]=0,t[2]=0),i},te=function(t,s){return t=Jn(t,s),Math.acos(2*t*t-1)},se=function(t,s,i){var e=s[0],n=s[1],r=s[2],s=s[3],h=i[0],o=i[1],a=i[2],i=i[3];return t[0]=e*i+s*h+n*a-r*o,t[1]=n*i+s*o+r*h-e*a,t[2]=r*i+s*a+e*o-n*h,t[3]=s*i-e*h-n*o-r*a,t},_=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],s=s[3],h=Math.sin(i),i=Math.cos(i);return t[0]=e*i+s*h,t[1]=n*i+r*h,t[2]=r*i-n*h,t[3]=s*i-e*h,t},I=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],s=s[3],h=Math.sin(i),i=Math.cos(i);return t[0]=e*i-r*h,t[1]=n*i+s*h,t[2]=r*i+e*h,t[3]=s*i-n*h,t},C=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],s=s[3],h=Math.sin(i),i=Math.cos(i);return t[0]=e*i+n*h,t[1]=n*i-e*h,t[2]=r*i+s*h,t[3]=s*i-r*h,t},ie=function(t,s){var i=s[0],e=s[1],s=s[2];return t[0]=i,t[1]=e,t[2]=s,t[3]=Math.sqrt(Math.abs(1-i*i-e*e-s*s)),t},E=function(t,s){var i=s[0],e=s[1],n=s[2],s=s[3],r=Math.sqrt(i*i+e*e+n*n),s=Math.exp(s),h=0<r?s*Math.sin(r)/r:0;return t[0]=i*h,t[1]=e*h,t[2]=n*h,t[3]=s*Math.cos(r),t},P=function(t,s){var i=s[0],e=s[1],n=s[2],s=s[3],r=0<(r=Math.sqrt(i*i+e*e+n*n))?Math.atan2(r,s)/r:0;return t[0]=i*r,t[1]=e*r,t[2]=n*r,t[3]=.5*Math.log(i*i+e*e+n*n+s*s),t},ee=function(t,s,i){return P(t,s),zn(t,t,i),E(t,t),t},R=function(t,s,i,e){var n,r,h=s[0],o=s[1],a=s[2],s=s[3],l=i[0],u=i[1],c=i[2],f=h*l+o*u+a*c+s*(i=i[3]);return f<0&&(f=-f,l=-l,u=-u,c=-c,i=-i),f=xn<1-f?(f=Math.acos(f),n=Math.sin(f),r=Math.sin((1-e)*f)/n,Math.sin(e*f)/n):(r=1-e,e),t[0]=r*h+f*l,t[1]=r*o+f*u,t[2]=r*a+f*c,t[3]=r*s+f*i,t},ne=function(t){var s=Dn(),i=Dn(),e=Dn(),n=Math.sqrt(1-s),s=Math.sqrt(s);return t[0]=n*Math.sin(2*Math.PI*i),t[1]=n*Math.cos(2*Math.PI*i),t[2]=s*Math.sin(2*Math.PI*e),t[3]=s*Math.cos(2*Math.PI*e),t},re=function(t,s){var i=s[0],e=s[1],n=s[2],r=i*i+e*e+n*n+(s=s[3])*s;return t[0]=-i*(r=r?1/r:0),t[1]=-e*r,t[2]=-n*r,t[3]=s*r,t},he=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t},A=function(t,s){var i,e,n,r=s[0]+s[4]+s[8];return 0<r?(n=Math.sqrt(r+1),t[3]=.5*n,t[0]=(s[5]-s[7])*(n=.5/n),t[1]=(s[6]-s[2])*n,t[2]=(s[1]-s[3])*n):(i=(1+(r=s[3*(r=s[4]>s[0]?1:0)+r]<s[8]?2:r))%3,e=(2+r)%3,n=Math.sqrt(s[3*r+r]-s[3*i+i]-s[3*e+e]+1),t[r]=.5*n,t[3]=(s[3*i+e]-s[3*e+i])*(n=.5/n),t[i]=(s[3*i+r]+s[3*r+i])*n,t[e]=(s[3*e+r]+s[3*r+e])*n),t},oe=function(t,s,i,e){var n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:Ln,r=Math.PI/360,h=(e*=r,i*=r,Math.sin(s*=r)),o=Math.cos(s),a=Math.sin(i),l=Math.cos(i),u=Math.sin(e),c=Math.cos(e);switch(n){case"xyz":t[0]=h*l*c+o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c-h*a*u;break;case"xzy":t[0]=h*l*c-o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c+h*a*u;break;case"yxz":t[0]=h*l*c+o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c+h*a*u;break;case"yzx":t[0]=h*l*c+o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c-h*a*u;break;case"zxy":t[0]=h*l*c-o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c-h*a*u;break;case"zyx":t[0]=h*l*c-o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c+h*a*u;break;default:throw new Error("Unknown angle order "+n)}return t},ae=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},le=function(t,s){return Math.abs(M(t,s))>=1-xn},ue=function(){var t=new Mn(8);return Mn!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},ce=function(t){var s=new Mn(8);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s},fe=function(t,s,i,e,n,r,h,o){var a=new Mn(8);return a[0]=t,a[1]=s,a[2]=i,a[3]=e,a[4]=n,a[5]=r,a[6]=h,a[7]=o,a},de=function(t,s,i,e,n,r,h){var o=new Mn(8),n=(o[0]=t,o[1]=s,o[2]=i,o[3]=e,.5*n),r=.5*r,h=.5*h;return o[4]=n*e+r*i-h*s,o[5]=r*e+h*t-n*i,o[6]=h*e+n*s-r*t,o[7]=-n*t-r*s-h*i,o},F=function(t,s,i){var e=.5*i[0],n=.5*i[1],i=.5*i[2],r=s[0],h=s[1],o=s[2],s=s[3];return t[0]=r,t[1]=h,t[2]=o,t[3]=s,t[4]=e*s+n*o-i*h,t[5]=n*s+i*r-e*o,t[6]=i*s+e*h-n*r,t[7]=-e*r-n*h-i*o,t},pe=function(t,s){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*s[0],t[5]=.5*s[1],t[6]=.5*s[2],t[7]=0,t},me=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},ge=function(t,s){var i=G(),e=(l(i,s),new Mn(3));return a(e,s),F(t,i,e),t},O=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t},ye=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},we=function(t,s,i,e,n,r,h,o,a){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t},Se=function(t,s){return t[0]=s[4],t[1]=s[5],t[2]=s[6],t[3]=s[7],t},ve=function(t,s){return t[4]=s[0],t[5]=s[1],t[6]=s[2],t[7]=s[3],t},be=function(t,s){var i=s[4],e=s[5],n=s[6],r=s[7],h=-s[0],o=-s[1],a=-s[2],s=s[3];return t[0]=2*(i*s+r*h+e*a-n*o),t[1]=2*(e*s+r*o+n*h-i*a),t[2]=2*(n*s+r*a+i*o-e*h),t},xe=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=.5*i[0],a=.5*i[1],i=.5*i[2],l=s[4],u=s[5],c=s[6],s=s[7];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=h*o+n*i-r*a+l,t[5]=h*a+r*o-e*i+u,t[6]=h*i+e*a-n*o+c,t[7]=-e*o-n*a-r*i+s,t},Me=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=o*h+(d=s[7])*e+a*r-l*n,c=a*h+d*n+l*e-o*r,f=l*h+d*r+o*n-a*e,d=d*h-o*e-a*n-l*r;return _(t,s,i),e=t[0],t[4]=u*(h=t[3])+d*e+c*(r=t[2])-f*(n=t[1]),t[5]=c*h+d*n+f*e-u*r,t[6]=f*h+d*r+u*n-c*e,t[7]=d*h-u*e-c*n-f*r,t},Ge=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=o*h+(d=s[7])*e+a*r-l*n,c=a*h+d*n+l*e-o*r,f=l*h+d*r+o*n-a*e,d=d*h-o*e-a*n-l*r;return I(t,s,i),e=t[0],t[4]=u*(h=t[3])+d*e+c*(r=t[2])-f*(n=t[1]),t[5]=c*h+d*n+f*e-u*r,t[6]=f*h+d*r+u*n-c*e,t[7]=d*h-u*e-c*n-f*r,t},Te=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=o*h+(d=s[7])*e+a*r-l*n,c=a*h+d*n+l*e-o*r,f=l*h+d*r+o*n-a*e,d=d*h-o*e-a*n-l*r;return C(t,s,i),e=t[0],t[4]=u*(h=t[3])+d*e+c*(r=t[2])-f*(n=t[1]),t[5]=c*h+d*n+f*e-u*r,t[6]=f*h+d*r+u*n-c*e,t[7]=d*h-u*e-c*n-f*r,t},_e=function(t,s,i){var e=i[0],n=i[1],r=i[2],i=i[3],h=s[0],o=s[1],a=s[2],l=s[3];return t[0]=h*i+l*e+o*r-a*n,t[1]=o*i+l*n+a*e-h*r,t[2]=a*i+l*r+h*n-o*e,t[3]=l*i-h*e-o*n-a*r,t[4]=(h=s[4])*i+(l=s[7])*e+(o=s[5])*r-(a=s[6])*n,t[5]=o*i+l*n+a*e-h*r,t[6]=a*i+l*r+h*n-o*e,t[7]=l*i-h*e-o*n-a*r,t},Ie=function(t,s,i){var e=s[0],n=s[1],r=s[2],s=s[3],h=i[0],o=i[1],a=i[2],l=i[3];return t[0]=e*l+s*h+n*a-r*o,t[1]=n*l+s*o+r*h-e*a,t[2]=r*l+s*a+e*o-n*h,t[3]=s*l-e*h-n*o-r*a,t[4]=e*(l=i[7])+s*(h=i[4])+n*(a=i[6])-r*(o=i[5]),t[5]=n*l+s*o+r*h-e*a,t[6]=r*l+s*a+e*o-n*h,t[7]=s*l-e*h-n*o-r*a,t},Ce=function(t,s,i,e){var n,r,h,o,a,l;return Math.abs(e)<xn?O(t,s):(l=Math.hypot(i[0],i[1],i[2]),e*=.5,n=(h=Math.sin(e))*i[0]/l,r=h*i[1]/l,h=h*i[2]/l,i=Math.cos(e),l=s[0],t[0]=l*i+(e=s[3])*n+(o=s[1])*h-(a=s[2])*r,t[1]=o*i+e*r+a*n-l*h,t[2]=a*i+e*h+l*r-o*n,t[3]=e*i-l*n-o*r-a*h,t[4]=(e=s[4])*i+(l=s[7])*n+(o=s[5])*h-(a=s[6])*r,t[5]=o*i+l*r+a*n-e*h,t[6]=a*i+l*h+e*r-o*n,t[7]=l*i-e*n-o*r-a*h,t)},Ee=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t},Pe=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[4],a=i[5],l=i[6],u=i[7],c=s[4],f=s[5],d=s[6],s=s[7],p=i[0],m=i[1],g=i[2],i=i[3];return t[0]=e*i+h*p+n*g-r*m,t[1]=n*i+h*m+r*p-e*g,t[2]=r*i+h*g+e*m-n*p,t[3]=h*i-e*p-n*m-r*g,t[4]=e*u+h*o+n*l-r*a+c*i+s*p+f*g-d*m,t[5]=n*u+h*a+r*o-e*l+f*i+s*m+d*p-c*g,t[6]=r*u+h*l+e*a-n*o+d*i+s*g+c*m-f*p,t[7]=h*u-e*o-n*a-r*l+s*i-c*p-f*m-d*g,t},Re=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t},Ae=function(t,s,i,e){var n=1-e;return Zn(s,i)<0&&(e=-e),t[0]=s[0]*n+i[0]*e,t[1]=s[1]*n+i[1]*e,t[2]=s[2]*n+i[2]*e,t[3]=s[3]*n+i[3]*e,t[4]=s[4]*n+i[4]*e,t[5]=s[5]*n+i[5]*e,t[6]=s[6]*n+i[6]*e,t[7]=s[7]*n+i[7]*e,t},Fe=function(t,s){var i=Kn(s);return t[0]=-s[0]/i,t[1]=-s[1]/i,t[2]=-s[2]/i,t[3]=s[3]/i,t[4]=-s[4]/i,t[5]=-s[5]/i,t[6]=-s[6]/i,t[7]=s[7]/i,t},Oe=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t[4]=-s[4],t[5]=-s[5],t[6]=-s[6],t[7]=s[7],t},De=function(t,s){var i,e,n,r,h,o,a,l,u=Kn(s);return 0<u&&(u=Math.sqrt(u),l=(i=s[0]/u)*(h=s[4])+(e=s[1]/u)*(o=s[5])+(n=s[2]/u)*(a=s[6])+(r=s[3]/u)*(s=s[7]),t[0]=i,t[1]=e,t[2]=n,t[3]=r,t[4]=(h-i*l)/u,t[5]=(o-e*l)/u,t[6]=(a-n*l)/u,t[7]=(s-r*l)/u),t},Le=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},ke=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]},Ne=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=t[6],t=t[7],l=s[0],u=s[1],c=s[2],f=s[3],d=s[4],p=s[5],m=s[6],s=s[7];return Math.abs(i-l)<=xn*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(e-u)<=xn*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(n-c)<=xn*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(r-f)<=xn*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(h-d)<=xn*Math.max(1,Math.abs(h),Math.abs(d))&&Math.abs(o-p)<=xn*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-m)<=xn*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(t-s)<=xn*Math.max(1,Math.abs(t),Math.abs(s))},D=function(){var t=new Mn(2);return Mn!=Float32Array&&(t[0]=0,t[1]=0),t},Be=function(t){var s=new Mn(2);return s[0]=t[0],s[1]=t[1],s},We=function(t,s){var i=new Mn(2);return i[0]=t,i[1]=s,i},je=function(t,s){return t[0]=s[0],t[1]=s[1],t},Ue=function(t,s,i){return t[0]=s,t[1]=i,t},Ve=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t},He=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t},ze=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t},Je=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t},qe=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t},$e=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t},Xe=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t},Ye=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t},Ze=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t},Ke=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t},Qe=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t},tn=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1])},sn=function(t,s){var i=s[0]-t[0];return i*i+(s=s[1]-t[1])*s},en=function(t){var s=t[0];return Math.hypot(s,t[1])},nn=function(t){var s=t[0];return s*s+(t=t[1])*t},rn=function(t,s){return t[0]=-s[0],t[1]=-s[1],t},hn=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t},on=function(t,s){var i=s[0],e=s[1];return 0<(i=i*i+e*e)&&(i=1/Math.sqrt(i)),t[0]=s[0]*i,t[1]=s[1]*i,t},an=function(t,s){return t[0]*s[0]+t[1]*s[1]},ln=function(t,s,i){return s=s[0]*i[1]-s[1]*i[0],t[0]=t[1]=0,t[2]=s,t},un=function(t,s,i,e){var n=s[0],s=s[1];return t[0]=n+e*(i[0]-n),t[1]=s+e*(i[1]-s),t},cn=function(t,s){s=s||1;var i=2*Dn()*Math.PI;return t[0]=Math.cos(i)*s,t[1]=Math.sin(i)*s,t},fn=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[2]*s,t[1]=i[1]*e+i[3]*s,t},dn=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[2]*s+i[4],t[1]=i[1]*e+i[3]*s+i[5],t},pn=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[3]*s+i[6],t[1]=i[1]*e+i[4]*s+i[7],t},mn=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[4]*s+i[12],t[1]=i[1]*e+i[5]*s+i[13],t},gn=function(t,s,i,e){var n=s[0]-i[0],s=s[1]-i[1],r=Math.sin(e),e=Math.cos(e);return t[0]=n*e-s*r+i[0],t[1]=n*r+s*e+i[1],t},yn=function(t,s){var i=t[0],t=t[1],e=s[0],s=s[1],n=Math.sqrt((i*i+t*t)*(e*e+s*s));return Math.acos(Math.min(Math.max(n&&(i*e+t*s)/n,-1),1))},wn=function(t){return t[0]=0,t[1]=0,t},Sn=function(t){return"vec2("+t[0]+", "+t[1]+")"},vn=function(t,s){return t[0]===s[0]&&t[1]===s[1]},bn=function(t,s){var i=t[0],t=t[1],e=s[0],s=s[1];return Math.abs(i-e)<=xn*Math.max(1,Math.abs(i),Math.abs(e))&&Math.abs(t-s)<=xn*Math.max(1,Math.abs(t),Math.abs(s))};n,p,f,a,d,l,m,g,y,w,S,v,M,G,T,_,I,C,E,P,R,A,F,O,D,xn=1e-6,Mn="undefined"!=typeof Float32Array?Float32Array:Array,Dn=Math.random,Ln="zyx",kn=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,s=arguments.length;s--;)t+=arguments[s]*arguments[s];return Math.sqrt(t)}),Nn={__proto__:null,EPSILON:xn,get m(){return Mn},g:Dn,S:Ln,M:L,G:k,equals:N},Bn=Object.freeze({__proto__:null,create:B,clone:W,T:j,identity:U,_:V,set:H,I:z,C:J,P:q,R:$,multiply:t,rotate:X,scale:Y,A:Z,F:K,O:Q,D:tt,L:st,add:it,N:s,B:et,equals:nt,W:rt,j:ht,mul:t,sub:s}),Wn=Object.freeze({__proto__:null,create:ot,clone:at,T:lt,identity:ut,_:ct,set:ft,C:dt,R:pt,multiply:i,rotate:mt,scale:gt,translate:yt,A:wt,F:St,U:vt,O:bt,D:xt,add:Mt,N:e,W:Gt,j:Tt,B:_t,equals:It,mul:i,sub:e}),jn=Object.freeze({__proto__:null,create:n,V:Ct,clone:Et,T:Pt,_:Rt,set:At,identity:Ft,I:Ot,C:Dt,P:Lt,R:kt,multiply:r,translate:Nt,rotate:Bt,scale:Wt,U:jt,A:Ut,F:Vt,H:Ht,J:zt,$:Jt,X:qt,O:$t,D:Xt,add:Yt,N:h,W:Zt,j:Kt,B:Qt,equals:ts,mul:r,sub:h}),Gn=Object.freeze({__proto__:null,create:ss,clone:is,T:es,_:ns,set:rs,identity:p,I:hs,C:os,P:as,R:ls,multiply:o,translate:us,scale:cs,rotate:fs,Y:ds,Z:ps,K:ms,U:gs,F:ys,A:ws,tt:Ss,it:vs,et:bs,nt:f,ht:xs,ot:a,lt:d,ut:l,ct:Ms,ft:Gs,dt:Ts,J:_s,gt:Is,yt:u,perspective:u,St:Cs,vt:Es,bt:c,ortho:c,xt:Ps,Mt:Rs,Gt:As,O:Fs,D:Os,add:Ds,N:Ls,W:ks,j:Ns,B:Bs,equals:Ws,mul:o,sub:Ls}),Yn=Js,Qn=qs,Hn=$s,tr=ii,sr=ei,Un=Us,ir=ni,On=m(),Tn=Object.freeze({__proto__:null,create:m,clone:js,length:Us,_:g,T:Vs,set:Hs,add:zs,N:Js,multiply:qs,Tt:$s,ceil:Xs,floor:Ys,min:Zs,max:Ks,round:Qs,scale:ti,_t:si,It:ii,Ct:ei,Et:ni,Pt:ri,inverse:hi,normalize:y,Rt:w,At:S,Ft:oi,Ot:ai,Dt:li,Lt:ui,random:ci,kt:fi,Nt:di,Bt:pi,Y:mi,Z:gi,K:yi,angle:wi,Wt:Si,O:vi,B:bi,equals:xi,sub:Yn,mul:Qn,div:Hn,jt:tr,Ut:sr,Vt:Un,Ht:ir,forEach:function(t,s,i,e,n,r){var h,o;for(s=s||3,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,h=i;h<o;h+=s)On[0]=t[h],On[1]=t[h+1],On[2]=t[h+2],n(On,On,r),t[h]=On[0],t[h+1]=On[1],t[h+2]=On[2];return t}}),Yn=Ci,Qn=Ei,Hn=Pi,tr=Ni,sr=Bi,ir=b,er=x,Fn=v(),Vn=Object.freeze({__proto__:null,create:v,clone:Mi,_:Gi,T:Ti,set:_i,add:Ii,N:Ci,multiply:Ei,Tt:Pi,ceil:Ri,floor:Ai,min:Fi,max:Oi,round:Di,scale:Li,_t:ki,It:Ni,Ct:Bi,length:b,Et:x,Pt:Wi,inverse:ji,normalize:Ui,Rt:M,At:Vi,Ft:Hi,random:zi,kt:Ji,Bt:qi,Wt:$i,O:Xi,B:Yi,equals:Zi,sub:Yn,mul:Qn,div:Hn,jt:tr,Ut:sr,Vt:ir,Ht:er,forEach:function(t,s,i,e,n,r){var h,o;for(s=s||4,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,h=i;h<o;h+=s)Fn[0]=t[h],Fn[1]=t[h+1],Fn[2]=t[h+2],Fn[3]=t[h+3],n(Fn,Fn,r),t[h]=Fn[0],t[h+1]=Fn[1],t[h+2]=Fn[2],t[h+3]=Fn[3];return t}}),Yn=Mi,Qn=Gi,Hn=Ti,tr=_i,sr=Ii,ir=se,zn=Li,Jn=M,er=Hi,nr=qn=b,rr=$n=x,Xn=Ui,hr=Yi,Pn=m(),Rn=g(1,0,0),An=g(0,1,0),or=function(t,s,i){var e=w(s,i);return e<-.999999?(S(Pn,Rn,s),Un(Pn)<1e-6&&S(Pn,An,s),y(Pn,Pn),T(t,Pn,Math.PI),t):.999999<e?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(S(Pn,s,i),t[0]=Pn[0],t[1]=Pn[1],t[2]=Pn[2],t[3]=1+e,Xn(t,t))},Cn=G(),En=G(),ar=function(t,s,i,e,n,r){return R(Cn,s,n,r),R(En,i,e,r),R(t,Cn,En,2*r*(1-r)),t},In=n(),Yn=Object.freeze({__proto__:null,create:G,identity:Ki,zt:T,Jt:Qi,qt:te,multiply:se,Y:_,Z:I,K:C,$t:ie,exp:E,Xt:P,pow:ee,Ot:R,random:ne,C:re,Yt:he,Zt:A,Kt:oe,O:ae,clone:Yn,_:Qn,T:Hn,set:tr,add:sr,mul:ir,scale:zn,Rt:Jn,Ft:er,length:qn,Vt:nr,Et:$n,Ht:rr,normalize:Xn,B:hr,equals:le,Qt:or,ts:ar,ss:function(t,s,i,e){return In[0]=i[0],In[3]=i[1],In[6]=i[2],In[1]=e[0],In[4]=e[1],In[7]=e[2],In[2]=-s[0],In[5]=-s[1],In[8]=-s[2],Xn(t,A(t,In))}}),Zn=Jn,Qn=Kn=$n,tr=Object.freeze({__proto__:null,create:ue,clone:ce,_:fe,es:de,nt:F,U:pe,A:me,V:ge,T:O,identity:ye,set:we,ns:Hn,rs:Se,hs:Hn,os:ve,ot:be,translate:xe,Y:Me,Z:Ge,K:Te,ls:_e,us:Ie,cs:Ce,add:Ee,multiply:Pe,mul:Pe,scale:Re,Rt:Zn,Ft:Ae,C:Fe,Yt:Oe,length:qn,Vt:qn,Et:Kn,Ht:Qn,normalize:De,O:Le,B:ke,equals:Ne}),sr=en,ir=He,er=ze,nr=Je,rr=tn,hr=sn,or=nn,_n=D(),ar=Object.freeze({__proto__:null,create:D,clone:Be,_:We,T:je,set:Ue,add:Ve,N:He,multiply:ze,Tt:Je,ceil:qe,floor:$e,min:Xe,max:Ye,round:Ze,scale:Ke,_t:Qe,It:tn,Ct:sn,length:en,Et:nn,Pt:rn,inverse:hn,normalize:on,Rt:an,At:ln,Ft:un,random:cn,ds:fn,gs:dn,Nt:pn,kt:mn,rotate:gn,angle:yn,Wt:wn,O:Sn,B:vn,equals:bn,Vt:sr,sub:ir,mul:er,div:nr,jt:rr,Ut:hr,Ht:or,forEach:function(t,s,i,e,n,r){var h,o;for(s=s||2,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,h=i;h<o;h+=s)_n[0]=t[h],_n[1]=t[h+1],n(_n,_n,r),t[h]=_n[0],t[h+1]=_n[1];return t}}),globalThis.ys=Nn,globalThis.ys.ws=Bn,globalThis.ys.Ss=Wn,globalThis.ys.vs=jn,globalThis.ys.bs=Gn,globalThis.ys.xs=Yn,globalThis.ys.Ms=tr,globalThis.ys.Gs=ar,globalThis.ys.Ts=Tn,globalThis.ys._s=Vn}{let a=function(t,s,i){var e=[0,0],n=t[1][1]-t[0][1],r=t[0][0]-t[1][0],t=n*t[0][0]+r*t[0][1],h=s[1][1]-s[0][1],o=s[0][0]-s[1][0],s=h*s[0][0]+o*s[0][1],a=n*o-h*r;return m(a,0,i=i||0)||(e[0]=(o*t-r*s)/a,e[1]=(n*s-h*t)/a),e},n=function(t,s,i,e){var n,r=s[0]-t[0],s=s[1]-t[1],h=e[0]-i[0];return h*s-(e=e[1]-i[1])*r!=0&&(n=(h*(t[1]-i[1])+e*(i[0]-t[0]))/(e*r-h*s),0<=(t=(r*(i[1]-t[1])+s*(t[0]-i[0]))/(h*s-e*r)))&&t<=1&&0<=n&&n<=1},o=function(t,s,i){return(s[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(s[1]-t[1])},M=function(t,s,i){return 0<o(t,s,i)},G=function(t,s,i){return 0<=o(t,s,i)},T=function(t,s,i){return o(t,s,i)<0},_=function(t,s,i){return o(t,s,i)<=0},r=function(t,s,i,e){var n,r,h;return e?(h=D,(r=O)[0]=s[0]-t[0],r[1]=s[1]-t[1],h[0]=i[0]-s[0],h[1]=i[1]-s[1],n=r[0]*h[0]+r[1]*h[1],r=Math.sqrt(r[0]*r[0]+r[1]*r[1]),h=Math.sqrt(h[0]*h[0]+h[1]*h[1]),Math.acos(n/(r*h))<e):0===o(t,s,i)},I=function(t,s){var i=s[0]-t[0];return i*i+(s=s[1]-t[1])*s},C=function(t,s){var i=t.length;return t[s<0?s%i+i:s%i]},h=function(t){t.length=0},E=function(t,s,i,e){for(var n=i;n<e;n++)t.push(s[n])},t=function(t){for(var s=0,i=t,e=1;e<t.length;++e)(i[e][1]<i[s][1]||i[e][1]===i[s][1]&&i[e][0]>i[s][0])&&(s=e);return!M(C(t,s-1),C(t,s),C(t,s+1))&&(l(t),!0)},l=function(t){for(var s=[],i=t.length,e=0;e!==i;e++)s.push(t.pop());for(e=0;e!==i;e++)t[e]=s[e]},P=function(t,s){return T(C(t,s-1),C(t,s),C(t,s+1))},u=function(t,s,i){var e,n=L,r=k;if(G(C(t,s+1),C(t,s),C(t,i))&&_(C(t,s-1),C(t,s),C(t,i)))return!1;for(var h=I(C(t,s),C(t,i)),o=0;o!==t.length;++o)if((o+1)%t.length!==s&&o!==s&&G(C(t,s),C(t,i),C(t,o+1))&&_(C(t,s),C(t,i),C(t,o))&&(n[0]=C(t,s),n[1]=C(t,i),r[0]=C(t,o),r[1]=C(t,o+1),e=a(n,r),I(C(t,s),e)<h))return!1;return!0},R=function(t,s,i){for(var e=0;e!==t.length;++e)if(e!==s&&e!==i&&(e+1)%t.length!==s&&(e+1)%t.length!==i&&n(C(t,s),C(t,i),C(t,e),C(t,e+1)))return!1;return!0},c=function(t,s,i,e){var n=e||[];if(h(n),s<i)for(var r=s;r<=i;r++)n.push(t[r]);else{for(r=0;r<=i;r++)n.push(t[r]);for(r=s;r<t.length;r++)n.push(t[r])}return n},f=function(t){for(var s=[],i=[],e=[],n=Number.MAX_VALUE,r=0;r<t.length;++r)if(P(t,r))for(var h=0;h<t.length;++h)if(u(t,r,h)){for(var i=f(c(t,r,h,e)),o=f(c(t,h,r,e)),a=0;a<o.length;a++)i.push(o[a]);i.length<n&&(n=(s=i).length,s.push([C(t,r),C(t,h)]))}return s},s=function(t){var s=f(t);return 0<s.length?d(t,s):[t]},d=function(t,s){if(0===s.length)return[t];if(s instanceof Array&&s.length&&s[0]instanceof Array&&2===s[0].length&&s[0][0]instanceof Array){for(var i=[t],e=0;e<s.length;e++)for(var n=s[e],r=0;r<i.length;r++){var h=d(i[r],n);if(h){i.splice(r,1),i.push(h[0],h[1]);break}}return i}return e=t.indexOf((n=s)[0]),r=t.indexOf(n[1]),-1!==e&&-1!==r&&[c(t,e,r),c(t,r,e)]},i=function(t){for(var s=t,i=0;i<s.length-1;i++)for(var e=0;e<i-1;e++)if(n(s[i],s[i+1],s[e],s[e+1]))return!1;for(i=1;i<s.length-2;i++)if(n(s[0],s[s.length-1],s[i],s[i+1]))return!1;return!0},A=function(t,s,i,e,n){var r=s[1]-t[1],s=t[0]-s[0],t=r*t[0]+s*t[1],h=e[1]-i[1],e=i[0]-e[0],i=h*i[0]+e*i[1],o=r*e-h*s;return m(o,0,n=n||0)?[0,0]:[(e*t-s*i)/o,(r*i-h*t)/o]},F=function(t,s,i,e,n,r,h){r=r||100,h=h||0,n=n||25,s=void 0!==s?s:[],i=i||[],e=e||[];var o=[0,0],a=[0,0],l=[0,0],u=0,c=0,f=0,d=0,p=0,m=0,g=0,y=[],w=[],S=t,v=t;if(!(v.length<3))if(r<++h)console.warn("quickDecomp: max level ("+r+") reached.");else{for(var b=0;b<t.length;++b)if(P(S,b)){i.push(S[b]);for(var u=c=Number.MAX_VALUE,x=0;x<t.length;++x)M(C(S,b-1),C(S,b),C(S,x))&&_(C(S,b-1),C(S,b),C(S,x-1))&&(l=A(C(S,b-1),C(S,b),C(S,x),C(S,x-1)),T(C(S,b+1),C(S,b),l))&&(f=I(S[b],l))<c&&(c=f,a=l,m=x),M(C(S,b+1),C(S,b),C(S,x+1))&&_(C(S,b+1),C(S,b),C(S,x))&&(l=A(C(S,b+1),C(S,b),C(S,x),C(S,x+1)),M(C(S,b-1),C(S,b),l))&&(f=I(S[b],l))<u&&(u=f,o=l,p=x);if(m===(p+1)%t.length)l[0]=(a[0]+o[0])/2,l[1]=(a[1]+o[1])/2,e.push(l),b<p?(E(y,S,b,p+1),y.push(l),w.push(l),0!==m&&E(w,S,m,S.length),E(w,S,0,b+1)):(0!==b&&E(y,S,b,S.length),E(y,S,0,p+1),y.push(l),w.push(l),E(w,S,m,b+1));else{if(p<m&&(p+=t.length),d=Number.MAX_VALUE,p<m)return s;for(x=m;x<=p;++x)G(C(S,b-1),C(S,b),C(S,x))&&_(C(S,b+1),C(S,b),C(S,x))&&(f=I(C(S,b),C(S,x)))<d&&R(S,b,x)&&(d=f,g=x%t.length);b<g?(E(y,S,b,g+1),0!==g&&E(w,S,g,v.length),E(w,S,0,b+1)):(0!==b&&E(y,S,b,v.length),E(y,S,0,g+1),E(w,S,g,b+1))}return y.length<w.length?(F(y,s,i,e,n,r,h),F(w,s,i,e,n,r,h)):(F(w,s,i,e,n,r,h),F(y,s,i,e,n,r,h)),s}s.push(t)}return s},e=function(t,s){for(var i=0,e=t.length-1;3<t.length&&0<=e;--e)r(C(t,e-1),C(t,e),C(t,e+1),s)&&(t.splice(e%t.length,1),i++);return i},p=function(t,s){for(var i=t.length-1;1<=i;--i)for(var e=t[i],n=i-1;0<=n;--n)g(e,t[n],s)&&t.splice(i,1)},m=function(t,s,i){return i=i||0,Math.abs(t-s)<=i},g=function(t,s,i){return m(t[0],s[0],i)&&m(t[1],s[1],i)};a,n,o,M,G,T,_,r,I,C,h,E,l,P,u,R,c,f,d,A,F,m,g,O=[],D=[],L=[],k=[],self.Is={Cs:s,Es:F,Ps:i,Rs:e,As:p,Fs:t}}{let t=!1,s=!1,i="dev",e=Symbol("Construct internal API token"),n=14,r=self.Os=class{constructor(){throw TypeError("static class can't be instantiated")}static Ds(){if(n<=0)throw new Error("cannot obtain internal API token");return--n,e}static Ls(){t=!0}static ks(){return t}static Ns(){s=!0}static Bs(){return s}static Ws(t){i=t}static js(){return i}static Us(){return"final"===i}};r.isDebug=!1,r.Vs=!1,r.hardwareConcurrency=navigator.hardwareConcurrency||2,self.Hs={}}{const s=self.Os;s.zs=class{constructor(t){this.Js=t,this.qs=new Map,this.$s()}$s(){let t=this.Js,s=(t=t.startsWith("?")||t.startsWith("#")?t.substr(1):t).split("&");for(const i of s)this.Xs(i)}Xs(t){if(t)if(t.includes("=")){const s=t.indexOf("="),i=decodeURIComponent(t.substring(0,s)),e=decodeURIComponent(t.substring(s+1));this.qs.set(i,e)}else this.qs.set(t,null)}Ys(){for(const t of this.qs)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}Zs(t){return this.qs.has(t)}Ks(t){const s=this.qs.get(t);return void 0===s?null:s}Qs(){history.replaceState("",document.title,location.pathname+location.search)}ti(t){this.Js=t,this.qs.clear(),this.$s()}},s.si=new s.zs(location.search),s.ii=new s.zs(location.hash),s.si.Zs("perf")&&(s.ei=!0),"dev"!==s.si.Ks("mode")&&s.Ws("final")}{let e=function(t){const s=parseFloat(t),i=U.get(s);return i||(13<=s?"11":"NT "+t)};e;const a=self.Os,j="(unknown)",U=(a.ni={ri:j,hi:j,oi:j,ai:j,li:NaN,ci:j,fi:"browser",di:!0,mi:!1,gi:!1,yi:!1,wi:async()=>{}},new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]])),V=navigator.userAgent,H=navigator.userAgentData;if(H&&0<H.brands.length){let s=function(t){let s="",i="",e="",n="";for(const r of t){const h=z.get(r.brand),o=(!s&&h&&(s=h,i=r.version),J.get(r.brand));!e&&o&&(e=o,n=r.version)}s||"Chromium"!==e||(a.ni.oi="Chromium",a.ni.ai=n),a.ni.oi=s||j,a.ni.ai=i||j,a.ni.ci=e||j};s,a.ni.ri=H.platform,a.ni.mi=H.mobile,a.ni.di=!a.ni.mi;const z=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),J=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);s(H.brands);let i=!1;a.ni.wi=async()=>{if(!i)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);s(t.fullVersionList),"Windows"===a.ni.ri?a.ni.hi=e(t.platformVersion):a.ni.hi=t.platformVersion,i=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let t=function(t,s){const i=Array.isArray(t)?t:[t];for(const e of i){const n=e.exec(V);if(n){s(n);break}}};t(/windows\s+nt\s+([\d\.]+)/i,t=>{a.ni.ri="Windows";const s=t[1];a.ni.hi=e(s)}),t(/mac\s+os\s+x\s+([\d\._]+)/i,t=>{a.ni.ri="macOS",a.ni.hi=t[1].replace(/_/g,".")}),t(/CrOS/,()=>{a.ni.ri="Chrome OS"}),t(/linux|openbsd|freebsd|netbsd/i,()=>{a.ni.ri="Linux"}),t(/android/i,()=>{a.ni.ri="Android"}),t(/android\s+([\d\.]+)/i,t=>{a.ni.ri="Android",a.ni.hi=t[1]}),a.ni.ri===j&&(t(/(iphone|ipod|ipad)/i,t=>{a.ni.ri="iOS"}),t([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],t=>{a.ni.ri="iOS",a.ni.hi=t[1].replace(/_/g,".")}));const q=/chrome\//i.test(V),$=/chromium\//i.test(V),X=/edg\//i.test(V),Y=/OPR\//.test(V),Z=/nwjs/i.test(V),K=/safari\//i.test(V),Q=/webkit/i.test(V),tt=(X||Y||t(/chrome\/([\d\.]+)/i,t=>{a.ni.oi="Chrome",a.ni.ai=t[1],a.ni.ci="Chromium"}),t(/edg\/([\d\.]+)/i,t=>{a.ni.oi="Edge",a.ni.ai=t[1],a.ni.ci="Chromium"}),t(/OPR\/([\d\.]+)/,t=>{a.ni.oi="Opera",a.ni.ai=t[1],a.ni.ci="Chromium"}),t(/chromium\/([\d\.]+)/i,t=>{a.ni.oi="Chromium",a.ni.ai=t[1],a.ni.ci="Chromium"}),t(/nwjs\/[0-9.]+/i,t=>{a.ni.oi="NW.js",a.ni.ai=t[1],a.ni.ci="Chromium",a.ni.fi="nwjs"}),t(/firefox\/([\d\.]+)/i,t=>{a.ni.oi="Firefox",a.ni.ai=t[1],a.ni.ci="Gecko"}),!K||q||$||X||Y||Z||(a.ni.oi="Safari",a.ni.ci="WebKit",t(/version\/([\d\.]+)/i,t=>{a.ni.ai=t[1]}),t(/crios\/([\d\.]+)/i,t=>{a.ni.oi="Chrome for iOS",a.ni.ai=t[1]}),t(/fxios\/([\d\.]+)/i,t=>{a.ni.oi="Firefox for iOS",a.ni.ai=t[1]}),t(/edgios\/([\d\.]+)/i,t=>{a.ni.oi="Edge for iOS",a.ni.ai=t[1]})),a.ni.ci===j&&Q&&(a.ni.ci="WebKit"),"Android"===a.ni.ri&&"Safari"===a.ni.oi&&(a.ni.oi="Stock"),new Set(["Windows","macOS","Linux","Chrome OS"])),st=tt.has(a.ni.ri)||"nwjs"===a.ni.fi;a.ni.di=st,a.ni.mi=!st}"Chrome"===a.ni.oi&&"browser"===a.ni.fi&&/wv\)/.test(V)&&(a.ni.fi="webview"),"nwjs"!==a.ni.fi&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(a.ni.fi="webapp"),a.ni.li=parseFloat(a.ni.ai);const i="macOS"===a.ni.ri&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints;i&&(a.ni.ri="iOS",a.ni.hi=a.ni.ai,a.ni.di=!1,a.ni.mi=!0,a.ni.yi=!0),a.ni.gi="macOS"===a.ni.ri||"iOS"===a.ni.ri}{let h=function(i){return new Promise((t,s)=>{i.onsuccess=()=>t(i.result),i.onerror=()=>s(i.error)})},o=function(i){return new Promise((t,s)=>{i.oncomplete=()=>t(),i.onerror=()=>s(i.error),i.onabort=()=>s(i.error)})},t=function(t,s){return B(t,s)},s=function(t,s){return B(t,s,!0)},a=function(s){e(s);let t=nt.get(s);return t instanceof Promise||(t=(async i=>{e(i);const t=indexedDB.open(i,it);return t.addEventListener("upgradeneeded",t=>{try{const s=t.target.result;s.createObjectStore(et)}catch(t){console.error("Failed to create objectstore for database "+i,t)}}),h(t)})(s),nt.set(s,t),t.catch(t=>nt.delete(s))),t},e=function(t){if("string"!=typeof t)throw new TypeError("expected string")},r=function(t,n){const s=t.objectStore(et).openCursor();return new Promise(i=>{const e=[];s.onsuccess=t=>{const s=t.target.result;if(s){switch(n){case"entries":e.push([s.key,s.value]);break;case"keys":e.push(s.key);break;case"values":e.push(s.value)}s.continue()}else i(e)}})};h,o,t,s,a,e,r;const it=2,et="keyvaluepairs",nt=new Map,rt="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,ht="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function B(s,i,e=!1,n=!0){const t=await a(s);try{const r=t.transaction([et],e?"readwrite":"readonly");return i(r)}catch(t){if(n&&"InvalidStateError"===t.name)return nt.delete(s),B(s,i,e,!1);throw t}}class ot{constructor(t){e(t),this.name=t}async ready(){await a(this.name)}set(n,r){return e(n),s(this.name,async t=>{const s=t.objectStore(et).put(r,n),i=h(s),e=o(t);await Promise.all([e,i])})}get(r){return e(r),t(this.name,async t=>{const s=t.objectStore(et).get(r),i=h(s),e=o(t),[,n]=await Promise.all([e,i]);return n})}delete(n){return e(n),s(this.name,async t=>{const s=t.objectStore(et).delete(n),i=h(s),e=o(t);await Promise.all([e,i])})}clear(){return s(this.name,async t=>{const s=t.objectStore(et).clear(),i=h(s),e=o(t);await Promise.all([e,i])})}keys(){return t(this.name,async t=>{let s;if(ht){const n=t.objectStore(et).getAllKeys();s=h(n)}else s=r(t,"keys");const i=o(t),[,e]=await Promise.all([i,s]);return e})}values(){return t(this.name,async t=>{let s;if(rt){const n=t.objectStore(et).getAll();s=h(n)}else s=r(t,"values");const i=o(t),[,e]=await Promise.all([i,s]);return e})}entries(){return t(this.name,async t=>{const s=r(t,"entries"),i=o(t),[,e]=await Promise.all([i,s]);return e})}}self.Si=ot}{let i=function(t){throw new Error(`"${t}" is not implemented`)},e=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},n=function(e){return"object"==typeof e?new Promise(s=>{const{port1:t,port2:i}=new MessageChannel;i.onmessage=t=>s(t.data),t.postMessage(e)}):Promise.resolve(e)};i,e,n;const at=self.Si,lt=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i];new WeakMap;class ut{constructor(t){this.vi=t,this.bi=!this.vi,this.bi||"undefined"!=typeof indexedDB||(this.bi=!0,console.warn("Unable to use local storage because IndexedDB API is not available")),this.xi=new Map}Mi(t){if(!this.bi)for(const s of lt)if(t&&s.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),this.bi=!0;break}}async Gi(t){const s=this.xi.get(t),i=await n(s);return void 0===i?null:i}async Ti(t,s){s=await n(s),this.xi.set(t,s)}_i(t){this.xi.delete(t)}Ii(){this.xi.clear()}Ci(){return Array.from(this.xi.keys())}Ei(){return this.bi}Pi(){return this.xi}Ri(t){this.xi=t}async getItem(s,t){if(e(t),this.bi)return this.Gi(s);let i;try{i=await this.vi.get(s)}catch(t){return this.Mi(t),this.bi?this.Gi(s):(console.error(`Error reading '${s}' from storage, returning null: `,t),null)}return void 0===i?null:i}async setItem(s,i,t){if(e(t),void 0===i&&(i=null),this.bi)await this.Ti(s,i);else try{await this.vi.set(s,i)}catch(t){if(this.Mi(t),!this.bi)throw t;await this.Ti(s,i)}}async removeItem(s,t){if(e(t),this.bi)this._i(s);else try{await this.vi.delete(s)}catch(t){this.Mi(t),this.bi?this._i(s):console.error(`Error removing '${s}' from storage: `,t)}}async clear(t){if(e(t),this.bi)this.Ii();else try{await this.vi.clear()}catch(t){this.Mi(t),this.bi?this.Ii():console.error("Error clearing storage: ",t)}}async keys(t){if(e(t),this.bi)return this.Ci();let s=[];try{s=await this.vi.keys()}catch(t){if(this.Mi(t),this.bi)return this.Ci();console.error("Error getting storage keys: ",t)}return s}ready(t){return e(t),this.bi?Promise.resolve(!0):this.vi.ready()}Ai(t){if(t.forceInMemoryFallback)return new ut(null);{const s=t.name;if("string"!=typeof s)throw new TypeError("invalid store name");const i=new at(s);return new ut(i)}}length(t){i("localforage.length()")}key(t,s){i("localforage.key()")}iterate(t,s){i("localforage.iterate()")}Fi(t){i("localforage.setDriver()")}config(t){i("localforage.config()")}Oi(t){i("localforage.defineDriver()")}Di(){i("localforage.driver()")}supports(t){i("localforage.supports()")}dropInstance(){i("localforage.dropInstance()")}}self.localforage=new ut(new at("localforage"))}{const e=self.Os;if(e.Li={},e.Li.ki=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");if(void 0===t.animate)return!1;const s=t.animate([{opacity:"0"},{opacity:"1"}],1e3);return void 0!==s.reverse}catch(t){return!1}})(),e.Li.Ni="undefined"!=typeof HTMLDialogElement,e.Li.Bi=!!self.requestIdleCallback,e.Li.ImageBitmap=!!self.createImageBitmap,e.Li.ImageBitmapOptions=!1,e.Li.Wi=!1,e.Li.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then(()=>{e.Li.ImageBitmapOptions=!0}).catch(()=>{e.Li.ImageBitmapOptions=!1})}catch(t){e.Li.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then(t=>{e.Li.Wi=10===t.width&&10===t.height}).catch(()=>{e.Li.Wi=!1})}catch(t){e.Li.Wi=!1}}if(e.Li.ji=!(!navigator.clipboard||!navigator.clipboard.readText),e.Li.Ui=!(!navigator.permissions||!navigator.permissions.query),e.Li.Vi=!1,e.Li.Ui){const ct={name:"clipboard-read"};navigator.permissions.query(ct).then(()=>{e.Li.Vi=!0}).catch(()=>{e.Li.Vi=!1})}e.Li.Hi=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),e.Li.Ji="undefined"!=typeof Proxy,e.Li.$i=(()=>{if("undefined"==typeof document)return!1;const t=document.createElement("a");return void 0!==t.download})(),e.Li.Xi="function"==typeof fetch,e.Li.Yi=!!(self.isSecureContext&&"Opera"!==e.ni.oi&&navigator.storage&&navigator.storage.persist),e.Li.Zi=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),e.Li.Ki=(()=>{if("undefined"==typeof document)return!1;if("iOS"===e.ni.ri)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),e.Li.ImageDecoder=void 0!==self.ImageDecoder,e.Li.Qi=!!self.VideoEncoder,e.Li.te=!!self.showOpenFilePicker,e.Li.ie=!!self.queryLocalFonts,e.Li.UserActivation=!!navigator.userActivation,e.Li.ne=!1,(async()=>{let s;"undefined"==typeof document?s=new OffscreenCanvas(32,32):((s=document.createElement("canvas")).width=32,s.height=32);const t=s.getContext("2d");t.fillStyle="blue",t.fillRect(0,0,32,32);let i=null;try{s.convertToBlob?i=await s.convertToBlob({type:"image/webp",quality:1}):s.toBlob&&(i=await new Promise(t=>s.toBlob(t,"image/webp",1))),e.Li.ne=i&&"image/webp"===i.type}catch(t){e.Li.ne=!1}})()}{let e=function(t,i){return t.reduce((t,s)=>(0<i&&Array.isArray(s)?Array.prototype.push.apply(t,e(s,i-1)):t.push(s),t),[])};e;const ft=self.Os;if(!String.prototype.trimStart){const dt=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;String.prototype.trimStart=function(){return this.replace(dt,"")}}if(!String.prototype.trimEnd){const pt=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;String.prototype.trimEnd=function(){return this.replace(pt,"")}}String.prototype.replaceAll||(String.prototype.replaceAll=function(t,s){return this.replace(new RegExp(ft.re(t),"g"),s)}),Array.prototype.values||(Array.prototype.values=function*(){for(const t of this)yield t}),Array.prototype.flat||(Array.prototype.flat=function(t=1){return e(this,t)}),Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.he||(Set.prototype.he=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const s of this)if(!t.has(s))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise((i,t)=>navigator.webkitTemporaryStorage.queryUsageAndQuota((t,s)=>i({usage:t,quota:s}),t))}),void 0===self.isSecureContext&&(self.isSecureContext="https:"===location.protocol),void 0===self.globalThis&&(self.globalThis=self)}{let i=function(t){let s=mt.oe(),i="Assertion failure: "+t+"\n\nStack trace:\n"+s;console.error(i)};i;const mt=self.Os;self.assert=function(t,s){t||i(s)}}{const n=self.Os,gt=self.Hs,yt=(n.ae=function(t){return"number"==typeof t},n.le=function(t){return n.ae(t)&&isFinite(t)},n.ue=function(t){if(!n.ae(t))throw new TypeError("expected number")},n.fe=function(t){n.de(t)},n.pe=function(t,s,i){if(!n.ae(t)||isNaN(t)||t<s||i<t)throw new RangeError("number outside of range")},n.me=function(...s){for(let t of s);},n.ge=function(t){if(!n.le(t))throw new TypeError("expected finite number")},n.ye=function(t){n.de(t)},n.we=function(...s){for(let t of s);},n.Se=function(t){return"string"==typeof t},n.ve=function(t){if(!n.Se(t))throw new TypeError("expected string")},n.xe=function(t){n.de(t)},n.Me=function(...s){for(let t of s);},n.Ge=function(t){if("object"!=typeof t||null===t)return!1;let s=Object.getPrototypeOf(t);return s?s.constructor===Object:null===s},n.Te=function(t){if(!n.Ge(t))throw new TypeError("expected simple object")},n._e=function(t){if(!n.de(t)&&!n.Ge(t))throw new TypeError("expected simple object")},n.Ie=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},n.Ce=function(t){if(!n.Ie(t))throw new TypeError("expected object")},n.Ee=function(t){n.de(t)},n.Pe=function(...s){for(let t of s);},n.Re=function(t){return n.Ae(t,Blob)&&"string"==typeof t.name},n.Fe=function(t){if(!n.Re(t))throw new TypeError("expected file")},n.Oe=function(t){n.de(t)},n.De=function(t){return Array.isArray(t)},n.Le=function(t){if(!n.De(t))throw new TypeError("expected array")},n.ke=function(t){n.de(t)},n.Ne=function(...s){for(let t of s);},n.Be=function(t){return!(!n.De(t)||t.length&&!n.De(t[0]))},n.We=function(s){if(!n.Be(s))throw new TypeError("expected 2d array");for(let t of s)if(!n.De(t))throw new TypeError("expected 2d array")},n.je=function(t){n.de(t)},n.Ue=function(t){return"function"==typeof t},n.Ve=function(t,s){if(!n.Ue(t))throw new TypeError("expected function");if(!n.de(s)&&t!==s)throw new TypeError("expected same function reference")},n.He=function(t){n.de(t)},n.Je=function(...s){for(let t of s);},n.qe=function(s,...i){if(!n.Ue(s))throw new TypeError("expected function");if(!i.length)throw new Error("missing comparison functions");for(let t of i)if(!n.de(t)&&s===t)return;throw new TypeError("expected same function reference")},n.$e=function(...s){if(!n.de(s))for(let t of s);},n.Xe=function(t,s){return t instanceof s},n.Ye=function(s,...i){for(let t of i)if(n.Xe(s,t))return!0;return!1},n.Ze=function(t,s){if(!n.Xe(t,s))throw new TypeError("unexpected type")},n.Ke=function(t,s){n.de(t)},n.Qe=function(t,...s){for(let t of s);},n.tn=function(t,...s){if(!n.Ye(t,...s))throw new TypeError("unexpected type")},n.sn=function(t,...s){if(!n.de(t)&&!n.Ye(t,...s))throw new TypeError("unexpected type")},n.nn=function(s,i){for(let t of s)if(!n.Xe(t,i))return!1;return!0},n.rn=function(s){for(let t of s)if(!n.le(t))return!1;return!0},n.hn=function(s,t){for(let t of s);},n.an=function(s,t){if(!n.de(s))for(let t of s);},n.ln=function(s,t){if(!n.de(s))for(let t of s);},n.un=function(s){for(let t of s);},n.cn=function(s){if(!n.de(s))for(let t of s);},n.dn=function(t,s){return!(n.de(t)||!n.Se(t.nodeName))&&(!s||n.pn(t.nodeName,s))},n.mn=function(t,s){if(n.de(t)||!n.Se(t.nodeName))throw new TypeError("expected DOM node");if(s&&!n.pn(t.nodeName,s))throw new TypeError(`expected DOM '${s}' node`)},n.gn=function(t,s){n.de(t)},n.yn=function(t,s){return!(n.de(t)||!n.Se(t.tagName))&&(!s||n.pn(t.tagName,s))},n.wn=function(t,s){if(n.de(t)||!n.Se(t.tagName))throw new TypeError("expected HTML element");if(s&&!n.pn(t.tagName,s))throw new TypeError(`expected HTML '${s}' element`)},n.Sn=function(t,s){n.de(t)},n.vn=function(t){return n.yn(t,"img")||n.yn(t,"canvas")||n.yn(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},n.bn=function(t){if(!n.vn(t))throw new TypeError("expected drawable")},n.xn=function(t){n.de(t)},n.Mn=function(t){return t instanceof ImageData||n.vn(t)},n.Gn=function(t){if(!n.Mn(t))throw new TypeError("expected drawable or image data")},n.Tn=function(t){if(!n.de(t)&&!n.Mn(t))throw new TypeError("expected drawable or image data")},n._n=function(t){return"string"==typeof t||n.HtmlString&&t instanceof n.HtmlString||t instanceof n.In},n.Cn=function(t){if(!n._n(t))throw new TypeError("expected string-like")},n.En=function(t){n.de(t)},n.Pn=function(...s){for(let t of s);},n.Rn=function(){throw new Error("must be overridden")},n.An=function(){throw new Error("not yet implemented")},n.Fn=function(t,...s){let i=t;if(void 0===i)return!1;for(let t of s){if(void 0===i[t])return!1;i=i[t]}return!0},n.de=function(t){return null==t},n.On=function(s){let i=s[0].constructor;for(let t of s)if(t.constructor!==i)return!1;return i},n.Dn=function(s,i){for(let t of s)if(!(t instanceof i))return!1;return!0},Object.getPrototypeOf(Uint8Array));n.Ln=function(t){return n.Xe(t,yt)},n.kn=function(t){},n.Nn=function(t){n.Bn(t,yt)},n.Wn=function(t,...s){if(!n.jn(t,...s))throw new TypeError("unexpected type")},n.jn=function(t,...s){for(const i of s)if(n.Ae(t,i))return!0;return!1},n.Bn=function(t,s){if(!n.Ae(t,s))throw new TypeError("unexpected type")},n.Ae=function(t,s){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===s.name)return!0;return!1},gt.ue=n.ue,gt.fe=n.fe,gt.ge=n.ge,gt.ye=n.ye,gt.ve=n.ve,gt.xe=n.xe,gt.Ce=n.Ce,gt.Ee=n.Ee,gt.Le=n.Le,gt.ke=n.ke,gt.Ve=n.Ve,gt.He=n.He,gt.Ze=n.Ze,gt.Ke=n.Ke,gt.de=n.de}{let e=function(t,s){let i=p.getType(t),e=p.getType(s);return"null"===i||"null"===e||"undefined"!==i&&"undefined"!==e&&i===e},n=function(t){console.warn("[Defence] "+t+" @",p.oe())},i=function(){if(f=-1,0<a.size||0<l.size){let t=new Set([...a.keys()].map(t=>p.Un(t))),s=[...t].join(",");console.warn("An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: "+s),a.clear(),l.clear()}},r=function(s){let i=new Set;for(let t in s)i.add(t);return i},h=function(t,s){let i=r(s),e=d.get(t);if(e){let s=[];for(let t of e.values())i.has(t)?i.delete(t):s.push(t);p.Vn(s,[...i]),s.length&&console.warn(`[Defence] '${p.Un(t)}' constructor creates inconsistent properties: `+s.join(", "))}else d.set(t,i)};e,n,i,r,h;const p=self.Os,wt=new Map;p.Hn=function(t,s){console.log("%c"+t,"font-weight: bold; color:"+s)},p.zn=function(t,...s){wt.has(t)||wt.set(t,-1),-1===wt.get(t)&&wt.set(t,requestAnimationFrame(()=>{console.log("%c"+t,"font-weight: bold",...s),wt.set(t,-1)}))};let o,a=(p.Jn=function(t){performance.mark(t),(o=o||new Map).has(t)||o.set(t,{current:0,total:0,qn:0,$n:1,toString:function(){return`${t} :: current => ${this.current.toPrecision(3)} :: average => ${this.qn.toPrecision(3)} :: calls => `+this.$n}})},p.Xn=function(t){performance.measure("measure-"+t,t);const s=performance.getEntriesByName("measure-"+t)[0],i=o.get(t);i.current=s.duration,i.total+=i.current,i.qn=i.total/i.$n,console.log(i.toString()),i.$n++,performance.clearMarks(t),performance.clearMeasures("measure-"+t)},p.oe=function(){return(new Error).stack},p.Yn=function(){},p.cast=function(t,s){return t&&t instanceof s?t:null},p.Un=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":p.ae(t)?"<number>":p.Se(t)?"<string>":p.De(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":p.Ue(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},p.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},p.range=function*(s,i){if(!isFinite(Math.abs(s-i)))throw new Error("Invalid parameters");if(i<s)for(let t=s-1;t>=i;t--)yield t;else for(let t=s;t<i;t++)yield t},new Map),l=new Map,u=new WeakMap,c=new WeakMap;p.Zn={};const St=new Set(["then","splice"]);p.Zn.get=function(t,s){return s in t||"symbol"==typeof s||St.has(s)||n(`Accessed missing property '${s}' from defended object '${p.Un(t)}', returning undefined`),c.has(t)&&"symbol"!=typeof s&&!St.has(s)&&n(`Accessed property '${s}' on a released object '${p.Un(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]},p.Zn.set=function(t,s,i){return s in t||a.has(t)||n(`Set non-existent property '${s}' to '${i}' on defended object '${p.Un(t)}'`),e(t[s],i)||a.has(t)||n(`Set '${p.getType(t[s])}' property '${s}' to type '${p.getType(i)}' on defended object '${p.Un(t)}'`),c.has(t)&&n(`Set property '${s}' on a released object '${p.Un(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]=i,!0},p.Zn.deleteProperty=function(t,s){throw new ReferenceError(`Cannot delete property '${s}' from defended object '${p.Un(t)}'`)},p.Zn.defineProperty=function(t,s,i){throw new ReferenceError(`Cannot define property '${s}' on defended object '${p.Un(t)}'`)},p.Zn.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${p.Un(t)}'`)};let f=-1,d=(p.Kn=class{constructor(){if(p.Vs&&p.Li.Ji){let t=Object.create(new.target.prototype),s=new Proxy(t,p.Zn);return a.set(t,s),l.set(s,t),u.set(s,t),-1===f&&(f=requestAnimationFrame(i)),s}}},p.Qn=function(s){if(p.Vs&&p.Li.Ji&&s instanceof p.Kn){if(l.has(s)){let t=l.get(s);l.delete(s),a.delete(t)}return s}return p.isDebug?Object.seal(s):s},p.tr=function(t,...s){let i;try{i=new t(...s)}catch(t){throw l.clear(),a.clear(),t}return p.Vs&&h(t,i),p.Qn(i)},p.ir=function(t){let s=u.get(t);s&&c.set(s,p.oe())},p.er=function(t){let s=u.get(t);return!!s&&!!c.get(s)},new Map);p.nr=class{constructor(t){this.rr="",t&&this.start(t)}start(t){p.ei&&(this.rr=t,performance.mark(this.rr+"-Start"))}end(){p.ei&&(performance.mark(this.rr+"-End"),performance.measure(this.rr,this.rr+"-Start",this.rr+"-End"))}next(t){p.ei&&(this.end(),this.rr=t,performance.mark(this.rr+"-Start"))}}}{let i=function(t){return 0===t&&1/t<0};i;const y=self.Os,vt=2*Math.PI,bt=Math.PI/180,xt=180/Math.PI,Mt=(y.wrap=function(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=(i=Math.floor(i))-s;if(0==e)return i;if(t<s){const n=i-(s-t)%e;return n===i?0:n}return s+(t-s)%e},y.hr=function(t,s,i,e,n){const r=i-s;if(0==r&&0===e)return t;const h=n-e;return(t-s)*h/r+e},y.normalize=function(t,s,i){return s-i==0?1:(t-s)/(i-s)},y.lr=function(t,s,i){return t<s?s:i<t?i:t},y.ur=function(t){return(t%=vt)<0&&(t+=vt),t},y.cr=function(t){return t*bt},y.dr=function(t){return t*xt},y.pr=function(t,s,i,e){return Math.hypot(i-t,e-s)},y.mr=function(t,s,i,e){const n=i-t,r=e-s;return n*n+r*r},y.gr=function(t,s,i,e){return Math.atan2(e-s,i-t)},y.yr=function(t,s){if(t===s)return 0;let i=Math.sin(t),e=Math.cos(t),n=Math.sin(s),r=Math.cos(s),h=i*n+e*r;return 1<=h?0:h<=-1?Math.PI:Math.acos(h)},y.Sr=function(t,s,i){let e=Math.sin(t),n=Math.cos(t),r=Math.sin(s),h=Math.cos(s);return Math.acos(e*r+n*h)>i?0<n*r-e*h?y.ur(t+i):y.ur(t-i):y.ur(s)},y.vr=function(t,s){let i=Math.sin(t),e=Math.cos(t),n=Math.sin(s),r=Math.cos(s);return e*n-i*r<=0},y.br=function(t,s,i,e=0){let n=y.yr(t,s),r=vt*e;return y.vr(s,t)?y.ur(t+(n+r)*i):y.ur(t-(n+r)*i)},y.Mr=function(t,s,i,e=0){const n=y.yr(t,s),r=vt*e;return y.vr(s,t)?y.ur(t+(n+r)*i):y.ur(t+(vt-n+r)*i)},y.Gr=function(t,s,i,e=0){const n=y.yr(t,s),r=vt*e;return y.vr(s,t)?y.ur(t-(-vt+n-r)*i):y.ur(t-(n+r)*i)},y.Tr=function(t,s){const i=y.yr(t,s);return y.vr(t,s)?y.ur(s-i):y.ur(s+i)},y.Ft=function(t,s,i){return t+i*(s-t)},y._r=function(t,s,i){return t===s?0:(i-t)/(s-t)},y.Ir=function(t,s,i,e,n){return y.Ft(e,n,y._r(t,s,i))},y.Cr=function(t,s,i,e){return y.Ft(y.Ft(t,s,e),y.Ft(s,i,e),e)},y.Er=function(t,s,i,e,n){return y.Ft(y.Cr(t,s,i,n),y.Cr(s,i,e,n),n)},y.Pr=function(t,s,i){return(t+s+(t-s)*Math.cos(i*Math.PI))/2},y.Rr=function(t){return 0<t&&0==(t-1&t)},y.Ar=function(s){--s;for(let t=1;t<32;t<<=1)s|=s>>t;return s+1},y.Fr=function(t,s){return Math.round(t*s)/s},y.Or=function(t,s){return Math.floor(t*s)/s},y.Dr=function(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round(t*i)/i},y.Lr=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},y.toFixed=function(t,s){let i=t.toFixed(s),e=i.length-1;for(;0<=e&&"0"===i.charAt(e);--e);return 0<=e&&"."===i.charAt(e)&&--e,e<0?i:i.substr(0,e+1)},y.kr=function(t,s,i){return y.lr(t,0,255)|y.lr(s,0,255)<<8|y.lr(i,0,255)<<16},1024),Gt=16384,Tt=8191,_t=(y.Nr=function(t,s,i,e){return t=y.lr(Math.floor(1024*t),-8192,Tt),s=y.lr(Math.floor(1024*s),-8192,Tt),i=y.lr(Math.floor(1024*i),-8192,Tt),e=y.lr(Math.floor(1023*e),0,1023),t<0&&(t+=Gt),s<0&&(s+=Gt),i<0&&(i+=Gt),-(t*Gt*Gt*Mt+s*Gt*Mt+i*Mt+e)},y.Br=function(t,s,i){return y.Nr(t,s,i,1)},y.Wr=function(s){if(0<=s)return(255&s)/255;{let t=Math.floor(-s/(Gt*Gt*Mt));return t>Tt&&(t-=Gt),t/1024}},y.jr=function(s){if(0<=s)return((65280&s)>>8)/255;{let t=Math.floor(-s%(Gt*Gt*Mt)/(Gt*Mt));return t>Tt&&(t-=Gt),t/1024}},y.Ur=function(s){if(0<=s)return((16711680&s)>>16)/255;{let t=Math.floor(-s%(Gt*Mt)/Mt);return t>Tt&&(t-=Gt),t/1024}},y.Vr=function(t){if(i(t))return 0;if(0<=t)return 1;{const s=Math.floor(-t%Mt);return s/1023}},y.Hr=function(s,i){for(s=Math.floor(s),i=Math.floor(i);0!==i;){let t=i;i=s%i,s=t}return s},[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]]);y.zr=function(i,e){if((i=Math.floor(i))===(e=Math.floor(e)))return[1,1];for(let s of _t){let t=i/s[0]*s[1];if(Math.abs(e-t)<1)return s.slice(0);if(t=i/s[1]*s[0],Math.abs(e-t)<1)return[s[1],s[0]]}let t=y.Hr(i,e);return[i/t,e/t]},y.Jr=function(t,s,i,e,n,r,h,o){const a=Math.min(t,i),l=Math.max(t,i),u=Math.min(n,h),c=Math.max(n,h);if(l<u||c<a)return!1;const f=Math.min(s,e),d=Math.max(s,e),p=Math.min(r,o),m=Math.max(r,o);if(d<p||m<f)return!1;const g=n-t+h-i,y=r-s+o-e,w=i-t,S=e-s,v=h-n,b=o-r,x=Math.abs(S*v-b*w),M=v*y-b*g;if(Math.abs(M)>x)return!1;const G=w*y-S*g;return Math.abs(G)<=x},y.qr=function(t,s,i,e,n,r,h,o,a,l,u,c){const f=Math.min(a,u),d=Math.max(a,u);if(r<f||d<n)return!1;const p=Math.min(l,c),m=Math.max(l,c);if(o<p||m<h)return!1;const g=a-t+u-i,y=l-s+c-e,w=i-t,S=e-s,v=u-a,b=c-l,x=Math.abs(S*v-b*w),M=v*y-b*g;if(Math.abs(M)>x)return!1;const G=w*y-S*g;return Math.abs(G)<=x},y.$r=function(t,s,i,e,n){const r=Math.min(t,i),h=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e),l=n.Xr(),u=n.Yr(),c=n.Zr(),f=n.Kr(),d=n.Qr(),p=n.th(),m=n.ih(),g=n.eh();return y.qr(t,s,i,e,r,h,o,a,l,u,c,f)||y.qr(t,s,i,e,r,h,o,a,c,f,d,p)||y.qr(t,s,i,e,r,h,o,a,d,p,m,g)||y.qr(t,s,i,e,r,h,o,a,m,g,l,u)},y.nh=function(s,i,e,n,r){let h=Math.min(s,e),o=Math.max(s,e),a=Math.min(i,n),l=Math.max(i,n),u=0;for(let t=r.length-4;u<=t;u+=2)if(y.qr(s,i,e,n,h,o,a,l,r[u],r[u+1],r[u+2],r[u+3]))return!0;return y.qr(s,i,e,n,h,o,a,l,r[u],r[u+1],r[0],r[1])};y.rh=function(t,s,i,e,n,r,h,o){const a=i-t,l=e-s,u=h-n,c=o-r,f=a*c-l*u;if(0==f)return 2;const d=((s-e)*(h-t)+a*(o-s))/f;return 0<d&&d<1+1e-6?(c*(h-t)+(n-h)*(o-s))/f:2},y.hh=function(t,s,i,e,n,r,h,o,a){const l=(h-n)*a,u=(o-r)*a;return y.rh(t,s,i,e,n-l,r-u,h+l,o+u)},y.oh=function(t,s,i,e,n,r,h,o){const a=n-i,l=r-e,u=h-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=a*f+l*d,y=u*u+c*c,w=u*f+c*d,S=1/(p*y-m*m),v=(y*g-m*w)*S,b=(p*w-m*g)*S;return 0<=v&&0<=b&&v+b<=1},y.ah=function(t,s,i,e,n,r,h,o){const a=n-i,l=r-e,u=h-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=u*u+c*c,y=f*a+d*l,w=f*u+d*c,S=p*g-m*m,v=(g*y-m*w)/S,b=(p*w-m*y)/S,x=1-v-b;return[x,v,b]},y.lh=function(t,s,i,e,n,r,h,o,a,l,u,c){return[t*e+s*h+i*l,t*n+s*o+i*u,t*r+s*a+i*c]}}{let l=self.Os,s=null,i="";if("undefined"!=typeof document){const It=(s=document).querySelector("base");(i=It&&It.hasAttribute("href")?It.getAttribute("href"):"")&&!(i=i.startsWith("/")?i.substr(1):i).endsWith("/")&&(i+="/")}l.uh=function(){return i},l.fh=function(){if(!s)return"";const t=s.location;return l.dh(t.origin+t.pathname)+i},l.dh=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?"":t.substr(0,s+1)},l.ph=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?t:t.substr(s+1)},l.mh=function(t){let s=t.lastIndexOf(".");return s<1?"":t.substr(s)},l.gh=function(t,s){const i=t.lastIndexOf(".");return-1===i?t+"."+s:t.substr(0,i+1)+s},l.yh=function(t){let s=t.lastIndexOf(".");return s<1?t:t.substr(0,s)},l.wh=function(t){return t.replace(/\\/g,"/")},l.Sh=function(t,s){const i=t?l.mh(t).slice(1):"";return s===i},l.bh=function(t,s){let i,e;return l.Re(t)&&(i=l.yh(t.name)),l.Se(t)&&(i=l.yh(t)),l.Re(s)&&(e=l.yh(s.name)),l.Se(s)&&(e=l.yh(s)),i===e},l.xh=function(t){t=l.wh(t);let s=/^\w\:\//.exec(t),i=(s?(s=s[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):s="",(t=1<(t=t.replace(/\/{2,}/g,"/")).length&&"/"===t.slice(-1)?t.slice(0,-1):t).lastIndexOf("/")+1),e="",n=t,r,h="";0<i&&(e=t.slice(0,i),n=t.slice(i));const o=(r=n).lastIndexOf("."),a=(0<o&&(h=n.slice(o),r=n.slice(0,-h.length)),s+e+n);return{dir:e,Mh:n,name:r,root:s,ext:h,Gh:a}},l.Th=function(i,e){return new Promise((t,s)=>{self.setTimeout(t,i,e)})},l._h=function(t){try{t()}catch(t){l.isDebug&&console.warn("Swallowed exception: ",t)}},l.Ih=function(){},l.pn=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize().toLowerCase()===s.normalize().toLowerCase())},l.Ch=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize()===s.normalize())},l.Eh=function(t,s,i){t[i++]=s[0],t[i++]=s[1],t[i++]=s[2],t[i++]=s[3],t[i++]=s[4],t[i++]=s[5],t[i++]=s[6],t[i++]=s[7],t[i++]=s[8],t[i++]=s[9],t[i++]=s[10],t[i++]=s[11],t[i++]=s[12],t[i++]=s[13],t[i++]=s[14],t[i]=s[15]},l.Ph=function(t,s){t.length=s},l.Rh=function(t){t&&0!==t.length&&l.Ph(t,0)},l.Ah=function(i){if(i){for(let s=0;s<i.length;s++){let t=i[s];l.Ph(t,0)}l.Ph(i,0)}},l.Fh=function(s,i,e){const n=s.length;if(!((i|=0)<=n))for(let t=n;t<i;++t)s.push(e)},l.Oh=function(t,s,i){const e=t.length;(s|=0)<e?l.Ph(t,s):e<s&&l.Fh(t,s,i)},l.Dh=function(t,s){l.Rh(t),l.Vn(t,s)},l.Vn=function(i,e){if(e.length<1e4)i.push(...e);else for(let t=0,s=e.length;t<s;++t)i.push(e[t])},l.Lh=function(i,e){if(!((e=Math.floor(e))<0||e>=i.length)){let s=i.length-1;for(let t=e;t<s;++t)i[t]=i[t+1];l.Ph(i,s)}},l.kh=function(t,s){let i=t.indexOf(s);0<=i&&t.splice(i,1)},l.Nh=function(s,i){let e=s.length;if(i.length!==e)return!1;for(let t=0;t<e;++t)if(s[t]!==i[t])return!1;return!0},l.Bh=function(i,e){let n=[],r=0;for(let s=0,t=i.length;s<t;++s){let t=i[s];e(t)?n.push(t):(i[r]=t,++r)}return l.Ph(i,r),n},l.Wh=function(i,e){let t=i.length,n=0;for(let s=0,t=i.length;s<t;++s){let t=i[s];e.has(t)||(i[n++]=t)}return l.Ph(i,n),t-n},l.jh=function(t,s){return t===Math.floor(t)&&0<=t&&t<s.length},l.Uh=function(t,s){if(!l.jh(t,s))throw new RangeError("array index out of bounds")},l.Vh=function(t){return t.slice()},l.Hh=function(t,i){let e=[];for(let s of t)if(l.Ie(s)){let t=i(s);if(!t)throw new Error("missing clone");if(t.constructor!==s.constructor)throw new Error("object is not a clone");e.push(t)}else l.De(s)?e.push(l.Hh(s,i)):e.push(s);return e},l.zh=function(s){let i=[];for(let t of s)i.push(t.slice());return i},l.Jh=function(t,s=" "){return t?t.split(s).map(t=>t.trim()).filter(t=>!!t):[]},l.qh=function(t,s,i){const e=new Set;for(const n of t.values())s(n)&&(i?e.add(i(n)):e.add(n));return e},l.$h=function(t,s){return t.union?t.union(s):new Set([...t,...s])},l.Xh=function(t,s){for(const i of s)t.add(i);return t},l.first=function(s){for(let t of s)return t;return null},l.xor=function(t,s){return!t!=!s},l.compare=function(t,s,i){switch(s){case 0:return t===i;case 1:return t!==i;case 2:return t<i;case 3:return t<=i;case 4:return i<t;case 5:return i<=t;default:return!1}},l.Yh=function(s){for(let t in s)if(s.hasOwnProperty(t))return!0;return!1},l.Zh=function(o,a){return o.length?new Promise((i,e)=>{let n=[],r=0,h=!1;for(let s=0,t=o.length;s<t;++s)n.push(void 0),o[s].then(t=>{h||(n[s]=t,++r===o.length?i(n):a(r,o.length))}).catch(t=>{h=!0,e(t)})}):Promise.resolve([])};let e=[],n=(l.Kh=function(t){e.push(t)},l.Qh=function(){let i=0;for(let s of e){let t=s();i+=t}return Math.floor(i)},1),r=new Map,h=new MessageChannel,o=(h.port2.onmessage=function(t){const s=t.data,i=r.get(s);r.delete(s),i&&i(performance.now())},l.io=function(t){const s=n++;return r.set(s,t),h.port1.postMessage(s),s},l.eo=function(t){r.delete(t)},l.no=l.io,l.ro=function(){return new Promise(t=>l.no(t))},new Set);l.ho=function(s){const i=self.requestAnimationFrame(async t=>{await l.ro(),o.has(i)&&(o.delete(i),s(t))});return o.add(i),i},l.ao=function(t){o.has(t)&&(self.cancelAnimationFrame(t),o.delete(t))}}{const r=self.Os;r.lo=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},r.uo=function(t){return!r.lo(t)},r.co=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} `+t.statusText)},r.fo=function(t,s){return fetch(t,s).then(t=>(r.co(t),t))},r.do=function(t){return r.fo(t).then(t=>t.text())},r.po=function(t){return r.fo(t).then(t=>t.json())},r.yo=function(t){return r.fo(t).then(t=>t.blob())},r.wo=function(t){return r.fo(t).then(t=>t.arrayBuffer())},r.So=function(e){return new Promise((t,s)=>{const i=new Image;i.onload=()=>t(i),i.onerror=t=>s(t),i.src=e})},r.vo=function(e){return"function"==typeof e.arrayBuffer?e.arrayBuffer():new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>s(i.error),i.readAsArrayBuffer(e)})},r.bo=function(e){return"function"==typeof e.text?e.text():new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>s(i.error),i.readAsText(e)})},r.xo=function(t){return r.bo(t).then(t=>JSON.parse(t))},r.Mo=async function(t,s){let i=URL.createObjectURL(t);try{const e=await r.So(i);return URL.revokeObjectURL(i),i="",s&&"function"==typeof e.decode&&await e.decode(),e}finally{i&&URL.revokeObjectURL(i)}},r.Go=function(t,s){if("undefined"==typeof document||"function"!=typeof document.createElement)return new OffscreenCanvas(t,s);{const i=document.createElement("canvas");return i.width=t,i.height=s,i}},r.To=function(s,i,e){if("number"!=typeof e&&(e=1),i=i||"image/png",e=r.lr(e,0,1),s.convertToBlob)return s.convertToBlob({type:i,quality:e});if(s.toBlob)return new Promise(t=>s.toBlob(t,i,e));throw new Error("could not convert canvas to blob")},r._o=function(t,s,i){const e=r.Go(t.width,t.height),n=e.getContext("2d");return n.drawImage(t,0,0),r.To(e,s,i)},r.Io=function(t,s,i){if(r.Li.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then(t=>r._o(t,s,i));if(r.Li.ImageBitmap)return createImageBitmap(t).then(t=>r._o(t,s,i));{const e=r.Go(t.width,t.height),n=e.getContext("2d");return n.putImageData(t,0,0),r.To(e,s,i)}},r.Co=function(t,s){t.clear();for(const i of s)t.add(i)},r.Eo=function(t){const s=Object.create(null);for(const[i,e]of t.entries())s[i]=e;return s},r.Po=function(t,s){s.clear();for(const[i,e]of Object.entries(t))s.set(i,e)},r.Ro=function s(t){if("object"!=typeof t||null===t)return t;if(t instanceof Set)return{_c3type_:"set",data:[...t].map(t=>s(t))};if(t instanceof Map)return{_c3type_:"map",data:[...t].map(t=>[t[0],s(t[1])])};{const i=Object.create(null);for(const[e,n]of Object.entries(t))i[e]=s(n);return i}},r.Ao=function s(t){if("object"==typeof t&null!==t){if("set"===t._c3type_)return new Set(t.data.map(t=>s(t)));if("map"===t._c3type_)return new Map(t.data.map(t=>[t[0],s(t[1])]));{const i=Object.create(null);for(const[e,n]of Object.entries(t))i[e]=s(n);return i}}return t},r.Fo=function(t){if(t.startsWith("--"))return t;let s="",i=!1,e=0;for(const n of t)"-"===n?0<e&&(i=!0):i?(s+=n.toUpperCase(),i=!1):s+=n,++e;return s},r.Oo=function(t){return"object"==typeof t&&"function"==typeof t.next},r.Do=function(s,i){const e=[];if("function"==typeof i)for(let t=0;t<s;++t)e.push(i());else for(let t=0;t<s;++t)e.push(i);return e}}{let e=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},l=function(t,s,i){return i<0&&(i+=1),1<i&&--i,i<1/6?t+6*(s-t)*i:i<.5?s:i<2/3?t+(s-t)*(2/3-i)*6:t};e,l;const u=self.Os,Ct=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,Et=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;u.Lo=class{constructor(t,s,i,e){this.ko=NaN,this.No=NaN,this.Bo=NaN,this.Wo=NaN,this.ko=0,this.No=0,this.Bo=0,this.Wo=0,t instanceof u.Lo?this.set(t):this.jo(t||0,s||0,i||0,e||0)}Uo(t,s,i){return this.ko=+t,this.No=+s,this.Bo=+i,this.lr(),this}jo(t,s,i,e){return this.ko=+t,this.No=+s,this.Bo=+i,this.Wo=+e,this.lr(),this}set(t){return this.ko=t.ko,this.No=t.No,this.Bo=t.Bo,this.Wo=t.Wo,this}T(t){return this.set(t)}add(t){this.ko+=t.ko,this.No+=t.No,this.Bo+=t.Bo,this.Wo+=t.Wo,this.lr()}Vo(t,s,i,e=0){this.ko+=+t,this.No+=+s,this.Bo+=+i,this.Wo+=+e,this.lr()}Ho(t){this.zo(Math.max(this.ko,t.ko)-Math.min(this.ko,t.ko)),this.Jo(Math.max(this.No,t.No)-Math.min(this.No,t.No)),this.qo(Math.max(this.Bo,t.Bo)-Math.min(this.Bo,t.Bo)),this.$o(Math.max(this.Wo,t.Wo)-Math.min(this.Wo,t.Wo)),this.lr()}Xo(t){this.ko=t.ko,this.No=t.No,this.Bo=t.Bo}zo(t){this.ko=u.lr(+t,0,1)}Yo(){return this.ko}Jo(t){this.No=u.lr(+t,0,1)}Zo(){return this.No}qo(t){this.Bo=u.lr(+t,0,1)}Ko(){return this.Bo}$o(t){this.Wo=u.lr(+t,0,1)}Qo(){return this.Wo}clone(){return u.tr(u.Lo,this.ko,this.No,this.Bo,this.Wo)}toArray(){return[this.ko,this.No,this.Bo,this.Wo]}ta(){return new Float64Array(this.toArray())}ia(t,s){t[s++]=this.ko,t[s++]=this.No,t[s++]=this.Bo,t[s]=this.Wo}ea(t,s){t[s++]=this.ko,t[s++]=this.No,t[s]=this.Bo}equals(t){return this.ko===t.ko&&this.No===t.No&&this.Bo===t.Bo&&this.Wo===t.Wo}na(t){return this.ko===t.ko&&this.No===t.No&&this.Bo===t.Bo}ra(t,s,i){return this.ko===t&&this.No===s&&this.Bo===i}oa(t,s,i,e){return this.ko===t&&this.No===s&&this.Bo===i&&this.Wo===e}aa(t,s){return t[s]===Math.fround(this.ko)&&t[s+1]===Math.fround(this.No)&&t[s+2]===Math.fround(this.Bo)&&t[s+3]===Math.fround(this.Wo)}la(t,s){return t[s]===Math.fround(this.ko)&&t[s+1]===Math.fround(this.No)&&t[s+2]===Math.fround(this.Bo)}multiply(t){this.ko*=t.ko,this.No*=t.No,this.Bo*=t.Bo,this.Wo*=t.Wo}ua(t){this.ko*=t,this.No*=t,this.Bo*=t,this.Wo*=t}ca(){return this.ko*=this.Wo,this.No*=this.Wo,this.Bo*=this.Wo,this}fa(){return this.ko/=this.Wo,this.No/=this.Wo,this.Bo/=this.Wo,this}lr(){return this.ko=u.lr(this.ko,0,1),this.No=u.lr(this.No,0,1),this.Bo=u.lr(this.Bo,0,1),this.Wo=u.lr(this.Wo,0,1),this}da(t){this.ko=u.Wr(t),this.No=u.jr(t),this.Bo=u.Ur(t),this.Wo=u.Vr(t)}pa(t,s,i){const e=u.le(t)?t:this.Yo(),n=u.le(s)?s:this.Zo(),r=u.le(i)?i:this.Ko();return`rgb(${100*e}%, ${100*n}%, ${100*r}%)`}ma(t,s,i,e){const n=u.le(t)?t:this.Yo(),r=u.le(s)?s:this.Zo(),h=u.le(i)?i:this.Ko(),o=u.le(e)?e:this.Qo();return`rgba(${100*n}%, ${100*r}%, ${100*h}%, ${o})`}ga(){const t=Math.round(255*this.Yo()),s=Math.round(255*this.Zo()),i=Math.round(255*this.Ko());return"#"+e(t.toString(16))+e(s.toString(16))+e(i.toString(16))}ya(t){if("string"!=typeof t)return!1;let s,i,e;if(3===(t="#"===(t=t.trim()).charAt(0)?t.substr(1):t).length)s=parseInt(t[0],16)/15,i=parseInt(t[1],16)/15,e=parseInt(t[2],16)/15;else{if(6!==t.length)return!1;s=parseInt(t.substr(0,2),16)/255,i=parseInt(t.substr(2,2),16)/255,e=parseInt(t.substr(4,2),16)/255}return isFinite(s)&&this.zo(s),isFinite(i)&&this.Jo(i),isFinite(e)&&this.qo(e),this.$o(1),!0}wa(){const t=Math.round(255*this.Yo()),s=Math.round(255*this.Zo()),i=Math.round(255*this.Ko());return t+`, ${s}, `+i}Sa(){const t=Math.round(255*this.Yo()),s=Math.round(255*this.Zo()),i=Math.round(255*this.Ko());return[t,s,i]}ba(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,n=parseInt(s[2].trim(),10)/255;return isFinite(i)&&this.zo(i),isFinite(e)&&this.Jo(e),isFinite(n)&&this.qo(n),this.$o(1),!0}xa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,n=parseInt(s[2].trim(),10)/100;return isFinite(i)&&this.zo(i),isFinite(e)&&this.Jo(e),isFinite(n)&&this.qo(n),this.$o(1),!0}Ma(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,n=parseInt(s[2].trim(),10)/255,r=parseFloat(s[3].trim());return isFinite(i)&&this.zo(i),isFinite(e)&&this.Jo(e),isFinite(n)&&this.qo(n),isFinite(r)&&this.$o(r),!0}Ga(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,n=parseInt(s[2].trim(),10)/100,r=parseFloat(s[3].trim());return isFinite(i)&&this.zo(i),isFinite(e)&&this.Jo(e),isFinite(n)&&this.qo(n),isFinite(r)&&this.$o(r),!0}Ta(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this.xa(t):this.ba(t);if(t.startsWith("rgba("))return t.includes("%")?this.Ga(t):this.Ma(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this._a(t);{const s=t.split(",");return t.includes("%")?3===s.length?this.xa(t):4===s.length&&this.Ga(t):3===s.length?this.ba(t):4===s.length&&this.Ma(t)}}return this.ya(t)}toJSON(){return[this.ko,this.No,this.Bo,this.Wo]}Ia(t,s,i,e){let n,r,h;if(t%=360,s=u.lr(s,0,100),i=u.lr(i,0,100),e=u.lr(e,0,1),t/=360,i/=100,0==(s/=100))n=r=h=i;else{const o=i<.5?i*(1+s):i+s-i*s,a=2*i-o;n=l(a,o,t+1/3),r=l(a,o,t),h=l(a,o,t-1/3)}return this.zo(n),this.Jo(r),this.qo(h),this.$o(e),this}_a(t){const s=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),i=Ct.exec(s),e=Et.exec(s);return i&&4===i.length?(this.Ia(+i[1],+i[2],+i[3],1),!0):!(!e||5!==e.length||(this.Ia(+i[1],+i[2],+i[3],+i[4]),0))}Ca(){const t=this.ko,s=this.No,i=this.Bo,e=this.Wo,n=u.Lo.Ea(t,s,i),r=u.Lo.Pa(t,s,i),h=u.Lo.Ra(t,s,i);return`hsla(${n}, ${r}%, ${h}%, ${e})`}Aa(){const t=this.ko,s=this.No,i=this.Bo;return[u.Lo.Ea(t,s,i),u.Lo.Pa(t,s,i),u.Lo.Ra(t,s,i),this.Wo]}Fa(t){!Array.isArray(t)||t.length<3||(this.ko=t[0],this.No=t[1],this.Bo=t[2],this.Wo=4<=t.length?t[3]:1)}set r(t){this.zo(t)}get r(){return this.Yo()}set Oa(t){this.Jo(t)}get Oa(){return this.Zo()}set b(t){this.qo(t)}get b(){return this.Ko()}set a(t){this.$o(t)}get a(){return this.Qo()}Da(t,s){switch(t){case 0:this.zo(s);break;case 1:this.Jo(s);break;case 2:this.qo(s);break;case 3:this.$o(s);break;default:throw new RangeError("invalid color index")}}La(t){switch(t){case 0:return this.Yo();case 1:return this.Zo();case 2:return this.Ko();case 3:return this.Qo();default:throw new RangeError("invalid color index")}}static ka(t,s){let i,e;if(Array.isArray(t))(i=new u.Lo).Fa(t);else{if(!(t instanceof u.Lo))throw new Error("unexpected type");i=t}if(Array.isArray(s))(e=new u.Lo).Fa(s);else{if(!(s instanceof u.Lo))throw new Error("unexpected type");e=s}return i.equals(e)}static Na(t,s){return u.lr(Math.max(t,s)-Math.min(t,s),0,1)}static Ba(t,s){const i=new u.Lo;return i.zo(Math.max(t.ko,s.ko)-Math.min(t.ko,s.ko)),i.Jo(Math.max(t.No,s.No)-Math.min(t.No,s.No)),i.qo(Math.max(t.Bo,s.Bo)-Math.min(t.Bo,s.Bo)),i.$o(Math.max(t.Wo,s.Wo)-Math.min(t.Wo,s.Wo)),i}static Wa(t,s){const i=new u.Lo(0,0,0,1);return i.zo(Math.max(t.ko,s.ko)-Math.min(t.ko,s.ko)),i.Jo(Math.max(t.No,s.No)-Math.min(t.No,s.No)),i.qo(Math.max(t.Bo,s.Bo)-Math.min(t.Bo,s.Bo)),i}static Ea(t,s,i){const e=Math.max(t,s,i),n=Math.min(t,s,i);if(e===n)return 0;let r=0;switch(e){case t:r=(s-i)/(e-n)+(s<i?6:0);break;case s:r=(i-t)/(e-n)+2;break;case i:r=(t-s)/(e-n)+4}return Math.round(r/6*360)}static Pa(t,s,i){const e=Math.max(t,s,i),n=Math.min(t,s,i);if(e===n)return 0;const r=(e+n)/2,h=e-n,o=.5<r?h/(2-e-n):h/(e+n);return Math.round(100*o)}static Ra(t,s,i){const e=Math.max(t,s,i),n=Math.min(t,s,i),r=(e+n)/2;return e?Math.round(100*r):0}},u.Lo.ja=Object.freeze(u.tr(u.Lo,1,1,1,1)),u.Lo.Ua=Object.freeze(u.tr(u.Lo,0,0,0,1)),u.Lo.Va=Object.freeze(u.tr(u.Lo,0,0,0,0))}{const Pt=self.Os;Pt.Ha=class{constructor(t,s){this.za=0,this.Ja=0,t instanceof Pt.Ha?this.T(t):this.set(t||0,s||0)}set(t,s){this.za=+t,this.Ja=+s}T(t){this.za=t.za,this.Ja=t.Ja}equals(t){return this.za===t.za&&this.Ja===t.Ja}qa(t,s){return this.za===t&&this.Ja===s}aa(t,s){return t[s]===Math.fround(this.za)&&t[s+1]===Math.fround(this.Ja)}$a(t){this.za=+t}Xa(){return this.za}Ya(t){this.Ja=+t}Za(){return this.Ja}toArray(){return[this.za,this.Ja]}ta(){return new Float64Array(this.toArray())}ia(t,s){t[s++]=this.za,t[s]=this.Ja}offset(t,s){this.za+=+t,this.Ja+=+s}scale(t,s){this.za*=t,this.Ja*=s}Tt(t,s){this.za/=t,this.Ja/=s}round(){this.za=Math.round(this.za),this.Ja=Math.round(this.Ja)}floor(){this.za=Math.floor(this.za),this.Ja=Math.floor(this.Ja)}ceil(){this.za=Math.ceil(this.za),this.Ja=Math.ceil(this.Ja)}angle(){return Pt.gr(0,0,this.za,this.Ja)}Ka(){return this.za*this.za+this.Ja*this.Ja}length(){return Math.hypot(this.za,this.Ja)}Qa(t,s){const i=this.za*s-this.Ja*t;this.Ja=this.Ja*s+this.za*t,this.za=i}rotate(t){0!==t&&this.Qa(Math.sin(t),Math.cos(t))}tl(t,s,i){0===t||s===this.za&&i===this.Ja||(this.za-=s,this.Ja-=i,this.Qa(Math.sin(t),Math.cos(t)),this.za+=+s,this.Ja+=+i)}move(t,s){0!==s&&(this.za+=Math.cos(t)*s,this.Ja+=Math.sin(t)*s)}normalize(){const t=this.length();0!==t&&1!==t&&(this.za/=t,this.Ja/=t)}lr(t,s){this.za=Pt.lr(this.za,t,s),this.Ja=Pt.lr(this.Ja,t,s)}Rt(t){return this.za*t.za+this.Ja*t.Ja}reverse(){this.za=-this.za,this.Ja=-this.Ja}sl(){let t=this.za;return this.za=this.Ja,this.Ja=-t,this}}}{const Rt=self.Os;Rt.Rect=class{constructor(t,s,i,e){this.il=NaN,this.el=NaN,this.nl=NaN,this.rl=NaN,this.il=0,this.el=0,this.nl=0,this.rl=0,t instanceof Rt.Rect?this.T(t):this.set(t||0,s||0,i||0,e||0)}set(t,s,i,e){this.il=+t,this.el=+s,this.nl=+i,this.rl=+e}hl(t,s,i,e){s=+s,this.il=t=+t,this.el=s,this.nl=t+ +i,this.rl=s+ +e}T(t){this.il=+t.il,this.el=+t.el,this.nl=+t.nl,this.rl=+t.rl}clone(){return new Rt.Rect(this.il,this.el,this.nl,this.rl)}static ol(t,s){const i=new Rt.Rect;return i.al(Math.min(t.il,s.il)),i.ll(Math.min(t.el,s.el)),i.ul(Math.max(t.nl,s.nl)),i.cl(Math.max(t.rl,s.rl)),i}static fl(t){return new Rt.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.il===t.il&&this.el===t.el&&this.nl===t.nl&&this.rl===t.rl}dl(t,s,i,e){return this.il===t&&this.el===s&&this.width()===i&&this.height()===e}aa(t,s){return t[s]===Math.fround(this.il)&&t[s+1]===Math.fround(this.el)&&t[s+2]===Math.fround(this.nl)&&t[s+3]===Math.fround(this.rl)}al(t){this.il=+t}pl(){return this.il}ll(t){this.el=+t}ml(){return this.el}ul(t){this.nl=+t}gl(){return this.nl}cl(t){this.rl=+t}yl(){return this.rl}toArray(){return[this.il,this.el,this.nl,this.rl]}ta(){return new Float64Array(this.toArray())}wl(){return new DOMRect(this.il,this.el,this.width(),this.height())}static Sl(t){return Rt.tr(Rt.Rect,t.left,t.top,t.right,t.bottom)}ia(t,s){t[s++]=this.il,t[s++]=this.el,t[s++]=this.nl,t[s]=this.rl}vl(t,s){t[s++]=this.il,t[s++]=this.el,t[s++]=this.nl,t[s++]=this.el,t[s++]=this.nl,t[s++]=this.rl,t[s++]=this.il,t[s]=this.rl}bl(t,s,i){t[s++]=this.il,t[s++]=this.el,t[s++]=i,t[s++]=this.nl,t[s++]=this.el,t[s++]=i,t[s++]=this.nl,t[s++]=this.rl,t[s++]=i,t[s++]=this.il,t[s++]=this.rl,t[s]=i}width(){return this.nl-this.il}height(){return this.rl-this.el}xl(){return(this.il+this.nl)/2}Ml(){return(this.el+this.rl)/2}offset(t,s){s=+s,this.il+=t=+t,this.el+=s,this.nl+=t,this.rl+=s}offsetLeft(t){this.il+=+t}offsetTop(t){this.el+=+t}Gl(t){this.nl+=+t}Tl(t){this.rl+=+t}_l(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.el<this.rl?this.il<this.nl?this.rl=this.el+this.width():this.rl=this.el-this.width():this.il<this.nl?this.rl=this.el-this.width():this.rl=this.el+this.width()}Il(t,s){s=+s,this.il-=t=+t,this.el-=s,this.nl+=t,this.rl+=s}Cl(t,s){s=+s,this.il+=t=+t,this.el+=s,this.nl-=t,this.rl-=s}multiply(t,s){this.il*=t,this.el*=s,this.nl*=t,this.rl*=s}Tt(t,s){this.il/=t,this.el/=s,this.nl/=t,this.rl/=s}El(t){this.il=+t-this.il,this.nl=+t-this.nl}Pl(t){this.el=+t-this.el,this.rl=+t-this.rl}Rl(t,s){const i=this.width(),e=this.height(),n=this.pl()+i*t,r=this.ml()+e*s;this.hl(n-e*s,r-i*t,e,i)}Al(){const t=this.il;this.il=this.nl,this.nl=t}Fl(){const t=this.el;this.el=this.rl,this.rl=t}Ol(t){const s=this.el;this.el=+t-this.rl,this.rl=+t-s}round(){this.il=Math.round(this.il),this.el=Math.round(this.el),this.nl=Math.round(this.nl),this.rl=Math.round(this.rl)}Dl(){this.il=Math.ceil(this.il),this.el=Math.ceil(this.el),this.nl=Math.floor(this.nl),this.rl=Math.floor(this.rl)}Ll(){this.il=Math.floor(this.il),this.el=Math.floor(this.el),this.nl=Math.ceil(this.nl),this.rl=Math.ceil(this.rl)}floor(){this.il=Math.floor(this.il),this.el=Math.floor(this.el),this.nl=Math.floor(this.nl),this.rl=Math.floor(this.rl)}ceil(){this.il=Math.ceil(this.il),this.el=Math.ceil(this.el),this.nl=Math.ceil(this.nl),this.rl=Math.ceil(this.rl)}lr(t,s,i,e){this.il=Math.max(this.il,+t),this.el=Math.max(this.el,+s),this.nl=Math.min(this.nl,+i),this.rl=Math.min(this.rl,+e)}kl(t,s,i,e){t=+t,s=+s,i=+i,e=+e,this.il=Rt.lr(this.il,t,i),this.el=Rt.lr(this.el,s,e),this.nl=Rt.lr(this.nl,t,i),this.rl=Rt.lr(this.rl,s,e)}normalize(){this.il>this.nl&&this.Al(),this.el>this.rl&&this.Fl()}Nl(t){return!(t.nl<this.il||t.rl<this.el||t.il>this.nl||t.el>this.rl)}Bl(t,s,i){return!(t.nl+s<this.il||t.rl+i<this.el||t.il+s>this.nl||t.el+i>this.rl)}Wl(t,s){return t>=this.il&&t<=this.nl&&s>=this.el&&s<=this.rl}jl(t){return t.il>=this.il&&t.el>=this.el&&t.nl<=this.nl&&t.rl<=this.rl}Ul(t){t.il<this.il&&(this.il=+t.il),t.el<this.el&&(this.el=+t.el),t.nl>this.nl&&(this.nl=+t.nl),t.rl>this.rl&&(this.rl=+t.rl)}Vl(t){this.il=Rt.Ft(t.il,t.nl,this.il),this.el=Rt.Ft(t.el,t.rl,this.el),this.nl=Rt.Ft(t.il,t.nl,this.nl),this.rl=Rt.Ft(t.el,t.rl,this.rl)}}}{const At=self.Os;At.Hl=class{constructor(t,s,i,e,n,r,h,o){this.zl=NaN,this.Jl=NaN,this.ql=NaN,this.$l=NaN,this.Xl=NaN,this.Yl=NaN,this.Zl=NaN,this.Kl=NaN,this.zl=0,this.Jl=0,this.ql=0,this.$l=0,this.Xl=0,this.Yl=0,this.Zl=0,this.Kl=0,t instanceof At.Hl?this.T(t):this.set(t||0,s||0,i||0,e||0,n||0,r||0,h||0,o||0)}set(t,s,i,e,n,r,h,o){this.zl=+t,this.Jl=+s,this.ql=+i,this.$l=+e,this.Xl=+n,this.Yl=+r,this.Zl=+h,this.Kl=+o}Ql(t,s,i,e){this.set(t,s,i,s,i,e,t,e)}T(t){this.zl=t.zl,this.Jl=t.Jl,this.ql=t.ql,this.$l=t.$l,this.Xl=t.Xl,this.Yl=t.Yl,this.Zl=t.Zl,this.Kl=t.Kl}equals(t){return this.zl===t.zl&&this.Jl===t.Jl&&this.ql===t.ql&&this.$l===t.$l&&this.Xl===t.Xl&&this.Yl===t.Yl&&this.Zl===t.Zl&&this.Kl===t.Kl}tu(t){this.zl=+t}Xr(){return this.zl}su(t){this.Jl=+t}Yr(){return this.Jl}iu(t){this.ql=+t}Zr(){return this.ql}eu(t){this.$l=+t}Kr(){return this.$l}nu(t){this.Xl=+t}Qr(){return this.Xl}ru(t){this.Yl=+t}th(){return this.Yl}hu(t){this.Zl=+t}ih(){return this.Zl}ou(t){this.Kl=+t}eh(){return this.Kl}au(){return new DOMQuad(new DOMPoint(this.zl,this.Jl),new DOMPoint(this.ql,this.$l),new DOMPoint(this.Xl,this.Yl),new DOMPoint(this.Zl,this.Kl))}static lu(t){return At.tr(At.Hl,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.zl,this.Jl,this.ql,this.$l,this.Xl,this.Yl,this.Zl,this.Kl]}ta(){return new Float64Array(this.toArray())}ia(t,s){t[s++]=this.zl,t[s++]=this.Jl,t[s++]=this.ql,t[s++]=this.$l,t[s++]=this.Xl,t[s++]=this.Yl,t[s++]=this.Zl,t[s]=this.Kl}uu(t,s,i){t[s++]=this.zl,t[s++]=this.Jl,t[s++]=i,t[s++]=this.ql,t[s++]=this.$l,t[s++]=i,t[s++]=this.Xl,t[s++]=this.Yl,t[s++]=i,t[s++]=this.Zl,t[s++]=this.Kl,t[s]=i}offset(t,s){s=+s,this.zl+=t=+t,this.Jl+=s,this.ql+=t,this.$l+=s,this.Xl+=t,this.Yl+=s,this.Zl+=t,this.Kl+=s}round(){this.zl=Math.round(this.zl),this.Jl=Math.round(this.Jl),this.ql=Math.round(this.ql),this.$l=Math.round(this.$l),this.Xl=Math.round(this.Xl),this.Yl=Math.round(this.Yl),this.Zl=Math.round(this.Zl),this.Kl=Math.round(this.Kl)}floor(){this.zl=Math.floor(this.zl),this.Jl=Math.floor(this.Jl),this.ql=Math.floor(this.ql),this.$l=Math.floor(this.$l),this.Xl=Math.floor(this.Xl),this.Yl=Math.floor(this.Yl),this.Zl=Math.floor(this.Zl),this.Kl=Math.floor(this.Kl)}ceil(){this.zl=Math.ceil(this.zl),this.Jl=Math.ceil(this.Jl),this.ql=Math.ceil(this.ql),this.$l=Math.ceil(this.$l),this.Xl=Math.ceil(this.Xl),this.Yl=Math.ceil(this.Yl),this.Zl=Math.ceil(this.Zl),this.Kl=Math.ceil(this.Kl)}cu(t){this.zl=t.il,this.Jl=t.el,this.ql=t.nl,this.$l=t.el,this.Xl=t.nl,this.Yl=t.rl,this.Zl=t.il,this.Kl=t.rl}fu(t,s){0===s?this.cu(t):this.du(t,Math.sin(s),Math.cos(s))}du(t,s,i){const e=t.il*s,n=t.el*s,r=t.nl*s,h=t.rl*s,o=t.il*i,a=t.el*i,l=t.nl*i,u=t.rl*i;this.zl=o-n,this.Jl=a+e,this.ql=l-n,this.$l=a+r,this.Xl=l-h,this.Yl=u+r,this.Zl=o-h,this.Kl=u+e}pu(t){t.set(Math.min(this.zl,this.ql,this.Xl,this.Zl),Math.min(this.Jl,this.$l,this.Yl,this.Kl),Math.max(this.zl,this.ql,this.Xl,this.Zl),Math.max(this.Jl,this.$l,this.Yl,this.Kl))}Wl(t,s){let i=this.ql-this.zl,e=this.$l-this.Jl,n=this.Xl-this.zl,r=this.Yl-this.Jl,h=t-this.zl,o=s-this.Jl,a=i*i+e*e,l=i*n+e*r,u=i*h+e*o,c=n*n+r*r,f=n*h+r*o,d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d;return 0<=p&&0<m&&p+m<1||(m=((a=(i=this.Zl-this.zl)*i+(e=this.Kl-this.Jl)*e)*f-(l=i*n+e*r)*(u=i*h+e*o))*(d=1/(a*c-l*l)),0<=(p=(c*u-l*f)*d)&&0<m&&p+m<1)}xl(){return(this.zl+this.ql+this.Xl+this.Zl)/4}Ml(){return(this.Jl+this.$l+this.Yl+this.Kl)/4}mu(t,s,i,e){return!(!this.Wl(t,s)&&!this.Wl(i,e))||At.$r(t,s,i,e,this)}gu(t){let s=t.xl(),i=t.Ml();if(this.Wl(s,i))return!0;if(s=this.xl(),i=this.Ml(),t.Wl(s,i))return!0;const e=this.zl,n=this.Jl,r=this.ql,h=this.$l,o=this.Xl,a=this.Yl,l=this.Zl,u=this.Kl;return At.$r(e,n,r,h,t)||At.$r(r,h,o,a,t)||At.$r(o,a,l,u,t)||At.$r(l,u,e,n,t)}yu(){const t=this.zl,s=this.Jl;this.zl=this.ql,this.Jl=this.$l,this.ql=this.Xl,this.$l=this.Yl,this.Xl=this.Zl,this.Yl=this.Kl,this.Zl=t,this.Kl=s}wu(){this.Su(0,2),this.Su(1,3),this.Su(6,4),this.Su(7,5)}vu(){this.Su(0,6),this.Su(1,7),this.Su(2,4),this.Su(3,5)}bu(){this.Su(2,6),this.Su(3,7)}Su(t,s){const i=this.xu(t);this.Mu(t,this.xu(s)),this.Mu(s,i)}xu(t){switch(t){case 0:return this.zl;case 1:return this.Jl;case 2:return this.ql;case 3:return this.$l;case 4:return this.Xl;case 5:return this.Yl;case 6:return this.Zl;case 7:return this.Kl;default:throw new RangeError("invalid quad point index")}}Mu(t,s){switch(s=+s,t){case 0:this.zl=s;break;case 1:this.Jl=s;break;case 2:this.ql=s;break;case 3:this.$l=s;break;case 4:this.Xl=s;break;case 5:this.Yl=s;break;case 6:this.Zl=s;break;case 7:this.Kl=s;break;default:throw new RangeError("invalid quad point index")}}}}{const Ft=self.Os,Ot=[0,0,1,0,1,1,0,1],Dt=Ft.tr(Ft.Hl);Ft.Gu=class extends Ft.Kn{constructor(t,s=!0){super(),t=t||Ot,this.Tu=Float64Array.from(t),this._u=new Ft.Rect,this.Iu=!0,this.Cu=s}ir(){}Eu(){return this.Tu}Pu(){return this.Tu.length/2}Ru(t){this.Tu.length===t.length?this.Tu.set(t):this.Tu=Float64Array.from(t),this.Iu=!0}Au(){this.Ru(Ot)}T(t){this.Ru(t.Tu)}Fu(){this.Iu=!0}Ou(){if(this.Iu){let i=this.Tu,e=i[0],n=i[1],r=e,h=n;for(let t=0,s=i.length;t<s;t+=2){const o=i[t],a=i[t+1];o<e&&(e=o),o>r&&(r=o),a<n&&(n=a),a>h&&(h=a)}this._u.set(e,n,r,h),this.Iu=!1}}cu(t,s,i){let e=this.Tu;8!==e.length&&(e=new Float64Array(8),this.Tu=e),e[0]=t.pl()-s,e[1]=t.ml()-i,e[2]=t.gl()-s,e[3]=t.ml()-i,e[4]=t.gl()-s,e[5]=t.yl()-i,e[6]=t.pl()-s,e[7]=t.yl()-i,this._u.T(t),0===s&&0===i||this._u.offset(-s,-i),this.Iu=!1}Du(t,s,i){Dt.T(t),Dt.offset(s,i),this.Ru(Dt.toArray()),this.Iu=!0}transform(t,s,i){let e=0,n=1;0!==i&&(e=Math.sin(i),n=Math.cos(i)),this.Lu(t,s,e,n)}Lu(i,e,n,r){const h=this.Tu;for(let t=0,s=h.length;t<s;t+=2){const o=t+1,a=h[t]*i,l=h[o]*e;h[t]=a*r-l*n,h[o]=l*r+a*n}this.Iu=!0}offset(i,e){const n=this.Tu;for(let t=0,s=n.length;t<s;t+=2)n[t]+=i,n[t+1]+=e}Wl(i,e){const n=this.Tu;if(i===n[0]&&e===n[1])return!0;this.Ou();let t=this._u,r=t.pl()-110,h=t.ml()-101,o=t.gl()+131,a=t.yl()+120,l=0,u=0,c,f,d=0,p=0,m,g,y=(c=r<i?(l=r,i):(l=i,r),f=h<e?(u=h,e):(u=e,h),m=o<i?(d=o,i):(d=i,o),g=a<e?(p=a,e):(p=e,a),0),w=0;for(let t=0,s=n.length;t<s;t+=2){const S=(t+2)%s,v=n[t],b=n[t+1],x=n[S],M=n[1+S];Ft.qr(r,h,i,e,l,c,u,f,v,b,x,M)&&++y,Ft.qr(o,a,i,e,d,m,p,g,v,b,x,M)&&++w}return y%2==1||w%2==1}ku(t,c,f){const d=t.Tu,p=this.Tu;if(this.Wl(d[0]+c,d[1]+f))return!0;if(t.Wl(p[0]-c,p[1]-f))return!0;for(let s=0,u=p.length;s<u;s+=2){let t=(s+2)%u,i=p[s],e=p[s+1],n=p[t],r=p[1+t],h=0,o=0,a,l;a=i<n?(h=i,n):(h=n,i),l=e<r?(o=e,r):(o=r,e);for(let t=0,s=d.length;t<s;t+=2){const m=(t+2)%s,g=d[t]+c,y=d[t+1]+f,w=d[m]+c,S=d[1+m]+f;if(Ft.qr(i,e,n,r,h,a,o,l,g,y,w,S))return!0}}return!1}mu(i,e,n,r,h,o){if(this.Wl(n-i,r-e))return!0;if(this.Wl(h-i,o-e))return!0;let a=0,l=0,u,c;u=n<h?(a=n,h):(a=h,n),c=r<o?(l=r,o):(l=o,r);const f=this.Tu;for(let t=0,s=f.length;t<s;t+=2){const d=(t+2)%s,p=f[t]+i,m=f[t+1]+e,g=f[d]+i,y=f[1+d]+e;if(Ft.qr(n,r,h,o,a,u,l,c,p,m,g,y))return!0}return!1}wu(i){const e=this.Tu;for(let t=0,s=e.length;t<s;t+=2)e[t]=2*i-e[t];this.Iu=!0}vu(i){const e=this.Tu;for(let t=0,s=e.length;t<s;t+=2){const n=t+1;e[n]=2*i-e[n]}this.Iu=!0}bu(){const i=this.Tu;for(let t=0,s=i.length;t<s;t+=2){const e=t+1,n=i[t];i[t]=i[e],i[e]=n}this.Iu=!0}Nu(){let i=this.Tu,e=0;for(let t=0,s=i.length;t<s;t+=2)e+=i[t];return e/this.Pu()}Bu(){let i=this.Tu,e=0;for(let t=0,s=i.length;t<s;t+=2)e+=i[t+1];return e/this.Pu()}Wu(){return this.Tu}ju(){return this.Pu()}Uu(){return this.Cu}}}{const Lt=self.Os;Lt.Vu=class extends Lt.Kn{constructor(t){if(super(),this.Hu=new Map,t)for(const[s,i,e]of t)this.Set(s,i,e)}ir(){this.Clear(),this.Hu=null}zu(){return 0===this.Hu.size}Clear(){const t=this.Hu;for(const s of t.values())s.clear();t.clear()}Set(t,s,i){let e=this.Hu,n=e.get(t);n||(n=new Map,e.set(t,n)),n.set(s,i)}Ks(t,s){const i=this.Hu.get(t);return i&&i.get(s)}Zs(t,s){const i=this.Hu.get(t);return!!i&&i.has(s)}Ju(t,s){const i=this.Hu,e=i.get(t);if(!e)return!1;const n=e.delete(s);return n&&0===e.size&&i.delete(t),n}qu(t){const s=this.Hu,i=s.get(t);i&&(i.clear(),s.delete(t));for(const[e,n]of s.entries())n.delete(t)&&0===n.size&&s.delete(e)}$u(){let t=0;for(const s of this.Hu.values())t+=s.size;return t}*values(){for(const t of this.Hu.values())yield*t.values()}*Xu(){for(const[t,s]of this.Hu.entries())for(const i of s.keys())yield[t,i]}*entries(){for(const[t,s]of this.Hu.entries())for(const[i,e]of s.entries())yield[t,i,e]}}}{const kt=self.Os;kt.Yu=class extends kt.Kn{constructor(){super(),this.Zu=new Set,this.Ku=[],this.Qu=!1}ir(){this.Clear()}Clear(){this.Zu.clear(),kt.Rh(this.Ku),this.Qu=!1}tc(t){this.Zu.has(t)||(this.Zu.add(t),this.Qu)||this.Ku.push(t)}Zs(t){return this.Zu.has(t)}Ju(t){this.Zu.delete(t)&&(this.Qu=!0)}$u(){return this.Zu.size}zu(){return 0===this.Zu.size}sc(){return this.Qu&&(this.ic(),this.Qu=!1),this.Ku}ic(){const t=this.Ku;kt.Rh(t);for(const s of this.Zu)t.push(s)}}}{const Nt=self.Os,Bt=new Map,Wt=new Map,jt=new Map,Ut=new Map,Vt=new Map,Ht=new Map,zt=new Map,Jt=new Map,qt=new Map,$t=(qt.set("linear","noease"),qt.set("default","noease"),["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"]),Xt=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],Yt=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]),Zt=(self.ec=class rs{constructor(){}static nc(){return"default"}static rc(){return"noease"}static hc(t){return Yt.get(t)}static oc(s,...i){this.ac();let t,e=(s?(jt.has(s)||jt.set(s,new Map),[...(t=jt.get(s)).keys()].filter(t=>!rs.lc(t,s)||rs.lc(t,s).transition.IsForAnyPurpose())):[...(t=Vt).keys()]).sort();return[...Wt.keys()].concat(e).filter(t=>!i.includes(t))}static uc(){this.ac();const t=[...Vt.keys()];return t.sort(),[...Wt.keys()].concat(t)}static cc(){this.ac();const t=[...Vt.keys()];return t.sort(),t}static fc(t){for(const s of $t){const i=self.lang("ui.bars.timeline.eases."+s);if(i===t)return!0}for(const e of Xt){const n=self.lang("ui.bars.timeline.short-eases."+e);if(n===t)return!0}}static dc(t){return this.ac(),[...Wt.keys()].includes(t)}static mc(t){const s=qt.get(t);return s?Bt.get(s):rs.dc(t)?Bt.get(t):zt.has(t)?zt.get(t):void 0}static yc(t){return this.ac(),Jt.get(t)}static wc(t,s){this.ac();const i=rs.mc(t);if(i)return i;if(s)return jt.get(s).get(t);throw new Error("missing ease function")}static lc(t,s){this.ac();const i=Ut.get(s);if(i)return i.get(t)}static Sc(t,s){this.ac();const i=rs.mc(t);return!!i||!!jt.get(s).get(t)}static vc(t){this.ac();const s=rs.mc(t);return s||Vt.get(t)}static xc(t){return this.ac(),Ht.get(t)}static Mc(t){this.ac();const s=this.uc();return s[t]}static Gc(t,s){this.ac();const i=this.oc(s);return i.indexOf(t)}static Tc(t){return this.Gc(t)}static ac(){0===Bt.size&&(this._c("default",()=>{}),this._c("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this._c("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this._c("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this._c("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this._c("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this._c("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this._c("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this._c("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this._c("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this._c("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this._c("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this._c("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this._c("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this._c("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this._c("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this._c("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this._c("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this._c("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this._c("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this._c("easeinquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this._c("easeoutquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this._c("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this._c("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this._c("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this._c("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this._c("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this._c("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this._c("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this._c("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this._c("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this._c("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.Ic("cubicbezier",this.Cc),this.Ic("spline",this.Ec))}static _c(t,s,i=!1){if("function"==typeof s)rs.Pc(t,s,"predefined");else{if(!Nt.De(s))throw new Error("unexpected arguments");if(self.BuiltInTransition){const n=Nt.tr(self.BuiltInTransition,t,i);n.SetFromJson(s),rs.Pc(t,(t,s,i,e)=>n.Rc(t,s,i,e),"predefined"),Jt.set(t,n)}else{const r=Nt.tr(Nt.Ac,[t,s.map(t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee])],!1);r.Fc(i),rs.Pc(t,(t,s,i,e)=>r.Rc(t,s,i,e),"predefined")}}}static Ic(t,s){rs.Pc(t,s,"private")}static Oc(t,s,i,e){this.ac(),rs.Pc(t,s,"custom",i,e)}static Dc(t,s){if(!this.dc(t)&&![...zt.keys()].includes(t)){const i=jt.get(s),e=(i&&i.delete(t),Ut.get(s));e&&e.delete(t)}}static Pc(t,s,i,e,n){switch(i){case"predefined":Bt.set(t,s),Wt.set(t,s);break;case"custom":if(e){jt.has(e)||jt.set(e,new Map),Ut.has(e)||Ut.set(e,new Map);const r=jt.get(e),h=(r.set(t,s),Ut.get(e));h.set(t,n)}else Vt.set(t,s),Ht.set(t,n);break;case"private":Bt.set(t,s),zt.set(t,s);break;default:throw new Error("unexpected ease mode")}}static Lc(t,s,i,e){return 0===e?s:i*t/e+s}static Cc(t,s,i,e,n){const r=s,h=3*t*(i-s),o=3*t**2*(s+e-2*i),a=t**3*(n-s+3*i-3*e);return r+h+o+a}static Ec(t,s,i,e,n,r,h,o,a,l){if(e===n&&r===h)return t;const u=ns(t,s,e,r,o,l),c=Qt(i,n,h,a),f=ts(i,n,h,a),d=ss(i,n,h,a);return is(u,c,f,d)}static kc(t,s,i,e){const n=[],r=Qt(t,s,i,e),h=ts(t,s,i,e),o=ss(t,s,i,e);for(let t=0;t<Zt;++t){const a=is(t*Kt,r,h,o);n.push(a)}return n}},11),Kt=1/(Zt-1),Qt=(t,s,i,e)=>e-3*i+3*s-t,ts=(t,s,i,e)=>3*i-6*s+3*t,ss=(t,s,i,e)=>3*(s-t),is=(t,s,i,e)=>((s*t+i)*t+e)*t,es=(t,s,i,e)=>3*s*t*t+2*i*t+e,ns=(h,t,s,i,e,n)=>{if(1==h)return 1;let o=0,r=1,a=n[r],l=Zt-1;for(Zt;r!=l&&a<=h;)r++,a=n[r],o+=Kt;r--;let u=(h-(a=n[r]))/(n[r+1]-a),c=o+u*Kt,f=Qt(t,s,i,e),d=ts(t,s,i,e),p=ss(t,s,i,e),m=es(c,f,d,p);if(0===m)return c;if(.01<=m){for(let t=0;t<4;++t){const g=is(c,f,d,p)-h,y=es(c,f,d,p);c-=g/y}return c}{let s=o,i=o+Kt,e=0,n,r;do{c=s+(i-s)/2;let t=is(c,f,d,p)-h;0<t?i=c:s=c,n=1e-7<Math.abs(t),r=++e<10}while(n&&r);return c}}}{let o=function(t){hs.Se(t)};o;const hs=self.Os;hs.Nc=class{constructor(t){this.Bc=[],this.rr=t||"",this.Wc=0}ir(){this.Clear(),this.Bc=null}jc(){return this.rr}Clear(){hs.Ah(this.Bc),this.Wc=0}Uc(){return this.Wc}Vc(t=Math.random()*this.Uc()){let s=0;for(const[i,e]of this.Bc)if(t<(s+=i))return e;return 0}Hc(t,s){o(s),this.Wc+=t,this.Bc.push([t,s])}zc(s,i){o(i);const e=0===s;for(let t=0;t<this.Bc.length;t++){const n=this.Bc[t],r=e||n[0]===s,h=n[1]===i;if(r&&h){this.Bc.splice(t,1),this.Wc-=n[0];break}}}Jc(){return JSON.stringify(this.Bc)}static qc(t,s){const i=new hs.Nc(s),e=JSON.parse(t);for(const n of e){const r=n[0],h=n[1];i.Hc(r,h)}return i}}}{let t=self.Os,i=0;t.$c=class{constructor(t,s){this.Xc=t,this.Yc=s,this.Zc=i++,this.Xc.Kc("runtime","screen-reader-text",{type:"create",id:this.Zc,text:this.Yc})}ir(){this.Xc.Kc("runtime","screen-reader-text",{type:"release",id:this.Zc}),this.Xc=null,this.Yc="",this.Zc=-1}Qc(t){this.Yc!==t&&(this.Yc=t,this.Xc.Kc("runtime","screen-reader-text",{type:"update",id:this.Zc,text:this.Yc}))}}}{const os=self.Os;os.Event=class{constructor(t,s){this.type=t,this.cancelable=!!s,this.defaultPrevented=!1,this.tf=!1,this.if=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.if)throw new Error(`cannot stop async event '${this.type}' propagation`);this.tf=!0}}}{const as=self.Os;as.Event.ef=class extends as.Kn{constructor(t){super(),this.nf=t,this.rf=[],this.hf=new Set,this.lf=[],this.uf=new Set,this.cf=0,this.ff=[]}ir(){0<this.cf||(as.Rh(this.rf),this.hf.clear(),as.Rh(this.lf),this.uf.clear(),as.Rh(this.ff),as.ir(this))}df(t,s){this.pf()?this.ff.push({mf:"add",gf:t,capture:s}):s?this.hf.has(t)||(this.rf.push(t),this.hf.add(t)):this.uf.has(t)||(this.lf.push(t),this.uf.add(t))}yf(t,s){this.pf()?this.ff.push({mf:"remove",gf:t,capture:s}):s?this.hf.has(t)&&(this.hf.delete(t),as.kh(this.rf,t)):this.uf.has(t)&&(this.uf.delete(t),as.kh(this.lf,t))}wf(){return!this.rf.length&&!this.lf.length}pf(){return 0<this.cf}Sf(){const t=new Set,s=new Set;for(const i of this.ff)if("add"===i.mf)this.df(i.gf,i.capture),(i.capture?s:t).delete(i.gf);else{if("remove"!==i.mf)throw new Error("invalid op");(i.capture?(this.hf.delete(i.gf),s):(this.uf.delete(i.gf),t)).add(i.gf)}as.Wh(this.lf,t),as.Wh(this.rf,s),as.Rh(this.ff)}vf(i){this.bf();let e=!1;for(let t=0,s=this.rf.length;t<s;++t)if(this.rf[t](i),i.tf){e=!0;break}if(!e)for(let t=0,s=this.lf.length;t<s&&(this.lf[t](i),!i.tf);++t);return this.xf(),!i.defaultPrevented}Mf(i){this.bf();for(let t=0,s=this.rf.length;t<s;++t)this.rf[t](i);for(let t=0,s=this.lf.length;t<s;++t)this.lf[t](i);return this.xf(),!0}bf(){this.cf++}xf(){this.cf--,0===this.cf&&0<this.ff.length&&this.Sf()}Gf(t){t?this.bf():this.xf()}Tf(i){let e=[];for(let s=0,t=this.rf.length;s<t;++s){let t=this.rf[s];e.push(as._f(()=>t(i)))}for(let s=0,t=this.lf.length;s<t;++s){let t=this.lf[s];e.push(as._f(()=>t(i)))}return Promise.all(e).then(()=>!i.defaultPrevented)}If(i){const e=[];this.bf();for(let t=0,s=this.rf.length;t<s;++t){const n=this.rf[t](i);n instanceof Promise&&e.push(n)}for(let t=0,s=this.lf.length;t<s;++t){const r=this.lf[t](i);r instanceof Promise&&e.push(r)}return this.xf(),e.length?Promise.all(e).then(()=>!i.defaultPrevented):!i.defaultPrevented}async Cf(t){return this.If(t)}async Ef(i){this.bf();for(let t=0,s=this.rf.length;t<s;++t){const e=this.rf[t](i);e instanceof Promise&&await e}for(let t=0,s=this.lf.length;t<s;++t){const n=this.lf[t](i);n instanceof Promise&&await n}return this.xf(),!i.defaultPrevented}*Pf(i){this.bf();for(let t=0,s=this.rf.length;t<s;++t){const e=this.rf[t](i);as.Oo(e)&&(yield*e)}for(let t=0,s=this.lf.length;t<s;++t){const n=this.lf[t](i);as.Oo(n)&&(yield*n)}this.xf()}}}{const ls=self.Os;ls.Event.Rf=class extends ls.Kn{constructor(){super(),this.Af=new Map,this.Ff=!1}ir(){if(this.Ff)throw new Error("already released");this.Of(),this.Ff=!0,ls.ir(this)}er(){return this.Ff}Of(){if(this.Af){for(let t of this.Af.values())t.ir();this.Af.clear()}}Df(t,s){let i=this.Af.get(t);return i||(s?(i=ls.tr(ls.Event.ef,t),this.Af.set(t,i),i):null)}Lf(t){return this.Af.has(t)}addEventListener(t,s,i){let e=this.Df(t,!0);e.df(s,!!i)}removeEventListener(t,s,i){let e=this.Df(t,!1);e&&(e.yf(s,!!i),e.wf())&&this.Af.delete(t)}dispatchEvent(t){const s=this.Df(t.type,!1);return!s||(t.cancelable?s.vf(t):s.Mf(t))}kf(t){const s=this.Df(t.type,!1);return s?(t.if=!0,s.Tf(t)):Promise.resolve(!0)}async Nf(t){const s=this.Df(t.type,!1);if(!s)return!0;this.Af.delete(t.type),t.if=!0;const i=await s.Tf(t);return s.ir(),i}async Bf(t){const s=this.Df(t.type,!1);return!s||s.Cf(t)}Wf(t){const s=this.Df(t.type,!1);return!s||s.If(t)}async jf(t){const s=this.Df(t.type,!1);return!s||s.Ef(t)}Uf(t){const s=this.Df(t.type,!1);if(!s)return null;if(t.cancelable)throw new Error("not supported");return s.Pf(t)}Gf(t){for(const s of this.Af.values())s.Gf(t)}}}{let r=function(t){c=l&&0===f?requestIdleCallback(s,{timeout:i}):setTimeout(s,0<f?1:t)},s=function(n){if(c=-1,u.length){let i=performance.now(),e=i,t=0,s;for(;h(u.shift()),e=performance.now(),++t,s=(e-i)/t*1.1,u.length&&(l&&0===f&&void 0!==n?s<n.timeRemaining():e-i+s<o););if(-1===c&&u.length){let t=e-i,s=Math.max(a-t,4);r(s)}}},h=function(s){let t;try{t=s.gf()}catch(t){return void s.reject(t)}s.resolve(t)},t=(r,s,h,self.Os),o=12,a=16,i=35,l="undefined"!=typeof requestIdleCallback,u=[],c=-1,f=0,n=t.si.Zs("disable-asyncify");n&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),t._f=function(i){let e=null;return t.isDebug&&(e=t.oe()),new Promise((t,s)=>{u.push({gf:i,resolve:t,reject:s,stack:e}),n?h(u.pop()):-1===c&&r(a)})},t._f.Vf=function(t){if(t)++f;else if(--f<0)throw new Error("already turned off high throughput mode")}}{let t=function(){r=-1},s=function(){h=-1,o=-1;let i=Date.now();for(let s of a)if(s.Hf(i)){let t=s.zf();(-1===o||t<o)&&(o=t)}else a.delete(s);if(-1!==o){let t=Math.max(o-i+n,e);h=self.setTimeout(s,t)}},i=(t,s,self.Os),e=1e3,n=100,r=-1,h=(i.Jf=function(){return-1===r&&(r=Date.now(),self.setTimeout(t,16)),r},-1),o=-1,a=new Set;i.qf=class{constructor(t,s){this.$f=t,this.Xf=1e3*s,this.Yf=0,this.Zf=!1}Kf(){let t=i.Jf();this.Yf=t+this.Xf,this.Zf||(a.add(this),this.Zf=!0),-1===h?(o=this.Yf,h=self.setTimeout(s,this.Xf+n)):this.Yf<o&&o>t+e&&(self.clearTimeout(h),o=this.Yf,h=self.setTimeout(s,this.Xf+n))}Hf(t){return!(t>=this.Yf)||(this.$f()?(this.Yf=t+this.Xf,!0):this.Zf=!1)}zf(){return this.Yf}Qf(){this.Zf&&(a.delete(this),this.Zf=!1,0===a.size)&&-1!==h&&(self.clearTimeout(h),h=-1,o=-1)}ir(){this.Qf(),this.$f=null}}}{const us=self.Os;us.t0=class cs{constructor(t){this.s0=!1,this.i0=t}e0(){this.s0||(this.s0=!0,this.i0&&(this.i0(),this.i0=null))}n0(){return this.s0}ir(){this.e0()}static ir(t){return new cs(()=>t.ir())}static r0(s,i,e,n,t){if(null==n)n=!1;else if("boolean"!=typeof n&&"object"!=typeof n)throw new TypeError("invalid event listener options");if(t&&(e=e.bind(t)),i.includes(" ")){i=i.split(" ");const r=new us.h0;for(let t of i)s.addEventListener(t,e,n),r.tc(us.tr(us.t0,()=>s.removeEventListener(t,e,n)));return r}return s.addEventListener(i,e,n),us.tr(us.t0,()=>s.removeEventListener(i,e,n))}},us.o0=class extends us.t0{a0(t){this.i0=t}},us.h0=class extends us.t0{constructor(...s){super(),this.l0=new Set;for(let t of s)this.tc(t)}tc(...s){if(this.s0)throw new Error("already disposed");for(let t of s)this.l0.add(t)}u0(t){if(this.s0)throw new Error("already disposed");this.l0.delete(t)}c0(){if(this.s0)throw new Error("already disposed");if(this.l0){for(let t of this.l0)t.e0();this.l0.clear()}}n0(){return this.s0}e0(){if(this.s0)throw new Error("already disposed");this.s0=!0;for(let t of this.l0)t.e0();this.l0.clear(),this.l0=null}ir(){this.e0()}}}{const fs=self.Os;fs.f0=class extends fs.Kn{constructor(){super(),this.d0=0,this.Ja=0,this.p0=0,this.m0=0}tc(t){this.Ja=(t=+t)-this.d0,this.p0=this.m0+this.Ja,this.d0=this.p0-this.m0-this.Ja,this.m0=this.p0}g0(t){this.m0-=+t}Ks(){return this.m0}Kf(){this.d0=0,this.Ja=0,this.p0=0,this.m0=0}Set(t){this.d0=0,this.Ja=0,this.p0=0,this.m0=+t}y0(t){this.d0=t.d0,this.Ja=t.Ja,this.p0=t.p0,this.m0=t.m0}ir(){}}}{const ds=self.Os,h={};h.w0=function(t){this.S0=t,this.right=this.S0.v0,this.left=this.S0.v0,this.parent=null,this.color=!1,this.key=null},h.b0=function(t){this.size=0,this.v0=new h.w0(this),this.v0.color=!1,this.root=this.v0,this.root.parent=this.v0,this.compare=t||this.x0},h.b0.prototype.x0=function(t,s){return t<s?-1:s<t?1:0},h.b0.prototype.clone=function(){var t=new h.b0(this.compare);return t.M0(this),t},h.b0.prototype.clear=function(){this.size=0,this.v0=new h.w0(this),this.v0.color=!1,this.root=this.v0,this.root.parent=this.v0},h.b0.prototype.G0=function(t){var s=t.right;t.right=s.left,s.left!=this.v0&&(s.left.parent=t),s.parent=t.parent,t.parent==this.v0?this.root=s:t==t.parent.left?t.parent.left=s:t.parent.right=s,(s.left=t).parent=s},h.b0.prototype.T0=function(t){var s=t.left;t.left=s.right,s.right!=this.v0&&(s.right.parent=t),s.parent=t.parent,t.parent==this.v0?this.root=s:t==t.parent.right?t.parent.right=s:t.parent.left=s,(s.right=t).parent=s},h.b0.prototype._0=function(t){if(this.contains(t))this.I0(t).key=t;else{for(var s=new h.w0(this),i=(s.key=t,this.v0),e=this.root;e!=this.v0;)i=e,e=this.compare(s.key,e.key)<0?e.left:e.right;(s.parent=i)==this.v0?this.root=s:this.compare(s.key,i.key)<0?i.left=s:i.right=s,s.left=this.v0,s.right=this.v0,s.color=!0,this.C0(s),this.size++}},h.b0.prototype.C0=function(t){for(;t!=this.v0&&t!=this.root&&1==t.parent.color;){var s;t.parent==t.parent.parent.left?1==(s=t.parent.parent.right).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.G0(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.v0&&this.T0(t.parent.parent)):1==(s=t.parent.parent.left).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.T0(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.v0&&this.G0(t.parent.parent))}this.root.color=!1},h.b0.prototype.E0=function(t){var s=t.left==this.v0||t.right==this.v0?t:this.P0(t),i=s.left!=this.v0?s.left:s.right;i.parent=s.parent,s.parent==this.v0?this.root=i:s==s.parent.left?s.parent.left=i:s.parent.right=i,s!=t&&(t.key=s.key),0==s.color&&this.R0(i),this.size--},h.b0.prototype.R0=function(t){for(;t!=this.root&&0==t.color;){var s;t=t==t.parent.left?(1==(s=t.parent.right).color&&(s.color=!1,t.parent.color=!0,this.G0(t.parent),s=t.parent.right),0==s.left.color&&0==s.right.color?(s.color=!0,t.parent):(0==s.right.color&&(s.left.color=!1,s.color=!0,this.T0(s),s=t.parent.right),s.color=t.parent.color,t.parent.color=!1,s.right.color=!1,this.G0(t.parent),this.root)):(1==(s=t.parent.left).color&&(s.color=!1,t.parent.color=!0,this.T0(t.parent),s=t.parent.left),0==s.right.color&&0==s.left.color?(s.color=!0,t.parent):(0==s.left.color&&(s.right.color=!1,s.color=!0,this.G0(s),s=t.parent.left),s.color=t.parent.color,t.parent.color=!1,s.left.color=!1,this.T0(t.parent),this.root))}t.color=!1},h.b0.prototype.remove=function(t){var s;return(t=this.I0(t))!=this.v0?(s=t.key,this.E0(t),s):null},h.b0.prototype.A0=function(t,s){this.remove(s)},h.b0.prototype.min=function(t){for(;t.left!=this.v0;)t=t.left;return t},h.b0.prototype.max=function(t){for(;t.right!=this.v0;)t=t.right;return t},h.b0.prototype.P0=function(t){if(t.right!=this.v0)return this.min(t.right);for(var s=t.parent;s!=this.v0&&t==s.right;)s=(t=s).parent;return s},h.b0.prototype.F0=function(t){if(t.left!=this.v0)return this.max(t.left);for(var s=t.parent;s!=this.v0&&t==s.left;)s=(t=s).parent;return s},h.b0.prototype.O0=function(t){if(0<this.size){var s=this.I0(t);if(s==this.v0)return null;if(s.right!=this.v0)return this.min(s.right).key;for(var i=s.parent;i!=this.v0&&s==i.right;)i=(s=i).parent;return i!=this.v0?i.key:null}return null},h.b0.prototype.D0=function(t){if(0<this.size){var s=this.I0(t);if(s==this.v0)return null;if(s.left!=this.v0)return this.max(s.left).key;for(var i=s.parent;i!=this.v0&&s==i.left;)i=(s=i).parent;return i!=this.v0?i.key:null}return null},h.b0.prototype.L0=function(){return this.min(this.root).key},h.b0.prototype.k0=function(){return this.max(this.root).key},h.b0.prototype.I0=function(t){for(var s=this.root;s!=this.v0&&0!=this.compare(s.key,t);)s=this.compare(t,s.key)<0?s.left:s.right;return s},h.b0.prototype.contains=function(t){return null!=this.I0(t).key},h.b0.prototype.getValues=function(){var s=[];return this.forEach(function(t){s.push(t)}),s},h.b0.prototype.M0=function(t){if("array"==h.typeOf(t))for(var s=0;s<t.length;s++)this._0(t[s]);else if("function"==h.typeOf(t.forEach))t.forEach(this._0,this);else if("function"==h.typeOf(t.getValues))for(var i=t.getValues(),s=0;s<i.length;s++)this._0(i[s]);else if("object"==h.typeOf(t))for(var e in t)this._0(t[e])},h.b0.prototype.N0=function(t){if("array"==h.typeOf(t))for(var s=0;s<t.length;s++)this.remove(t[s]);else if("function"==h.typeOf(t.forEach))t.forEach(this.A0,this);else if("function"==h.typeOf(t.getValues))for(var i=t.getValues(),s=0;s<i.length;s++)this.remove(i[s]);else if("object"==h.typeOf(t))for(var e in t)this.remove(t[e])},h.b0.prototype.B0=function(t){if("array"==h.typeOf(t)){for(var s=0;s<t.length;s++)if(!this.contains(t[s]))return!1;return!0}if("function"==h.typeOf(t.forEach))return t.every(this.contains,this);if("function"==h.typeOf(t.getValues)){for(var i=t.getValues(),s=0;s<i.length;s++)if(!this.contains(i[s]))return!1;return!0}if("object"==h.typeOf(t)){for(var e in t)if(!this.contains(t[e]))return!1;return!0}},h.b0.prototype.range=function(t,s){var i=[];return this.W0(function(t){i.push(t)},t,s),i},h.b0.prototype.j0=function(t,s){if(!this.U0())for(var i=this.min(this.root);i!=this.v0;){if(t.call(s,i.key,this))return;i=this.P0(i)}},h.b0.prototype.V0=function(t,s,i){if(!this.U0())for(var e=this.I0(s);e!=this.v0;){if(t.call(i,e.key,this))return;e=this.P0(e)}},h.b0.prototype.H0=function(t,s,i){if(!this.U0())for(var e=this.min(this.root),n=this.I0(s);e!=n;){if(t.call(i,e.key,this))return;e=this.P0(e)}},h.b0.prototype.W0=function(t,s,i,e){if(!this.U0())for(var n=this.I0(s),r=this.I0(i);n!=r;){if(t.call(e,n.key,this))return;n=this.P0(n)}},h.b0.prototype.z0=function(t,s){if(!this.U0())for(var i=this.max(this.root);i!=this.v0;){if(t.call(s,i.key,this))return;i=this.F0(i)}},h.b0.prototype.forEach=function(t,s){if(!this.U0())for(var i=this.min(this.root);i!=this.v0;i=this.P0(i))t.call(s,i.key,i.key,this)},h.b0.prototype.some=function(t,s){if(!this.U0())for(var i=this.min(this.root);i!=this.v0;i=this.P0(i))if(t.call(s,i.key,i.key,this))return!0;return!1},h.b0.prototype.every=function(t,s){if(this.U0())return!1;for(var i=this.min(this.root);i!=this.v0;i=this.P0(i))if(!t.call(s,i.key,i.key,this))return!1;return!0},h.b0.prototype.map=function(t,s){var i=[];if(!this.U0())for(var e=this.min(this.root);e!=this.v0;e=this.P0(e))i.push(t.call(s,e.key,e.key,this));return i},h.b0.prototype.filter=function(t,s){var i=[];if(!this.U0())for(var e=this.min(this.root);e!=this.v0;e=this.P0(e))t.call(s,e.key,e.key,this)&&i.push(e.key);return i},h.b0.prototype.getCount=function(){return this.size},h.b0.prototype.U0=function(){return 0==this.size},h.b0.prototype.he=function(t){var s=h.getCount(t);if(this.getCount()>s)return!1;var i=0;if(this.U0())return!0;for(var e=this.min(this.root);e!=this.v0;e=this.P0(e))h.contains.call(t,t,e.key)&&i++;return i==this.getCount()},h.b0.prototype.J0=function(t){var s=new h.b0(this.compare);if(!this.U0())for(var i=this.min(this.root);i!=this.v0;i=this.P0(i))t.contains.call(t,i.key,i.key,this)&&s._0(i.key);return s},ds.b0=class extends ds.Kn{constructor(t){super(),this.q0=new h.b0(t),this.$0=!1,this.X0=new Set,this.Y0=new Set}tc(t){this.$0?this.q0.contains(t)?this.Y0.delete(t):this.X0.add(t):this.q0._0(t)}u0(t){this.$0?this.q0.contains(t)?this.Y0.add(t):this.X0.delete(t):this.q0.remove(t)}Zs(t){return this.$0?!!this.X0.has(t)||!this.Y0.has(t)&&this.q0.contains(t):this.q0.contains(t)}Clear(){this.q0.clear(),this.X0.clear(),this.Y0.clear()}toArray(){if(this.$0)throw new Error("cannot be used in queueing mode");return this.q0.getValues()}$u(){return this.q0.getCount()+this.X0.size-this.Y0.size}zu(){return 0===this.$u()}Z0(){if(this.zu())throw new Error("empty set");if(this.$0)throw new Error("cannot be used in queueing mode");const t=this.q0,s=t.min(t.root);return s.key}K0(){if(this.zu())throw new Error("empty set");if(this.$0)throw new Error("cannot be used in queueing mode");const t=this.Z0();return this.u0(t),t}Q0(t){if(this.$0!==(t=!!t)&&!(this.$0=t)){for(const s of this.Y0)this.q0.remove(s);this.Y0.clear();for(const i of this.X0)this.q0._0(i);this.X0.clear()}}td(t){this.q0.forEach(t)}*values(){if(!this.zu()){const s=this.q0;for(let t=s.min(s.root);t!=s.v0;t=s.P0(t))yield t.key}}[Symbol.iterator](){return this.values()}}}{const ps=self.Os;ps.sd=class{constructor(t=ps.hardwareConcurrency){this.ed=t,this.nd=[],this.rd=0}tc(i){return new Promise((t,s)=>{this.nd.push({gf:i,resolve:t,reject:s}),this.hd()})}od(i){for(let t=0,s=this.nd.length;t<s;++t)if(this.nd[t].gf===i)return t;return-1}ad(t,s){const i=this.od(t);if(-1===i)throw new Error("cannot find promise to resolve");this.nd[i].resolve(s),this.nd.splice(i,1)}ld(t,s){const i=this.od(t);if(-1===i)throw new Error("cannot find promise to reject");this.nd[i].reject(s),this.nd.splice(i,1)}async hd(){if(this.nd.length&&!(this.rd>=this.ed)){this.rd++;const s=this.nd.shift();try{const t=await s.gf();s.resolve(t)}catch(t){s.reject(t)}this.rd--,this.hd()}}static async ud(t,s){let i=[],e=!1,n=[];for(;t--;)n.push((async()=>{let t;for(;t=s.pop();){if(e)return;try{i.push(await t())}catch(t){throw e=!0,t}}})());return await Promise.all(n),i}}}{const ms=self.Os;ms.fd=class{constructor(t,s,i){this.$f=t,this.dd=s,this.pd=i||2*s,this.md=-1,this.gd=-1/0,this.yd=()=>this.wd(),this.Sd=!1,this.vd=!1,this.bd=null}xd(t){this.vd=!!t}Md(){return void 0!==ms.Battery&&ms.Battery.IsOnBatteryPower()?this.pd:this.dd}Gd(...e){if(-1===this.md){this.bd=e;let t=ms.Jf(),s=t-this.gd,i=this.Md();i<=s&&this.vd?(this.gd=t,this.Td()):this.md=self.setTimeout(this.yd,Math.max(i-s,4))}}Td(){this.Sd=!0;const t=this.bd;this.bd=null,t?this.$f(...t):this.$f(),this.Sd=!1}Kf(){this.Sd||(this._d(),this.bd=null,this.gd=ms.Jf())}wd(){this.md=-1,this.gd=ms.Jf(),this.Td()}_d(){-1!==this.md&&(self.clearTimeout(this.md),this.md=-1)}ir(){this._d(),this.$f=null,this.bd=null,this.yd=null}}}{const gs=self.Os;gs.Id=class{constructor(){this.Cd=new Map,this.Ed=!1,this.Pd=null,this.Rd=null,this.Ad=null,this.Fd=null}Od(t){this.Ed=!!t}Dd(){return this.Ed}Ld(t){this.Pd=t}kd(t){if(this.Pd)return this.Pd(t);throw new Error("no get base size callback set")}Nd(t){this.Rd=t}Bd(t,s,i,e,n,r){if(this.Rd)return this.Rd(t,s,i,e,n,r);throw new Error("no raster at size callback set")}Wd(t){this.Ad=t}jd(t){if(!this.Ad)throw new Error("no release result callback set");this.Ad(t)}Ud(t){this.Fd=t}Vd(){if(!this.Fd)throw new Error("no redraw callback set");this.Fd()}Hd(t){let s=this.Cd.get(t);return s||(s=gs.tr(gs.zd,this,t),this.Cd.set(t,s)),s.Jd(),s}qd(t){this.Cd.delete(t.$d())}Xd(){for(const t of this.Cd.values())t.Yd(),t.Zd()}}}{const ys=self.Os;ys.zd=class{constructor(t,s){this.Kd=t,this.Qd=s,this.t1=0,this.s1=0,this.i1=0,this.e1=this.Kd.kd(s).then(t=>{this.Kd&&(this.s1=t[0],this.i1=t[1],this.Kd.Vd())}).catch(t=>{console.error("[SVG] Error loading SVG: ",t),this.n1=!0,this.Kd&&this.Kd.Vd()}),this.h1=0,this.o1=0,this.a1=0,this.l1=0,this.u1=!1,this.c1=null,this.f1=!1,this.n1=!1}ir(){if(this.t1<=0)throw new Error("already released");this.t1--,0===this.t1&&this.d1()}Yd(){this.c1&&(this.Kd.jd(this.c1),this.c1=null)}d1(){this.Yd(),this.Kd.qd(this),this.Kd=null}$d(){return this.Qd}Jd(){this.t1++}m1(){return 0<this.t1}g1(){return this.c1}Zd(){this.f1=!0}async w1(e,n,r){if(0!==n&&0!==r&&!this.n1&&!this.u1){let t=ys.Ar(Math.ceil(n)),s=ys.Ar(Math.ceil(r)),i=Math.max(t,s);if(4096<i){const h=4096/i;n*=h,r*=h,t=Math.min(Math.ceil(t*h),4096),s=Math.min(Math.ceil(s*h),4096)}if(n<t&&r<s){const o=n/r,a=t/s;r=o<a?(n=s*o,s):(n=t)/o}if(this.Kd.Dd()&&(t=Math.ceil(n),s=Math.ceil(r)),!(t<=this.h1&&s<=this.o1)||this.f1){this.u1=!0,this.h1=t,this.o1=s;const l=await this.Kd.Bd(this.Qd,e,this.h1,this.o1,n,r);this.Kd&&(this.Yd(),this.c1=l,this.a1=n,this.l1=r,this.u1=!1,this.f1=!1,this.Kd.Vd())}}}S1(){return this.e1}v1(){return this.s1}b1(){return this.i1}M1(){return this.a1}G1(){return this.l1}T1(){return this.n1}}}{let s=function(t){return bs.get(t)};s;const c=self.Os,ws=(c._1="\ufeff",new Set("0123456789")),Ss=(c.I1=function(t){return ws.has(t)},new Set(" \t\n\r            ​\u2028\u2029  　"));c.C1=function(t){return Ss.has(t)},c.E1=function(t){return[...t].filter(t=>!c.C1(t)).join("")},c.P1=function(t){for(const s of t)if(!c.C1(s))return!1;return!0},c.R1=function(t){for(const s of t)if(!c.C1(s))return!1;return!0},c.A1=function(t){return 1===t.length&&t.charCodeAt(0)<32},c.F1=function(t){return[...t].filter(t=>!c.A1(t)).join("")};let i=null;try{i=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(t){console.warn("Unable to detect CJK punctuation: ",t)}c.O1=function(t){return!c.C1(t)&&i&&i.test(t)};const vs=new Set("0123456789.+-e"),bs=(c.D1=function(s){if(!(s=s.trim()).length)return!1;let t=s.charAt(0);if("-"!==t&&!ws.has(t))return!1;for(let t of s)if(!vs.has(t))return!1;return!0},c.L1=function(s){let i=s.length;for(;0<i;){let t=s.charAt(i-1);if(!c.I1(t))break;--i}return s.substr(0,i)},c.N1=function(t){let s=c.L1(t),i=t.substr(s.length);return s+(i?(parseInt(i,10)+1).toString():"2")},new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]])),xs=/[&<>"']/g,Ms=(c.B1=function(t){return t.replace(xs,s)},c.W1=function(t){let s=c.j1(t,"\\","\\\\");return s=c.j1(s,'"','\\"'),s=c.j1(s,"\t","\\t"),s=c.j1(s,"\r",""),c.j1(s,"\n","\\n")},c.U1=function(t){let s=c.j1(t,"&","&amp;");return s=c.j1(s,"<","&lt;"),s=c.j1(s,">","&gt;"),c.j1(s,'"',"&quot;")},/[-[\]{}()*+?.,\\^$|#\s]/g),Gs=(c.re=function(t){return t.replace(Ms,"\\$&")},c.V1=function(t,s){let i=0;for(const e of t)e===s&&++i;return i},c.H1=function(t,s,i=!1){if(!s)return[];i||(t=t.toLowerCase(),s=s.toLowerCase());let e=s.length,n=0,r,h=[];for(;-1<(r=t.indexOf(s,n));)h.push(r),n=r+e;return h},c.j1=function(t,s,i){return t.replaceAll(s,()=>i)},c.z1=function(t,s,i){return t.replace(new RegExp(c.re(s),"gi"),()=>i)},c.J1=function(t,s){"string"==typeof s?t.textContent=s:s.q1()?t.textContent=s.toString():(t.innerHTML=s.X1(),s instanceof c.In&&s.Y1(t))},c.Z1=function(t,s){return t instanceof c.HtmlString||t instanceof c.In?t.equals(s):s instanceof c.HtmlString||s instanceof c.In?s.equals(t):t===s},c.K1=function(i,...e){let n=i;for(let t=0,s=e.length;t<s;++t){const r=`{${t}}`;if(!i.includes(r))throw new Error(`missing placeholder '${r}' in string substitution`);n=n.replace(r,e[t].toString())}return n},c.Q1=function(i,...e){let n=i,r=-1,h=-1;for(let t=0,s=e.length;t<s;++t){const o=`{${t}}`;i.includes(o)?(h=t,n=n.replace(o,e[t].toString())):-1===r&&(r=t)}if(0<=r&&0<=h&&r<h)throw new Error(`missing placeholder '${r}' in string substitution`);return n},c.tp=function(t,i){let e=t;for(let[t,s]of Object.entries(i))e=e.replaceAll(t,s.toString());return e},c.sp=function(t,s){return s<t?1:t<s?-1:0},c.ip=function(t,s){let i=t.toLowerCase(),e=s.toLowerCase();return e<i?1:i<e?-1:0},new self.Intl.Segmenter),Ts=(c.ep=function(t){const s=[];for(const i of Gs.segment(t))s.push(i.segment);return s},c.np=function*(t){for(const s of Gs.segment(t))yield s.segment},c.rp=function(t){let s=0;for(const i of Gs.segment(t))++s;return s},1073741824),_s=1024*Ts,Is={hp:!(c.op=function(s,t){let i="common."+(t?"dataRates":"dataSizes")+".",e=self.langSub;if(s<1024)return e(i+"bytes",s);if(s<1048576){let t=s/1024;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"kilobytes",t)}if(s<Ts){let t=s/1048576;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"megabytes",t)}if(s<_s){let t=s/Ts;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"gigabytes",t)}{let t=s/_s;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"terabytes",t)}}),lp:!0,up:!0,cp:!0,fp:!0};c.pp=function(t,s){s=Object.assign({},Is,s),c.Lang.PushContext("common.time");const i=[],e=self.lang,n=self.langPluralSub;if(s.lp){const h=Math.floor(t/86400);0<h&&(t-=24*h*3600,i.push(n(".days",null,h)))}if(s.up){const o=Math.floor(t/3600);(0<o||i.length)&&(t-=3600*o,i.push(n(".hours",null,o)))}if(s.cp){const a=Math.floor(t/60);(0<a||i.length||!s.fp)&&(t-=60*a,i.push(n(".minutes",null,a)))}if(s.fp){const l=Math.floor(t%60);i.push(n(".seconds",null,l))}const r=(s.hp?e(".approx-prefix"):"")+i.join(e(".separator"));return c.Lang.PopContext(),r},c.mp=function(t,s){let i=t<0?"-":"",e=(t=Math.abs(t)).toString(),n=s-e.length;for(let t=0;t<n;++t)i+="0";return i+e},c.gp=function(t){return t.toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())},c.yp=function(t,s){let i=t.split(".").map(t=>t.trim()),e=s.split(".").map(t=>t.trim());c.Oh(i,4,"0"),c.Oh(e,4,"0"),i=i.map(t=>parseInt(t,10)),e=e.map(t=>parseInt(t,10));for(let t=0;t<4;++t){const n=i[t]-e[t];if(0!=n)return n<0?-1:1}return 0},c.wp=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const s=Math.floor(16*Math.random()),i="x"===t?s:3&s|8;return i.toString(16)})},c.Sp=function(i,e){if(i.length!==e.length)throw new Error("strings must be same length");let n=0;for(let t=0,s=i.length;t<s;++t)i.charAt(t)!==e.charAt(t)&&++n;return n},c.vp=function(t,s){if(0===t.length)return s.length;if(0===s.length)return t.length;let i,e,n,r,h,o;for(s.length<t.length&&(i=t,t=s,s=i),o=Array(t.length+1),e=0;e<=t.length;e++)o[e]=e;for(e=1;e<=s.length;e++){for(r=e,n=1;n<=t.length;n++)h=s[e-1]===t[n-1]?o[n-1]:Math.min(o[n-1]+1,Math.min(r+1,o[n]+1)),o[n-1]=r,r=h;o[t.length]=r}return o[t.length]}}{let s=function(t,i,e){const n=o.get(e);if(!n)return"class"===e?i?"</span>":`<span class="bbclass${u++}">`:t;if("string"==typeof n){if("a"===n&&0===a.length||"abbr"===n&&0===l.length)return t;if("a"!==n||i){if("abbr"!==n||i)return"<"+i+n+">";{const r=parseInt(e.substring(3),10)-1;if(r<0||r>=l.length)throw new Error("invalid bbcode tip substitution");let t=l[r],s="";if("string"==typeof t?s=t:"function"==typeof t&&(s=t()),"string"!=typeof s)throw new TypeError("invalid bbcode tip");return`<abbr title="${f.j1(s,'"',"&quot;")}">`}}{const s=parseInt(e.substring(1),10)-1;if(s<0||s>=a.length)throw new Error("invalid bbcode link substitution");const h=a[s];if("string"==typeof h)return`<a href="${a[s]}">`;if("function"==typeof h)return`<a class="bblink${s}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(n)){let t=n[0],s=n[1];return i?"</"+t+">":`<${t} class="${s}">`}},f=(s,self.Os),o=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]]),d=new Set(["icon"]),i=/\[(\/?)([a-zA-Z0-9]+)\]/g,p=/\[(\/?)([^\[\n]*?)\]/g,a=null,l=null,u=0,e=/\n/g;f.In=class{constructor(t,s){if(this.bp=s&&s.xp?t:f.B1(t),this.Mp="",this.Gp=!1,this.Tp=[],this._p=[],s){if(this.Gp=!!s.convertLineBreaks,s.links){if(9<s.links.length)throw new Error("too many links");this.Tp=s.links}if(s.tips){if(9<s.tips.length)throw new Error("too many tips");this._p=s.tips}}this.Ip=this.bp.includes("["),this.Cp=this.Gp&&this.bp.includes("\n"),this.Ep=!this.Ip&&!this.Cp&&!this.bp.includes("&"),this.Pp=!1,this.Rp=[]}toString(){return this.bp}valueOf(){return this.bp}q1(){return this.Ep}Ap(){return this.Ip?this.bp.replace(i,""):this.bp}X1(){if(this.Ep)return this.bp;if(!this.Mp&&this.bp){let t=this.bp;this.Ip&&(u=0,a=this.Tp,l=this._p,t=t.replace(i,s),a=null,l=null),this.Cp&&(t=t.replace(e,"<br>")),this.Mp=t}return this.Mp}Y1(i){if(this.Tp.length)for(let t=0,s=this.Tp.length;t<s;++t){const e=this.Tp[t];if("function"==typeof e){const n=i.querySelector(".bblink"+t);if(!n)throw new Error("unable to attach BBString link handler");n.onclick=e}}}equals(t){return t instanceof f.HtmlString?this.X1()===t.X1():t instanceof f.In?this.bp===t.bp:this.bp===t}Fp(){if(!this.Pp){let e=[],t=this.bp,n=[],s=p.lastIndex=0,i;for(;null!==(i=p.exec(t));){const r=i.index;if(!(0<r&&"\\"===t.charAt(r-1))){const h=i[0],o=i[1],a=i[2],l=t.substring(s,r);if(s=r+h.length,l&&e.push({text:l,Op:n.slice(0)}),a)if(o){const u=a.toLowerCase();for(let t=n.length-1;0<=t;--t)if(n[t].tag===u){n.splice(t,1);break}}else{let t=a,s=null,i=a.indexOf("=");if(-1!==i?(t=a.substring(0,i).toLowerCase(),s=a.substring(i+1)):t=t.toLowerCase(),d.has(t)){if("icon"!==t)throw new Error("unknown self-closing tag "+t);e.push({icon:s,Op:n.slice(0)})}else n.push({tag:t,param:s})}}}s<t.length&&e.push({text:t.substring(s),Op:n.slice(0)});for(const c of e)c.text&&(c.text=this.Dp(c.text));this.Rp=e.map(t=>t.icon?f.tr(f.Lp,{icon:t.icon,Op:t.Op}):f.tr(f.kp,{Np:f.ep(t.text),Op:t.Op})),this.Pp=!0}return this.Rp}Dp(t){return t=f.j1(t,"\\[","["),f.j1(t,"\\\\","\\")}static Bp(t){return f.tr(f.In,t,{xp:!0}).Ap()}static Wp(t){return t.replace(p,"")}}}{let l=function(t){return" "!==t&&" "!==t&&w.C1(t)},a=function(t){return Cs.has(t)},u=function(t){return w.O1(t)&&!a(t)},c=function(t){for(;0<t.length&&l(t.at(-1));)t.pop()},y=function(t){return"\n"===t||"\r\n"===t};l,a,u,c,y;const w=self.Os,Cs=new Set("〈《「『【〔〖〘〚〝");w.jp=class{constructor(){this.Up=[],this.Vp=null}Hp(){return this.Up}zp(){return this.Up.length}Jp(t){this.Vp=t}qp(t,s){let i=0,e=0,n=0,r=0,h=0;for(const o of t){if(-1===o.$p()){const a=s(o);o.Xp(a.height),o.Yp(a.fontBoundingBoxAscent||0),o.Zp(a.fontBoundingBoxDescent||0),o.Kp(a.Qp||0),o.tm()?o.im(a.width):o.nm()&&o.rm(this.Vp)}i+=o.$p(),e=Math.max(e,o.hm()),n=Math.max(n,o.om()),r=Math.max(r,o.am()),h=Math.max(h,o.lm())}return{width:i,height:e,fontBoundingBoxAscent:n,fontBoundingBoxDescent:r,Qp:h}}um(t,s,i,e,n,r){this.Up.push(w.tr(w.jp.fm,{dm:t,width:s,height:i,fontBoundingBoxAscent:e,fontBoundingBoxDescent:n,Qp:r}))}jp(s,r,h,i,o){if("string"==typeof s&&(s=[w.tr(w.kp,{Np:w.ep(s)})]),w.Rh(this.Up),!(!s.length||1===s.length&&s[0].tm()&&s[0].zu()||h<2)){if(1===s.length){const a=s[0];if(a.tm()&&a.pm()<=100&&!a.gm()){let{width:t,height:s,fontBoundingBoxAscent:i,fontBoundingBoxDescent:e,Qp:n}=r(a);if(t+=o,a.im(t),a.Xp(s),a.Yp(i||0),a.Zp(e||0),a.Kp(n||0),t<=h)return void this.um([a],t,s,i,e,n)}}let t;t="word"===i?this.ym(s):"cjk"===i?this.wm(s):this.Sm(s),this.vm(t,r,h,o)}}ym(t){let s=[],i=[],e=!1;for(const n of t){const r=n.xm();if(n.nm())0<i.length&&s.push(i),s.push([n]),i=[];else for(const h of n.Mm())if(y(h))0<i.length&&s.push(i),s.push([w.tr(w.kp,{Np:["\n"],Op:r})]),i=[];else if(0===i.length)i.push(w.tr(w.kp,{Np:[h],Op:r})),e=l(h);else{const o=l(h);if(o===e){const a=i.at(-1);a.xm()===r?a.Gm(h):i.push(w.tr(w.kp,{Np:[h],Op:r}))}else s.push(i),i=[w.tr(w.kp,{Np:[h],Op:r})],e=o}}return 0<i.length&&s.push(i),s}wm(t){let s=[],i=[],e=!1;for(const n of t){const r=n.xm();if(n.nm())0<i.length&&s.push(i),s.push([n]),i=[];else for(const h of n.Mm())if(y(h))0<i.length&&s.push(i),s.push([w.tr(w.kp,{Np:["\n"],Op:r})]),i=[];else{if(0===i.length)i.push(w.tr(w.kp,{Np:[h],Op:r}));else if(e||u(h)){const o=i.at(-1);o.xm()===r?o.Gm(h):i.push(w.tr(w.kp,{Np:[h],Op:r}))}else s.push(i),i=[w.tr(w.kp,{Np:[h],Op:r})];e=a(h)}}return 0<i.length&&s.push(i),s}Sm(t){const s=[];for(const i of t)if(i.tm()){const e=i.Mm();w.Vn(s,e.map(t=>[w.tr(w.kp,{Np:[t],Op:i.xm()})]))}else s.push([i]);return s}Tm(t){return t.map(t=>t._m())}Im(s,i){let t=s.length?s.at(-1):null,e=0;t&&t.tm()&&i[0].tm()&&i[0].xm()===t.xm()&&(t.Cm(i[0].Mm()),e=1);for(let t=i.length;e<t;++e){const n=i[e];s.push(n._m())}}vm(t,s,i,e){let n=[],r=0,h=0,o=0,a=0,l=0;for(const u of t)if(1===u.length&&u[0].tm()&&1===u[0].pm()&&y(u[0].Mm()[0])){if(0===h){const c=w.tr(w.kp,{Np:[" "],Op:u[0].xm()}),f=s(c);h=f.height,o=f.fontBoundingBoxAscent||0,a=f.fontBoundingBoxDescent||0,l=f.Qp||0}this.um(n,r,h,o,a,l),n=[],r=0,h=0,o=0,a=0,l=0}else{const d=this.Tm(n),p=(this.Im(d,u),this.qp(d,s)),m=p.width;if(i<=m)if(0<n.length&&this.um(n,r,h,o,a,l),n=[],u[0].tm()&&w.R1(u[0].Mm()))r=0,h=0,o=0,a=0,l=0;else{this.Im(n,u);const g=this.qp(n,s);r=g.width,h=g.height,o=g.fontBoundingBoxAscent,a=g.fontBoundingBoxDescent,l=g.Qp}else n=d,r=m,h=p.height,o=p.fontBoundingBoxAscent,a=p.fontBoundingBoxDescent,l=p.Qp}0<n.length&&this.um(n,r,h,o,a,l),this.Em(s,e)}Em(s,i){for(const e of this.Up){const n=e.Pm();if(n.length){let t=n.at(-1);if(t.tm()){const r=t.Mm(),h=r.slice(0);if(c(h),0===h.length)e.Rm(-t.$p()),n.pop();else if(h.length<r.length){t.Am(h);const o=s(t).width,a=t.$p()-o;t.im(o),e.Rm(-a)}0!==i&&0<n.length&&((t=n.at(-1)).Rm(i),e.Rm(i))}}}}Clear(){w.Rh(this.Up)}Fm(){return this.Up.reduce((t,s)=>Math.max(t,s.$p()),0)}Om(){return this.Up.reduce((t,s)=>t+s.hm(),0)}}}{const Es=self.Os;Es.jp.fm=class{constructor(t){this.Rp=t.dm||[],this.Dm=t.width||-1,this.Lm=t.height||-1,this.km=t.fontBoundingBoxAscent||-1,this.Nm=t.fontBoundingBoxDescent||-1,this.Bm=t.Qp||-1,this.Wm=0,this.jm=0}dm(){return this.Rp.values()}*Um(){const s=this.Rp;for(let t=s.length-1;0<=t;--t)yield s[t]}Pm(){return this.Rp}Rm(t){this.Dm+=t}$p(){return this.Dm}hm(){return this.Lm}Vm(){return this.km}am(){return this.Nm}lm(){return this.Bm}Hm(t){this.Wm=t}zm(){return this.Wm}Jm(t){this.jm=t}qm(){return this.jm}}}{const Ps=self.Os;Ps.$m=class{constructor(t){this.Xm=t.Op||[],this.Dm=t.width||-1,this.Lm=t.height||-1,this.km=t.fontBoundingBoxAscent||-1,this.Nm=t.fontBoundingBoxDescent||-1,this.Bm=t.Qp||-1,this.Wm=0,this.jm=0}tm(){return!1}nm(){return!1}xm(){return this.Xm}Ym(s){const i=this.Xm;for(let t=i.length-1;0<=t;--t){const e=i[t];if(e.tag===s)return e}return null}Zm(t){return!!this.Ym(t)}Km(){const t=new Map;for(const s of this.Xm)t.set(s.tag,s.param);return t}Rm(t){this.Dm+=t}im(t){this.Dm=t}$p(){return this.Dm}Xp(t){this.Lm=t}hm(){return this.Lm}Yp(t){this.km=t}om(){return this.km}Zp(t){this.Nm=t}am(){return this.Nm}Kp(t){this.Bm=t}lm(){return this.Bm}Hm(t){this.Wm=t}zm(){return this.Wm}Jm(t){this.jm=t}qm(){return this.jm}}}{const Rs=self.Os;Rs.kp=class extends Rs.$m{constructor(t){super(t),this.Qm=t.Np}tm(){return!0}Cm(t){Rs.Vn(this.Qm,t),this.Dm=-1,this.Lm=-1,this.km=-1,this.Nm=-1,this.Bm=-1}Gm(t){this.Qm.push(t)}_m(){return Rs.tr(Rs.kp,{Np:this.Qm.slice(0),Op:this.Xm,width:this.Dm,height:this.Lm,fontBoundingBoxAscent:this.km,fontBoundingBoxDescent:this.Nm,Qp:this.Bm})}Mm(){return this.Qm}Am(t){this.Qm=t}pm(){return this.Qm.length}zu(){return 0===this.Qm.length}gm(){return this.Qm.includes("\n")}}}{const As=self.Os;As.Lp=class extends As.$m{constructor(t){super(t),this.tg=t.icon}nm(){return!0}sg(){return this.tg}_m(){return As.tr(As.Lp,{icon:this.tg,Op:this.Xm,width:this.Dm,height:this.Lm,fontBoundingBoxAscent:this.km,fontBoundingBoxDescent:this.Nm,Qp:this.Bm})}ig(t){if(!t)return null;let s=Number(this.tg);return String(s)===this.tg?(s=Math.floor(s),t.eg(s)):t.ng(this.tg)}rm(t){const s=this.ig(t);this.Dm=s?this.Lm*s.$p()/s.hm():0}rg(t){const s=this.ig(t);return s?s.rg():null}pm(){return 1}}}{const Fs=self.Os;Fs.hg=class{constructor(t){this.og=new Map,this.ag=t.lg,this.ug=t.fg}ir(){for(const t of this.og.values())t.ir();this.og.clear()}dg(t){let s=this.og.get(t);if(!s){const i=this.ag(t);s=Fs.tr(Fs.pg,this,{source:t,mg:i}),this.og.set(t,s)}return s}gg(t){return this.og.has(t)}yg(t){const s=this.og.get(t);s&&s.ir(),this.og.delete(t)}async wg(t){return this.ug(t)}}}{const Os=self.Os;Os.pg=class{constructor(t,s){this.Sg=t,this.vg=s.source,this.bg=[],this.xg=new Map,this.Mg=!1,this.Gg=!1,this.Tg=null;const i=s.mg._g;for(let t=0,s=i.length;t<s;++t){const e=i[t],n=Os.tr(Os.Ig,this,{index:t,tag:e.tag,source:e.source,width:e.width,height:e.height});this.bg.push(n),e.tag&&this.xg.set(e.tag.toLowerCase(),n)}}ir(){for(const t of this.bg)t.ir();Os.Rh(this.bg),this.xg.clear(),this.Sg=null,this.vg=null}Cg(){return this.Mg}Eg(){return this.Gg}Pg(){return this.Tg||(this.Tg=this.Rg()),this.Tg}async Rg(){if(!this.Mg){this.Mg=!0,this.Gg=!0;const t=await this.Sg.wg(this.vg);if(this.Sg){const i=t._g;for(let t=0,s=Math.min(i.length,this.bg.length);t<s;++t){const e=i[t].Ag;this.bg[t].Fg(e)}this.Gg=!1}}}eg(t){return(t=Math.floor(t))<0||t>=this.bg.length?null:this.bg[t]}ng(t){return this.xg.get(t.toLowerCase())||null}}}{const Ds=self.Os;Ds.Ig=class{constructor(t,s){this.Og=t,this.vg=s.source||null,this.Dg=s.index,this.Lg=s.tag,this.Dm=s.width,this.Lm=s.height,this.kg=null}ir(){this.Dm=0,this.Lm=0,this.Og=null}Ng(){return this.vg}$p(){return this.Dm}hm(){return this.Lm}Fg(t){this.kg=t}rg(){return this.kg}}}{let e=function(t,s,i,e){const n=Ws;Tn.N(Ns,i,s),Tn.N(Bs,t,s),Tn.At(n,Ns,Bs),Tn.normalize(n,n),e.set(n[0],n[1],n[2],Tn.Rt(t,n))},h=function(t,s,i,e,n,r,h){const o=h.x,a=h.y,l=h.z,u=h.w,c=h.Bg,f=h.Wg,d=h.jg,p=1-c,m=1-f,g=1-d,y=o*t*c+o*e*p+a*s*f+a*n*m+l*i*d+l*r*g;if(u<=y)return!0;const w=o*e*c+o*t*p+a*n*f+a*s*m+l*r*d+l*i*g;return u<w},n=function(t,s,i,e){const n=e.x,r=e.y,h=e.z,o=e.w,a=n*t+r*s+h*i;return o<=a};e,h,n;const Ls=self.Os,ks=self.ys,Tn=ks.Ts,Vn=ks._s,Gn=ks.bs,Ns=Tn.create(),Bs=Tn.create(),Ws=Tn.create(),js=Vn.create(),Us=Gn.create(),Vs=Tn.create(),Hs=Tn.create(),zs=Tn.create(),Js=Tn.create(),qs=Tn.create(),$s=Tn.create(),Xs=Tn.create(),Ys=Tn.create(),Zs=Vn._(0,0,1,1);Ls.Ug={Vg(t,s,i,e,n,r,h){let o=e[0]*t+e[4]*s+e[8]*i+e[12],a=e[1]*t+e[5]*s+e[9]*i+e[13],l=e[2]*t+e[6]*s+e[10]*i+e[14],u=e[3]*t+e[7]*s+e[11]*i+e[15],c=n[0]*o+n[4]*a+n[8]*l+n[12]*u,f=n[1]*o+n[5]*a+n[9]*l+n[13]*u,d=n[2]*o+n[6]*a+n[10]*l+n[14]*u,p=n[3]*o+n[7]*a+n[11]*l+n[15]*u;return 0!=p&&(f*=p=1/p,d*=p,h[0]=(.5*(c*=p)+.5)*r[2]+r[0],h[1]=(.5*f+.5)*r[3]+r[1],h[2]=.5*(1+d),!0)},Hg(t,s,i,e,n,r,h){const o=Us,a=js;return Gn.multiply(o,n,e),null!==Gn.C(o,o)&&(a[0]=(t-r[0])/r[2]*2-1,a[1]=(s-r[1])/r[3]*2-1,a[2]=2*i-1,a[3]=1,Vn.kt(a,a,o),0!==a[3])&&(a[3]=1/a[3],h[0]=a[0]*a[3],h[1]=a[1]*a[3],h[2]=a[2]*a[3],!0)},zg(t,s,i,e,n,r,h){const o=Ns,a=Bs;if(!Ls.Ug.Hg(t,s,0,e,n,r,o))return!1;if(!Ls.Ug.Hg(t,s,1,e,n,r,a))return!1;let l=Bs,u=(Tn.N(l,a,o),Ws),c=(Tn.set(u,0,0,1),-i),f=Tn.Rt(u,l),d=0;if(0===f){const p=Tn.Rt(u,o)+c;if(0!==p)return!1}else if((d=-(Tn.Rt(o,u)+c)/f)<0)return!1;return Tn._t(h,o,l,d),!0}};class Ks{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.Bg=NaN,this.Wg=NaN,this.jg=NaN}set(t,s,i,e){this.x=t,this.y=s,this.z=i,this.w=e,this.Bg=0<t?1:0,this.Wg=0<s?1:0,this.jg=0<i?1:0}}Ls.Ug.Jg=class{constructor(){this.qg=new Ks,this.$g=new Ks,this.Xg=new Ks,this.Yg=new Ks,this.Zg=new Ks,this.Kg=new Ks}Qg(t,s){const i=Zs;Ls.Ug.Hg(0,1,0,t,s,i,Vs),Ls.Ug.Hg(1,1,0,t,s,i,Hs),Ls.Ug.Hg(0,0,0,t,s,i,zs),Ls.Ug.Hg(1,0,0,t,s,i,Js),Ls.Ug.Hg(0,1,1,t,s,i,qs),Ls.Ug.Hg(1,1,1,t,s,i,$s),Ls.Ug.Hg(0,0,1,t,s,i,Xs),Ls.Ug.Hg(1,0,1,t,s,i,Ys),e(zs,Vs,qs,this.qg),e(Vs,Hs,$s,this.$g),e(Hs,Js,Ys,this.Xg),e(Js,zs,Xs,this.Yg),e(Xs,qs,$s,this.Kg),e(Js,Hs,Vs,this.Zg)}ty(t,s,i,e,n,r){return h(t,s,i,e,n,r,this.qg)&&h(t,s,i,e,n,r,this.$g)&&h(t,s,i,e,n,r,this.Xg)&&h(t,s,i,e,n,r,this.Yg)&&h(t,s,i,e,n,r,this.Zg)&&h(t,s,i,e,n,r,this.Kg)}iy(t,s,i){return!n(t,s,i,this.Zg)}}}{const Qs=self.Os,ti=self.ys,Tn=ti.Ts,Vn=ti._s,Gn=ti.bs,si=Gn.create(),ii=Tn._(0,0,0),ei=Tn._(0,0,0),ni=Tn._(0,0,0),ri=Tn._(0,1,0),hi=(Vn._(0,0,0,0),new Qs.Hl),oi=new Qs.Rect,ai=new Qs.Hl(0,0,1,0,1,1,0,1),li={ey:1,ny:1e4},ui=Gn._(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);Qs.Ug.hy=class{constructor(t){t=Object.assign({},li,t),this.Dm=0,this.Lm=0,this.oy=Qs.cr(45),this.ly=Math.tan(this.oy/2),this.uy=Gn.create(),this.my=Gn.create(),this.gy=!1,this.yy=t.ey,this.wy=t.ny,this.Sy=[],this.vy=new Map,this.by=null,this.xy=null,this.My=null,this.Gy=null,this.Ty=null,this._y=null,this.Iy=null,this.Cy=null,this.Ey=null,this.Py=null,this.Ry=null,this.Ay=null,this.Fy=new Map,this.Oy=null,this.Dy=[],this.Ly=new Map,this.ky=0,this.Ny=0,this.By=1,this.Wy=[this.By],this.jy=1,this.Uy=[this.jy],this.Vy=.5,this.Hy=[this.Vy],this.zy=0,this.Jy=!0,this.qy=!1}$y(t){let s=0,i=t.length,e=0;for(;s<i;)t[s++]=e,t[s++]=e+1,t[s++]=e+2,t[s++]=e,t[s++]=e+2,t[s++]=e+3,e+=4}Xy(){this.ky=0,this.Ny=0,this.by=null,this.xy=null,this.My=null,this.Gy=null,this.Ty=null,this._y=null,this.Iy=null,this.Cy=null,this.Ey=null,this.Py=null,this.Ry=null,this.Ay=null,this.Yy()}Zy(){this.Xy(),this.Oy=null}Ky(){for(const t of this.Sy)t.ir();this.Xy()}$p(){return this.Dm}hm(){return this.Lm}Qy(t){return this.iw()?100:t/(2*this.ew())}rw(t){if(this.iw()){const s=t/(2*this.ew());return s/this.Qy(t)}return 1}hw(t){this.yy=t}ow(){return this.yy}aw(t){this.wy=t}lw(){return this.wy}uw(t){this.oy=t,this.ly=Math.tan(this.oy/2)}cw(){return this.oy}ew(){return this.ly}fw(){this.gy=!1}dw(){this.gy=!0}iw(){return!this.gy}pw(){return this.gy}mw(t,s,i=.5,e=.5){const n=this.ow(),r=this.lw(),h=this.cw();if(.5===i&&.5===e)this.gw()?Gn.St(t,h,s,n,r):Gn.perspective(t,h,s,n,r);else{const o=2*(i=1-i)-2,a=2*i,l=2*e-2,u=2*e,c=this.ew()*n,f=c*s;Gn.gt(t,o*f,a*f,l*c,u*c,n,r),this.gw()&&Gn.mul(t,ui,t)}}yw(t,s,i,e=1){const n=self.devicePixelRatio,r=2*this.Qy(i)*n*this.ew()/i,h=s*r/(2*n*e),o=i*r/(2*n*e),a=-h,l=h,u=-o,c=o;this.gw()?Gn.xt(t,a,l,u,c,this.ow(),this.lw()):Gn.ortho(t,a,l,u,c,this.ow(),this.lw())}ww(t,s,i,e,n,r=1){let h=1;this.iw()&&(h=200*this.ew()/n);const o=ni,a=(Tn.set(o,h,-h,1),ii),l=ei;Tn.multiply(a,s,o),Tn.multiply(l,i,o),Gn.Mt(t,a,l,e||ri),o[2]=r,Gn.scale(t,t,o)}Sw(t,s,i,e,n,r,h,o){return Tn.set(ii,t,s,i),Tn.set(ei,e,n,r),this.ww(si,ii,ei,ri,h,o),si}bw(t){this.Sy.push(t),this.vy.set(t.jc(),t)}xw(t){const s=this.Sy.indexOf(t);-1!==s&&this.Sy.splice(s,1),this.vy.delete(t.jc())}Yy(){Qs.Rh(this.Sy),this.vy.clear()}Mw(t){return this.vy.get(t)||null}Gw(){return this.by}Tw(){this._w(this.by)}Iw(){return this.xy}Cw(){this._w(this.xy)}Ew(){this._w(this.My)}Pw(){this._w(this.Gy)}Rw(){this._w(this.Ty)}Aw(){this._w(this._y)}Fw(){this._w(this.Iy)}Ow(){this._w(this.Cy)}Dw(){this._w(this.Ey)}Lw(){this._w(this.Py)}kw(){this._w(this.Ry)}Nw(){this._w(this.Ay)}Bw(t){this.Oy=t}Ww(){return this.Oy}jw(t,s,i,e){let n=Qs.Ug.Vw.Uw(t,s,i,e),r=this.Fy.get(n);return r||(r=Qs.tr(Qs.Ug.Vw,this,t,s,i,e),this.Fy.set(n,r)),r.Hw(),r}zw(t){t.Jw(),0===t.qw()&&(this.Oy===t&&(this.Oy=null),this.Fy.delete(t.$w()),t.ir())}Xw(t){Qs.Rh(this.Dy),this.Ly.clear();let s=0;for(const i of t){const e=i[0],n=i[1],r=i[2];this.Dy.push([n,r]),this.Ly.set(e,{number:s,Yw:n,Zw:r}),s++}}Kw(t){return this.Dy[t]}Qw(t){return this.Kw(t)[0]}tS(t){return this.Kw(t)[1]}sS(t){const s=this.Ly.get(t);if(void 0===s)throw new Error("invalid blend name");return s}iS(t){const s=this.Ly.get(t);if(void 0===s)throw new Error("invalid blend name");return s.number}eS(t){this.ky=t}nS(){return this.ky}rS(t){this.Ny=t,this.Oy=null}hS(){return this.Ny}fm(t,s,i,e){const n=Qs.gr(t,s,i,e),r=Math.sin(n),h=Math.cos(n),o=.5*this.By,a=r*o,l=h*o,u=this.jy;2===u?this.oS(t,s,0,i,e,0,a,l):1===u?this.aS(t,s,0,i,e,0,a,l):this.lS(t,s,0,i,e,0,a,l)}uS(t,s,i,e,n,r){const h=Qs.gr(t,s,e,n),o=Math.sin(h),a=Math.cos(h),l=.5*this.By,u=o*l,c=a*l,f=this.jy;2===f?this.oS(t,s,i,e,n,r,u,c):1===f?this.aS(t,s,i,e,n,r,u,c):this.lS(t,s,i,e,n,r,u,c)}oS(t,s,i,e,n,r,h,o){const a=this.Vy,l=t+a-o,u=s+a-h,c=e+a+o,f=n+a+h,d=2*o,p=2*h,m=l+h,g=u-o,y=l-h+d,w=u+o+p,S=c+h,v=f-o,b=c-h-d,x=f+o-p;this.cS(m,g,i,S,v,r,b,x,r,y,w,i,ai)}aS(t,s,i,e,n,r,h,o){const a=this.Vy,l=t+a-o,u=s+a-h,c=e+a+o,f=n+a+h,d=l+h,p=u-o,m=l-h,g=u+o,y=c+h,w=f-o,S=c-h,v=f+o;this.cS(d,p,i,y,w,r,S,v,r,m,g,i,ai)}lS(t,s,i,e,n,r,h,o){const a=this.Vy,l=t+a,u=s+a,c=e+a,f=n+a,d=l+h,p=u-o,m=l-h,g=u+o,y=c+h,w=f-o,S=c-h,v=f+o;this.cS(d,p,i,y,w,r,S,v,r,m,g,i,ai)}fS(t,s,i,e,n,r){const h=Qs.gr(t,s,i,e),o=Math.sin(h),a=Math.cos(h),l=.5*this.By,u=o*l,c=a*l,f=this.jy;2===f?this.dS(t,s,i,e,u,c,n,r):1===f?this.pS(t,s,i,e,u,c,n,r):this.mS(t,s,i,e,u,c,n,r)}dS(t,s,i,e,n,r,h,o){const a=this.Vy,l=t+a-r,u=s+a-n,c=i+a+r,f=e+a+n,d=2*r,p=2*n,m=l+n,g=u-r,y=l-n+d,w=u+r+p,S=c+n,v=f-r,b=c-n-d,x=f+r-p;hi.set(m,g,S,v,b,x,y,w),oi.set(h,0,o,0),this.gS(hi,oi)}pS(t,s,i,e,n,r,h,o){const a=this.Vy,l=t+a-r,u=s+a-n,c=i+a+r,f=e+a+n,d=l+n,p=u-r,m=l-n,g=u+r,y=c+n,w=f-r,S=c-n,v=f+r;hi.set(d,p,y,w,S,v,m,g),oi.set(h,0,o,0),this.gS(hi,oi)}mS(t,s,i,e,n,r,h,o){const a=this.Vy,l=t+a,u=s+a,c=i+a,f=e+a,d=l+n,p=u-r,m=l-n,g=u+r,y=c+n,w=f-r,S=c-n,v=f+r;hi.set(d,p,y,w,S,v,m,g),oi.set(h,0,o,0),this.gS(hi,oi)}yS(t,s,i,e){const n=.5*this.By,r=this.jy;2===r?this.wS(t,s,i,e,n):1===r?this.SS(t,s,i,e,n):this.vS(t,s,i,e,n)}wS(t,s,i,e,n){this.oS(t,s,0,i,s,0,0,n),this.oS(i,s,0,i,e,0,n,0),this.oS(i,e,0,t,e,0,0,-n),this.oS(t,e,0,t,s,0,-n,0)}SS(t,s,i,e,n){this.aS(t,s,0,i,s,0,0,n),this.aS(i,s,0,i,e,0,n,0),this.aS(i,e,0,t,e,0,0,-n),this.aS(t,e,0,t,s,0,-n,0)}vS(t,s,i,e,n){this.lS(t,s,0,i,s,0,0,n),this.lS(i,s,0,i,e,0,n,0),this.lS(i,e,0,t,e,0,0,-n),this.lS(t,e,0,t,s,0,-n,0)}bS(t){this.yS(t.pl(),t.ml(),t.gl(),t.yl())}xS(t){const s=Qs.gr(t.Xr(),t.Yr(),t.Zr(),t.Kr()),i=Math.sin(s),e=Math.cos(s),n=.5*this.By,r=i*n,h=e*n,o=this.jy;2===o?this.MS(t,r,h):1===o?this.GS(t,r,h):this.TS(t,r,h)}MS(t,s,i){this.oS(t.Xr(),t.Yr(),0,t.Zr(),t.Kr(),0,s,i),this.oS(t.Zr(),t.Kr(),0,t.Qr(),t.th(),0,i,-s),this.oS(t.Qr(),t.th(),0,t.ih(),t.eh(),0,-s,-i),this.oS(t.ih(),t.eh(),0,t.Xr(),t.Yr(),0,-i,s)}GS(t,s,i){this.aS(t.Xr(),t.Yr(),0,t.Zr(),t.Kr(),0,s,i),this.aS(t.Zr(),t.Kr(),0,t.Qr(),t.th(),0,i,-s),this.aS(t.Qr(),t.th(),0,t.ih(),t.eh(),0,-s,-i),this.aS(t.ih(),t.eh(),0,t.Xr(),t.Yr(),0,-i,s)}TS(t,s,i){this.lS(t.Xr(),t.Yr(),0,t.Zr(),t.Kr(),0,s,i),this.lS(t.Zr(),t.Kr(),0,t.Qr(),t.th(),0,i,-s),this.lS(t.Qr(),t.th(),0,t.ih(),t.eh(),0,-s,-i),this.lS(t.ih(),t.eh(),0,t.Xr(),t.Yr(),0,-i,s)}_S(t){this.By=t,this.Wy[this.Wy.length-1]=t}IS(){return this.By}CS(t){if(100<=this.Wy.length)throw new Error("pushed too many line widths - check push/pop pairs");this.Wy.push(t),this.By=t}ES(){if(this.Wy.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.Wy.pop(),this.By=this.Wy.at(-1)}PS(){this.jy=0,this.Uy[this.Uy.length-1]=0}RS(){this.jy=1,this.Uy[this.Uy.length-1]=0}AS(){this.jy=2,this.Uy[this.Uy.length-1]=0}FS(t){if("butt"===t)this.OS();else if("square"===t)this.DS();else{if("zag"!==t)throw new Error("invalid line cap");this.LS()}}OS(){if(100<=this.Uy.length)throw new Error("pushed too many line caps - check push/pop pairs");this.Uy.push(0),this.jy=0}DS(){if(100<=this.Uy.length)throw new Error("pushed too many line caps - check push/pop pairs");this.Uy.push(1),this.jy=1}LS(){if(100<=this.Uy.length)throw new Error("pushed too many line caps - check push/pop pairs");this.Uy.push(2),this.jy=2}kS(){if(this.Uy.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.Uy.pop(),this.jy=this.Uy.at(-1)}NS(t){this.Vy=t,this.Hy[this.Hy.length-1]=t}BS(){return this.Vy}WS(t){if(100<=this.Hy.length)throw new Error("pushed too many line offsets - check push/pop pairs");this.Hy.push(t),this.Vy=t}jS(){if(this.Hy.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.Hy.pop(),this.Vy=this.Hy.at(-1)}US(s){const t=s.length/2;if(t<3)throw new Error("need at least 3 points");const i=t-2,e=i-1,n=s[0],r=s[1];for(let t=0;t<i;t+=2){const h=2*t,o=s[2+h],a=s[3+h],l=s[4+h],u=s[5+h];if(t===e)this.VS(n,r,o,a,l,u,l,u);else{const c=s[6+h],f=s[7+h];this.VS(n,r,o,a,l,u,c,f)}}}HS(){return 3}zS(){this.JS(!0),this.zy++}qS(){return this.zy}$S(){this.zy++}XS(t){this.Jy=!!t}YS(){return this.Jy}ZS(t){this.qy=!!t}KS(){return this.qy}QS(){return!1}gw(){return!1}tv(){}sv(){}nv(){}rv(){return this.tv()+this.sv()+this.nv()}hv(){return Qs.tr(Qs.Ug.ov,this)}}}{const ci=self.Os;ci.Ug.av=class{constructor(t,s){this.rr=s.name,this.lv=t,this.uv=s.cv||0,this.dv=s.pv||0,this.mv=!!s.gv,this.yv=!!s.wv,this.Sv=!!s.vv,this.bv=!!s.xv,this.Mv=!!s.Gv,this.Tv=!!s._v,this.Iv=!!s.Cv,this.Ev=!1,this.Pv=this.mv||this.Tv||0!==this.uv||0!==this.dv}ir(){this.lv=null}Rv(){return this.lv}jc(){return this.rr}Av(){return 0!==this.uv||0!==this.dv}Fv(){return this.uv}Ov(){return this.dv}Dv(){return this.mv}Lv(){return this.yv}kv(){return this.Sv}Nv(){return this.bv}Bv(){return this.Mv}Wv(){return this.Tv}jv(){return this.Iv}Uv(){return this.Ev}Vv(){return this.Pv}Hv(){return!1}}}{const fi=self.Os;fi.Ug.Vw=class{constructor(t,s,i,e,n){this.lv=t,this.t1=0,this.zv=null,this.Jv="",this.qv=i,this.$v=fi.tr(fi.Lo),this.$v.set(e),this.Xv=n,"string"==typeof s?this.Jv=s:(this.zv=s,this.Jv=this.zv.jc())}ir(){if(0<this.t1)throw new Error("releasing state group still in use");this.lv=null,this.zv=null,this.Jv=""}Yv(){const t=this.lv;t._w(this.zv),t.SetBlendMode(this.qv),t.Zv(this.$v),t.rS(this.Xv),t.Bw(this)}$w(){return fi.Ug.Vw.Uw(this.Jv,this.qv,this.$v,this.Xv)}Hw(){++this.t1}Jw(){--this.t1}qw(){return this.t1}Kv(){this.zv=null}Qv(t){if(this.zv=t.Mw(this.Jv),!this.zv)throw new Error("failed to restore shader program")}static Uw(t,s,i,e){const n="string"==typeof t?t:t.jc();return n+","+s+","+i.Yo()+","+i.Zo()+","+i.Ko()+","+i.Qo()+","+e}}}{let e=function(t,s,i){const e=i.Xr(),n=i.Yr(),r=i.Zr()-e,h=i.Kr()-n,o=i.ih()-e,a=i.eh()-n,l=r*t,u=h*t,c=o*s,f=a*s;return[e+l+c,n+u+f]};e;const _=self.Os,di=_.tr(_.Hl);_.Ug.t2=class{constructor(t,s,i){this.s2=t,this.i2=s,this.e2=i,this.za=NaN,this.Ja=NaN,this.Xv=NaN,this.n2=NaN,this.h2=NaN,this.za=0,this.Ja=0,this.Xv=0,this.n2=0,this.h2=0}o2(t,s,i,e){this.za=t,this.Ja=s,this.n2=i,this.h2=e}a2(){return this.za}l2(t){this.za!==t&&(this.za=t,this.s2.u2())}c2(){return this.Ja}f2(t){this.Ja!==t&&(this.Ja=t,this.s2.u2())}d2(){return this.Xv}m2(t){this.Xv!==t&&(this.Xv=Math.max(t,0),this.s2.u2())}g2(){return this.n2}w2(t){this.n2=t}S2(){return this.h2}v2(t){this.h2=t}b2(t,s,i){[this.za,this.Ja]=e(t.za,t.Ja,s),this.Xv=t.Xv,this.n2=_.Ft(i.pl(),i.gl(),t.n2),this.h2=_.Ft(i.ml(),i.yl(),t.h2)}M2(t,s,i){[this.za,this.Ja]=e(t.za,t.Ja,s),this.Xv=t.Xv,[this.n2,this.h2]=e(t.n2,t.h2,i)}G2(){return{x:this.a2(),y:this.c2(),z:this.d2(),u:this.g2(),v:this.S2()}}T2(t){this.l2(t.x),this.f2(t.y),t.hasOwnProperty("z")&&this.m2(t.z),this.w2(t.u),this.v2(t.v)}_2(){return this.s2}I2(){return this.i2}C2(){return this.e2}},_.Ug.E2=class{constructor(i,t,s){if(i<2||t<2)throw new Error("invalid mesh size");this.P2=i,this.R2=t,this.A2=s||null,this.F2=[],this.O2=0,this.D2=0,this.L2=1,this.N2=1,this.B2=0,this.W2=!1;const e=i-1,n=t-1;for(let s=0;s<t;++s){const r=[];for(let t=0;t<i;++t){const h=_.tr(_.Ug.t2,this,t,s),o=t/e,a=s/n;h.o2(o,a,o,a),r.push(h)}this.F2.push(r)}}ir(){_.Rh(this.F2)}j2(){return this.P2}U2(){return this.R2}V2(){return this.A2}H2(){return this.F2}u2(){this.W2=!0}z2(){if(this.W2){let t=1/0,s=1/0,i=-1/0,e=-1/0,n=0;for(const r of this.F2)for(const h of r){const o=h.a2(),a=h.c2();t=Math.min(t,o),s=Math.min(s,a),i=Math.max(i,o),e=Math.max(e,a),n=Math.max(n,h.d2())}this.O2=t,this.D2=s,this.L2=i,this.N2=e,this.B2=n,this.W2=!1}}J2(){return this.z2(),this.O2}q2(){return this.z2(),this.D2}X2(){return this.z2(),this.L2}Y2(){return this.z2(),this.N2}Z2(){return this.z2(),this.B2}K2(){return 0<this.Z2()}Q2(t,s){return t=Math.floor(t),s=Math.floor(s),t<0||t>=this.P2||s<0||s>=this.R2?null:this.F2[s][t]}tb(t,i,e){const n=e instanceof _.Rect;if(t.j2()!==this.j2()||t.U2()!==this.U2())throw new Error("source mesh wrong size");const r=t.F2,h=this.F2;for(let t=0,s=h.length;t<s;++t){const o=r[t],a=h[t];for(let t=0,s=a.length;t<s;++t){const l=o[t],u=a[t];n?u.b2(l,i,e):u.M2(l,i,e)}}}sb(r){let h=this.F2,o=h[0];for(let t=1,s=h.length;t<s;++t){let i=h[t],e=o[0],n=i[0];for(let t=1,s=i.length;t<s;++t){const a=o[t],l=i[t];di.set(e.g2(),e.S2(),a.g2(),a.S2(),l.g2(),l.S2(),n.g2(),n.S2()),r.cS(e.a2(),e.c2(),e.d2(),a.a2(),a.c2(),a.d2(),l.a2(),l.c2(),l.d2(),n.a2(),n.c2(),n.d2(),di),e=a,n=l}o=i}}ib(o,a){a=a||((t,s,i)=>[t,s,i]);let t=this.F2,l=t[0];for(let r=1,h=t.length;r<h;++r){let i=t[r],e=l[0],n=i[0];for(let t=1,s=i.length;t<s;++t){const u=l[t],c=i[t],[f,d,p]=a(e.a2(),e.c2(),e.d2()),[m,g,y]=a(u.a2(),u.c2(),u.d2()),[w,S,v]=a(c.a2(),c.c2(),c.d2()),[b,x,M]=a(n.a2(),n.c2(),n.d2());o.uS(f,d,p,m,g,y),o.uS(f,d,p,w,S,v),o.uS(f,d,p,b,x,M),t===s-1&&o.uS(m,g,y,w,S,v),r===h-1&&o.uS(b,x,M,w,S,v),e=u,n=c}l=i}}eb(t){let i=.99999999,e=t.Eu(),n=[],r=this.j2()-1,h=this.U2()-1,o=1/r,a=1/h,l=r-1,u=h-1,c=e[0],f=e[1],d=_.lr(Math.floor(c*r),0,l),p=_.lr(Math.floor(f*h),0,u),m=!0,g=0,y=0,w=0,S=-1,v=()=>{c=_.lr(_.Ft(c,g,w),0,1),f=_.lr(_.Ft(f,y,w),0,1),n.push(c,f)};for(let t=0,s=e.length;t<s;t+=2){c=e[t],f=e[t+1],n.push(c,f),d=_.lr(Math.floor(c*r),0,l),p=_.lr(Math.floor(f*h),0,u);const b=(t+2)%s;for(g=e[b],y=e[1+b],S=-1;;){if(1e6<n.length)throw new Error("Too many mesh poly points");const x=d*o,M=p*a,G=(d+1)*o,T=(p+1)*a;if(m=_.oh(c,f,x,M,G,M,G,T),0!==S&&0<=(w=_.hh(c,f,g,y,x,M,G,T,-.001))&&w<=i)v(),m=!m,S=0;else if(0<p&&2!==S&&0<=(w=_.hh(c,f,g,y,x,M,G,M,.001))&&w<=i)v(),p--,m=!1,S=4;else if(d<l&&3!==S&&0<=(w=_.hh(c,f,g,y,G,M,G,T,.001))&&w<=i)v(),d++,m=!1,S=1;else if(0<d&&1!==S&&0<=(w=_.hh(c,f,g,y,x,M,x,T,.001))&&w<=i)v(),d--,m=!0,S=3;else{if(!(p<u&&4!==S&&0<=(w=_.hh(c,f,g,y,x,T,G,T,.001))&&w<=i))break;v(),p++,m=!0,S=2}}}return _.tr(_.Gu,n)}nb(t,s){const i=this.rb(t);this.hb(i),s.Ru(i)}rb(t){const i=[],e=t.Eu();for(let t=0,s=e.length;t<s;t+=2){const n=e[t],r=e[t+1],[h,o]=this.ob(n,r);i.push(h,o)}return i}ob(t,s){const i=this.j2()-1,e=this.U2()-1,n=1/i,r=1/e,h=_.lr(Math.floor(t*i),0,i-1),o=_.lr(Math.floor(s*e),0,e-1),a=h*n,l=o*r,u=(h+1)*n,c=(o+1)*r,f=this.Q2(h,o),d=this.Q2(h+1,o+1),p=_.oh(t,s,a,l,u,l,u,c),m=p?a+n:a,g=p?l:l+r,y=this.Q2(h+(p?1:0),o+(p?0:1)),[w,S,v]=_.ah(t,s,a,l,m,g,u,c);return _.lh(w,S,v,f.a2(),f.c2(),f.d2(),y.a2(),y.c2(),y.d2(),d.a2(),d.c2(),d.d2())}hb(i){let e=[],n=i[0],r=i[1],h=n-i.at(-2),o=r-i.at(-1);for(let t=0,s=i.length;t<s;t+=2){const a=(t+2)%s,l=i[a],u=i[1+a],c=l-n,f=u-r,d=Math.abs(c)<1e-7&&Math.abs(h)<1e-7&&Math.sign(f)===Math.sign(o),p=Math.abs(f)<1e-7&&Math.abs(o)<1e-7&&Math.sign(c)===Math.sign(h);(!d&&!p&&.001<Math.abs(c/h-f/o)||0==c&&0==f)&&e.push(n,r),n=l,r=u,h=c,o=f}6<=e.length&&e.length<i.length&&_.Dh(i,e)}G2(){return{cols:this.j2(),rows:this.U2(),points:this.F2.map(t=>t.map(t=>t.G2()))}}T2(t){const i=this.j2(),e=this.U2();if(t.cols!==i||t.rows!==e)throw new Error("mesh data wrong size");const n=t.points;for(let s=0;s<e;++s){const r=n[s];for(let t=0;t<i;++t){const h=this.Q2(t,s);h.T2(r[t])}}}}}{let d=function(t,s){let i,e,n,r;switch(t){case"rgba8":i=s.RGBA8,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_BYTE;break;case"rgb8":i=s.RGB8,e=s.RGB,n=s.RGB,r=s.UNSIGNED_BYTE;break;case"rgba4":i=s.RGBA4,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":i=s.RGB5_A1,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":i=s.RGB565,e=s.RGB,n=s.RGB,r=s.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{ab:i,lb:e,format:n,type:r}};d;const pi=self.Os,mi=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),gi=new Set(["nearest","bilinear","trilinear"]),yi=new Set(["default","low","high"]),wi=new Set(["clamp-to-edge","repeat","mirror-repeat"]),Si={ub:"clamp-to-edge",cb:"clamp-to-edge",fb:"trilinear",pb:0,mb:"rgba8",gb:!0,yb:"default",premultiplyAlpha:!0,wb:!1,width:-1,height:-1},vi={premultiplyAlpha:!0,flipY:!1},bi=new Set;pi.Ug.Sb=class{constructor(t){this.lv=t,this.vb=null,this.Dm=0,this.Lm=0,this.bb=!0,this.xb="clamp-to-edge",this.Mb="clamp-to-edge",this.Gb="trilinear",this.Tb=0,this._b="rgba8",this.Ib=!1,this.Cb="default",this.t1=0}Eb(s,t){if(!("undefined"!=typeof HTMLImageElement&&s instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&s instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&s instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&s instanceof OffscreenCanvas||s instanceof ImageData||s instanceof ArrayBuffer||null===s))throw new Error("invalid texture source");if(t=Object.assign({},Si,t),this.vb)throw new Error("already created texture");if(this.xb=t.ub,this.Mb=t.cb,this.Gb=t.fb,this.Tb=t.pb,this._b=t.mb,this.Ib=!!t.gb&&this.lv.YS(),this.Cb=t.yb,!wi.has(this.xb)||!wi.has(this.Mb))throw new Error("invalid wrap mode");if(!gi.has(this.Gb))throw new Error("invalid sampling");if(!mi.has(this._b))throw new Error("invalid pixel format");if(!yi.has(this.Cb))throw new Error("invalid mipmap quality");if(this.bb=!0,s instanceof ArrayBuffer||null===s||t.wb){if(this.Dm=t.width,this.Lm=t.height,s instanceof ArrayBuffer&&s.byteLength!==this.Dm*this.Lm*4)throw new Error("ArrayBuffer wrong size")}else this.Dm=s.width,this.Lm=s.height;if(this.Dm<=0||this.Lm<=0)throw new Error("invalid texture data size");if(t.wb){const o=pi.Go(this.Dm,this.Lm),a=o.getContext("2d");a.drawImage(s,0,0,this.Dm,this.Lm),s=o}const i=pi.Rr(this.Dm)&&pi.Rr(this.Lm),e=this.lv.Pb();if(this.Dm>e||this.Lm>e)throw new Error("texture data exceeds maximum texture size");const n=this.lv.Rb(),r=this.lv.Ab(),h=(this.vb=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.vb),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1),d(this._b,n));if(this.lv.Fb()||i||!this.Ob())if(2<=r){let t;t=this.Ib?Math.floor(Math.log2(Math.max(this.Dm,this.Lm))+1):1,n.texStorage2D(n.TEXTURE_2D,t,h.ab,this.Dm,this.Lm),s instanceof ArrayBuffer?n.texSubImage2D(n.TEXTURE_2D,0,0,0,this.Dm,this.Lm,h.format,h.type,new Uint8Array(s)):null!==s&&n.texSubImage2D(n.TEXTURE_2D,0,0,0,h.format,h.type,s)}else s instanceof ArrayBuffer?n.texImage2D(n.TEXTURE_2D,0,h.lb,this.Dm,this.Lm,0,h.format,h.type,new Uint8Array(s)):null===s?n.texImage2D(n.TEXTURE_2D,0,h.lb,this.Dm,this.Lm,0,h.format,h.type,null):n.texImage2D(n.TEXTURE_2D,0,h.lb,h.format,h.type,s);else{if(null===s)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if((s=s instanceof ArrayBuffer?new ImageData(new Uint8ClampedArray(s),this.Dm,this.Lm):s)instanceof ImageData){const c=pi.Go(this.Dm,this.Lm),f=c.getContext("2d");f.putImageData(s,0,0),s=c}const l=pi.Go(pi.Ar(this.Dm),pi.Ar(this.Lm)),u=l.getContext("2d");u.imageSmoothingEnabled="nearest"!==this.Gb,u.drawImage(s,0,0,this.Dm,this.Lm,0,0,l.width,l.height),n.texImage2D(n.TEXTURE_2D,0,h.lb,h.format,h.type,l)}null!==s&&this.Db(n),n.bindTexture(n.TEXTURE_2D,null),this.lv.Lb(),this.t1=1,bi.add(this)}kb(t,s,i){if(i=Object.assign({},Si,i),this.vb)throw new Error("already created texture");if(this.xb=i.ub,this.Mb=i.cb,this.Gb=i.fb,this._b=i.mb,this.Ib=!!i.gb&&this.lv.YS(),this.Cb=i.yb,!wi.has(this.xb)||!wi.has(this.Mb))throw new Error("invalid wrap mode");if(!gi.has(this.Gb))throw new Error("invalid sampling");if(!mi.has(this._b))throw new Error("invalid pixel format");if(!yi.has(this.Cb))throw new Error("invalid mipmap quality");this.bb=!1,this.Dm=Math.floor(t),this.Lm=Math.floor(s);const e=pi.Rr(this.Dm)&&pi.Rr(this.Lm),n=this.lv.Pb();if(this.Dm<=0||this.Lm<=0)throw new Error("invalid texture size");if(this.Dm>n||this.Lm>n)throw new Error("texture exceeds maximum texture size");if(!this.lv.Fb()&&this.Ob()&&!e)throw new Error("non-power-of-two tiled textures not supported");const r=this.lv.Rb(),h=this.lv.Ab(),o=(this.vb=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.vb),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),d(this._b,r)),a=2<=h?o.ab:o.lb;r.texImage2D(r.TEXTURE_2D,0,a,this.Dm,this.Lm,0,o.format,o.type,null),this.Db(r),r.bindTexture(r.TEXTURE_2D,null),this.lv.Lb(),this.t1=1,bi.add(this)}Nb(t){if("default"===this.Cb)return this.bb?t.NICEST:t.FASTEST;if("low"===this.Cb)return t.FASTEST;if("high"===this.Cb)return t.NICEST;throw new Error("invalid mipmap quality")}Ob(){return"clamp-to-edge"!==this.xb||"clamp-to-edge"!==this.Mb}Bb(t,s){if("clamp-to-edge"===s)return t.CLAMP_TO_EDGE;if("repeat"===s)return t.REPEAT;if("mirror-repeat"===s)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}Db(t){const s=pi.Rr(this.Dm)&&pi.Rr(this.Lm);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.Bb(t,this.xb)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.Bb(t,this.Mb)),"nearest"===this.Gb)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this.Ib=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(s||this.lv.Fb())&&this.Ib){t.hint(t.GENERATE_MIPMAP_HINT,this.Nb(t)),t.generateMipmap(t.TEXTURE_2D);const e="trilinear"===this.Gb&&!this.lv.KS();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.Ib=!1;const i=this.lv.Wb();i&&0<this.Tb&&"nearest"!==this.Gb&&t.texParameterf(t.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.Tb,this.lv.jb()))}Ub(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.vb||this.t1<=0)throw new Error("texture not created");if(this.bb)throw new Error("cannot update static texture");s=Object.assign({},vi,s);const i=t.width||t.videoWidth,e=t.height||t.videoHeight,n=this.lv.Ab(),r=this.lv.Rb(),h=(r.bindTexture(r.TEXTURE_2D,this.vb),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!!s.flipY),d(this._b,r)),o=2<=n?h.ab:h.lb;try{if(this.Dm===i&&this.Lm===e){const a=pi.Rr(this.Dm)&&pi.Rr(this.Lm);r.texSubImage2D(r.TEXTURE_2D,0,0,0,h.format,h.type,t),(a||this.lv.Fb())&&this.Ib&&(r.hint(r.GENERATE_MIPMAP_HINT,this.Nb(r)),r.generateMipmap(r.TEXTURE_2D))}else{this.Dm=i,this.Lm=e;const l=pi.Rr(this.Dm)&&pi.Rr(this.Lm);if(!this.lv.Fb()&&this.Ob()&&!l)throw new Error("non-power-of-two tiled textures not supported");r.texImage2D(r.TEXTURE_2D,0,o,h.format,h.type,t),(l||this.lv.Fb())&&this.Ib&&(r.hint(r.GENERATE_MIPMAP_HINT,this.Nb(r)),r.generateMipmap(r.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}r.bindTexture(r.TEXTURE_2D,null),this.lv.Lb()}Vb(){if(0<this.t1)throw new Error("texture still has references");if(!this.vb)throw new Error("already deleted texture");bi.delete(this);const t=this.lv.Rb();t.deleteTexture(this.vb),this.vb=null}Hb(){return!!this.vb}zb(){return this.vb}Rv(){return this.lv}Jb(){this.t1++}qb(){if(this.t1<=0)throw new Error("no more references");this.t1--}$b(){return this.t1}$p(){return this.Dm}hm(){return this.Lm}Xb(){return this.bb}Yb(){let t=this.Dm*this.Lm;switch(this._b){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this.Ib&&(t+=Math.floor(t/3)),t}static Kv(){bi.clear()}static Zb(){return bi.values()}}}{const xi=self.Os,Mi=self.ys,Tn=Mi.Ts,Gn=Mi.bs,Gi=new Set(["nearest","bilinear","trilinear"]),Ti={fb:"trilinear",alpha:!0,depth:!1,Kb:!0,Qb:!0,tx:0},_i=new Set;xi.Ug.ix=class{constructor(t){this.lv=t,this.nx=null,this.hx=null,this.vb=null,this.ox=null,this.Dm=0,this.Lm=0,this.lx=!0,this.Gb="trilinear",this.ux=!0,this.mx=!1,this.gx=!0,this.yx=0,this.wx=Gn.create(),this.Sx=0,this.vx=0,this.bx=0}xx(t,s,i){i=Object.assign({},Ti,i);const e=this.lv.Ab();if(this.vb||this.ox)throw new Error("already created render target");if(this.Gb=i.fb,this.ux=!!i.alpha,this.mx=!!i.depth,this.gx=!!i.Kb,this.lx=!!i.Qb,this.yx=i.tx,!Gi.has(this.Gb))throw new Error("invalid sampling");if(0<this.yx&&(e<2||this.gx))throw new Error("invalid use of multisampling");if(e<2&&(this.gx=!0),this.Dm=t,this.Lm=s,this.Dm<=0||this.Lm<=0)throw new Error("invalid render target size");this.Mx();const n=this.lv.Rb();if(this.nx=n.createFramebuffer(),this.mx&&(this.hx=n.createFramebuffer()),this.gx){this.vb=this.lv.Gx(this.Dm,this.Lm,{fb:this.Gb,mb:this.ux?"rgba8":"rgb8",gb:!1});const h=this.vb.zb();n.bindFramebuffer(n.FRAMEBUFFER,this.nx),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,h,0),this.mx&&(n.bindFramebuffer(n.FRAMEBUFFER,this.hx),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,h,0))}else{this.ox=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,this.ox);const o=this.ux?n.RGBA8:n.RGB8;if(0<this.yx){const a=n.getInternalformatParameter(n.RENDERBUFFER,o,n.SAMPLES);if(a&&a[0]){const l=a[0];this.yx>l&&(this.yx=l)}else this.yx=0}0===this.yx?n.renderbufferStorage(n.RENDERBUFFER,o,this.Dm,this.Lm):n.renderbufferStorageMultisample(n.RENDERBUFFER,this.yx,o,this.Dm,this.Lm),n.bindFramebuffer(n.FRAMEBUFFER,this.nx),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,this.ox),this.mx&&(n.bindFramebuffer(n.FRAMEBUFFER,this.hx),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,this.ox)),n.bindRenderbuffer(n.RENDERBUFFER,null)}const r=this.lv.Tx();this.mx&&r&&(n.bindFramebuffer(n.FRAMEBUFFER,this.nx),this.lv._x()?n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,r,0):n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,r)),n.bindFramebuffer(n.FRAMEBUFFER,null),_i.add(this)}Ix(t,s){if(this.Dm!==t||this.Lm!==s){this.Dm=t,this.Lm=s,this.Mx();const i=this.lv.Rb(),e=(i.bindFramebuffer(i.FRAMEBUFFER,this.nx),this.vb?this.vb.Ub(new ImageData(this.Dm,this.Lm)):(i.bindRenderbuffer(i.RENDERBUFFER,this.ox),i.renderbufferStorage(i.RENDERBUFFER,this.ux?i.RGBA8:i.RGB8,this.Dm,this.Lm),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.lv.Tx());this.mx&&e&&(this.lv._x()?i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,e,0):i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,e)),i.bindFramebuffer(i.FRAMEBUFFER,null)}}Vb(){if(!this.vb&&!this.ox)throw new Error("already deleted render target");_i.delete(this);const t=this.lv.Rb(),s=(this.vb?(t.bindFramebuffer(t.FRAMEBUFFER,this.nx),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.mx&&(t.bindFramebuffer(t.FRAMEBUFFER,this.hx),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.lv.Cx(this.vb),this.vb=null):this.ox&&(t.bindFramebuffer(t.FRAMEBUFFER,this.nx),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.mx&&(t.bindFramebuffer(t.FRAMEBUFFER,this.hx),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.ox),this.ox=null),t.bindFramebuffer(t.FRAMEBUFFER,null),2<=this.lv.Ab()&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.nx),this.mx&&t.deleteFramebuffer(this.hx),this.lv.Ex());s.Px=null,this.nx=s.Rx=null}Mx(){this.lv.mw(this.wx,this.Dm/this.Lm),this.Sx=this.lv.cw(),this.vx=this.lv.ow(),this.bx=this.lv.lw()}Ax(){return this.nx}Fx(){return this.hx}Rv(){return this.lv}Ox(){return this.vb}Dx(){return this.lv.cw()===this.Sx&&this.lv.ow()===this.vx&&this.lv.lw()===this.bx||this.Mx(),this.wx}Lx(){return"nearest"!==this.Gb}kx(){return this.ux}Nx(){return this.gx}Bx(){return this.mx}$p(){return this.Dm}hm(){return this.Lm}Wx(){return this.lx}jx(){return this.yx}Ux(){const t={fb:this.Gb,alpha:this.ux,Kb:this.gx};return this.lx||(t.width=this.Dm,t.height=this.Lm),t}Vx(t){return"nearest"!==(t=Object.assign({},Ti,t)).fb===this.Lx()&&!!t.alpha===this.kx()&&!!t.depth===this.Bx()&&!(2<=this.lv.Ab()&&!!t.Kb!==this.Nx())&&("number"==typeof t.width||"number"==typeof t.height?!this.Wx()&&this.$p()===Math.floor(t.width)&&this.hm()===Math.floor(t.height):this.Wx())}Hx(){return this.vb?this.vb.zb():null}Yb(){return this.vb?this.vb.Yb():this.Dm*this.Lm*(this.ux?4:3)}static async zx(t,s){const i=await t.Jx(s,!0);return xi.Io(i)}static Kv(){_i.clear()}static qx(){return _i.values()}static $x(t,s){for(const i of _i)i.Wx()&&i.Ix(t,s)}}}{const m=self.Os,Ii=self.ys,Tn=Ii.Ts,Gn=Ii.bs,Ci=new Set(["aPos","aTex","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]);m.Ug.Xx=class extends m.Ug.av{static async Yx(t,s){const i=t.Rb(),e=s.src,n=s.Zx,r=s.name,h=i.createShader(i.FRAGMENT_SHADER),o=(i.shaderSource(h,e),i.compileShader(h),i.createShader(i.VERTEX_SHADER)),a=(i.shaderSource(o,n),i.compileShader(o),i.createProgram()),l=(i.attachShader(a,h),i.attachShader(a,o),i.bindAttribLocation(a,0,"aPos"),i.bindAttribLocation(a,1,"aTex"),i.bindAttribLocation(a,2,"aPoints"),i.linkProgram(a),t.Kx());if(l?await t.Qx(()=>i.getProgramParameter(a,l.COMPLETION_STATUS_KHR)):await m.Th(5),!i.getShaderParameter(h,i.COMPILE_STATUS)){const c=i.getShaderInfoLog(h);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling fragment shader: "+c)}if(!i.getShaderParameter(o,i.COMPILE_STATUS)){const f=i.getShaderInfoLog(o);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling vertex shader: "+f)}if(!i.getProgramParameter(a,i.LINK_STATUS)){const d=i.getProgramInfoLog(a);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error linking shader program: "+d)}const u=m.F1(i.getProgramInfoLog(a)||"").trim();return u&&!m.P1(u)&&console.info(`[WebGL] Shader program '${r}' compilation log: `,u),i.deleteShader(h),i.deleteShader(o),a}static async tM(t,s){const i=await m.Ug.Xx.Yx(t,s);return new m.Ug.Xx(t,i,s)}constructor(t,s,i){super(t,i);const e=t.Rb(),n=t.Ex(),r=(t.JS(),e.useProgram(s),this.sM=e,this.zv=s,this.iM="<default-device-transform>"===i.name,e.getAttribLocation(s,"aPos")),h=e.getAttribLocation(s,"aTex"),o=(this.eM=e.getAttribLocation(s,"aPoints"),-1!==r&&(e.bindBuffer(e.ARRAY_BUFFER,t.nM),e.vertexAttribPointer(r,t.HS(),e.FLOAT,!1,0,0),e.enableVertexAttribArray(r)),-1!==h&&(e.bindBuffer(e.ARRAY_BUFFER,t.rM),e.vertexAttribPointer(h,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(h)),-1!==this.eM&&(e.bindBuffer(e.ARRAY_BUFFER,t.hM),e.vertexAttribPointer(this.eM,4,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.eM)),e.bindBuffer(e.ARRAY_BUFFER,null),this.oM=new m.Ug.aM(this,"matP","mat4"),this.lM=new m.Ug.aM(this,"matMV","mat4"),this.uM=new m.Ug.aM(this,"color","vec4"),this.cM=new m.Ug.aM(this,"samplerFront","sampler"),this.fM=new m.Ug.aM(this,"pointTexStart","vec2"),this.dM=new m.Ug.aM(this,"pointTexEnd","vec2"),this.pM=new m.Ug.aM(this,"zElevation","float"),this.mM=new m.Ug.aM(this,"tileSize","vec2"),this.gM=new m.Ug.aM(this,"tileSpacing","vec2"),this.yM=new m.Ug.aM(this,"color2_","vec4"),this.wM=new m.Ug.aM(this,"outlineThickness","float"),this.SM=new m.Ug.aM(this,"samplerBack","sampler"),this.vM=new m.Ug.aM(this,"samplerDepth","sampler"),this.bM=new m.Ug.aM(this,"destStart","vec2"),this.xM=new m.Ug.aM(this,"destEnd","vec2"),this.MM=new m.Ug.aM(this,"srcStart","vec2"),this.GM=new m.Ug.aM(this,"srcEnd","vec2"),this.TM=new m.Ug.aM(this,"srcOriginStart","vec2"),this._M=new m.Ug.aM(this,"srcOriginEnd","vec2"),this.IM=new m.Ug.aM(this,"pixelSize","vec2"),this.CM=new m.Ug.aM(this,"seconds","float"),this.EM=new m.Ug.aM(this,"devicePixelRatio","float"),this.PM=new m.Ug.aM(this,"layerScale","float"),this.RM=new m.Ug.aM(this,"layerAngle","float"),this.AM=new m.Ug.aM(this,"layoutStart","vec2"),this.FM=new m.Ug.aM(this,"layoutEnd","vec2"),this.OM=new m.Ug.aM(this,"zNear","float"),this.DM=new m.Ug.aM(this,"zFar","float"),this.LM=!!(this.IM.kM()||this.CM.kM()||this.SM.kM()||this.bM.kM()||this.xM.kM()||this.MM.kM()||this.GM.kM()||this.TM.kM()||this._M.kM()||this.EM.kM()||this.PM.kM()||this.RM.kM()||this.AM.kM()||this.FM.kM()),i.parameters||[]);this.NM=[],this.Ev=this.IM.kM()||this.MM.kM()||this.GM.kM()||this.TM.kM()||this._M.kM(),this.BM=!1,this.WM=!1,this.uM.jM(1,1,1,1),this.yM.jM(1,1,1,1),this.cM.UM(0),this.SM.UM(1),this.vM.UM(2),this.fM.VM(0,0),this.dM.VM(1,1),this.pM.HM(0),this.mM.VM(0,0),this.gM.VM(0,0),this.bM.VM(0,0),this.xM.VM(1,1),this.MM.VM(0,0),this.GM.VM(0,0),this.TM.VM(0,0),this._M.VM(0,0),this.IM.VM(0,0),this.EM.HM(1),this.OM.HM(t.ow()),this.DM.HM(t.lw()),this.PM.HM(1),this.RM.HM(0),this.CM.HM(0),this.AM.VM(0,0),this.FM.VM(0,0),this.wM.HM(1);for(const l of o){const u=l[0],c=l[2],f=new m.Ug.aM(this,u,c);"color"===c?f.zM(0,0,0):f.HM(0),this.NM.push(f)}this.iM?this.JM(n.qM):(this.$M(n.qM,!0),this.XM(n.YM,!0));const a=n.ZM;e.useProgram(a?a.zv:null)}ir(){this.sM.deleteProgram(this.zv),this.zv=null,this.lv.xw(this),this.sM=null,super.ir()}KM(){return this.sM}QM(){return this.zv}tG(){return this.NM.length}sG(t){return t<0||t>=this.NM.length?null:this.NM[t].iG()}eG(i){for(let t=0,s=i.length;t<s;++t)if(!this.NM[t].nG(i[t]))return!1;return!0}rG(i){for(let t=0,s=i.length;t<s;++t)this.NM[t].hG(i[t])}oG(t,s,i,e,n,r,h,o,a,l){return!this.SM.kM()&&!(this.IM.kM()&&!this.IM.aG(n,r)||this.bM.kM()&&!this.bM.aG(t.pl(),t.ml())||this.xM.kM()&&!this.xM.aG(t.gl(),t.yl())||this.EM.kM()&&!this.EM.lG(h)||this.PM.kM()&&!this.PM.lG(o)||this.RM.kM()&&!this.RM.lG(a)||this.MM.kM()&&!this.MM.aG(s.pl(),s.ml())||this.GM.kM()&&!this.GM.aG(s.gl(),s.yl())||this.TM.kM()&&!this.TM.aG(i.pl(),i.ml())||this._M.kM()&&!this._M.aG(i.gl(),i.yl())||this.AM.kM()&&!this.AM.aG(e.pl(),e.ml())||this.FM.kM()&&!this.FM.aG(e.ml(),e.yl())||this.CM.kM()&&!this.CM.lG(l))}uG(t,s,i,e,n,r,h,o,a,l){this.SM.kM()||(this.IM.kM()&&this.IM.cG(n,r),this.bM.kM()&&this.bM.cG(t.pl(),t.ml()),this.xM.kM()&&this.xM.cG(t.gl(),t.yl()),this.EM.kM()&&this.EM.fG(h),this.PM.kM()&&this.PM.fG(o),this.RM.kM()&&this.RM.fG(a),this.MM.kM()&&this.MM.cG(s.pl(),s.ml()),this.GM.kM()&&this.GM.cG(s.gl(),s.yl()),this.TM.kM()&&this.TM.cG(i.pl(),i.ml()),this._M.kM()&&this._M.cG(i.gl(),i.yl()),this.AM.kM()&&this.AM.cG(e.pl(),e.ml()),this.FM.kM()&&this.FM.cG(e.ml(),e.yl()),this.CM.kM()&&this.CM.fG(l))}$M(t,s){this.BM&&!s||this.iM||(this.oM.kM()&&this.oM.dG(t),this.BM=!0)}pG(){this.BM=!1}XM(t,s){this.WM&&!s||this.iM||(this.lM.kM()&&this.lM.dG(t),this.WM=!0)}mG(){this.WM=!1}JM(t){if(!this.iM)throw new Error("not device transform shader");this.oM.dG(t);const s=this.lv,i=s.$p()/2,e=s.hm()/2,n=s.Sw(i,e,s.Qy(s.hm()),i,e,0,s.hm());this.lM.dG(n)}gG(t){this.uM.kM()&&this.uM.yG(t[0],t[1],t[2],t[3])}static wG(){return Ci}static SG(t){const s=t?"highmedp":"mediump";return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","attribute highp vec3 aPos;",`attribute ${s} vec2 aTex;`,`varying ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static vG(t){const s=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${s} vec2 aTex;`,`out ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static bG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","}"].join("\n")}static xG(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static MG(){return["#version 300 es","in mediump vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static GG(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","}"].join("\n")}static TG(){return["#extension GL_EXT_frag_depth : enable","#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static _G(){return["#version 300 es","in highp vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static IG(t,s,i){let e="";return 2<=t?e="#version 300 es\n":(s&&(e="#extension GL_EXT_frag_depth : enable\n"),i&&(e+="#extension GL_EXT_shader_texture_lod : enable\n#extension GL_OES_standard_derivatives : enable\n")),e+`
#ifdef GL_FRAGMENT_PRECISION_HIGH
#define highmedp highp
#else
#define highmedp mediump
#endif
precision highmedp float;
${2<=t?"in":"varying"} vec2 vTex;
${2<=t?"out lowp vec4 outColor;":""}
uniform lowp vec4 color;
uniform lowp sampler2D samplerFront;
uniform vec2 pixelSize;

uniform vec2 tileSize;
uniform vec2 tileSpacing;
uniform float outlineThickness;

const float PI = 3.1415926;

lowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)
{
	return (a + b + (a - b) * cos(x * PI)) / 2.0;
}

vec3 randVec3(vec2 seed)
{
	return vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),
				fract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),
				fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));
}

lowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)
{
	vec2 posRandom = tileSize;
	float angleRandom = outlineThickness;
	
	vec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;
	
	float angle = angleRandom * rand.z * PI;
	float sin_a = sin(angle);
	float cos_a = cos(angle);
	float aspect = pixelSize.x / pixelSize.y;

	vec2 mid = tile + vec2(0.5, 0.5);
	vec2 dp = uv - mid;
	dp.x /= aspect;
	vec2 r = vec2(dp.x * cos_a - dp.y * sin_a,
				  dp.y * cos_a + dp.x * sin_a);
	r.x *= aspect;

	vec2 p = mid + r + (posRandom * rand.xy / 2.0);
	
	${2<=t?"return textureGrad(samplerFront, p, ddx, ddy);":""}
	${t<2&&i?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}
	${t<2&&!i?"return texture2D(samplerFront, p);":""}
}

void main(void) {
	
	${t<2?"lowp vec4 outColor;":""}
	
	float blendMarginX = tileSpacing.x;
	float blendMarginY = tileSpacing.y;
	
	vec2 tile = floor(vTex);
	vec2 tex = fract(vTex);
	vec2 ddx = ${2<=t||i?"dFdx(vTex)":"vec2(0.0, 0.0)"};
	vec2 ddy = ${2<=t||i?"dFdy(vTex)":"vec2(0.0, 0.0)"};
	
	vec4 curTile = sampleTile(tile, vTex, ddx, ddy);
	
	bool inLeftMargin = (tex.x < blendMarginX);
	bool inRightMargin = (tex.x > 1.0 - blendMarginX);
	bool inTopMargin = (tex.y < blendMarginY);
	bool inBottomMargin = (tex.y > 1.0 - blendMarginY);
	
	if (inLeftMargin)
	{
		lowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);
		float leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;
		lowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);
			
			outColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);
			
			outColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = leftMixedTile;
		}
	}
	else if (inRightMargin)
	{
		lowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);
		float rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);
		lowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);
			
			outColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);
			
			outColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = rightMixedTile;
		}
	}
	else if (inTopMargin)
	{
		lowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
		outColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
	}
	else if (inBottomMargin)
	{
		lowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
		outColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
	}
	else
	{
		outColor = curTile;
	}
	
	outColor *= color;
	${t<2?"gl_FragColor = outColor;":""}
	${2<=t?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
	${t<2&&s?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
}
`}static CG(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static EG(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static PG(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static AG(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static FG(){return["#version 300 es","uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static OG(){return["uniform lowp vec4 color;","void main(void) {","\tgl_FragColor = color;","}"].join("\n")}static DG(){return["precision lowp float;","varying mediump vec2 vTex;","uniform vec4 color;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(color.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(color.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static LG(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","precision lowp float;","varying highmedp vec2 vTex;","uniform vec4 color;","void main(void) {",`	highmedp float grad = vTex.x / (1.0 - vTex.y);`,`	gl_FragColor = color * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);`,"}"].join("\n")}static kG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = color * f;","}"].join("\n")}static NG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = color * f;","}"].join("\n")}static BG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump float innerF = step(distSq, 0.25);","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}static WG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = color * f;","}"].join("\n")}static jG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 pxNorm = pixelSize * norm;","\tmediump vec2 innerEdge1 = halfNorm - pxNorm;","\tmediump vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\tmediump float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\tmediump vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\tmediump vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\tmediump vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\tmediump vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\tmediump float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}}}{const Ei=self.Os,Pi=self.ys,Gn=Pi.bs,Ri=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);Ei.Ug.aM=class{constructor(t,s,i){if(!Ri.has(i))throw new Error("invalid uniform type");this.A2=t,this.sM=this.A2.KM(),this.rr=s,this.nf=i,this.UG="color"===this.nf,this.VG=this.sM.getUniformLocation(this.A2.QM(),s),this.HG=!!this.VG;const e=Ri.get(i);this.zG=new Float32Array(e),this.JG=new Float32Array(e)}ir(){this.A2=null,this.sM=null,this.VG=null}kM(){return this.HG}iG(){return this.nf}qG(){return this.UG}HM(t){this.kM()&&(this.zG[0]=t,this.JG.set(this.zG),this.sM.uniform1f(this.VG,t))}UM(t){this.kM()&&(this.zG[0]=t,this.JG.set(this.zG),this.sM.uniform1i(this.VG,t))}VM(t,s){this.kM()&&(this.zG[0]=t,this.zG[1]=s,this.JG.set(this.zG),this.sM.uniform2f(this.VG,t,s))}zM(t,s,i){this.kM()&&(this.zG[0]=t,this.zG[1]=s,this.zG[2]=i,this.JG.set(this.zG),this.sM.uniform3f(this.VG,t,s,i))}jM(t,s,i,e){this.kM()&&(this.zG[0]=t,this.zG[1]=s,this.zG[2]=i,this.zG[3]=e,this.JG.set(this.zG),this.sM.uniform4f(this.VG,t,s,i,e))}$G(t){t=Math.fround(t);const s=this.zG;s[0]!==t&&(s[0]=t,this.sM.uniform1f(this.VG,t))}XG(t){const s=this.zG;s[0]!==t&&this.sM.uniform1i(this.VG,s[0]=t)}YG(t,s){t=Math.fround(t),s=Math.fround(s);const i=this.zG;i[0]===t&&i[1]===s||(i[0]=t,i[1]=s,this.sM.uniform2f(this.VG,t,s))}ZG(t,s,i){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i);const e=this.zG;e[0]===t&&e[1]===s&&e[2]===i||(e[0]=t,e[1]=s,e[2]=i,this.sM.uniform3f(this.VG,t,s,i))}yG(t,s,i,e){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i),e=Math.fround(e);const n=this.zG;n[0]===t&&n[1]===s&&n[2]===i&&n[3]===e||(n[0]=t,n[1]=s,n[2]=i,n[3]=e,this.sM.uniform4f(this.VG,t,s,i,e))}dG(t){const s=this.zG;Gn.B(s,t)||(Ei.Eh(s,t,0),this.sM.uniformMatrix4fv(this.VG,!1,t))}nG(t){const s=this.JG;return this.qG()?s[0]===Math.fround(t.Yo())&&s[1]===Math.fround(t.Zo())&&s[2]===Math.fround(t.Ko()):s[0]===Math.fround(t)}hG(t){const s=this.JG;this.qG()?(s[0]=t.Yo(),s[1]=t.Zo(),s[2]=t.Ko()):s[0]=t}lG(t){return this.JG[0]===Math.fround(t)}aG(t,s){const i=this.JG;return i[0]===Math.fround(t)&&i[1]===Math.fround(s)}fG(t){this.JG[0]=t}cG(t,s){const i=this.JG;i[0]=t,i[1]=s}}}{const Ai=self.Os,Fi=self.ys,Vn=Fi._s,Gn=Fi.bs;Ai.Ug.KG=class{constructor(t){this.renderer=t,this.YM=Gn.create(),this.qM=Gn.create(),this.Px=null,this.Rx=null,this.QG=!1,this.tT=Vn._(1,1,1,1),this.ZM=null,this.sT=new Ai.Rect,this.clearColor=Ai.tr(Ai.Lo,0,0,0,0)}},Ai.Ug.iT=class{constructor(t){const s=new ArrayBuffer(96);this.nf=0,this.eT=t,this.sM=t.renderer.Rb(),this.nT=0,this.rT=0,this.hT=null,this.oT=new Float32Array(s,0,16),this.aT=new Float32Array(s,64,4),this.lT=new Float32Array(s,80,4),this.uT=[]}cT(t,s){this.nf=1,this.nT=t,this.rT=s}fT(){const t=this.sM;t.drawElements(t.TRIANGLES,this.rT,t.UNSIGNED_SHORT,this.nT)}dT(t){this.nf=2,this.hT=t}pT(){const t=this.sM,s=this.hT;t.bindTexture(t.TEXTURE_2D,s?s.zb():null)}mT(t){this.nf=3,t.ia(this.aT,0)}gT(){const t=this.aT,s=this.eT;Vn.T(s.tT,t),s.ZM.gG(t)}yT(t){this.nf=21,t.ia(this.aT,0)}wT(){const t=this.aT,s=this.eT.ZM;s.yM.kM()&&s.yM.yG(t[0],t[1],t[2],t[3])}ST(t,s){this.nf=4,this.nT=t,this.rT=s}vT(){this.sM.blendFunc(this.nT,this.rT)}bT(t,s,i,e){this.nf=5;const n=this.aT;n[0]=t,n[1]=s,n[2]=i,n[3]=e}xT(){const t=this.aT;this.sM.viewport(t[0],t[1],t[2],t[3])}MT(t){this.nf=6,Gn.T(this.oT,t)}GT(){const t=this.eT,i=t.renderer.Sy,e=t.ZM,n=this.oT;for(let t=0,s=i.length;t<s;++t){const r=i[t];r===e?r.$M(n,!0):r.pG()}Gn.T(t.qM,n)}TT(t){this.nf=7,Gn.T(this.oT,t)}_T(){const t=this.eT,i=t.renderer.Sy,e=t.ZM,n=this.oT;for(let t=0,s=i.length;t<s;++t){const r=i[t];r===e?r.XM(n,!0):r.mG()}Gn.T(t.YM,n)}IT(t){this.nf=8,this.hT=t}CT(){const t=this.sM,s=this.hT,i=this.eT;s?(i.Px=s.Ax(),i.Rx=s.Fx(),i.QG&&i.Rx?t.bindFramebuffer(t.FRAMEBUFFER,i.Rx):t.bindFramebuffer(t.FRAMEBUFFER,i.Px)):(i.Px=null,i.Rx=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}ET(t){this.nf=9,t.ia(this.oT,0)}PT(t,s,i,e){this.nf=9;const n=this.oT;n[0]=t,n[1]=s,n[2]=i,n[3]=e}RT(){const t=this.sM,s=this.oT,i=this.eT,e=i.clearColor,n=s[0],r=s[1],h=s[2],o=s[3];e.oa(n,r,h,o)||(t.clearColor(n,r,h,o),e.jo(n,r,h,o)),t.clear(t.COLOR_BUFFER_BIT)}AT(t){this.nf=15,t.ia(this.oT,0)}FT(){const t=this.oT;this.eT.sT.set(t[0],t[1],t[2],t[3])}OT(t,s){this.nf=10,this.nT=t,this.rT=1,this.oT[0]=s}DT(){const t=this.sM,s=this.eT,i=s.renderer,e=i.xy,n=(t.useProgram(e.zv),e.$M(s.qM,!1),e.XM(s.YM,!1),s.sT),r=(e.fM.kM()&&e.fM.YG(n.pl(),n.ml()),e.dM.kM()&&e.dM.YG(n.gl(),n.yl()),this.oT[0]);if(e.pM.kM()&&e.pM.$G(r),e.uM.kM()){const h=s.tT;e.uM.yG(h[0],h[1],h[2],h[3])}t.drawArrays(t.POINTS,this.nT/4,this.rT),t.useProgram(s.ZM.zv)}LT(t){this.nf=11,this.hT=t}kT(){const t=this.sM,s=this.eT,i=this.hT;if(s.ZM=i,t.useProgram(i.zv),i.$M(s.qM,!1),i.XM(s.YM,!1),i.uM.kM()){const e=s.tT;i.uM.yG(e[0],e[1],e[2],e[3])}}NT(){this.nf=12}BT(){const t=this.eT.ZM,s=this.sM,i=this.oT,e=this.aT,n=this.lT;if(t.SM.kM()){const r=this.eT.renderer,h=this.hT;r.WT!==h&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,h?h.zb():null),r.WT=h,s.activeTexture(s.TEXTURE0))}t.IM.kM()&&t.IM.YG(i[0],i[1]),t.bM.kM()&&t.bM.YG(i[2],i[3]),t.xM.kM()&&t.xM.YG(i[4],i[5]),t.EM.kM()&&t.EM.$G(this.rT),t.PM.kM()&&t.PM.$G(i[6]),t.RM.kM()&&t.RM.$G(i[7]),t.MM.kM()&&t.MM.YG(i[12],i[13]),t.GM.kM()&&t.GM.YG(i[14],i[15]),t.TM.kM()&&t.TM.YG(n[0],n[1]),t._M.kM()&&t._M.YG(n[2],n[3]),t.AM.kM()&&t.AM.YG(e[0],e[1]),t.FM.kM()&&t.FM.YG(e[2],e[3]),t.CM.kM()&&t.CM.$G(this.nT)}jT(){this.nf=13}UT(){const t=this.eT.ZM,i=t.NM,e=this.uT;for(let t=0,s=i.length;t<s;++t){const n=i[t],r=e[t];n.qG()?n.ZG(r.Yo(),r.Zo(),r.Ko()):n.$G(r)}}VT(t){this.nf=14,this.hT=t}HT(){const t=this.sM,s=this.hT,i=this.eT.Px;s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,s),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,i)}zT(t,s,i){this.nf=17;const e=this.oT,n=this.eT.renderer,r=(e[0]=t.$p(),e[1]=t.hm(),e[2]=(s||n).$p(),e[3]=(s||n).hm(),e[4]=t.Lx()?1:0,e[5]="stretch"===i,this.uT);Ai.Rh(r),r.push(t.Ax()),r.push(s?s.Ax():null)}JT(){const t=this.oT,s=this.uT,i=this.sM,e=t[0],n=t[1],r=t[2],h=t[3],o=0!==t[4],a=0!==t[5],l=s[0],u=s[1];if(i.bindFramebuffer(i.READ_FRAMEBUFFER,l),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,u),a)i.blitFramebuffer(0,0,e,n,0,0,r,h,i.COLOR_BUFFER_BIT,o?i.LINEAR:i.NEAREST);else{const c=Math.min(e,r),f=Math.min(n,h),d=Math.max(n-h,0),p=Math.max(h-n,0);i.blitFramebuffer(0,d,c,f+d,0,p,c,f+p,i.COLOR_BUFFER_BIT,i.NEAREST)}}qT(t){this.nf=18,this.hT=t}$T(){this.hT.XT(),this.hT=null}YT(t){this.nf=19,this.hT=t}ZT(){this.hT.KT(),this.hT=null}QT(t,s,i){this.nf=20;const e=this.oT;e[0]=t,e[1]=s,e[2]=i}t_(){const t=this.eT.ZM,s=this.oT;t.IM.kM()&&t.IM.YG(s[0],s[1]),t.wM.kM()&&t.wM.$G(s[2])}s_(t,s,i,e,n,r,h){this.nf=16;const o=this.oT;t.ia(o,0),o[4]=1/s,o[5]=1/i,o[6]=e/s,o[7]=n/i,o[8]=r/s,o[9]=h/i}i_(){const t=this.eT.ZM,s=this.oT;t.MM.kM()&&t.MM.YG(s[0],s[1]),t.IM.kM()&&t.IM.YG(s[4],s[5]),t.mM.kM()&&t.mM.YG(s[6],s[7]),t.gM.kM()&&t.gM.YG(s[8],s[9])}e_(t,s,i,e,n,r,h){this.nf=29;const o=this.oT;o[0]=1/t,o[1]=1/s,o[2]=i,o[3]=e,o[4]=n,o[5]=r,o[6]=h}n_(){const t=this.eT.ZM,s=this.oT;t.IM.kM()&&t.IM.YG(s[0],s[1]),t.mM.kM()&&t.mM.YG(s[2],s[3]),t.wM.kM()&&t.wM.$G(s[4]),t.gM.kM()&&t.gM.YG(s[5],s[6])}r_(t){this.nf=22,this.nT=t?1:0}h_(){const t=this.sM,s=0!==this.nT;s||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),s||t.depthMask(!1)}o_(t){this.nf=23,this.nT=t?1:0}a_(){const t=this.sM;0===this.nT?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}l_(t){this.nf=24,this.nT=t?1:0}u_(){const t=this.sM,s=this.eT,i=s.renderer,e=0!==this.nT;s.QG=e,t.activeTexture(t.TEXTURE2),e?(s.Rx&&t.bindFramebuffer(t.FRAMEBUFFER,s.Rx),t.bindTexture(t.TEXTURE_2D,i.Tx())):(t.bindTexture(t.TEXTURE_2D,null),s.Rx&&t.bindFramebuffer(t.FRAMEBUFFER,s.Px)),t.activeTexture(t.TEXTURE0)}c_(){this.nf=25}f_(){const t=this.sM;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}d_(){this.nf=26}p_(){const t=this.sM;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}m_(){this.nf=27}g_(){const t=this.sM;t.disable(t.STENCIL_TEST)}y_(t,s,i,e,n){this.nf=28,this.nT=t?1:0;const r=this.oT;r[0]=s,r[1]=i,r[2]=e,r[3]=n}w_(){const t=this.sM,s=this.oT;1===this.nT?(t.enable(t.SCISSOR_TEST),t.scissor(s[0],s[1],s[2],s[3])):t.disable(t.SCISSOR_TEST)}S_(){switch(this.nf){case 1:return void this.fT();case 2:return void this.pT();case 3:return void this.gT();case 4:return void this.vT();case 5:return void this.xT();case 6:return void this.GT();case 7:return void this._T();case 8:return void this.CT();case 9:return void this.RT();case 10:return void this.DT();case 11:return void this.kT();case 12:return void this.BT();case 13:return void this.UT();case 14:return void this.HT();case 15:return void this.FT();case 16:return void this.i_();case 17:return void this.JT();case 18:return void this.$T();case 19:return void this.ZT();case 20:return void this.t_();case 21:return void this.wT();case 22:return void this.h_();case 23:return void this.a_();case 24:return void this.u_();case 25:return void this.f_();case 26:return void this.p_();case 27:return void this.g_();case 28:return void this.w_();case 29:return void this.n_()}}}}{let I=function(t,s,i,e,n,r){s?t.strokeRect(i,e,n,r):t.fillRect(i,e,n,r)},t=function(t){return t*(4/3)},o=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0};I,t,o;const Oi=self.Os,Di=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),Li={timeout:60},ki=new Oi.Lo(0,0,0,1),Ni=new Set(["left","center","right"]),Bi=new Set(["top","center","bottom"]),Wi=new Set(["word","cjk","character"]),ji=new Set(["ltr","rtl"]),Ui=new Set;Oi.FontManager&&Oi.FontManager.addEventListener("fontload",t=>{const s=t.font.jc();for(const i of Ui)(i.v_()||Oi.pn(i.b_(),s))&&i.x_()});let s=!1,i=!1;Oi.Ug.ov=class{constructor(t,s){s=Object.assign({},Li,s),this.lv=t,this.M_="Arial",this.G_=16,this.T_=1,this.__=0,this.I_=!1,this.C_=!1,this.E_="black",this.P_=!1,this.Vp=null,this.R_=!0,this.A_=null,this.F_=new Set,this.O_="left",this.D_="top",this.Yc="",this.L_=null,this.k_=Oi.tr(Oi.jp),this.N_="word",this.B_="ltr",this.W_=!1,this.j_=!1,this.U_=!1,this.V_=-1,this.H_=0,this.z_=0,this.J_=0,this.Dm=0,this.Lm=0,this.q_=1,this.X_=null,this.Y_=null,this.Z_=null,this.K_=null,this.Q_=-1,this.tI=-1,this.sI="",this.iI="",this.eI="",this.nI=1,this.rI=1,this.hI=t=>this.oI(t),this.vb=null,this.aI=new Oi.Rect,this.lI=1,this.uI=new Oi.qf(()=>{this.cI(),this.fI(8,8)},s.timeout),this.dI=null,this.pI=!1,Ui.add(this)}ir(){this.A_=null,this.F_.clear(),this.Vp=null,this.L_=null,this.X_=null,this.Y_=null,this.Z_=null,this.K_=null,this.hI=null,this.uI.ir(),this.dI=null,this.cI(),this.k_.Clear(),this.k_=null,this.lv=null,this.pI=!0,Ui.delete(this)}mI(){this.U_=!0}gI(){this.mI(),this.j_=!0}x_(){this.gI(),this.W_=!0}yI(t){if(this.P_!==(t=!!t)){this.P_=t;const s=this.P_?"alphabetic":"top";this.Y_&&(this.Y_.textBaseline=s),this.Z_&&(this.Z_.textBaseline=s),this.x_()}}v_(){return this.P_}Jp(t){this.Vp!==t&&(this.Vp=t,this.k_.Jp(t),this.Vp&&this.Vp.Eg()&&this.Vp.Pg().then(()=>this.mI()),this.x_())}wI(t){this.R_!==(t=!!t)&&(this.R_=t,this.mI())}SI(t){this.M_!==(t=t||"serif")&&(this.M_=t,this.x_())}b_(){return this.M_}vI(t){this.G_!==(t=t<.1?.1:t)&&(this.G_=t,this.x_())}bI(){return this.G_}xI(t){this.T_!==t&&(this.T_=t,this.x_())}MI(t){this.__!==t&&(this.__=t,this.gI())}GI(){return this.__}TI(t){this.I_!==(t=!!t)&&(this.I_=t,this.x_())}_I(){return this.I_}II(t){this.C_!==(t=!!t)&&(this.C_=t,this.x_())}CI(){return this.C_}EI(t){t=Math.floor(t),this.V_!==t&&(this.V_=t,this.mI())}RI(){return this.V_}AI(t,s){let i=[];(this.I_||s.Zm("b"))&&i.push("bold"),(this.C_||s.Zm("i"))&&i.push("italic");const e=s.Ym("size"),n=(e?parseFloat(e.param):this.G_)*this.T_;i.push(t?n+"pt":n*this.FI()+"pt");let r=this.M_,h=s.Ym("font");return h&&h.param&&(r=h.param,this.A_)&&!this.F_.has(r)&&(this.A_(r),this.F_.add(r)),r&&(Di.has(r)?i.push(r):i.push('"'+r+'"')),i.join(" ")}Zv(t){t instanceof Oi.Lo&&(t=t.pa()),this.E_!==t&&(this.E_=t,this.mI())}OI(t,s,i){ki.Uo(t,s,i),this.Zv(ki)}DI(t){if(!Ni.has(t))throw new Error("invalid horizontal alignment");this.O_!==t&&(this.O_=t,this.gI())}LI(){return this.O_}kI(t){if(!Bi.has(t))throw new Error("invalid vertical alignment");this.D_!==t&&(this.D_=t,this.gI())}NI(){return this.D_}BI(t){if(!Wi.has(t))throw new Error("invalid word wrap mode");this.N_!==t&&(this.N_=t,this.x_())}WI(){return this.N_}jI(t){if(!ji.has(t))throw new Error("invalid text direction");this.B_!==t&&(this.B_=t,this.Y_&&(this.Y_.direction=this.B_),this.Z_&&(this.Z_.direction=this.B_),this.x_())}UI(){return this.B_}Qc(t){this.Yc!==t&&(this.Yc=t,this.x_())}VI(){return this.Yc}FI(){return this.lI*this.q_*self.devicePixelRatio}HI(r,h,o){if(void 0===o&&(o=1),!(r<=0||this.z_===r&&this.J_===h&&this.q_===o)){let t=this.z_,s=(this.z_=r,this.J_=h,this.q_=o,self.devicePixelRatio),i=(this.Dm=this.z_*this.q_*s,this.Lm=this.J_*this.q_*s,Math.max(this.Dm,this.Lm)),e=Math.min(this.lv.Pb(),4096),n=1;e<i&&(n=e/i,this.Dm=Math.min(this.Dm*n,e),this.Lm=Math.min(this.Lm*n,e)),this.lI=n,this.z_!==t?this.x_():this.gI()}}$p(){return this.Dm}hm(){return this.Lm}zI(){return this.q_}JI(){return this.qI(),this.k_.Fm()}$I(){return this.qI(),this.k_.Om()+this.k_.zp()*(this.__+4)-this.__}XI(){this.qI();let t=0;for(const s of this.k_.Hp())for(const i of s.dm())t+=i.pm();return t}Ox(){return this.uI.Kf(),this.YI(),this.vb}ZI(t,s){this.qI();const i=this.FI(),e=this.k_.Hp();for(const n of e){const r=n.am()*i;if(s>=n.qm()-n.hm()*i+r&&s<n.qm()+r)for(const h of n.dm())if(t>=h.zm()&&t<h.zm()+h.$p()*i)return h}return null}*KI(t){this.qI();const s=this.k_.Hp();for(const i of s)for(const e of i.dm()){const n=e.Ym("tag");n&&Oi.pn(n.param,t)&&(yield e)}}QI(t,s){for(const i of this.KI(t)){if(0===s)return i;--s}return null}tC(t){let s=0;for(const i of this.KI(t))++s;return s}YI(){this.vb&&!this.U_&&!this.j_&&!this.W_||this.pI||this.Dm<=0||this.Lm<=0||(this.U_=!1,this.sC())}sC(){this.pI||(this.qI(),this.fI(Math.max(Oi.Ar(Math.ceil(this.Dm)),128),Math.max(Oi.Ar(Math.ceil(this.Lm)),64)),this.iC(),this.eC(),this.uI.Kf())}fI(t,s){this.X_||(this.X_=Oi.Go(16,16));let i=!1;this.Q_===t&&this.tI===s||(this.Q_=t,this.tI=s,this.X_.width=t,this.X_.height=s,i=!0),this.Y_||(this.Y_=this.X_.getContext("2d"),i=!0),i?(this.Y_.textBaseline=this.P_?"alphabetic":"top",this.Y_.direction=this.B_,this.Y_.font=this.sI,this.Y_.fillStyle=this.eI,this.Y_.strokeStyle=this.eI,this.Y_.globalAlpha=this.nI,this.Y_.lineWidth=this.rI):this.Y_.clearRect(0,0,t,s)}nC(){this.Z_||(this.Z_=Oi.Go(16,16).getContext("2d"),this.K_=Oi.Go(16,16).getContext("2d"),this.Z_.textBaseline=this.P_?"alphabetic":"top",this.K_.textBaseline="top",this.Z_.direction=this.B_,this.K_.direction=this.B_)}rC(t){this.iI!==t&&(this.iI=t,this.Z_.font=t,this.K_.font=t)}hC(){if(!s){s=!0,this.nC();const t=this.Z_.measureText("test");i="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return i}qI(){this.oC(),this.aC()}oC(){this.W_&&(this.nC(),!this.P_||this.L_&&this.L_.toString()===this.Yc||(this.L_=new Oi.In(this.Yc,{xp:!0})),this.k_.jp(this.P_?this.L_.Fp():this.Yc,this.hI,this.z_,this.N_,0),this.W_=!1)}aC(){this.j_&&(this.lC(),this.j_=!1)}oI(t){let s=t.tm()?t.Mm().join(""):" ",i=(this.rC(this.AI(!0,t)),t.Ym("size")),e=(i?parseFloat(i.param):this.G_)*this.T_,n=this.Z_.measureText(s),r=0;if(this.P_&&this.hC()){const h=this.K_.measureText(s);r=n.fontBoundingBoxAscent-h.fontBoundingBoxAscent}return{width:n.width,height:4/3*e,fontBoundingBoxAscent:n.fontBoundingBoxAscent||0,fontBoundingBoxDescent:n.fontBoundingBoxDescent||0,Qp:r}}uC(t){this.sI!==t&&(this.sI=t,this.Y_.font=t)}cC(t){this.eI!==t&&(this.eI=t,this.Y_.fillStyle=t,this.Y_.strokeStyle=t)}fC(t){this.nI!==t&&(this.nI=t,this.Y_.globalAlpha=t)}dC(t){this.rI!==t&&(this.rI=t,this.Y_.lineWidth=t)}lC(){let e=this.FI(),n=(4+this.__)*e,r=0,h=this.k_.Hp();if(0!==h.length){for(const s of h){s.Hm(NaN),s.Jm(NaN);for(const o of s.dm())o.Hm(NaN),o.Jm(NaN)}let t=this.P_&&this.hC(),i=h[0].hm()*e;if("center"===this.D_){const a=h.reduce((t,s)=>t+s.hm()*e+n,0)-n;r=Math.max(this.Lm/2-a/2,0),t&&(i=h[0].lm()*e)}else if("bottom"===this.D_){const l=h.reduce((t,s)=>t+s.hm()*e+n,0)-this.__*e,u=t?h.at(-1).am()*e:0;r=this.Lm-l-u-2}for(let t=0,s=h.length;t<s;++t){const c=h[t],f=c.hm()*e,d=r;if(this.P_){if(r+=0===t?i:f,0<t&&r>this.Lm-4*e)break}else if(0<t&&r>=this.Lm-f)break;0<=d&&this.pC(c,r,e),this.P_||(r+=f),r+=n}}}pC(t,s,i){let e=0;"center"===this.O_?e=Math.floor((this.Dm-t.$p()*i)/2):"right"===this.O_&&(e=this.Dm-t.$p()*i),t.Hm(e),t.Jm(s);for(const n of"ltr"===this.B_?t.dm():t.Um())this.mC(n,e,s,i),e+=n.$p()*i}mC(t,s,i,e){const n=t.Ym("offsetx"),r=(s+=n?o(n.param,t.hm())*e:0,t.Ym("offsety"));if(i+=r?o(r.param,t.hm())*e:0,t.nm()){const h=t.Ym("iconoffsety");i+=h?o(h.param,t.hm())*e:.2*t.hm()*e}t.Hm(s),t.Jm(i)}iC(){this.Y_.imageSmoothingEnabled=this.R_,this.Y_.imageSmoothingQuality="high",this.H_=0;const t=this.FI(),s=this.k_.Hp();for(const i of s)this.gC(i,t)}gC(t,s){const i=t.zm(),e=t.qm();if(Number.isFinite(i)&&Number.isFinite(e))for(const n of"ltr"===this.B_?t.dm():t.Um())this.yC(n,s,t.hm())}yC(h,o,a){const l=this.Y_,u=h.zm(),c=h.qm();if(Number.isFinite(u)&&Number.isFinite(c)){let t=a/16,s=h.$p()*o,i=h.hm()*o,e=h.hm()/16,n=(4+this.__)*o,r=h.tm()?h.Mm():null;if(-1!==this.V_){if(this.H_>=this.V_)return;h.tm()&&this.H_+r.length>this.V_&&(r=r.slice(0,this.V_-this.H_),s=this.oI(h).width*o),this.H_+=h.pm()}const f=h.Ym("background"),d=h.Zm("u"),p=h.Zm("s");if((!h.tm()||!Oi.R1(r)||f||d||p)&&!h.Zm("hide")){const m=h.Ym("color"),g=h.Ym("opacity"),y=(this.fC(g?parseFloat(g.param)/100:1),f&&(this.cC(f.param),l.fillRect(u,c-i,s,i+n)),h.Ym("linethickness")),w=y?parseFloat(y.param):1,S=h.Zm("stroke");if(S&&this.dC(.5*e*w*this.FI()),h.tm()){const v=r.join("");if(this.uC(this.AI(!1,h)),!S){this.dC(.5*e*w*this.FI());const b=h.Ym("outlineback");b&&(this.cC(b.param),this.wC(!0,v,u,c,s))}if(this.cC(m?m.param:this.E_),this.wC(S,v,u,c,s),!S){this.dC(.5*e*w*this.FI());const x=h.Ym("outline");x&&(this.cC(x.param),this.wC(!0,v,u,c,s))}}else if(h.nm()&&0<h.$p()){const M=h.rg(this.Vp);M&&l.drawImage(M,u,c-i,s,i)}if(this.cC(m?m.param:this.E_),d&&I(l,S,u,c+o*t,s,o*t*w),p){const G=c-i/4,T=o*e,_=G+T/2;l.fillRect(u,_-T*w/2,s,T*w)}}}}wC(t,s,i,e,n){"rtl"===this.B_&&(i+=n),t?"Gecko"===Oi.ni.ci?this.Y_.strokeText(s,i,e,n):this.Y_.strokeText(s,i,e):"Gecko"===Oi.ni.ci?this.Y_.fillText(s,i,e,n):this.Y_.fillText(s,i,e)}eC(){this.lv.SC()||(this.vb||(this.vb=this.lv.Gx(this.X_.width,this.X_.height,{gb:!0,yb:"high"})),this.lv.vC(this.X_,this.vb),this.aI.set(0,0,this.Dm/this.vb.$p(),this.Lm/this.vb.hm()),this.dI&&this.dI())}bC(){return this.aI}cI(){this.vb&&(this.lv.SC()||this.lv.Cx(this.vb),this.vb=null)}static Kv(){for(const t of Ui)t.cI()}static xC(){return Ui.values()}}}{const Vi=self.Os;class Hi{constructor(t){this.sM=t.Rb(),this.MC=t.Ab(),this.GC=t.TC(),this._C=null,this.Zf=!1,this.IC=!1,this.CC=0,1===this.MC?this._C=this.GC.createQueryEXT():this._C=this.sM.createQuery()}ir(){this.EC(),this.sM=null,this.GC=null,this.IC=!1}EC(){this._C&&(1===this.MC?this.GC.deleteQueryEXT(this._C):this.sM.deleteQuery(this._C),this._C=null)}XT(){if(this.Zf)throw new Error("query already active");1===this.MC?this.GC.beginQueryEXT(this.GC.TIME_ELAPSED_EXT,this._C):this.sM.beginQuery(this.GC.TIME_ELAPSED_EXT,this._C),this.Zf=!0}KT(){if(!this.Zf)throw new Error("query not active");1===this.MC?this.GC.endQueryEXT(this.GC.TIME_ELAPSED_EXT):this.sM.endQuery(this.GC.TIME_ELAPSED_EXT),this.Zf=!1}PC(){if(this._C&&!this.IC&&!this.Zf){let t;t=1===this.MC?this.GC.getQueryObjectEXT(this._C,this.GC.QUERY_RESULT_AVAILABLE_EXT):this.sM.getQueryParameter(this._C,this.sM.QUERY_RESULT_AVAILABLE);const s=this.sM.getParameter(this.GC.GPU_DISJOINT_EXT);t&&!s&&(1===this.MC?this.CC=this.GC.getQueryObjectEXT(this._C,this.GC.QUERY_RESULT_EXT):this.CC=this.sM.getQueryParameter(this._C,this.sM.QUERY_RESULT),this.CC/=1e9,this.IC=!0),(t||s)&&this.EC()}}RC(){return this.IC}AC(){if(this.IC)return this.CC;throw new Error("no result available")}}Vi.Ug.FC=class{constructor(t){this.lv=t,this.zy=t.qS(),this.Zf=!1,this.OC=null,this.DC=!1,this.LC=null,this.kC=[]}ir(){for(const t of this.kC)t instanceof Hi&&t.ir();Vi.Rh(this.kC),this.OC=null,this.LC=null,this.lv=null}XT(){if(this.Zf)throw new Error("query already active");const t=this.lv.NC();0<t.length?(this.DC=!0,this.OC=t.at(-1),this.OC.BC(),this.OC.kC.push(this)):(this.DC=!1,this.OC=null),this.Zf=!0,t.push(this),this.WC()}KT(){if(!this.Zf)throw new Error("query not active");const t=this.lv.NC().pop();if(t!==this)throw new Error("can only end most nested query");this.Zf=!1,this.BC(),this.OC&&(this.OC.WC(),this.OC=null)}WC(){this.LC=Vi.tr(Hi,this.lv),this.kC.push(this.LC),this.LC.XT()}BC(){this.LC.KT(),this.LC=null}PC(){for(const t of this.kC)t.PC()}jC(){return this.DC}RC(){return this.kC.every(t=>t.RC())}AC(){return this.kC.reduce((t,s)=>t+s.AC(),0)}qS(){return this.zy}}}{const zi=self.Os;zi.Ug.UC=class{constructor(t,s=1e3){this.lv=t,this.VC=s,this.HC=[],this.lv.zC(this)}ir(){this.Clear(),this.lv.JC(this),this.lv=null}Clear(){for(const t of this.HC)t.ir();zi.Rh(this.HC)}qC(){const t=new zi.Ug.FC(this.lv);if(this.HC.push(t),this.HC.length>this.VC){const s=this.HC.shift();s.ir()}return t}$C(t){for(const s of this.HC){if(s.qS()>=t)return;if(s.jC())return;s.PC()}}XC(t,s){if(s<=t)return NaN;let i=0;for(const e of this.HC){if(e.qS()>=s)break;if(!(e.qS()<t)){if(!e.RC())return NaN;i+=e.AC()}}return i}YC(i){for(let t=0,s=this.HC.length;t<s;++t){const e=this.HC[t];if(!(e.qS()<i))return void(0<t&&this.HC.splice(0,t));e.ir()}}}}{let i=function(){n=-1;for(const t of e)t.ZC()&&(t.resolve(),e.delete(t));0<e.size&&(n=self.requestAnimationFrame(i))},v=(i,self.Os),t=self.ys,b=(t.Ts,t._s),y=t.bs,r={powerPreference:"default",KC:!0,alpha:!1,depth:!1,QC:!1,t3:2,failIfMajorPerformanceCaveat:!1},h=new Set(["default","low-power","high-performance"]),c=new v.Hl(0,0,1,0,1,1,0,1),w=y.create(),S=y.create(),x=new v.Hl,M=new v.Rect,G=null,e=(v.isDebug&&(self.s3=function(){G?G.loseContext():console.warn("WEBGL_lose_context not supported")},self.i3=function(){G?G.restoreContext():console.warn("WEBGL_lose_context not supported")}),new Set),n=-1;v.Ug.e3=class extends v.Ug.hy{constructor(t,s){if(super(s),s=Object.assign({},r,s),!h.has(s.powerPreference))throw new Error("invalid power preference");let i={alpha:!!s.alpha,depth:!1,antialias:!1,powerPreference:s.powerPreference,failIfMajorPerformanceCaveat:!!s.failIfMajorPerformanceCaveat},e=null,n=0;if(2<=s.t3&&(e=t.getContext("webgl2",i),n=2),e||(e=t.getContext("webgl",i),n=1),!e)throw new Error("renderer-unavailable (could not get WebGL context)");this.sM=e,this.n3=e.getContextAttributes(),this.r3=e.getParameter(e.VERSION),this.MC=n,this.h3=b.create(),this.o3=!1,this.a3=y.create(),this.l3=!!s.depth,this.u3=!(!s.depth||!s.QC),this.f3=this.l3,this.d3=!1,this.m3=null,this.g3=!0,this.y3=0,this.w3=0,this.nM=null,this.rM=null,this.S3=null,this.hM=null,this.v3=new Float32Array(8e3*this.HS()),this.b3=new Uint16Array(12e3),this.x3=new Float32Array(16e3),this.M3=new Float32Array(32e3),this.G3=0,this.T3=0,this._3=0,this.I3=0,this.C3=null,this.E3=null,this.P3=[],this.R3=0,this.A3=0,this.F3=null,this.O3=0,this.eT=v.tr(v.Ug.KG,this),this.D3=v.tr(v.Lo,1,1,1,1),this.L3=null,this.WT=null,this.N3=0,this.B3=0,this.W3=new v.Rect,this.j3=v.tr(v.Rect,0,0,-1,-1),this.U3=0,this.V3=-1,this.H3=0,this.z3=0,this.J3=0,this.q3="(unavailable)",this.X3="(unavailable)",this.Y3=[],this.Z3=!1,this.K3=null,this.Q3=null,this.tE=null,this.sE=null,this.iE=null,this.eE=null,this.nE=0,this.rE=!!s.KC,this.GC=null,this.hE=new Set,this.oE=[],this.$y(this.b3)}QS(){return!0}async Zy(){super.Zy();const t=this.sM,s=this.HS(),i=(this.D3.jo(1,1,1,1),this.L3=null,this.WT=null,this.G3=0,this._3=0,this.I3=8e3*s-4*s,v.Rh(this.P3),this.R3=0,this.A3=0,this.C3=null,this.F3=null,this.W3.set(0,0,1,1),this.O3=0,this.eT),e=(i.ZM=null,i.Px=null,i.Rx=null,b.set(i.tT,1,1,1,1),i.clearColor.jo(0,0,0,0),i.sT.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.N3=t.ONE,this.B3=t.ONE_MINUS_SRC_ALPHA,this.aE(t),t.disable(t.CULL_FACE),t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.l3?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this.f3=this.l3,this.d3=!1,this.hM=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.hM),t.bufferData(t.ARRAY_BUFFER,this.M3.byteLength,t.DYNAMIC_DRAW),this.nM=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.nM),t.bufferData(t.ARRAY_BUFFER,this.v3.byteLength,t.DYNAMIC_DRAW),this.rM=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.rM),t.bufferData(t.ARRAY_BUFFER,this.x3.byteLength,t.DYNAMIC_DRAW),this.S3=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.S3),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.b3,t.STATIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.V3=t.getParameter(t.MAX_TEXTURE_SIZE),t.getParameter(t.ALIASED_POINT_SIZE_RANGE)),n=(this.H3=e[0],this.z3=e[1],t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT)),r=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT),h=(this.J3=n&&r?Math.min(n.precision,r.precision):0,2048<this.z3&&(this.z3=2048),this.Y3=t.getSupportedExtensions(),t.getExtension("WEBGL_debug_renderer_info"));if(h&&(this.q3=t.getParameter(h.UNMASKED_VENDOR_WEBGL),this.X3=t.getParameter(h.UNMASKED_RENDERER_WEBGL)),this.K3=t.getExtension("KHR_parallel_shader_compile"),v.isDebug&&(G=t.getExtension("WEBGL_lose_context")),this.rE&&(1===this.Ab()?this.GC=t.getExtension("EXT_disjoint_timer_query"):this.GC=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.Q3=t.getExtension("EXT_texture_filter_anisotropic"),this.Q3?this.nE=t.getParameter(this.Q3.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.nE=0,this.Ab()<2&&this.l3&&this.u3&&(this.tE=t.getExtension("WEBGL_depth_texture"),!this.tE))throw new Error("no depth texture support");this.Ab()<2&&(this.sE=t.getExtension("EXT_frag_depth"),this.iE=t.getExtension("OES_standard_derivatives"),this.eE=t.getExtension("EXT_shader_texture_lod"));let o=v.Ug.Xx,a=o.SG(!1),l=o.bG(),u=a,c=o.PG(),f=o.CG(),d=o.GG(),p=o.SG(!0),m=!1;this.l3&&(this.Ab()<2?this.sE&&(l=o.xG(),c=o.AG(),d=o.TG(),m=!0):(u=o.vG(),l=o.MG(),c=o.FG(),f=o.EG(),d=o._G(),p=o.vG(!0)));const g=o.IG(this.Ab(),m,this.iE&&this.eE),y=2<=this.Ab()?o.vG():a,w=[[l,u,"<default>"],[l,u,"<default-device-transform>"],[c,f,"<point>"],[o.OG(),a,"<fill>"],[o.DG(),a,"<lineargradient>"],[o.LG(),a,"<penumbra>"],[o.NG(),a,"<hardellipse>"],[o.BG(),a,"<hardellipseoutline>"],[o.WG(),a,"<smoothellipse>"],[o.jG(),a,"<smoothellipseoutline>"],[o.kG(),a,"<smoothline>"],[d,p,"<tilemap>"],[g,y,"<tilerandomization>"]],S=await Promise.all(w.map(t=>this.lE({src:t[0],Zx:t[1],name:t[2]})));this.by=S[0],this.E3=S[1],this.xy=S[2],this.Ty=S[3],this._y=S[4],this.Iy=S[5],this.Cy=S[6],this.Ey=S[7],this.Py=S[8],this.Ry=S[9],this.Ay=S[10],this.My=S[11],this.Gy=S[12],this.Tw()}async lE(t){const s=await v.Ug.Xx.tM(this,t);return this.bw(s),s}uE(){this.C3=null}HI(t,s,i){if(this.Dm!==t||this.Lm!==s||i){this.JS();const e=this.sM,n=this.eT;this.Dm=t,this.Lm=s,this.cE(0,0,t,s),this.mw(this.a3,t/s),this.fE(this.a3),this.E3&&(e.useProgram(this.E3.QM()),this.E3.JM(this.uy),this.C3=this.E3,this.eT.ZM=this.E3),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0),this.L3=null,this.WT=null,this.l3&&this.g3&&this.dE(this.Dm,this.Lm),this.F3&&this.F3.Ix(this.Dm,this.Lm),e.bindFramebuffer(e.FRAMEBUFFER,null),this.F3=null,n.Px=null,n.Rx=null}}dE(t,s){const i=this.sM;this.m3&&this.y3===t&&this.w3===s||(this.u3?(this.m3&&i.deleteTexture(this.m3),this.m3=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.m3),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),2<=this.Ab()?i.texImage2D(i.TEXTURE_2D,0,i.DEPTH24_STENCIL8,t,s,0,i.DEPTH_STENCIL,i.UNSIGNED_INT_24_8,null):this.tE&&i.texImage2D(i.TEXTURE_2D,0,i.DEPTH_STENCIL,t,s,0,i.DEPTH_STENCIL,this.tE.UNSIGNED_INT_24_8_WEBGL,null),i.bindTexture(i.TEXTURE_2D,null)):(this.m3&&i.deleteRenderbuffer(this.m3),this.m3=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this.m3),i.renderbufferStorage(i.RENDERBUFFER,2<=this.MC?i.DEPTH24_STENCIL8:i.DEPTH_STENCIL,t,s),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.y3=t,this.w3=s)}pE(t,s){this.l3&&(this.g3=!1,this.dE(t,s))}mE(){this.l3&&(this.g3=!0,this.dE(this.Dm,this.Lm))}cE(t,s,i,e){const n=this.h3;if(n[0]!==t||n[1]!==s||n[2]!==i||n[3]!==e){const r=this.gE();r.bT(t,s,i,e),b.set(n,t,s,i,e),this.A3=0}}uw(t){super.uw(t),this.mw(this.a3,this.Dm/this.Lm)}hw(t){super.hw(t),this.mw(this.a3,this.Dm/this.Lm)}aw(t){super.aw(t),this.mw(this.a3,this.Dm/this.Lm)}fE(t){if(!y.B(this.uy,t)){const s=this.gE();s.MT(t),y.T(this.uy,t),this.A3=0,this.o3=!0}}yE(){let t,s,i,e=this.F3;i=(null===e?(t=this.a3,s=this.$p(),this):(t=e.Dx(),s=e.$p(),e)).hm(),this.fE(t),this.cE(0,0,s,i)}wE(t){if(!y.B(this.my,t)){const s=this.gE();s.TT(t),y.T(this.my,t),this.A3=0,this.o3=!0}}SE(){this.o3=!1}vE(){return this.o3}Ex(){return this.eT}gE(){const t=this.P3;return this.R3===t.length&&t.push(new v.Ug.iT(this.eT)),t[this.R3++]}JS(){0===this.R3||this.SC()||(this.bE(),this.xE(),this.R3=0,this.G3=0,this.T3=0,this._3=0,this.A3=0)}bE(){const t=this.sM;0<this._3&&(t.bindBuffer(t.ARRAY_BUFFER,this.hM),t.bufferSubData(t.ARRAY_BUFFER,0,this.M3.subarray(0,this._3))),0<this.G3&&(t.bindBuffer(t.ARRAY_BUFFER,this.nM),t.bufferSubData(t.ARRAY_BUFFER,0,this.v3.subarray(0,this.G3)),t.bindBuffer(t.ARRAY_BUFFER,this.rM),t.bufferSubData(t.ARRAY_BUFFER,0,this.x3.subarray(0,this.T3)))}xE(){const i=this.P3;for(let t=0,s=this.R3;t<s;++t)i[t].S_()}ME(){return this.D3.Qo()}GE(t,s,i,e){const n=this.D3;if(!n.oa(t,s,i,e)){n.jo(t,s,i,e);const r=this.gE();r.mT(n),this.A3=0,this.Oy=null}}TE(t){const s=this.D3;if(s.Qo()!==t){s.$o(t);const i=this.gE();i.mT(s),this.A3=0,this.Oy=null}}Zv(t){const s=this.D3;if(!s.equals(t)){s.set(t);const i=this.gE();i.mT(s),this.A3=0,this.Oy=null}}_E(){this.GE(1,1,1,1)}IE(){return this.D3}CE(t){if(t!==this.L3){const s=this.gE();s.dT(t),this.L3=t,this.A3=0}}Lb(){this.L3=null}SetBlendMode(t){const s=this.Kw(t);this.EE(s[0],s[1])}PE(t){const s=this.sS(t);this.EE(s.Yw,s.Zw)}EE(t,s){if(t!==this.N3||s!==this.B3){const i=this.gE();i.ST(t,s),this.N3=t,this.B3=s,this.A3=0,this.Oy=null}}RE(){return this.N3===this.sM.ONE&&this.B3===this.sM.ONE_MINUS_SRC_ALPHA}AE(){this.EE(this.sM.ONE,this.sM.ONE_MINUS_SRC_ALPHA)}FE(){this.EE(this.sM.SRC_ALPHA,this.sM.ONE_MINUS_SRC_ALPHA)}OE(){this.EE(this.sM.ONE,this.sM.ZERO)}Rect(t){this.DE(t.pl(),t.ml(),t.gl(),t.yl())}DE(t,s,i,e){this.VS(t,s,i,s,i,e,t,e)}LE(){let t=this.G3;if(t>=this.I3&&(this.JS(),t=0),1===this.A3)this.P3[this.R3-1].rT+=6;else{const s=this.gE();s.cT(t,6),this.A3=1}}kE(t){t.uu(this.v3,this.G3,this.ky+this.Ny),this.G3+=12}Hl(t){this.LE(),this.kE(t),c.ia(this.x3,this.T3),this.T3+=8}VS(t,s,i,e,n,r,h,o){this.LE();let a=this.v3,l=this.G3,u=this.ky+this.Ny;a[l++]=t,a[l++]=s,a[l++]=u,a[l++]=i,a[l++]=e,a[l++]=u,a[l++]=n,a[l++]=r,a[l++]=u,a[l++]=h,a[l++]=o,a[l++]=u,this.G3=l,c.ia(this.x3,this.T3),this.T3+=8}gS(t,s){this.LE(),this.kE(t),s.vl(this.x3,this.T3),this.T3+=8}NE(t,s){this.LE(),this.kE(t),s.ia(this.x3,this.T3),this.T3+=8}BE(t,s,i,e,n,r,h,o,a,l,u,c,f){this.LE();let d=this.v3,p=this.G3,m=this.ky+this.Ny;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=n,d[p++]=m+r,d[p++]=h,d[p++]=o,d[p++]=m+a,d[p++]=l,d[p++]=u,d[p++]=m+c,this.G3=p,f.vl(this.x3,this.T3),this.T3+=8}cS(t,s,i,e,n,r,h,o,a,l,u,c,f){this.LE();let d=this.v3,p=this.G3,m=this.ky+this.Ny;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=n,d[p++]=m+r,d[p++]=h,d[p++]=o,d[p++]=m+a,d[p++]=l,d[p++]=u,d[p++]=m+c,this.G3=p,f.ia(this.x3,this.T3),this.T3+=8}WE(e,n,r){const h=this.v3,o=this.x3;if(r.length%3!=0)throw new Error("invalid index buffer length");for(let i=0,t=r.length;i<t;){const a=r[i++],l=r[i++],u=r[i++],c=3*a,f=3*l,d=3*u,p=2*a,m=2*l,g=2*u;this.LE();let t=this.G3,s=this.T3;h[t++]=e[0+c],h[t++]=e[1+c],h[t++]=e[2+c],h[t++]=e[0+f],h[t++]=e[1+f],h[t++]=e[2+f],h[t++]=e[0+d],h[t++]=e[1+d],h[t++]=e[2+d],h[t++]=e[0+d],h[t++]=e[1+d],h[t++]=e[2+d],o[s++]=n[0+p],o[s++]=n[1+p],o[s++]=n[0+m],o[s++]=n[1+m],o[s++]=n[0+g],o[s++]=n[1+g],o[s++]=n[0+g],o[s++]=n[1+g],this.G3=t,this.T3=s}}jE(t,s){this.rS(0),y.T(w,this.uy),y.T(S,this.my),this.yE();const[i,e]=this.UE(this.F3),n=this.Sw(0,0,this.Qy(e),0,0,0,e);if(this.wE(n),"crop"===t&&this.F3&&s){const r=this.Dm/2,h=this.Lm/2,o=s.$p(),a=s.hm(),l=this.F3.$p(),u=this.F3.hm(),c=Math.min(l,o),f=Math.min(u,a),d=Math.max(a-u,0),p=Math.max(u-a,0);M.set(-r,h-p,-r+c,h-f-p),x.cu(M),M.set(0,d,c,f+d),M.Tt(o,a),this.gS(x,M)}else{const m=i/2,g=e/2;this.DE(-m,g,m,-g)}this.fE(w),this.wE(S)}VE(t){if(!this.W3.equals(t)){this.W3.T(t);const s=this.gE();s.AT(t),this.A3=0}}HE(){}zE(t,s,i,e){7996<=this._3&&this.JS();let n=this._3,r=this.ky+this.Ny;if(2===this.A3&&this.O3===r)this.P3[this.R3-1].rT++;else{const o=this.gE();o.OT(n,r),this.A3=2,this.O3=r}const h=this.M3;h[n++]=t,h[n++]=s,h[n++]=i,h[n++]=e,this._3=n}_w(t){if(this.C3!==t){const s=this.gE();s.LT(t),this.C3=t,this.A3=0,this.Oy=null}}JE(){return this.C3}qE(){this._w(this.E3)}$E(t){const s=this.gE();s.yT(t),this.A3=0}XE(t,s,i=1){const e=this.gE();e.QT(t,s,i),this.A3=0}YE(t,s,i,e,n,r,h){if(this.C3!==this.My)throw new Error("must set tilemap fill mode first");const o=this.gE();o.s_(t,s,i,e,n,r,h),this.A3=0}ZE(t,s,i,e,n,r,h){if(this.C3!==this.Gy)throw new Error("must set tile randomization mode first");const o=this.gE();o.e_(t,s,i,e,n,r,h),this.A3=0}KE(t,s,i,e,n,r,h,o,a,l,u){const c=this.C3;if(u%=10800,c.LM&&!c.oG(s,i,e,n,r,h,o,a,l,u)){const f=this.gE(),d=(f.NT(),c.uG(s,i,e,n,r,h,o,a,l,u),f.oT),p=(d[0]=r,d[1]=h,s.ia(d,2),d[6]=a,d[7]=l,i.ia(d,12),f.aT),m=(n.ia(p,0),p[1]);p[1]=p[3],p[3]=m,e.ia(f.lT,0),f.nT=u,f.rT=o,c.SM.kM()?f.hT=t?t.Ox():null:f.hT=null,this.A3=0}}QE(t){const s=this.C3;if(0!==t.length&&!s.eG(t)){const i=this.gE();i.jT(),s.rG(t),v.Dh(i.uT,t),this.A3=0}}tP(t,s,i,e){const n=this.gE();n.PT(t,s,i,e),this.A3=0}Clear(t){const s=this.gE();s.ET(t),this.A3=0}sP(){}zS(){super.zS(),this.sM.flush()}iP(){if(this.l3&&this.F3&&this.F3.Bx()){const t=this.gE();t.r_(this.f3),this.A3=0}}eP(t){if(this.f3!==(t=!!t)&&this.l3){this.f3=t;const s=this.gE();s.o_(t),this.A3=0}}nP(){return this.f3}Tx(){return this.m3}_x(){return this.u3}rP(t){if(t=!!t,this.u3&&this.d3!==t){if(t&&this.nP())throw new Error("depth still enabled");this.d3=t;const s=this.gE();s.l_(t),this.A3=0}}hP(t,s,i,e,n=0){if(t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),e=Math.floor(e),!this.j3.dl(t,s,i,e)){this.j3.hl(t,s,i,e);const r=n||this.UE(this.oP())[1],h=(s=r-s-e,this.gE());h.y_(!0,t,s,i,e),this.A3=0}}aP(){if(-1!==this.j3.gl()){this.j3.set(0,0,-1,-1);const t=this.gE();t.y_(!1,0,0,0,0),this.A3=0}}lP(){for(const t of this.hE)t.$C(this.zy)}SC(){return!this.sM||this.sM.isContextLost()||this.Z3}Kv(){super.Ky(),v.Ug.Sb.Kv(),v.Ug.ix.Kv(),v.Ug.ov.Kv();for(const t of this.hE)t.Clear();this.Y3=[],this.GC=null,this.K3=null,this.Q3=null,this.tE=null,this.sE=null,this.iE=null,this.eE=null,this.nE=0,this.q3="(unavailable)",this.X3="(unavailable)",this.C3=null,this.E3=null,this.m3=null;for(const s of this.Fy.values())s.Kv()}async Qv(){this.Z3=!0,await this.Zy(),this.Z3=!1;for(const t of this.Fy.values())t.Qv(this);this.HI(this.Dm,this.Lm,!0)}uP(t,s){if(this.SC())throw new Error("context lost");this.JS();const i=v.tr(v.Ug.Sb,this);return i.Eb(t,s),i}async cP(e,n){if(this.SC())throw new Error("context lost");if(n=Object.assign({},n),v.Li.ImageBitmapOptions){let t=await createImageBitmap(e,{premultiplyAlpha:"premultiply"}),s=n.ub&&"clamp-to-edge"!==n.ub||n.cb&&"clamp-to-edge"!==n.cb,i=v.Rr(t.width)&&v.Rr(t.height);return this.Fb()||i||!s?n.premultiplyAlpha=!1:v.Li.Wi?(t=await createImageBitmap(e,{premultiplyAlpha:"premultiply",resizeWidth:v.Ar(t.width),resizeHeight:v.Ar(t.height)}),n.premultiplyAlpha=!1):t=await createImageBitmap(e,{premultiplyAlpha:"none"}),v._f(()=>this.uP(t,n))}if(e instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const t=await v.Mo(e);e=t}return v._f(()=>this.uP(e,n))}Gx(t,s,i){this.JS();const e=v.tr(v.Ug.Sb,this);return e.kb(t,s,i),e}vC(t,s,i){this.JS(),s.Ub(t,i)}Cx(t){t&&(t.qb(),0<t.$b()||(this.JS(),t===this.L3&&(this.sM.bindTexture(this.sM.TEXTURE_2D,null),this.L3=null),t===this.WT&&(this.sM.activeTexture(this.sM.TEXTURE1),this.sM.bindTexture(this.sM.TEXTURE_2D,null),this.sM.activeTexture(this.sM.TEXTURE0),this.WT=null),t.Vb()))}fP(t){let s=this.Dm,i=this.Lm,e=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),e=!1),"number"==typeof t.height)&&(i=Math.floor(t.height),e=!1),s<=0||i<=0)throw new Error("invalid size");this.JS();const n=v.tr(v.Ug.ix,this);return n.xx(s,i,Object.assign({Qb:e},t)),this.F3=null,this.eT.Px=null,this.eT.Rx=null,n}dP(t,s=!0){if(t!==this.F3){t&&t.Wx()&&t.Ix(this.Dm,this.Lm);const i=this.gE();i.IT(t),this.F3=t,this.A3=0,s&&this.yE()}}oP(){return this.F3}UE(t){return t?[t.$p(),t.hm()]:[this.Dm,this.Lm]}pP(t,s="stretch"){if(this.MC<2||this.F3&&0<this.F3.jx())this.OE(),this._E(),this.mP(t,s);else{const i=this.gE();i.zT(t,this.F3,s),this.A3=0}}mP(t,s="stretch"){const i=t.Ox();if(!i)throw new Error("not a texture-backed render target");this.CE(i),this.jE(s,i)}gP(t){if(!(this.MC<2)){const s=this.gE();s.VT(t.Ax()),this.A3=0}}yP(t){this.dP(null),this.JS();const s=t.Ox();s===this.L3&&(this.sM.bindTexture(this.sM.TEXTURE_2D,null),this.L3=null),s===this.WT&&(this.sM.activeTexture(this.sM.TEXTURE1),this.sM.bindTexture(this.sM.TEXTURE_2D,null),this.sM.activeTexture(this.sM.TEXTURE0),this.WT=null),t.Vb()}async Jx(t,s,i){this.JS();let e=this.F3,n,r,h,o=(h=t?(n=t.$p(),r=t.hm(),t.Ax()):(n=this.$p(),r=this.hm(),null),0),a=0,l=n,u=r;if(i){o=v.lr(Math.floor(i.pl()),0,n-1),a=v.lr(Math.floor(i.ml()),0,r-1);let t=i.width(),s=(t=0===t?n-o:v.lr(Math.floor(t),0,n-o),i.height());s=0===s?r-a:v.lr(Math.floor(s),0,r-a),l=t,u=s,a=r-(a+u)}let c=this.sM,f=(c.bindFramebuffer(c.FRAMEBUFFER,h),()=>{c.bindFramebuffer(c.FRAMEBUFFER,null),this.F3=null,this.eT.Px=null,this.eT.Rx=null,this.dP(e)}),d;if(!s&&2<=this.Ab()){c.bindFramebuffer(c.READ_FRAMEBUFFER,h);const p=c.createBuffer(),m=l*u*4,g=c.PIXEL_PACK_BUFFER,y=(c.bindBuffer(g,p),c.bufferData(g,m,c.STREAM_READ),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,0),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindBuffer(g,null),f(),c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0));await this.Qx(()=>c.getSyncParameter(y,c.SYNC_STATUS)===c.SIGNALED),c.deleteSync(y),d=new ImageData(l,u),c.bindBuffer(g,p),c.getBufferSubData(g,0,new Uint8Array(d.data.buffer),0,m),c.bindBuffer(g,null),c.deleteBuffer(p)}else d=new ImageData(l,u),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(d.data.buffer)),f();return d}wP(){this.eP(!0);const t=this.gE();t.c_(),this.A3=0,this.U3=1}SP(){this.eP(!1);const t=this.gE();t.d_(),this.A3=0,this.U3=2}vP(){return 2===this.U3}bP(){this.eP(!0);const t=this.gE();t.m_(),this.A3=0,this.U3=0}xP(t){if(this.MP()){const s=this.gE();s.qT(t),this.A3=0}}GP(t){if(this.MP()){const s=this.gE();s.YT(t),this.A3=0}}Qx(s){const t=new Promise(t=>e.add({resolve:t,ZC:s}));return-1===n&&(n=self.requestAnimationFrame(i)),t}tv(){return this.Dm*this.Lm*(this.n3.alpha?4:3)}sv(){let t=0;for(const s of v.Ug.ix.qx())s.Ox()||(t+=s.Yb());return t}nv(){let t=0;for(const s of v.Ug.Sb.Zb())t+=s.Yb();return t}TP(){return this.r3}Ab(){return this.MC}_P(){return"webgl"+this.Ab()}Fb(){return 2<=this.Ab()}Pb(){return this.V3}IP(){return this.H3}CP(){return this.z3}EP(){return 0!==this.J3}PP(){return this.J3}RP(){return this.q3}AP(){return this.X3}FP(){if(2<=this.Ab())return"webgl2";{const t=[];return this.sE&&t.push("EXT_frag_depth"),this.iE&&t.push("OES_standard_derivatives"),this.eE&&t.push("EXT_shader_texture_lod"),0<t.length?"webgl1:"+t.join(","):"webgl1:none"}}OP(){return this.Y3}MP(){return!!this.GC}TC(){return this.GC}Kx(){return this.K3}Wb(){return this.Q3}jb(){return this.nE}zC(t){this.hE.add(t)}JC(t){this.hE.delete(t)}NC(){return this.oE}Rb(){return this.sM}aE(t){this.Xw([["normal",t.ONE,t.ONE_MINUS_SRC_ALPHA],["additive",t.ONE,t.ONE],["xor",t.ONE,t.ONE_MINUS_SRC_ALPHA],["copy",t.ONE,t.ZERO],["destination-over",t.ONE_MINUS_DST_ALPHA,t.ONE],["source-in",t.DST_ALPHA,t.ZERO],["destination-in",t.ZERO,t.SRC_ALPHA],["source-out",t.ONE_MINUS_DST_ALPHA,t.ZERO],["destination-out",t.ZERO,t.ONE_MINUS_SRC_ALPHA],["source-atop",t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],["destination-atop",t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]])}DP(){return this.hv()}}}{const Ji=self.Os,qi={LP:null,kP:null,NP:null,getTime:null,BP:null};Ji.Ug.WP=class{constructor(t){t=Object.assign({},qi,t),this.jP=t.LP,this.UP=t.kP,this.VP=t.NP,this.HP=t.getTime,this.zP=t.BP,this.JP=null,this.qP=new Set}$P(t){this.qP.add(t)}XP(t){this.qP.delete(t)}Kv(){this.JP=null;for(const t of this.qP)t.Kv()}YP(t){return this.jP?this.jP(t):[t.$p(),t.hm()]}oP(t){return this.UP(t)}ZP(t,s){this.VP(t,s)}KP(){return this.HP()}Vd(t){this.zP(t)}QP(t,s,i){return s=Math.floor(s),i=Math.floor(i),!this.JP||this.JP.$p()===s&&this.JP.hm()===i||(t.Cx(this.JP),this.JP=null),null===this.JP&&(this.JP=t.uP(null,{width:s,height:i,fb:"nearest",gb:!1})),this.JP}}}{const o=self.Os,$i=self.ys,Gn=$i.bs,Xi=o.tr(o.Rect),Yi=o.tr(o.Rect),Zi=o.tr(o.Rect),Ki=o.tr(o.Rect),Qi=Gn.create(),te=Gn.create(),se={tR:null,sR:null,iR:null,eR:!1},ie={nR:null,rR:!1,hR:!1,oR:!1,aR:!1,lR:!1,uR:!1};o.Ug.cR=class{constructor(t,s){s=Object.assign({},se,s),this.Kd=t,this.fR=s.tR,this.dR=s.sR,this.pR=s.iR,this.mR=null,this.gR=[],this.yR=[],this.wR=[],this.SR=!1,this.qv=0,this.vR=!1,this.bR=!1,this.xR=!1,this.MR=!1,this.GR=!1,this.TR=!1,this.o3=!1,this._R=!1,this.IR=!1,this.CR=!1,this.ER=!1,this.PR=!1,this.RR=0,this.AR=[null,null,null],this.FR=!!s.eR,this.OR=0,this.DR=0,this.LR=0,this.kR=0,this.NR=null,this.BR=null,this.WR=o.tr(o.Rect),this.jR=o.tr(o.Rect),this.UR=o.tr(o.Rect),this.VR=o.tr(o.Rect),this.HR=o.tr(o.Rect),this.zR=1,this.JR=1,this.qR=0,this.$R=0,this.YR=null,this.ZR=null,this.KR=0,this.QR=0,this.tA=!1,this.wx=Gn.create(),this.sA=Gn.create(),this.Kd.$P(this)}ir(){this.Kd.XP(this),o.Rh(this.wR),o.Rh(this.gR),o.Rh(this.yR),this.NR=null,this.BR=null,this.fR=null,this.dR=null,this.pR=null}Kv(){this.SR=!0,o.Rh(this.wR),o.Rh(this.gR),o.Rh(this.yR)}iA(){return this.SR}eA(n,t){if(t=Object.assign({},ie,t),o.Rh(this.wR),this.OR=0,this.DR=0,this.vR=!1,this.bR=!1,this.xR=!1,this.MR=!1,this.GR=!1,this.TR=!1,this.RR=0,this.PR=!!t.aR,this.ER=!!t.uR,this.SR=!1,o.Dh(this.gR,n),0!==n.length){if(t.nR){if(t.nR.length!==n.length)throw new Error("incorrect indexMap length");o.Dh(this.yR,t.nR)}else{o.Rh(this.yR);for(let t=0,s=n.length;t<s;++t)this.yR.push(t)}for(const s of n)this.OR+=s.Fv(),this.DR+=s.Ov(),s.Bv()&&(this.vR=!0),s.jv()&&(this.bR=!0),s.Wv()&&(this.xR=!0),s.Dv()&&(this.MR=!0),s.Hv()&&(this.GR=!0);this.TR=this.nA(n[0].Rv());const r=this.rA(n[0],t),h=this.hA(n.at(-1),t);if(1!==n.length||r||h){this.CR=!1;let e=0;r&&(this.RR=1,this.wR.push(o.tr(o.Ug.cR.aA.oA,this,-1,1)),e=1);for(let s=0,i=n.length;s<i;++s)if(0!==s||r){let t=1===e?2:1;s!==i-1||h||(t=0),this.RR=Math.max(this.RR,t),this.wR.push(o.tr(o.Ug.cR.aA.lA,this,e,t,s)),e=t}else this.RR=1,this.wR.push(o.tr(o.Ug.cR.aA.uA,this,-1,1,s)),e=1;h&&this.wR.push(o.tr(o.Ug.cR.aA.cA,this,e,0))}else this.CR=!0}}rA(t,s){return!!(s.rR||t.Lv()||s.oR&&!t.Nv()||t.jv()&&!this.ER||0!==this.OR||0!==this.DR)||(t.Rv().QS()?t.Wv()&&(s.lR||s.aR)||t.Uv()&&s.aR:t.Wv()&&!this.TR&&s.lR)}hA(t,s){return!!s.hR||(t.Rv().QS()?t.Wv()||t.Dv():(t.Wv()||t.Dv())&&this.fA())}nA(t){return t.gw()&&this.xR&&!this.MR}dA(t,s,i){t.gw()&&null===s&&(s=t.GetBackbufferRenderTarget()),this.YR=s,this.NR=i.pA||null,this.BR=i.contextObject||null,this.qv=i.mA||0,this.zR=i.devicePixelRatio||1,this.JR=i.gA||1,this.qR=i.yA||0,this.$R="number"==typeof i.time?i.time:this.Kd.KP(),this.o3=!1,t.SE(),this.vR&&this.wA();let e=!1;if(this.SA()&&(this.vA(t,i),e=!0,this.ZR=this.Kd.QP(t,this.LR,this.kR),Xi.T(this.jR),Xi.Ll(),t.gw()&&t._MaybeDoPendingClearRenderPass(this.YR),t.CopyTextureToTexture(this.YR.Ox(),this.ZR,Xi.pl(),Xi.ml(),Xi.width(),Xi.height())),this.CR)this.bA(t,i);else if(e||this.vA(t,i),0!==this.UR.width()||0!==this.UR.height()){t.AE(),t._E(),t.eS(0),t.rS(0),this.mR=i.xA||null,this.KR=i.MA||0,this.QR=i.GA||0,this.tA=!!i.TA,this._A(t),this.AR[0]=s,this.AR[1]=1<=this.RR?this.IA():null,this.AR[2]=2===this.RR?this.IA():null;for(const n of this.wR){const r=this.CA(n.EA()),h=this.CA(n.PA());t.gw()?n.RA(t,r,h):n.AA(t,r,h)}t.CE(null),this.AR[1]&&this.FA(this.AR[1]),this.AR[2]&&this.FA(this.AR[2]),this.AR.fill(null),this.OA(t),this.YR=null,this.ZR=null,this.NR=null,this.BR=null,this.mR=null}}vA(t,s){const[i,e]=this.Kd.YP(t);this.DA(t,i,e),this.LA(s)}DA(t,s,i){if(s<=0||i<=0)throw new Error("invalid draw size");this.LR===s&&this.kR===i||this.kA(t,s,i,0,0,this.wx,this.sA),this.LR=s,this.kR=i}kA(t,s,i,e,n,r,h){const o=s/2+e,a=i/2+n,l=(t.mw(r,s/i),t.Sw(o,a,t.Qy(i),o,a,0,i));Gn.T(h,l)}LA(t){this.WR.T(t.NA),t.BA?this.jR.T(t.BA):this.jR.set(0,0,this.LR,this.kR),this.UR.T(this.jR),this.UR.Tt(this.LR,this.kR);const s=this.JR*this.zR;this.jR.Il(this.OR*s,this.DR*s),this.HR.T(this.jR),this.HR.Tt(this.LR,this.kR),this.jR.kl(0,0,this.LR,this.kR),this.VR.T(this.jR),this.VR.Tt(this.LR,this.kR)}_A(t){if(this._R=t.nP(),this.IR=t.vP(),this.ER)t.eP(!1),this.bR&&t.rP(!0);else{if(Xi.T(this.jR),t.QS()){const s=this.JR*this.zR;Xi.Il(Math.max(this.OR,1)*s,Math.max(this.DR,1)*s),Xi.Ll(),Xi.lr(0,0,this.LR,this.kR)}else Xi.Ll();t.hP(Xi.pl(),Xi.ml(),Xi.width(),Xi.height(),this.kR)}}WA(t){t._E(),this.ER||(this.IR&&t.bP(),t.eP(!1),this.bR&&t.rP(!0)),t.gw()&&t.SetNormalizedCoordsProgramVariant(!0)}OA(t){t.rP(!1),this.IR&&t.SP(),t.eP(this._R),this.ER||t.aP(),t.gw()&&t.SetNormalizedCoordsProgramVariant(!1),this.o3=t.vE()}jA(){this.HR.lr(0,0,1,1)}CA(t){return t<0?null:this.AR[t]}IA(){return this.Kd.oP(this)}UA(){return this.YR}FA(t){this.Kd.ZP(t,this)}VA(t){return this.gR[t]}HA(t){this.mR?this.mR(this,t,()=>this.fR(t,this)):this.fR(t,this),this.CR||this.WA(t)}zA(t){if(this.ER)return!0;if(0!==this.KR||0!==this.QR)return!1;const[s,i]=t.UE(t.oP());return s===this.LR&&i===this.kR}JA(t,s){let i=this.wx,e=this.sA;if(s&&!this.zA(t)){i=Qi,e=te;const[n,r]=t.UE(t.oP());this.kA(t,n,r,this.KR,this.QR,i,e),this.ER||t.aP()}t.fE(i),t.wE(e)}wA(){this.Kd.Vd(this)}qA(t,s){return this.pR(this.yR[t],s)}$A(t,s){let i=this.HR,e=this.VR,n=this.UR;t.QS()&&(Yi.T(i),Yi.Pl(1),i=Yi,Zi.T(e),Zi.Pl(1),e=Zi,Ki.T(n),Ki.Pl(1),n=Ki),this.XA(t,s,e,n,i,1/this.LR,1/this.kR)}YA(t,s){let e=this.VR,n=this.UR,r=1/this.LR,h=1/this.kR;if(this.dR){let{ZA:t,KA:s,QA:i}=this.dR(this.NR);t||(Xi.set(0,0,0,0),t=Xi),s=s||this.LR,i=i||this.kR,e=t,n=t,r=1/s,h=1/i}else t.QS()&&(Zi.T(e),Zi.Pl(1),e=Zi,Ki.T(n),Ki.Pl(1),n=Ki);let i=this.HR;t.QS()&&((i=Yi).T(this.HR),i.Pl(1)),this.XA(t,s,e,n,i,r,h),t.gw()&&this.GR&&t.SetProgramParameter_IsSrcTexRotated(this.PR)}tF(t){return this.xR?t.gw()?this.SA()?this.ZR:this.YR.Ox():this.YR:null}XA(t,s,i,e,n,r,h){t.KE(this.tF(t),n,i,e,this.WR,r,h,this.zR,this.JR,this.qR,this.$R),t.QE(this.qA(s,t))}bA(t,s){const i=this.gR[0],e=t.nP(),n=i.jv();n&&(t.eP(!1),t.rP(!0),this.HR.set(0,0,1,1),this.UR.set(0,0,1,1)),t._w(i),t.SetBlendMode(this.qv),t.dP(this.YR);let r=0,h=1;if(this.UR.set(0,0,1,1),i.Uv()&&this.dR){const{ZA:o,KA:a,QA:l}=this.dR(this.NR);o&&this.UR.T(o),r=Number.isFinite(a)?1/a:0,h=Number.isFinite(l)?1/l:0}else{const[u,c]=this.Kd.YP(t);r=1/u,h=1/c}s.NA?this.WR.T(s.NA):this.WR.set(0,0,0,0),t.KE(this.tF(t),this.HR,this.UR,this.UR,this.WR,r,h,this.zR,this.JR,this.qR,this.$R),t.QE(this.qA(0,t)),t.gw()&&this.GR&&t.SetProgramParameter_IsSrcTexRotated(this.PR),t.eS(0),this.HA(t),n&&(t.rP(!1),t.eP(e))}SA(){return this.TR}fA(){return!this.TR}sF(){return this.xR}iF(){return!!this.CR&&!this.SA()}eF(){return this.ER}nF(){return this.NR}rF(){return this.BR}hF(){return this.qv}oF(){return this.tA}vE(){return this.o3}aF(){return this.jR}lF(){return this.VR}uF(){return this.FR}async cF(t,s,i){}}}{const ee=self.Os;ee.Ug.cR.aA=class{constructor(t,s,i,e=-1){this.fF=t,this.dF=s,this.pF=i,this.Dg=e}mF(){return this.fF}EA(){return this.dF}PA(){return this.pF}gF(){return this.Dg}QM(){return this.mF().VA(this.gF())}AA(t,s,i){}RA(t,s,i){}}}{const ne=self.Os;ne.Ug.cR.aA.oA=class extends ne.Ug.cR.aA{constructor(t,s,i,e){super(t,s,i,e)}AA(t,s,i){const e=this.mF();t.AE(),t.Tw(),t.dP(i,e.oF()),t.tP(0,0,0,0),e.HA(t),e.jA()}RA(t,s,i){const e=this.mF();t.AE(),t.Tw(),t.dP(i,!1),t.tP(0,0,0,0),e.HA(t),e.jA()}}}{const re=self.Os,he=re.tr(re.Rect),oe=re.tr(re.Hl);re.Ug.cR.aA.cA=class extends re.Ug.cR.aA{constructor(t,s,i,e){super(t,s,i,e)}AA(t,s,i){const e=this.mF();t.Tw(),t.dP(i),e.JA(t,!0),t.SetBlendMode(e.hF()),t.CE(s.Ox()),oe.cu(e.aF()),he.T(e.lF()),he.Pl(1),t.gS(oe,he),e.uF()&&t.gP(s)}RA(t,s,i){const e=this.mF();t.Tw(),t.dP(i,!1),e.zA(t)?oe.cu(e.lF()):(t.SetNormalizedCoordsProgramVariant(!1),e.JA(t,!0),oe.cu(e.aF())),t.SetBackTexture(null),t.SetBlendMode(e.hF()),t.CE(s.Ox()),e.eF()?t.jE():t.gS(oe,e.lF())}}}{const ae=self.Os;ae.Ug.cR.aA.uA=class extends ae.Ug.cR.aA{constructor(t,s,i,e){super(t,s,i,e)}AA(t,s,i){const e=this.mF();t.dP(i,e.oF()),t.tP(0,0,0,0),t.OE(),t._w(this.QM()),e.YA(t,this.gF()),e.HA(t),e.jA()}RA(t,s,i){const e=this.mF();t.dP(i,!1),t.tP(0,0,0,0),t.OE(),t._w(this.QM()),e.YA(t,this.gF()),e.HA(t),e.jA()}}}{const le=self.Os,ue=le.tr(le.Rect),ce=le.tr(le.Hl);le.Ug.cR.aA.lA=class extends le.Ug.cR.aA{constructor(t,s,i,e){super(t,s,i,e)}AA(t,s,i){const e=this.mF(),n=(t.dP(i),0===this.PA());n?t.SetBlendMode(e.hF()):(t.tP(0,0,0,0),t.OE()),t._w(this.QM()),e.$A(t,this.gF()),t.CE(s.Ox()),e.JA(t,n),ce.cu(e.aF()),ue.T(e.lF()),ue.Pl(1),t.gS(ce,ue),e.uF()&&t.gP(s)}RA(t,s,i){const e=this.mF(),n=(t.dP(i,!1),0===this.PA());n?(t.SetBlendMode(e.hF()),t.SetBackTexture(null),e.zA(t)?ce.cu(e.lF()):(t.SetNormalizedCoordsProgramVariant(!1),e.JA(t,!0),ce.cu(e.aF()))):(t.tP(0,0,0,0),t.OE(),ce.cu(e.lF())),t._w(this.QM()),e.$A(t,this.gF()),t.CE(s.Ox()),e.eF()?t.jE():t.gS(ce,e.lF())}}}{let u=function(t,s){const i=t[0],e=s[0],n=i-e;if(0!=n)return n;const r=t[1],h=s[1];return r-h},c=(u,self.Os),f=self.Hs,d=null,s=new Set,p=[],m=[],i=!1,t=!1,e=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.yF=class{constructor(t){d=t,Object.defineProperties(this,{wF:{value:d.vF().SF(),writable:!1},bF:{value:d.MF().xF(),writable:!1},GF:{value:{},writable:!1},TF:{value:{},writable:!1},_F:{value:d.IF(),writable:!1},CF:{value:d.EF(),writable:!1},storage:{value:new self.PF(d),writable:!1},isInWorker:{value:d.RF(),writable:!1},AF:{value:d.FF(),writable:!1},OF:{value:d.DF(),writable:!1},fb:{value:d.LF(),writable:!1},kF:{value:d.NF(),writable:!1},BF:{value:new self.WF(t),writable:!1},jF:{value:new self.UF(t),writable:!1}}),d.VF().addEventListener("keydown",t=>{s.has(t.key)?t.stopPropagation():s.add(t.key)}),d.VF().addEventListener("keyup",t=>s.delete(t.key)),d.Rf().addEventListener("window-blur",()=>s.clear()),d.RF()&&(self.alert=t=>(i||(i=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}HF(t){Object.defineProperties(this.GF,t)}zF(t){Object.defineProperties(this.TF,t)}addEventListener(t,s){d.VF().addEventListener(t,s)}removeEventListener(t,s){d.VF().removeEventListener(t,s)}JF(t,...s){f.ve(t);const i=d.qF(),e=i.$F(t);if(!e)throw new Error(`cannot find function name '${t}'`);if(!e.Uu())return e.XF();if(s.length<e.YF())throw new Error(`not enough function parameters passed for '${t}' (${s.length} passed, ${e.YF()} expected)`);let n=e.ZF(),r=n.KF(),h=i.QF();if(h){r=r.slice(0);const a=new Set(r);for(const l of h.KF())a.has(l)||(r.push(l),a.add(l));for(const u of i.tO())a.has(u)||(r.push(u),a.add(u))}const o=n.sO(r,e.iO(),e.eO(),e.XF(),...s);return o}nO(t){const s=d.hO().rO();if(!s)throw new Error("not in a function which returns a value");switch(s.oO()){case 1:"number"==typeof t&&s.aO(t);break;case 2:"string"==typeof t&&s.aO(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||s.aO(t)}}signal(t){f.ve(t),d.qF().lO(t)}uO(t){return f.ve(t),d.qF().cO(t)}fO(){return[d.FF(),d.DF()]}get isSuspended(){return d.dO()}get pO(){return d.mO()}get gO(){return d.yO()}get gameTime(){return d.wO()}get SO(){return d.vO()}get timeScale(){return d.bO()}set timeScale(t){f.ge(t),d.xO(t)}get fps(){return t||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),t=!0),d.MO()}get framesPerSecond(){return d.MO()}get GO(){return d.TO()}get _O(){return d.IO()}get CO(){return d.EO()}get PO(){return d.RO()}set PO(t){if(!e.has(t))throw new Error("invalid framerate mode");d.AO(t)}get FO(){return d.OO()}set FO(t){f.ge(t),d.DO(t)}get LO(){return d.kO()}set LO(t){d.NO(t)}random(){return d.BO()}get layout(){const t=d.WO();if(t)return t.jO();throw new Error("no layout is running - make sure a layout is loaded before accessing")}UO(t){let s=d.VO(),i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.HO(t))return i.jO();throw new Error("invalid layout")}zO(){return d.VO().JO().map(t=>t.jO())}qO(t){let s=d.VO(),i;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(!(i=s.HO(t)))throw new Error("invalid layout");s.$O()||s.XO(i)}get keyboard(){const t=d.YO().keyboard;if(t)return t;throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first")}get ZO(){const t=d.YO().ZO;if(t)return t;throw new Error("runtime.mouse used but Mouse object missing - add it to your project first")}get KO(){const t=d.YO().KO;if(t)return t;throw new Error("runtime.touch used but Touch object missing - add it to your project first")}get QO(){const t=d.YO().QO;if(t)return t;throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first")}tD(t,s){f.ve(t),f.ve(s),d.sD(t,s)}iD(t){f.ge(t);const s=d.eD(t);return s?s.nD():null}rD(t,e){f.Ve(e);const n=d.hD();for(const s of t){const i=d.oD(s),r=i.aD();p.push([r.lD().gF(),r.uD()]),m.push(i)}if(0!==p.length){p.sort(u),m.sort((t,s)=>e(t.nD(),s.nD()));let i=!1;for(let t=0,s=p.length;t<s;++t){const h=m[t],o=n.cD(p[t][0]),a=p[t][1],l=o.fD();l[a]!==h&&((l[a]=h).aD().dD(o,!0),o.pD(h),i=!0)}i&&d.mD(),c.Rh(p),c.Rh(m)}}async gD(t,s){const i=new MessageChannel,e=i.port1,n=i.port2;return await d.yD("runtime","script-create-worker",{url:t,opts:s,port2:n},[n]),e}alert(t){return d.yD("runtime","alert",{message:t+(d.RF()?" [via Web Worker]":"")})}wD(t){return f.ge(t),d.SD(t)}vD(t){d.bD(t)}}}{let s=self.Os,h=null;self.xD=class{constructor(t){h=t,Object.defineProperties(this,{MD:{value:h.GD("audio/webm; codecs=opus"),writable:!1}})}TD(t){const s=self.ID._D(t);if(!s)throw new Error("invalid IImageInfo");s.CD(h.ED())}PD(t){return h.do(t)}RD(t){return h.po(t)}AD(t){return h.yo(t)}FD(t){return h.wo(t)}OD(t){return h.DD(t)}LD(t){return"flat"===h.kD()&&s.uo(t)&&(t=t.toLowerCase()),h.ND(t)}get BD(){return h.WD()}async jD(t,s){if(this.MD)throw new Error("decodeWebMOpus(): not supported because WebM Opus is supported by the platform");const i=await h.ED().UD(s),e=new Float32Array(i),n=t.createBuffer(1,e.length,48e3),r=n.getChannelData(0);return r.set(e),n}VD(...t){return h.HD(...t)}zD(t){return h.JD(t)}qD(t){return h.$D(t)}}}{let h=self.Os,i=self.Hs,o=null;self.XD=class{constructor(t){o=t,Object.defineProperties(this,{runtime:{value:o.ED(),writable:!1}})}YD(t,s){const i=o.ED(),e=i.oD(t),n=i.oD(s);return o.ZD(e,n)}KD(t,s){const i=o.ED(),e=i.oD(t);for(const n of s){const r=i.oD(n);if(o.ZD(e,r))return n}return null}QD(t){const s=o.ED().oD(t),i=o.tL(s);return i?i.nD():null}sL(t,s){if(i.ge(t),i.ge(s),t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid cell size");o.iL(t,s)}eL(){return o.nL()}rL(t,s){let i=o.ED(),e;e=Array.isArray(t)?t.map(t=>i.hL(t)):[i.hL(t)];const n=h.Rect.fl(s),r=[];return o.oL(null,e,n,r),r.map(t=>t.nD())}}}{let s=self.Os,i=null,e=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),n=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["NW.js","nwjs"],["Firefox","firefox"],["Safari","safari"]]),r=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.WF=class{constructor(t){i=t,Object.defineProperties(this,{aL:{value:s.ni.mi,writable:!1},lL:{value:e.get(s.ni.ri)||"unknown",writable:!1},uL:{value:s.ni.hi,writable:!1},cL:{value:n.get(s.ni.oi)||"unknown",writable:!1},fL:{value:s.ni.ai,writable:!1},dL:{value:r.get(s.ni.ci)||"unknown",writable:!1}})}get exportType(){let t=i.pL();return i.mL()?t="nwjs":i.gL()?t="windows-webview2":"cordova"===t?t="Android"===s.ni.ri?"cordova-android":"cordova-ios":"playable-ad-single-file"!==t&&"playable-ad-zip"!==t||(t="playable-ad"),t}get renderer(){return i.wL().yL()}get SL(){return i.wL().vL()}get bL(){return i.wL().xL()}get ML(){return i.wL().GL()}get TL(){return i.wL()._L()}get IL(){return i.wL().CL()}get devicePixelRatio(){return i.EL()}}}{const fe=self.Hs;self.PF=class{constructor(t){this.PL=t.RL()}getItem(t){return fe.ve(t),this.PL.getItem(t)}setItem(t,s){return fe.ve(t),this.PL.setItem(t,s)}removeItem(t){return fe.ve(t),this.PL.removeItem(t)}clear(){return this.PL.clear()}keys(){return this.PL.keys()}}}{const de=self.Os,pe=de.Ds();self.AL=class{#FL;constructor(){const t=de.DL.OL(pe);this.#FL=t,Object.defineProperties(this,{runtime:{value:t.ED().LL(),writable:!1},kL:{value:t.NL(),writable:!1},BL:{value:t.WL(),writable:!1},jL:{value:t.UL(),writable:!1},VL:{value:t.HL(),writable:!1},zL:{value:t.JL(),writable:!1},qL:{value:t.$L(),writable:!1},XL:{value:t.YL(),writable:!1},ZL:{value:t.KL(),writable:!1}})}static QL(t){if(!t)return null;const s=de.DL.tk(t);return s?s.sk():null}ik(){return this.#FL.nk().ek()}rk(){return this.#FL.hk().nD()}}}{const me=self.Os,ge=self.Hs,ye=me.Ds();self.ak=class{#FL;constructor(){const t=me.DL.OL(ye);this.#FL=t,Object.defineProperties(this,{name:{value:t.jc(),writable:!1},runtime:{value:t.ED().LL(),writable:!1},lk:{value:t.uk().sk(),writable:!1}}),t.ED().ck(this,t)}addEventListener(t,s){ge.ve(t),ge.Ve(s),this.#FL.VF().addEventListener(t,s)}removeEventListener(t,s){ge.ve(t),ge.Ve(s),this.#FL.VF().removeEventListener(t,s)}fk(){return[...this.instances()]}dk(){return me.first(this.instances())}pk(){return[...this.mk()]}gk(){return me.first(this.mk())}yk(t){const s=this.#FL,i=s.ED().wk(t),e=s.Sk(i);return e?e.nD():null}*instances(){for(const t of this.#FL.vk())yield t.nD()}*mk(){for(const t of this.#FL.xk().bk())yield t.nD()}Mk(t){ge.Ve(t);const s=this.#FL;if(0<s.Gk())throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");s.Tk(t)}Ai(t,s,i,e,n){if(ge.ue(s),ge.ue(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const r=this.#FL,h=r.ED(),o=h.WO().lD(t);if(!o)throw new Error("invalid layer");const a=h._k(r,o,s,i,e,n),l=(e&&o.Ik(a),h.qF());return l.Ck(!0),a.Ek(),l.Ck(!1),l.Pk()||h.VO().Rk()||h.Ak(),a.nD()}}}{const we=self.Hs,l=new WeakMap,Se=["above","below","top-sublayer","bottom-sublayer"];self.Fk=class{constructor(t){l.set(this,t);const s=[],i=t.Ok(),e=i.Dk().length;for(let t=0;t<e;++t)s.push(new self.Lk(i,t));Object.defineProperties(this,{name:{value:t.jc(),writable:!1},index:{value:t.gF(),writable:!1},effects:{value:s,writable:!1}})}addEventListener(t,s){we.ve(t),we.Ve(s),l.get(this).VF().addEventListener(t,s)}removeEventListener(t,s){we.ve(t),we.Ve(s),l.get(this).VF().removeEventListener(t,s)}get width(){return l.get(this).$p()}set width(t){we.ge(t),l.get(this).im(t)}get height(){return l.get(this).hm()}set height(t){we.ge(t),l.get(this).Xp(t)}kk(t,s){we.ge(t),we.ge(s);const i=l.get(this);i.im(t),i.Xp(s)}getSize(){const t=l.get(this);return[t.$p(),t.hm()]}set scale(t){we.ge(t),l.get(this).Nk(t)}get scale(){return l.get(this).Bk()}set angle(t){we.ge(t),l.get(this).Wk(t)}get angle(){return l.get(this).jk()}set scrollX(t){we.ue(t),l.get(this).Uk(t)}get scrollX(){return l.get(this).Vk()}set scrollY(t){we.ue(t),l.get(this).Hk(t)}get scrollY(){return l.get(this).zk()}scrollTo(t,s){we.ue(t),we.ue(s);const i=l.get(this);i.Uk(t),i.Hk(s)}Jk(){const t=l.get(this);return[t.Vk(),t.zk()]}qk(t){let s=l.get(this),i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return(i=s.lD(t))?i.$k():null}Xk(){return l.get(this).Yk().map(t=>t.$k())}*Zk(){for(const t of l.get(this).Zk())yield t.$k()}Kk(t,s,i){const e=l.get(this),n=self.Qk,r=(we.ve(t),we.Ke(s,n),s?e.ED().t5(s):null),h=Se.indexOf(i);if(h<0)throw new Error("invalid location");e.s5(t,r,h)}i5(t,s,i){const e=l.get(this),n=e.ED(),r=self.Qk,h=(we.Ze(t,r),n.t5(t));if(!h)throw new Error("invalid layer");we.Ke(s,r);const o=s?n.t5(s):null,a=Se.indexOf(i);if(a<0)throw new Error("invalid location");e.e5(h,o,a)}n5(t){const s=l.get(this),i=self.Qk,e=(we.Ze(t,i),s.ED().t5(t));if(!e)throw new Error("invalid layer");const n=e.ED();s.r5(e),n.qF().Pk()||n.Ak()}h5(){const t=l.get(this),s=t.ED();t.o5(),s.qF().Pk()||s.Ak()}a5(t,s){we.ge(t),we.ge(s),l.get(this).l5(t,s)}u5(){return l.get(this).c5()}set X(t){we.ve(t);const s=l.get(this);if("perspective"===t)s.f5();else{if("orthographic"!==t)throw new Error("invalid projection");s.d5()}}get X(){return l.get(this).p5()?"orthographic":"perspective"}}}{const ve=self.Os,f=self.Hs,d=new WeakMap,be=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),xe=new Map([...be.entries()].map(t=>[t[1],t[0]])),Me=ve.tr(ve.Lo);self.Qk=class{constructor(t){d.set(this,t);const s=[],i=t.Ok(),e=i.Dk().length;for(let t=0;t<e;++t)s.push(new self.Lk(i,t));Object.defineProperties(this,{name:{value:t.jc(),writable:!1},layout:{value:t.HO().jO(),writable:!1},effects:{value:s,writable:!1}}),t.ED().ck(this,t)}get m5(){const t=d.get(this).g5();return t?t.$k():null}*y5(){for(const t of d.get(this).y5())yield t.$k()}*w5(){for(const t of d.get(this).S5())yield t.$k()}*v5(){for(const t of d.get(this).S5())for(const s of t.b5())yield s.$k()}get index(){return d.get(this).gF()}get isVisible(){return d.get(this).x5()}set isVisible(t){d.get(this).M5(t)}get G5(){return d.get(this).T5()}get isInteractive(){return d.get(this)._5()}set isInteractive(t){d.get(this).I5(t)}get C5(){return d.get(this).E5()}set C5(t){d.get(this).P5(!!t)}get R5(){return d.get(this).A5()}get opacity(){return d.get(this).ME()}set opacity(t){t=ve.lr(+t,0,1),isNaN(t)||d.get(this).TE(t)}set scale(t){f.ge(t),d.get(this).F5(t)}get scale(){return d.get(this).O5()}set scaleRate(t){f.ge(t),d.get(this).D5(t)}get scaleRate(){return d.get(this).L5()}set angle(t){f.ge(t),d.get(this).Wk(t)}get angle(){return d.get(this).k5()}set parallaxX(t){f.ge(t),d.get(this).N5(t)}get parallaxX(){return d.get(this).B5()}set parallaxY(t){f.ge(t),d.get(this).W5(t)}get parallaxY(){return d.get(this).j5()}set U5(t){f.ge(t),d.get(this).m2(t)}get U5(){return d.get(this).d2()}set V5(t){d.get(this).H5(t)}get V5(){return d.get(this).z5()}set J5(t){d.get(this).q5(t)}get J5(){return d.get(this).X5()}set mA(t){f.ve(t);const s=be.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");d.get(this).SetBlendMode(s)}get mA(){return xe.get(d.get(this).Y5())}set backgroundColor(t){if(f.Le(t),t.length<3)throw new Error("expected 3 elements");Me.Uo(t[0],t[1],t[2]);const s=d.get(this),i=s.Z5();i.na(Me)||(i.Xo(Me),s.ED().mD())}get backgroundColor(){const t=d.get(this).Z5();return[t.Yo(),t.Zo(),t.Ko()]}set scrollX(t){f.ue(t);const s=d.get(this);s.K5(!0),s.Uk(t)}get scrollX(){return d.get(this).Vk()}set scrollY(t){f.ue(t);const s=d.get(this);s.K5(!0),s.Hk(t)}get scrollY(){return d.get(this).zk()}scrollTo(t,s){f.ue(t),f.ue(s);const i=d.get(this);i.K5(!0),i.Uk(t),i.Hk(s)}Jk(){const t=d.get(this);return[t.Vk(),t.zk()]}Q5(){d.get(this).K5(!1)}getViewport(){return d.get(this).tN().wl()}sN(t,s,i=0){f.ue(t),f.ue(s),f.ue(i);const e=d.get(this),n=e.ED();return e.iN(t-n.eN(),s-n.nN(),i)}rN(t,s,i=0){f.ue(t),f.ue(s),f.ue(i);const e=d.get(this),n=e.ED(),[r,h]=e.hN(t,s,i);return[r+n.eN(),h+n.nN()]}oN(t,s,i=0){return f.ue(t),f.ue(s),f.ue(i),d.get(this).aN(t,s,i)}lN(t,s,i=0){return f.ue(t),f.ue(s),f.ue(i),d.get(this).uN(t,s,i)}get cN(){return d.get(this).fN()}}}{let e=function(t){let s=_e.get(t);return s||(s=Ge.tr(Ge.Event.Rf),_e.set(t,s)),s};e;const Ge=self.Os,Te=self.Hs,_e=new WeakMap,Ie=Ge.Ds();self.dN=class{#FL;constructor(){const t=Ge.DL.OL(Ie),s={runtime:{value:(this.#FL=t).ED().LL(),writable:!1},pN:{value:t.mN().ek(),writable:!1},lk:{value:t.uk().sk(),writable:!1}};t.gN(s),t.yN(s),Object.defineProperties(this,s),t.ED().ck(this,t)}static wN(){return Ge.DL.SN()}vN(){const t=_e.get(this);t&&(t.ir(),_e.delete(this))}addEventListener(t,s,i){Te.ve(t),Te.Ve(s),e(this).addEventListener(t,s,i)}removeEventListener(t,s,i){Te.ve(t),Te.Ve(s),e(this).removeEventListener(t,s,i)}dispatchEvent(t){e(this).dispatchEvent(t)}bN(){const t=this.#FL,s=t.ED();s.xN(t),s.qF().Pk()||s.VO().Rk()||s.qF().MN()||s.Ak()}GN(){const t=this.#FL.TN();return t?t.map(t=>t.nD()):[]}*_N(){const t=this.#FL;if(t.IN())for(const s of t.CN())yield s.nD()}get uid(){return this.#FL.EN()}get PN(){return this.#FL.RN()}set timeScale(t){Te.ge(t),this.#FL.xO(t)}get timeScale(){return this.#FL.AN()}FN(){this.#FL.ON()}get pO(){const t=this.#FL;return t.ED().mO(t)}DN(...t){Te.Le(t);const s=new Set(t),i=this.#FL.LN();return s.he(i)}kN(t){Te.Ze(t,Set),this.#FL.NN(t)}BN(){return new Set(this.#FL.LN())}signal(t){Te.ve(t);const s=this.#FL;s.ED().qF().WN(s,t)}uO(t){Te.ve(t);const s=this.#FL;return s.ED().qF().jN(s,t)}}}{const Ce=self.Os,Ee=self.Hs,Pe=Ce.Ds();self.UN=class extends self.dN{#FL;#VN=!1;#HN=null;#zN=!1;#JN=null;#qN;#$N;constructor(t){super(),this.#FL=Ce.DL.OL(Pe),this.#VN=!1,this.#HN=null,this.#zN=!1,this.#JN=null,this.#qN=t?.domComponentId,this.#$N=t?.wrapperComponentId}vN(){this.XN(!1),this.YN(!1),super.vN()}ZN(){return Ce.DL.KN()}QN(t){const s=this.#FL;s.ED().t4(t,s)}s4(t){const s=this.#FL;return s.ED().i4(t,s)}e4(t,s){if(Ee.ve(t),Ee.Ve(s),!this.#qN)throw new Error("no DOM component id set");const i=this.#FL.ED();i.n4(this.#qN,t,s)}r4(t){Ee.Le(t);for(const[s,i]of t)this.e4(s,i)}h4(t,s){if(Ee.ve(t),!this.#qN)throw new Error("no DOM component id set");const i=this.#FL.ED();i.Kc(this.#qN,t,s)}o4(t,s){if(Ee.ve(t),!this.#qN)throw new Error("no DOM component id set");const i=this.#FL.ED();return i.yD(this.#qN,t,s)}a4(t,s){const i=this.#FL.ED();if(!i.RF())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.#qN,handler:t,data:s,responseId:null});this.h4(t,s)}XN(t){if(this.#VN!==(t=!!t)){this.#VN=t;const s=this.#FL.ED();t?(this.#HN||(this.#HN=()=>this.l4()),s.Rf().addEventListener("tick",this.#HN)):s.Rf().removeEventListener("tick",this.#HN)}}u4(){return this.#VN}l4(){}YN(t){if(this.#zN!==(t=!!t)){this.#zN=t;const s=this.#FL.ED();t?(this.#JN||(this.#JN=()=>this.c4()),s.Rf().addEventListener("tick2",this.#JN)):s.Rf().removeEventListener("tick2",this.#JN)}}f4(){return this.#zN}c4(){}d4(){return[]}m4(){return null}g4(t){}y4(){if(!this.#$N)throw new Error("no wrapper component id set");const t=this.#FL.ED();return t.w4(this.#$N)}S4(t,s){if(Ee.ve(t),Ee.Ve(s),!this.#$N)throw new Error("no wrapper component id set");const i=this.#FL.ED();i.v4(this.#$N,t,s)}b4(t){Ee.Le(t);for(const[s,i]of t)this.S4(s,i)}x4(t,s){if(!this.#$N)throw new Error("no wrapper component id set");this.runtime.jF.M4(this.#$N,t,s)}G4(t,s){if(this.#$N)return this.runtime.jF.T4(this.#$N,t,s);throw new Error("no wrapper component id set")}}}{let t=function(t){return class n extends t{#_4;#I4;constructor(t){super(t);const s=Re.DL.OL(De),i=s.aD(),e=(this.#_4=s,this.#I4=i,Oe.set(this,s),[]),n=i.C4();if(n){const h=i.mN().Ok().Dk().length;for(let t=0;t<h;++t)e.push(new self.Lk(n,t))}const r={effects:{value:e,writable:!1}};Object.defineProperties(this,r)}get layout(){return this.#I4.HO().jO()}get E4(){return this.#I4.lD().$k()}get x(){return this.#I4.a2()}set x(t){t=+t;const s=this.#I4;isNaN(t)||s.a2()===t||(s.l2(t),s.P4())}get y(){return this.#I4.c2()}set y(t){t=+t;const s=this.#I4;isNaN(t)||s.c2()===t||(s.f2(t),s.P4())}setPosition(t,s){t=+t,s=+s;const i=this.#I4;isNaN(t)||isNaN(s)||i.a2()===t&&i.c2()===s||(i.R4(t,s),i.P4())}A4(){const t=this.#I4;return[t.a2(),t.c2()]}F4(t,s){if(t=+t,s=+s,!(isNaN(t)||isNaN(s)||0===t&&0===s)){const i=this.#I4;i.O4(t,s),i.P4()}}get U5(){return this.#I4.d2()}set U5(t){t=+t;const s=this.#_4,i=this.#I4;isNaN(t)||i.d2()===t||(i.m2(t),s.ED().mD())}get D4(){return this.#I4.L4()}get width(){return this.#I4.$p()}set width(t){t=+t;const s=this.#I4;isNaN(t)||s.$p()===t||(s.im(t),s.P4())}get height(){return this.#I4.hm()}set height(t){t=+t;const s=this.#I4;isNaN(t)||s.hm()===t||(s.Xp(t),s.P4())}kk(t,s){t=+t,s=+s;const i=this.#I4;isNaN(t)||isNaN(s)||i.$p()===t&&i.hm()===s||(i.HI(t,s),i.P4())}getSize(){const t=this.#I4;return[t.$p(),t.hm()]}get angle(){return this.#I4.jk()}set angle(t){t=Re.ur(+t);const s=this.#I4;isNaN(t)||s.jk()===t||(s.Wk(t),s.P4())}get N4(){return Re.dr(this.angle)}set N4(t){this.angle=Re.cr(t)}pu(){return this.#I4.B4().wl()}W4(){return this.#I4.j4().au()}U4(){return this.#I4.V4()}get isVisible(){return this.#I4.T5()}set isVisible(t){t=!!t;const s=this.#_4,i=this.#I4;i.T5()!==t&&(i.M5(t),s.ED().mD())}get opacity(){return this.#I4.ME()}set opacity(t){t=Re.lr(+t,0,1);const s=this.#_4,i=this.#I4;isNaN(t)||i.ME()===t||(i.TE(t),s.ED().mD())}set H4(t){if(Ae.Le(t),t.length<3)throw new Error("expected 3 elements");Ne.Uo(t[0],t[1],t[2]);const s=this.#_4,i=this.#I4;i.z4().na(Ne)||(i.J4(Ne),s.ED().mD())}get H4(){const t=this.#I4.z4();return[t.Yo(),t.Zo(),t.Ko()]}set mA(t){Ae.ve(t);const s=Le.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");const i=this.#_4,e=this.#I4;e.SetBlendMode(s),i.ED().mD()}get mA(){return ke.get(this.#I4.Y5())}q4(){this.#I4.X4()}Y4(){this.#I4.Z4()}K4(t){Ae.Ze(t,Fe);const s=this.#_4,i=s.ED().t5(t);if(!i)throw new Error("invalid layer");s.aD().Q4(i)}tB(t,s){Ae.Ze(t,n),this.#I4.sB(Oe.get(t),s)}get zIndex(){return this.#I4.uD()}get iB(){return this.#I4.eB()}set iB(t){this.#I4.nB(!!t)}Wl(t,s){return Ae.ue(t),Ae.ue(s),this.#I4.rB(+t,+s)}YD(t){Ae.Ze(t,n);const s=this.#_4,i=Oe.get(t);return s.ED().MF().ZD(s,i)}QD(){const t=this.#_4,s=t.ED().MF().tL(t);return s?s.nD():null}getParent(){const t=this.#_4.hB();return t?t.nD():null}oB(){const t=this.#_4.aB();return t?t.nD():null}*lB(){for(const t of this.#_4.lB())yield t.nD()}uB(){return this.#_4.cB()}fB(t){const s=this.#_4.dB(t);return s?s.nD():null}*children(){for(const t of this.#_4.children())yield t.nD()}*pB(){for(const t of this.#_4.pB())yield t.nD()}mB(t,s){Ae.Ze(t,n),Ae.Ee(s),s=s||{};const i=this.#_4,e=Oe.get(t);i.gB(e,s)}removeChild(t){Ae.Ze(t,n);const s=this.#_4,i=Oe.get(t);s.yB(i)}wB(){const t=this.#_4;if(t.SB()){const s=t.hB();s.yB(t)}}vB(){const t=this.#I4;return{bB:t.xB(),MB:t.GB(),TB:t._B(),IB:t.CB(),EB:t.PB(),RB:t.AB(),OB:t.DB(),LB:t.kB(),NB:t.BB()}}WB(t,s){Ae.ge(t),Ae.ge(s),this.#I4.jB(t,s)}UB(){const t=this.#I4;t.VB(),t.P4()}HB(t,s,i){Ae.ge(t),Ae.ge(s),Ae.Ce(i);const e=this.#I4;e.zB(t,s,i)&&e.P4()}JB(t,s){let i=NaN,e=NaN,n=NaN,r=NaN,h=NaN,o=this.#I4;if(o.qB()){const a=o.$B(),l=a.Q2(t,s);null!==l&&(i=l.a2(),e=l.c2(),n=l.d2(),r=l.g2(),h=l.S2())}return{x:i,y:e,U5:n,u:r,v:h}}XB(){const t=this.#I4;if(!t.qB())return[0,0];const s=t.$B();return[s.j2(),s.U2()]}}};0;const Re=self.Os,Ae=self.Hs,Fe=self.Qk,Oe=new WeakMap,De=Re.Ds(),Le=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),ke=new Map([...Le.entries()].map(t=>[t[1],t[0]])),Ne=Re.tr(Re.Lo);self.YB=t(self.dN),self.ZB=t(self.UN)}{const Be=self.Hs;self.KB=class extends self.YB{#FL;constructor(){super(),this.#FL=self.dN.wN()}QB(){return this.#FL.s6().t6()}focus(){this.#FL.s6().i6()}blur(){this.#FL.s6().e6()}n6(t,s){Be.ve(t),this.#FL.s6().r6(t,s)}}}{let e=function(t){let s=Ue.get(t);return s||(s=We.tr(We.Event.Rf),Ue.set(t,s)),s};e;const We=self.Os,je=self.Hs,Ue=new WeakMap,Ve=We.Ds();self.h6=class{#FL;constructor(){const t=We.DL.OL(Ve),s={runtime:{value:(this.#FL=t).ED().LL(),writable:!1},behavior:{value:t.a6().o6(),writable:!1},l6:{value:t.c6().u6(),writable:!1}};Object.defineProperties(this,s),t.ED().ck(this,t)}static wN(){return We.DL.SN()}get f6(){return this.#FL.d6().nD()}vN(){const t=Ue.get(this);t&&(t.ir(),Ue.delete(this))}addEventListener(t,s,i){je.ve(t),je.Ve(s),e(this).addEventListener(t,s,i)}removeEventListener(t,s,i){je.ve(t),je.Ve(s),e(this).removeEventListener(t,s,i)}dispatchEvent(t){e(this).dispatchEvent(t)}}}{const He=self.Os,ze=He.Ds();self.p6=class{constructor(){const t=He.DL.OL(ze),s={runtime:{value:t.ED().LL(),writable:!1},behavior:{value:t.a6().o6(),writable:!1},name:{value:t.jc(),writable:!1}};Object.defineProperties(this,s)}}}{const Je=self.Os,qe=Je.Ds();self.m6=class{#FL;constructor(){const t=Je.DL.OL(qe),s={runtime:{value:(this.#FL=t).ED().LL(),writable:!1}};Object.defineProperties(this,s)}fk(){return this.#FL.bk().map(t=>t.nD())}static QL(t){if(!t)return null;const s=Je.DL.g6(t);return s?s.o6():null}}}{const $e=self.Os,Xe=self.Hs,Ye=$e.tr($e.Lo);self.Lk=class{#FL;constructor(t,s){this.#FL=t;const i={index:{value:s,writable:!1}};Object.defineProperties(this,i)}get name(){const t=this.#FL.Dk();return t[this.index].jc()}get isActive(){return this.#FL.y6(this.index)}set isActive(t){t=!!t;const s=this.#FL;s.y6(this.index)!==t&&(s.w6(this.index,t),s.S6(),s.ED().mD())}setParameter(t,s){Xe.ge(t),t=Math.floor(+t);const i=this.#FL,e=i.v6(this.index,t);if(null===e)throw new RangeError("invalid index");if(e instanceof $e.Lo){if(!Array.isArray(s)||s.length<3)throw new TypeError("expected array with 3 elements");Ye.Uo(s[0],s[1],s[2]),s=Ye}else if("number"!=typeof s)throw new TypeError("expected number");const n=i.b6(this.index,t,s);n&&i.y6(this.index)&&i.ED().mD()}getParameter(t){Xe.ge(t),t=Math.floor(+t);const s=this.#FL,i=s.v6(this.index,t);if(null===i)throw new RangeError("invalid index");return i instanceof $e.Lo?[i.Yo(),i.Zo(),i.Ko()]:i}}}self.x6=class{#FL;constructor(t){this.#FL=t,Object.defineProperties(this,{name:{value:t.jc(),writable:!1}})}get speed(){return this.#FL.M6()}get isLooping(){return this.#FL.G6()}get repeatCount(){return this.#FL.T6()}get _6(){return this.#FL.I6()}get C6(){return this.#FL.E6()}get frameCount(){return this.#FL.P6()}R6(){return this.#FL.A6().map(t=>t.F6())}*frames(){for(const t of this.#FL.A6())yield t.F6()}};self.ID=class{#FL;constructor(t){this.#FL=t}static _D(t){return t.#FL}get width(){return this.#FL.$p()}get height(){return this.#FL.hm()}getSize(){const t=this.#FL;return[t.$p(),t.hm()]}O6(t){return t.D6(this)}L6(){return this.#FL.bC().wl()}};{const Ze=self.Hs;self.k6=class extends self.ID{#FL;constructor(t){super(t.N6()),this.#FL=t,Object.defineProperties(this,{duration:{value:t.B6(),writable:!1},W6:{value:t.j6(),writable:!1},U6:{value:t.V6(),writable:!1}})}H6(){const t=this.#FL;return[t.j6(),t.V6()]}z6(){return this.#FL.J6()}q6(t){return this.X6(t)[0]}Y6(t){return this.X6(t)[1]}X6(t){let s=this.#FL,i=null;if("number"==typeof t)i=s.Z6(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");i=s.K6(t)}return i?[i.a2(),i.c2()]:this.H6()}Q6(){const t=this.#FL.tW();return t?t.Pu():0}sW(t){return this.iW(t)[0]}eW(t){return this.iW(t)[1]}iW(t){Ze.ge(t),t=Math.floor(t);const s=this.#FL.tW();if(!s||t<0||t>=s.Pu())return[0,0];const i=s.Eu(),e=i[2*t],n=i[2*t+1];return[e,n]}get tag(){return this.#FL.nW()}}}{let s=function(t){const s=Qe.get(t);if(s.rW())throw new Error("timeline/tween was released and is no longer valid");return s};s;const Ke=self.Hs,Qe=new WeakMap;self.hW=class{constructor(t){Qe.set(this,t),t.ED().ck(this,t)}pause(){s(this).oW()}resume(){s(this).aW()}stop(){s(this).Kf()}DN(t){return s(this).lW(t)}set time(t){Ke.ge(t),s(this).uW(t)}get time(){return s(this).KP()}set totalTime(t){Ke.ge(t),s(this).cW(t)}get totalTime(){return s(this).fW()}set isLooping(t){s(this).dW(!!t)}get isLooping(){return s(this).pW()}set C6(t){s(this).mW(!!t)}get C6(){return s(this).gW()}set playbackRate(t){Ke.ge(t),s(this).yW(t)}get playbackRate(){return s(this).wW()}get progress(){const t=s(this);return t.KP()/t.fW()}get tags(){return s(this).SW()}get finished(){return s(this).vW()}get isPlaying(){return s(this).IsPlaying()}get bW(){return s(this).xW()}get MW(){return Qe.get(this).rW()}}}{let i=new WeakMap;self.GW=class extends self.hW{constructor(t){super(t),i.set(this,t);const s={name:{value:t.jc(),writable:!1}};Object.defineProperties(this,s)}}}{let i=function(t){const s=n.get(t);if(s.rW())throw new Error("tween was released and is no longer valid");return s},e=(i,self.Hs),n=new WeakMap,r=new WeakMap,h=null;self.TW=class extends self.hW{constructor(t,s,i){super(t),h=h||i.easeToIndexFunc,n.set(this,t),s&&r.set(this,s)}stop(){const t=i(this),s=r.get(this);s.ReleaseTween(t)}_W(t){e.ve(t);const s=self.ec.Mc(h(t));i(this).IW(s)}get f6(){const t=i(this).EW();return t?t.nD():null}get PW(){return i(this).RW()}set PW(t){i(this).AW(!!t)}get value(){const t=i(this);if("value"!==t.FW())throw new Error("not a value tween");return t.DW("value").OW()}}}self.LW=class extends self.AL{constructor(){super()}};{const tn=self.Os,sn=self.Hs,en=tn.Ds();self.kW=class extends self.LW{#FL;#qN;#NW=0;#BW=new Map;constructor(t){if(super(),this.#FL=tn.DL.OL(en),!t?.domComponentId)throw new Error("no DOM component ID specified");this.#qN=t.domComponentId,this.WW("elem-focused",t=>t.jW()),this.WW("elem-blurred",t=>{t&&t.UW()})}VW(t){const s=this.#NW++;return this.#BW.set(s,t),s}HW(t){this.#BW.delete(t)}WW(t,i){const s=this.#FL.ED();s.n4(this.#qN,t,t=>{const s=this.#BW.get(t.elementId);i(s,t)})}zW(t){sn.Le(t);for(const[s,i]of t)this.zW(s,i)}}}{const nn=self.Os,rn=(new WeakMap,nn.Ds());self.JW=class extends self.ak{#FL;constructor(){super(),this.#FL=nn.DL.OL(rn)}qW(){}$W(){return this.#FL.N6().XW()}YW(t){}ZW(t){}KW(){}QW(t){}}}{const hn=self.Os,on=(new WeakMap,hn.Ds());self.tj=class extends self.ZB{#FL;#sj=null;#ij=null;constructor(t){super(t),this.#FL=hn.DL.OL(on)}vN(){if(super.vN(),this.#sj){const t=this.#FL.ED().Rf();t.removeEventListener("renderercontextlost",this.#sj),t.removeEventListener("renderercontextrestored",this.#ij),this.#sj=null,this.#ij=null}}ej(){if(!this.#sj){this.#sj=()=>this.nj(),this.#ij=()=>this.rj();const t=this.#FL.ED().Rf();t.addEventListener("renderercontextlost",this.#sj),t.addEventListener("renderercontextrestored",this.#ij)}}nj(){}rj(){}hj(t){}}}{const an=self.Os,ln=an.tr(an.Rect),un=new WeakMap,cn=an.Ds();self.oj=class extends self.tj{#aj=-1;#lj=!0;#uj=!1;#cj=!1;#fj=-.2;#dj=an.tr(an.Rect,0,0,-1,-1);#pj=0;#mj=0;#gj=-1;#yj=-1;#wj=!1;constructor(t){if(!t?.domComponentId)throw new Error("no DOM component ID specified");super(t);const s=an.DL.OL(cn),i=(un.set(this,s),this.#aj=this.lk.VW(this),s.ED().wL());this.#pj=i.Sj(),this.#mj=i.vj(),this.XN(!0)}vN(){super.vN(),this.lk.HW(this.#aj),this.bj("destroy"),this.#aj=-1,un.delete(this)}xj(){const t=un.get(this).ED();if(t.RF())throw new Error("not valid in worker mode");return this.Mj("get-element")}bj(t,s){(s=s||{}).elementId=this.#aj,this.h4(t,s)}Mj(t,s){return(s=s||{}).elementId=this.#aj,this.a4(t,s)}Gj(t,s){return(s=s||{}).elementId=this.#aj,this.o4(t,s)}Tj(t){t=t||{};const s=un.get(this).aD();t.elementId=this.#aj,t.isVisible=s.T5(),t.htmlIndex=s.lD()._j(),t.htmlZIndex=s.Ij(),Object.assign(t,this.Cj()),this.#lj=!!t.isVisible,this.a4("create",t),this.Ej(!0)}Pj(t){this.#lj!==(t=!!t)&&(this.#lj=t,this.bj("set-visible",{isVisible:t}))}l4(){this.Ej(!1)}Rj(){const t=un.get(this).ED(),s=t.wL().Aj();return"Android"===an.ni.ri&&("scale-inner"===s||"scale-outer"===s||"crop"===s)}Ej(u){const c=un.get(this);if(!c.Fj()){let t=c.aD(),s=t.lD(),i=t.B4(),[e,n]=s.hN(i.pl(),i.ml()),[r,h]=s.hN(i.gl(),i.yl()),o=c.ED().wL(),a=o.xL(),l=o.GL();if(t.T5()&&s.T5())if(!this.Rj()&&(r<=0||h<=0||a<=e||l<=n))this.Pj(!1);else{ln.set(e,n,r,h);const f=o.Sj(),d=o.vj(),p=s._j(),m=t.Ij();if(!u&&ln.equals(this.#dj)&&this.#pj===f&&this.#mj===d&&this.#gj===p&&this.#yj===m)this.Pj(!0);else{this.#dj.T(ln),this.#pj=f,this.#mj=d,this.#gj=p,this.#yj=m,this.Pj(!0);let t=null;this.#cj&&(t=s.Oj()+this.#fj),this.bj("update-position",{left:Math.round(this.#dj.pl()),top:Math.round(this.#dj.ml()),width:Math.round(this.#dj.width()),height:Math.round(this.#dj.height()),htmlIndex:p,htmlZIndex:m,fontSize:t})}}else this.Pj(!1)}}Dj(){this.Mj("focus",{focus:!0})}Lj(){this.Mj("focus",{focus:!1})}jW(){this.#uj=!0}UW(){this.#uj=!1}kj(){return this.#uj}Nj(t,s){this.postToDOMElement("set-css-style",{prop:an.Fo(t),val:s})}Bj(t,s){this.postToDOMElement("set-attribute",{name:t,val:s})}Wj(t){this.postToDOMElement("remove-attribute",{name:t})}jj(){this.#wj||(this.#wj=!0,Promise.resolve().then(()=>{this.#wj=!1,this.bj("update-state",this.Cj())}))}Cj(){}Uj(){return this.#aj}}}self.Vj=class extends self.m6{constructor(){super()}};self.Hj=class extends globalThis.p6{constructor(){super()}qW(){}};{const fn=self.Os,dn=new WeakMap,pn=fn.Ds();self.zj=class extends self.h6{#VN=!1;#zN=!1;#Jj=!1;constructor(){super(),dn.set(this,fn.DL.OL(pn))}vN(){super.vN(),this.XN(!1),this.YN(!1),this.qj(!1),dn.delete(this)}ZN(){return fn.DL.KN()}$j(){}QN(t){const s=dn.get(this);s.ED().t4(t,s.d6(),s.c6())}s4(t){const s=dn.get(this);return s.ED().i4(t,s.d6(),s.c6())}XN(t){if(this.#VN!==(t=!!t)){this.#VN=t;const s=dn.get(this).ED();t?s.Xj(this):s.Yj(this)}}u4(){return this.#VN}l4(){}YN(t){if(this.#zN!==(t=!!t)){this.#zN=t;const s=dn.get(this).ED();t?s.Zj(this):s.Kj(this)}}f4(){return this.#zN}c4(){}qj(t){if(this.#Jj!==(t=!!t)){this.#Jj=t;const s=dn.get(this).ED();t?s.Qj(this):s.t8(this)}}s8(){return this.#Jj}i8(){}d4(){return[]}m4(){return null}g4(t){}}}{let e=self.Hs,n=null;self.UF=class{constructor(t){n=t}vD(t){n.bD(t)}M4(t,s,i){e.ve(t),e.ve(s),e.ke(i),n.e8(t,s,i)}T4(t,s,i){return e.ve(t),e.ve(s),e.ke(i),n.n8(t,s,i)}r8(t){return e.xe(t),new self.h8(n,t)}set o8(t){n.a8(!!t)}get o8(){return n.l8()}u8(t){n.c8(!!t)}f8(t){e.ue(t);const s=n.d8(t);return s?s.ek():null}}}self.h8=class{#p8;#m8;#g8;#y8;#w8;#S8;constructor(t,s){const i=(this.#p8=t).qF(),e=t.QF(),n=(this.#m8=e,this.#g8=e.v8(),t.hO()),r=(this.#y8=n.b8(),this.#w8=n.x8(e),i.M8()),h=r.x8();this.#S8=h,s&&h.G8(s),t.T8(!1)}_8(){const t=this.#p8.qF(),s=this.#g8,i=this.#S8;t.I8(s),this.#m8.C8(this.#y8,this.#w8),t.E8(s),i.P8(i.gF()+1)}get A8(){return this.#S8.F8()}release(){const t=this.#p8,s=t.hO(),i=t.qF().M8();t.T8(!0),i.O8(),s.O8()}};{let d=self.Os,n=self.Hs,p=null,r=null;self.D8=class{constructor(t,s){r=t,p=s}L8(){p.AE()}k8(t){p.PE(t)}N8(){p.Rw()}B8(){p.Tw()}W8(){p.Nw()}setColor(t){p.GE(t[0],t[1],t[2],t[3])}j8(t,s,i,e){p.GE(t,s,i,e)}U8(){p._E()}V8(t){p.TE(t)}H8(t){p.rS(t)}z8(){p.hS()}rect(t){p.DE(t.left,t.top,t.right,t.bottom)}J8(t,s,i,e){p.DE(t,s,i,e)}q8(t){p.Hl(d.Hl.lu(t))}X8(t,s,i,e,n,r,h,o){p.VS(t,s,i,e,n,r,h,o)}Y8(t,s){p.gS(d.Hl.lu(t),d.Rect.Sl(s))}Z8(t,s){p.NE(d.Hl.lu(t),d.Hl.lu(s))}K8(t,s,i,e,n,r,h,o,a,l,u,c,f){p.BE(t,s,i,e,n,r,h,o,a,l,u,c,d.Rect.Sl(f))}Q8(t,s,i,e,n,r,h,o,a,l,u,c,f){p.cS(t,s,i,e,n,r,h,o,a,l,u,c,d.Hl.lu(f))}tU(t,s,i){p.WE(t,s,i)}sU(t){p.US(t)}line(t,s,i,e){p.fm(t,s,i,e)}iU(t,s,i,e,n,r){p.fS(t,s,i,e,n,r)}eU(t,s,i,e){p.yS(t,s,i,e)}nU(t){p.bS(d.Rect.Sl(t))}rU(t){p.xS(d.Hl.lu(t))}hU(t){p.CS(t)}oU(){p.ES()}aU(t){p.FS(t)}lU(){p.kS()}uU(t){n.Ke(t,self.cU);const s=t?r.t5(t):null;p.CE(s)}fU(t,s){const i=self.ID._D(t);if(i)return i.dU(p,{ub:s?.ub??"clamp-to-edge",cb:s?.cb??"clamp-to-edge",fb:s?.fb??"trilinear",gb:s?.gb??!0});throw new Error("invalid IImageInfo")}pU(t){const s=self.ID._D(t);if(!s)throw new Error("invalid IImageInfo");s.cI()}D6(t){const s=self.ID._D(t);if(!s)throw new Error("invalid IImageInfo");const i=s.Ox();return self.cU.mU(r,i)}gU(t,s,i){n.ge(t),n.ge(s);const e=p.Gx(t,s,{ub:i?.ub??"clamp-to-edge",cb:i?.cb??"clamp-to-edge",fb:i?.fb??"trilinear",gb:i?.gb??!0});return self.cU.mU(r,e)}yU(t,s,i){n.Ze(s,self.cU);const e=r.t5(s);p.vC(t,e,{premultiplyAlpha:i?.premultiplyAlpha??!0})}deleteTexture(t){n.Ze(t,self.cU);const s=r.t5(t);p.Cx(s)}wU(){const t=p.hv();return new self.SU(r,t)}vU(){r.wL().bU(p)}xU(t){n.Ze(t,globalThis.Qk);const s=r.t5(t);s.MU(p)}}}{const mn=new WeakMap,gn=new WeakMap;self.cU=class{constructor(t,s){mn.set(this,{runtime:t,GU:s}),gn.set(s,this),t.ck(this,s),Object.defineProperties(this,{width:{value:s.$p(),writable:!1},height:{value:s.hm(),writable:!1}})}static mU(t,s){if(!s)return null;const i=gn.get(s);return i||new self.cU(t,s)}}}{let e=function(t){return wn.get(t).TU};e;const yn=self.Hs,wn=new WeakMap;self.SU=class{constructor(t,s){wn.set(this,{runtime:t,TU:s}),t.ck(this,s)}release(){e(this).ir()}set _U(t){yn.ve(t),e(this).SI(t)}get _U(){return e(this).b_()}set IU(t){yn.ge(t),e(this).vI(t)}get IU(){return e(this).bI()}set lineHeight(t){yn.ge(t),e(this).MI(t)}get lineHeight(){return e(this).GI()}set CU(t){e(this).TI(t)}get CU(){return e(this)._I()}set EU(t){e(this).II(t)}get EU(){return e(this).CI()}setColor(t){yn.Le(t),this.PU(t[0],t[1],t[2])}PU(t,s,i){e(this).OI(t,s,i)}RU(t){yn.ve(t),e(this).Zv(t)}set AU(t){e(this).DI(t)}get AU(){return e(this).LI()}set verticalAlign(t){e(this).kI(t)}get verticalAlign(){return e(this).NI()}set FU(t){e(this).BI(t)}get FU(){return e(this).WI()}set OU(t){e(this).jI(t)}get OU(){return e(this).UI()}set text(t){yn.ve(t),e(this).Qc(t)}get text(){return e(this).VI()}kk(t,s,i){yn.ge(t),yn.ge(s),yn.ge(i),e(this).HI(t,s,i)}O6(){const{runtime:t,TU:s}=wn.get(this),i=s.Ox();return self.cU.mU(t,i)}L6(){return e(this).bC().wl()}DU(t){yn.Ve(t),e(this).dI=t}LU(){e(this).cI()}get kU(){return e(this).JI()}get NU(){return e(this).$I()}}}{let e=function(t){if(!t)return"";const s=t.split(".");if(s.length<2)return"";const i=s.at(-1).toLowerCase();return vn.get(i)||""},r=function(e){return new Promise((t,s)=>{const i=document.createElement("script");i.onload=t,i.onerror=s,i.async=!1,i.type="module",i.src=e,document.head.appendChild(i)})};e,r;const g=self.Os,Sn=new Set(["local","remote"]),vn=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);g.BU=class extends g.Kn{constructor(t,s){super();const i=s.exportType,e=(this.Xc=t,this.WU="folders",this.jU=new Map,this.UU="cordova"===i,this.VU=!!s.isiOSCordova,this.HU=!!s.isFileProtocol,this.zU=s.swClientId,this.JU=s.supportedAudioFormats||{},this.qU=new Map,this.$U=!1,this.XU=s.scriptFolder,this.YU="",this.ZU="",this.KU="",this.QU=s.fileMap||new Map,this.tV=new Map,"html5"===i||"scirra-arcade"===i||"instant-games"===i);this.sV=e?"remote":"local",this.iV=new Map,this.eV=[],this.nV=[],this.rV=!1,this.hV=0,this.oV=0,this.aV=0,this.lV=!1,this.uV=g.tr(g.fd,()=>this.cV(),50),this.fV=g.tr(g.sd,Math.max(g.hardwareConcurrency,8)),this.dV=g.tr(g.sd,20),this.pV=new self.xD(this)}ir(){for(const t of this.iV.values())t.ir();this.iV.clear(),g.Rh(this.nV),this.Xc=null}ED(){return this.Xc}mV(t){this.WU=t}kD(){return this.WU}gV(){return this.XU}yV(t){this.YU=t}WD(){return this.YU}wV(t){this.ZU=t}SV(){return this.ZU}vV(t){this.KU=t}bV(){return this.KU}xV(){return this.HU}yo(t,s){return s=s||this.sV,g.uo(t)?("flat"===this.WU&&(t=t.toLowerCase()),this.UU&&this.HU?this.MV(t):"playable-ad-single-file"===this.Xc.pL()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):("local"===s?this.fV:this.dV).tc(()=>g.yo(t))):g.yo(t)}wo(t){return g.uo(t)?("flat"===this.WU&&(t=t.toLowerCase()),this.UU&&this.HU?this.GV(t):"playable-ad-single-file"===this.Xc.pL()?g.vo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.sV?this.fV:this.dV).tc(()=>g.wo(t))):g.wo(t)}do(t){return g.uo(t)?("flat"===this.WU&&(t=t.toLowerCase()),this.UU&&this.HU?this.TV(t):"playable-ad-single-file"===this.Xc.pL()?g.bo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.sV?this.fV:this.dV).tc(()=>g.do(t))):g.do(t)}async po(t){const s=await this.do(t);return JSON.parse(s)}_V(t,s){return"flat"===this.WU&&(t=t.toLowerCase()),this.Xc.yD("runtime","cordova-fetch-local-file",{filename:t,as:s})}TV(t){return this._V(t,"text")}async MV(t){const s=await this._V(t,"buffer"),i=e(t);return new Blob([s],{type:i})}async IV(t){"flat"===this.WU&&(t=t.toLowerCase());let s=this.jU.get(t);if(!s){const i=await this.MV(t);s=URL.createObjectURL(i),this.jU.set(t,s)}return s}GV(t){return this._V(t,"buffer")}ND(t){"flat"===this.WU&&(t=t.toLowerCase());let s=this.YU+t;return"Gecko"===g.ni.ci&&"preview"===this.Xc.pL()?this.CV(s):s}DD(t){return g.lo(t)?Promise.resolve(t):this.UU&&this.HU?this.IV(t):"playable-ad-single-file"===this.Xc.pL()?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("flat"===this.WU&&(t=t.toLowerCase()),Promise.resolve(t))}EV(s){if(g.lo(s)||"preview"!==this.Xc.pL()||!this.zU||!s)return s;try{const t=new URL(s,location.href);return t.searchParams.set("__c3_client_id",this.zU),t.toString()}catch(t){return console.warn("Invalid iframe URL: "+s),s}}PV(t){return this.DD(t)}RV(t){if(t.AV&&!Sn.has(t.AV))throw new Error("invalid load policy");let s=this.iV.get(t.url);return s||(s=g.tr(g.FV,this,{url:t.url,size:t.size||0,AV:t.AV||this.sV}),this.iV.set(s.OV(),s),this.rV)||(this.hV+=s.$u(),this.nV.push(s.DV().then(()=>this.LV(s.$u())))),s}kV(t){this.iV.delete(t.OV())}async NV(){try{await Promise.all(this.nV),this.aV=1}catch(t){console.error("Error loading: ",t),this.lV=!0,this.cV()}}BV(){this.rV=!0}WV(){return this.lV}LV(t){this.oV+=t,this.uV.Gd()}cV(){const t=g.tr(g.Event,"loadingprogress");this.aV=g.lr(this.oV/this.hV,0,1),t.progress=this.aV,this.Xc.Rf().dispatchEvent(t)}jV(){return this.aV}UV(t){g.Dh(this.eV,t),this.eV.length&&this.nV.push(this.VV())}async VV(){const t=[],s=[];for(const[i,e,n]of this.eV)this.hV+=n,t.push(this.HV(i,e,s).then(()=>this.LV(n)));await Promise.all(t),this.Xc.RF()&&0<s.length&&await this.Xc.yD("runtime","load-webfonts",{webfonts:s})}async HV(s,i,e){try{let t=await this.DD(i);"Gecko"===g.ni.ci&&(s=`'${s}'`),("Gecko"===g.ni.ci&&"preview"===this.Xc.pL()||"playable-ad-single-file"===this.Xc.pL())&&(t=this.CV(t));const n=new FontFace(s,`url('${t}')`);(this.Xc.RF()?self:document).fonts.add(n),await n.load(),this.Xc.RF()&&e.push({name:s,url:t})}catch(t){console.warn(`[C3 runtime] Failed to load web font '${s}': `,t)}}GD(t){return!!this.JU[t]}zV(t,s){this.$U=!!s;for(const[i,e,n]of t)this.qU.set(i,{fileName:i,JV:e.map(t=>({type:t[0],qV:t[1],$V:i+t[1],fileSize:t[2]})),isMusic:n})}XV(t){"flat"===this.WU&&(t=t.toLowerCase());const s=this.qU.get(t);if(!s)return null;let i=null;for(const e of s.JV)if(i||"audio/webm; codecs=opus"!==e.type||(i=e),this.GD(e.type))return e;return i}YV(t){const s=this.XV(t);return s?{url:this.ND(s.$V),type:s.type}:null}ZV(){if(this.$U){const t=[];for(const s of this.qU.values())if(!s.isMusic){const i=this.XV(s.fileName);i&&t.push({originalUrl:s.fileName,url:this.ND(i.$V),type:i.type,fileSize:i.fileSize})}return t}return[]}KV(t){return"preview"===this.Xc.pL()&&(t=new URL(t,location.href).toString()),this.QU.get(t)||null}CV(t){let s=this.tV.get(t);if(!s){const i=this.KV(t);if(!i)return t;s=URL.createObjectURL(i),this.tV.set(t,s)}return s}SF(){return this.pV}async HD(...t){const s=await Promise.all(t.map(t=>this.DD(t)));if(this.Xc.RF())if(1===t.length){const i=t[0];await import((g.uo(i)?"./":"")+i)}else{const e=t.map(t=>`import "${g.uo(t)?"./":""}${t}";`).join("\n"),n=URL.createObjectURL(new Blob([e],{type:"application/javascript"}));await import(n)}else await Promise.all(s.map(t=>r(t)))}async JD(t){if(WebAssembly.compileStreaming){const s=await this.DD(t);return WebAssembly.compileStreaming(fetch(s))}{const i=await g.wo(t);return WebAssembly.compile(i)}}async $D(t){const s=await this.DD(t);return this.Xc.yD("runtime","add-stylesheet",{url:s})}}}{const bn=self.Os;bn.QV=class extends bn.Kn{constructor(t,s){super(),this.tH=t,this.Xc=t.ED(),this.sH=s.url||"",this.iH=s.size,this.eH=s.AV,this.nH=s.blob||null,this.rH=!!this.nH,this.Tg=null}ir(){this.Tg=null,this.tH=null,this.Xc=null,this.nH=null}OV(){return this.sH}$u(){return this.iH}DV(){return"local"===this.eH||this.nH?(this.rH=!0,Promise.resolve()):(this.Tg||(this.Tg=this.tH.yo(this.sH,this.eH).then(t=>(this.rH=!0,this.Tg=null,this.nH=t)).catch(t=>{console.error("Error loading resource: ",t),this.Tg=null})),this.Tg)}hH(){return this.rH}oH(){return this.nH?Promise.resolve(this.nH):this.Tg||this.tH.yo(this.sH,this.eH)}}}{const lr=self.Os,ur=new lr.sd,cr=new Set;lr.FV=class extends lr.QV{constructor(t,s){super(t,s),this.aH=null,this.lH=null,this.t1=0,this.uH=-1,this.cH=-1,cr.add(this)}ir(){if(0!==this.t1)throw new Error("released image asset which still has texture references");this.tH.kV(this),this.aH=null,cr.delete(this),super.ir()}static fH(){for(const t of cr)t.aH=null,t.lH=null,t.t1=0}dU(t,s){return s=s||{},this.t1++,this.lH?Promise.resolve(this.lH):(this.aH||(s.pb=this.Xc.wL().dH(),this.aH=this.pH(t,s)),this.aH)}async pH(s,i){try{const e=await this.oH();return 0===this.t1?this.aH=null:await ur.tc(async()=>{const t=await s.cP(e,i);return this.aH=null,0===this.t1?(s.Cx(t),null):(this.lH=t,this.uH=t.$p(),this.cH=t.hm(),this.lH)})}catch(t){throw console.error("Failed to load texture: ",t),t}}cI(){if(this.t1<=0)throw new Error("texture released too many times");if(this.t1--,0===this.t1&&this.lH){const t=this.lH.Rv();t.Cx(this.lH),this.lH=null}}mH(){return this.t1}Ox(){return this.lH}$p(){return this.uH}hm(){return this.cH}async gH(){const t=await this.oH();return lr.Li.ImageBitmap?createImageBitmap(t):lr.Mo(t)}}}{let t=function(t,s){return t.aD().yH()-s.aD().yH()};t;const fr=self.Os;fr.wH=class extends fr.Kn{constructor(t,s,i){super(),this.SH=t,this.za=s,this.Ja=i,this.vH=[],this.bH=!0,this.xH=new Set,this.MH=!1}ir(){fr.Rh(this.vH),this.xH.clear(),this.SH=null}Kf(){fr.Rh(this.vH),this.bH=!0,this.xH.clear(),this.MH=!1}GH(){this.bH=!1}zu(){if(this.vH.length){if(this.vH.length>this.xH.size)return!1;this.TH()}return!0}_H(t){this.xH.has(t)?(this.xH.delete(t),0===this.xH.size&&(this.MH=!1)):(this.vH.push(t),this.bH=1===this.vH.length)}u0(t){this.xH.add(t),this.MH=!0,50<=this.xH.size&&this.TH()}TH(){this.MH&&(this.vH.length===this.xH.size?this.Kf():(fr.Wh(this.vH,this.xH),this.xH.clear(),this.MH=!1))}IH(){this.bH||(this.vH.sort(t),this.bH=!0)}CH(t){this.TH(),this.IH(),this.vH.length&&t.push(this.vH)}}}{const dr=self.Os;dr.EH=class extends dr.Kn{constructor(t,s){super(),this.PH=t,this.RH=s,this.AH=dr.tr(dr.Vu)}ir(){this.AH.ir(),this.AH=null}FH(t,s,i){let e=this.AH.Ks(t,s);return e||(i?(e=dr.tr(dr.wH,this,t,s),this.AH.Set(t,s,e),e):null)}OH(t){return Math.floor(t/this.PH)}DH(t){return Math.floor(t/this.RH)}LH(e,n,r){if(n)for(let i=n.pl(),t=n.gl();i<=t;++i)for(let t=n.ml(),s=n.yl();t<=s;++t)if(!r||!r.Wl(i,t)){const h=this.FH(i,t,!1);h&&(h.u0(e),h.zu())&&this.AH.Ju(i,t)}if(r)for(let i=r.pl(),t=r.gl();i<=t;++i)for(let t=r.ml(),s=r.yl();t<=s;++t)n&&n.Wl(i,t)||this.FH(i,t,!0)._H(e)}kH(t,s){let i=this.OH(t.pl()),e=this.DH(t.ml()),n=this.OH(t.gl()),r=this.DH(t.yl());for(;i<=n;++i)for(let t=e;t<=r;++t){const h=this.FH(i,t,!1);h&&h.CH(s)}}NH(t){let s=t.pl(),i=t.ml(),e=t.gl(),n=t.yl();for(;s<=e;++s)for(let t=i;t<=n;++t){const r=this.FH(s,t,!1);r&&r.GH()}}}}{let h=function(t,s){return t.aD().yH()-s.aD().yH()},t=function(t,s){return t.aD().d2()-s.aD().d2()};h,t;const S=self.Os,pr=new S.Rect,mr=new S.Hl,gr=[],yr=(new S.Rect,new S.Rect,self.ys),Tn=yr.Ts,Vn=yr._s,Gn=yr.bs,wr=Gn.create(),Sr=Tn.create(),vr=Vn.create(),br=Tn.create(),xr=Tn.create(),Mr=Tn.create(),Gr=S.tr(S.Ha),Tr=(S.tr(S.Rect),[]),_r=[],Ir=[],Cr={name:"",sid:-1,BH:!1,isVisible:!0,isInteractive:!0,C5:!1,backgroundColor:[1,1,1,1],V5:!0,WH:[1,1],opacity:1,J5:!1,jH:!1,UH:!1,VH:!1,scaleRate:1,mA:0,U5:0,HH:[],zH:[],JH:[]};S.qH=class extends S.Kn{constructor(t,s,i){super(),i=Object.assign({},Cr,i),this.$H=t,this.Xc=t.ED(),this.XH=s,this.rr=i.name,this.Dg=-1,this.YH=!!i.C5,this.ZH=-1,this.KH=i.sid,this.QH=!!i.BH,this.t7=!!i.isVisible,this.s7=!!i.isInteractive,this.i7=S.tr(S.Lo),this.i7.Fa(i.backgroundColor),this.e7=!!i.V5,this.n7=i.WH[0],this.r7=i.WH[1],this.$v=S.tr(S.Lo,1,1,1,i.opacity),this.h7=S.tr(S.Lo),this.o7=!!i.J5,this.a7=!!i.jH,this.l7=!!i.UH,this.u7=!!i.VH,this.c7=i.scaleRate,this.qv=i.mA,this.f7=null,this.d7=1,this.Xv=i.U5,this.p7=0,this.m7=0,this.g7=0,this.y7=!1,this.h3=S.tr(S.Rect),this.w7=S.tr(S.Rect),this.S7=S.tr(S.Rect),this.v7=!0,this.wx=Gn.create(),this.b7=!0,this.sA=Gn.create(),this.x7=!0,this.M7=S.tr(S.Ug.Jg),this.G7=!0,this.T7=[],this._7=i.HH,this.I7=[],this.C7=[],this.E7=new Map,this.vH=[],this.P7=!1,this.R7=!1,this.A7=!1;const n=this.Xc.wL();this.F7=S.tr(S.O7,this,i.zH),this.fF=S.tr(S.Ug.cR,n.D7(),{tR:(t,s)=>{const i=s.nF(),e=i.oP();t.Zv(i.L7()),t.mP(e),t.gP(e),n.k7(e)},iR:t=>this.Ok().N7(t)}),this.B7=!0,this.W7=!0,this.j7=null,this.U7=[],this.V7=!1,this.H7=S.tr(S.Rect,0,0,-1,-1),this.z7=S.tr(S.Rect,0,0,-1,-1),this.J7=new self.Qk(this),this.q7(),this.X7()&&(this.j7=S.tr(S.EH,this.Xc.FF(),this.Xc.DF())),this.Y7=i.JH.map(t=>S.qH.Z7(this.$H,this,t))}K7(){for(const t of this._7){const s=this.Xc.Q7(t[1]);this.$H.sz(s),s.iz()||(s.ez(t),s.nz(this.Dg)),this.I7.push(t),this.E7.set(t[2],t)}S.Dh(this.T7,this.I7),this._7=null}static Z7(t,s,i){return S.tr(S.qH,t,s,{name:i[0],sid:i[2],isVisible:i[3],isInteractive:i[13],C5:i[19],backgroundColor:i[4].map(t=>t/255),V5:i[5],WH:[i[6],i[7]],opacity:i[8],J5:i[9],jH:i[17],UH:i[18],VH:i[10],scaleRate:i[11],mA:i[12],U5:i[16],HH:i[14],zH:i[15],JH:i[20]})}ir(){for(const t of this.Y7)t.ir();S.Rh(this.Y7);for(const s of this.vH)this.Xc.xN(s);S.Rh(this.vH),this.F7.ir(),this.F7=null,this.fF.ir(),this.fF=null,this.J7=null,this.XH=null,this.$H=null,this.Xc=null}rz(t){return this.E7.get(t)}hz(n){let r=this.$H.oz(),h=0,o=this.I7;for(let e=0,t=o.length;e<t;++e){let t=o[e],s=this.Xc.Q7(t[1]),i=!0;if(!s.az()||r){const a=this.Xc.lz(t,this,!0);n.push(a),s.uz()&&(i=!1,this.C7.push(a.EN()))}i&&(o[h]=o[e],++h)}S.Ph(o,h),this.Xc.Ak(),this.pD()}cz(t,s){if(!t.uk().WL())throw new Error("instance is not of world type");const i=t.aD();if(i.lD()!==this)throw new Error("instance added to wrong layer");this.vH.push(t),0!==i.d2()&&(this.A7=!0),s&&this.X7()&&t.aD().P4(),this.pD(t)}fz(t){this.vH.includes(t)||(this.vH.push(t),0!==t.aD().d2()&&(this.A7=!0),this.pD(t))}dz(t,s){const i=t.aD();if(i.lD()!==this)throw new Error("instance added to wrong layer");this.vH.unshift(t),0!==i.d2()&&(this.A7=!0),this.pD(t),s&&this.X7()&&t.aD().P4()}pz(t,s){const i=this.vH.indexOf(t);i<0||(s&&this.X7()&&t.aD().mz(),this.vH.splice(i,1),this.pD(t),this.gz())}yz(){this.A7=!0}gz(){0===this.vH.length&&(this.A7=!1)}wz(t){if(t){const s=new Set;for(const i of this.vH){const e=i.aD().yH();0<=e&&s.add(e)}let t=-1;for(const n of this.vH){const r=n.aD();if(!(0<=r.yH())){for(++t;s.has(t);)++t;r.Sz(t)}}}this.vH.sort(h)}vz(){}bz(){for(const t of this.vH)t.mN().uz()||this.Xc.xN(t);this.Xc.Ak(),S.Rh(this.vH),this.A7=!1,this.pD()}xz(s,t,i,e,n,r){const h=this.Xc.qF(),o=this.Xc.Mz(),a=s.Gz(),l=[];for(const u of this.I7){const c=u[0],f=c[0],d=c[1];if(t.Wl(f,d)){const p=o[u[1]];if(p!==s){if(!a)continue;if(!s.Tz(p))continue}let t=n;if(!t){const y=this.Xc.hD();t=this.HO()===y?this:(t=y._z(this.jc()))||y.cD(this.gF())}const m=this.Xc.lz(u,t,!1,void 0,void 0,!1,r),g=(t.Ik(m),m.aD());g.O4(i,e),g.P4(),h.Ck(!0),m.Ek(),h.Ck(!1),l.push(m)}}return l}Gk(){return this.vH.length}HO(){return this.$H}jc(){return this.rr}Iz(t){this.Dg=t}gF(){return this.Dg}Cz(t){this.ZH=t}_j(){return this.ZH}E5(){return this.YH}P5(t){this.YH!==(t=!!t)&&(this.YH=t,this.$H.Ez(),this.Xc.mD())}Pz(){let t=this.g5();return(t?t.S5():this.HO().Rz()).indexOf(this)}Az(){return this.KH}ED(){return this.Xc}Fz(){return this.QH}Oz(){for(const t of this.y5())if(t.Fz())return!0;return!1}EL(){return this.Xc.EL()}Ok(){return this.F7}mF(){return this.Dz(),this.fF}Dz(){const t=this.Lz();if(this.B7||t!==this.W7||this.fF.iA()){const s=this.Ok().kz();this.fF.eA(s.map(t=>t.QM()),{nR:s.map(t=>t.gF()),rR:!t,uR:!0}),this.B7=!1,this.W7=t}}S6(){this.Ok().S6(),this.B7=!0}X7(){return this.u7&&!this.l7}Nz(){return this.j7}Bz(){this.V7=!1}T5(){for(const t of this.Wz())if(!t.x5())return!1;return!0}x5(){return this.t7}M5(t){this.t7!==(t=!!t)&&(this.t7=t,this.Xc.mD())}I5(t){this.s7=!!t}_5(){return this.s7}A5(){for(const t of this.Wz())if(!t._5())return!1;return!0}K5(t){if(this.y7!==(t=!!t)){if(this.y7=t){const s=this.HO();this.m7=s.Vk(),this.g7=s.zk()}this.jz(),this.Xc.mD()}}Uz(){return this.y7}Uk(t){const s=this.HO(),i=s.Vz(),e=s.zz();this.m7!==(t=(t=e<t?e:t)<i?i:t)&&(this.m7=t,this.Uz())&&(this.jz(),this.Xc.mD())}Hk(t){const s=this.HO(),i=s.Jz(),e=s.qz();this.g7!==(t=(t=e<t?e:t)<i?i:t)&&(this.g7=t,this.Uz())&&(this.jz(),this.Xc.mD())}Vk(){return this.Uz()?this.m7:this.HO().Vk()}zk(){return this.Uz()?this.g7:this.HO().zk()}tN(){return this.$z(),this.h3}Xz(){return this.$z(),this.w7}Yz(){return this.$z(),this.S7}c5(){const t=this.HO();return[t.Zz(),t.Kz()]}Qy(t){return this.Xc.Qy(t)}Qz(c,e){const n=this.Xz();if(0===c)e.T(n);else{let o=n.xl(),a=n.Ml(),t=this.tJ(c),s=n.width()/t,i=n.height()/t,[l,u]=this.c5();if(.5!==l||.5!==u){let t=this.sJ(),s=this.Xc,i=this.Qy()/t,e=(l-.5)*s.iJ()/i,n=(u-.5)*s.eJ()/i,r=this.jk(),h=(0!==r&&(Gr.set(e,n),Gr.rotate(r),e=Gr.Xa(),n=Gr.Za()),S._r(t,0,c));o+=S.Ft(e,0,h),a+=S.Ft(n,0,h)}e.set(o-s/2,a-i/2,o+s/2,a+i/2)}}ME(){return this.$v.Qo()}TE(t){t=S.lr(t,0,1),this.$v.Qo()!==t&&(this.$v.$o(t),this.q7(),this.Xc.mD())}q7(){this.h7.T(this.$v),this.h7.ca()}L7(){return this.h7}Lz(){return this.$v.oa(1,1,1,1)}L5(){return this.c7}D5(t){this.c7!==t&&(this.c7=t,this.jz(),this.Xc.mD())}B5(){return this.n7}j5(){return this.r7}nJ(t,s){this.n7===t&&this.r7===s||(this.n7=t,this.r7=s,this.jz(),this.Xc.mD())}N5(t){this.nJ(t,this.j5())}W5(t){this.nJ(this.B5(),t)}m2(t){this.Xv!==t&&(this.Xv=t,this.Xc.mD())}d2(){return this.Xv}Wk(t){t=S.ur(t),this.p7!==t&&(this.p7=t,this.jz(),this.Xc.mD())}jk(){return S.ur(this.$H.jk()+this.p7)}k5(){return this.p7}rJ(){return 0<this.vH.length}fD(){return this.vH}hJ(){return this.oJ()&&this.l7?(S.Dh(Ir,this.fD()),Ir.sort((t,s)=>this.aJ(t,s)),Ir):this.fD()}lJ(t){S.Vn(t,this.hJ());for(const s of this.Y7)s.T5()&&0<s.ME()&&s.lJ(t)}aJ(t,s){const i=this.HO().uJ(),e=i[0],n=i[1],r=i[2],h=t.aD(),o=s.aD(),a=h.a2()-e,l=h.c2()-n,u=h.d2()-r,c=o.a2()-e,f=o.c2()-n,d=o.d2()-r;return c*c+f*f+d*d-(a*a+l*l+u*u)}Z5(){return this.i7}z5(){return this.e7}H5(t){this.e7!==(t=!!t)&&(this.e7=t,this.Xc.mD())}X5(){return this.o7}q5(t){this.o7!==(t=!!t)&&(this.o7=t,this.Xc.mD())}cJ(){return!this.ED().fJ()||!this.a7}oJ(){return!this.cJ()}dJ(){return this.oJ()&&this.HO().pJ()}mJ(){if(!this.dJ())return!1;for(const t of this.Y7)if(!t.mJ())return!1;return!0}SetBlendMode(t){this.qv!==t&&(this.qv=t,this.Xc.mD())}Y5(){return this.qv}gJ(){return!this.XH}g5(){return this.XH}yJ(t){this.XH=t}S5(){return this.Y7}wJ(){return 0<this.Y7.length}SJ(t,s=!0){s?this.Y7.push(t):this.Y7.unshift(t)}vJ(t,s,i){let e=this.Y7.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");i&&++e,this.Y7.splice(e,0,t)}bJ(t){const s=this.Y7.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");this.Y7.splice(s,1)}xJ(){for(const t of this.Y7)if(t.MJ())return!0;return!1}*b5(){for(const t of this.Y7)yield*t.b5();yield this}*y5(){let t=this.g5();for(;t;)yield t,t=t.g5()}*Wz(){yield this,yield*this.y5()}GJ(t){for(const s of this.y5())if(s===t)return!0;return!1}TJ(t){return this===t||this.n7===t.n7&&this.r7===t.r7&&this.d7===t.d7&&this.c7===t.c7&&this.p7===t.p7&&this.Vk()===t.Vk()&&this.zk()===t.zk()}_J(){return{parallaxX:this.B5(),parallaxY:this.j5(),scale:this.O5(),scaleRate:this.L5(),angle:this.k5(),hasOwnScroll:this.Uz(),scrollX:this.Vk(),scrollY:this.zk()}}IJ(t){this.nJ(t.parallaxX,t.parallaxY),this.F5(t.scale),this.D5(t.scaleRate),this.Wk(t.angle),this.K5(t.hasOwnScroll),this.Uk(t.scrollX),this.Hk(t.scrollY),this.$z()}CJ(t){if(0!==t.size){const s=S.Wh(this.vH,t);0<s&&(this.gz(),this.pD())}}pD(t){this.P7=!1,this.V7=!1,t&&!t.mN().uk().UL()||(this.R7=!1)}EJ(){if(!this.P7){if(this.vH.sort(t),this.X7())for(let t=0,s=this.vH.length;t<s;++t){const i=this.vH[t].aD();i.Sz(t),this.j7.NH(i.PJ())}else for(let t=0,s=this.vH.length;t<s;++t)this.vH[t].aD().Sz(t);this.P7=!0}}RJ(){if(!this.R7){let t=this.$H.AJ(this._j()),s=t.map(t=>[...t.b5()]).flat(),i=0;for(const e of s){for(const n of e.fD())n.mN().uk().UL()&&n.aD().FJ(i++);e.OJ()}}}OJ(){this.R7=!0}DJ(){return{isVisible:this.T5(),opacity:this.ME(),isInteractive:this._5()}}LJ(t,s,i){const e=t.aD(),n=s.aD();if(e.lD()!==this||n.lD()!==this)throw new Error("can't arrange Z order unless both objects on this layer");let r=e.uD(),h=n.uD();return r!==h+(i?1:-1)&&(S.Lh(this.vH,r),r<h&&h--,i&&h++,h===this.vH.length?this.vH.push(t):this.vH.splice(h,0,t),this.pD(t),!0)}kJ(t,s){let i=[],e=0,n=0,r=t.length,h=s.length;for(;e<r&&n<h;){const o=t[e],a=s[n];o.aD().yH()<a.aD().yH()?(i.push(o),++e):(i.push(a),++n)}for(;e<r;++e)i.push(t[e]);for(;n<h;++n)i.push(s[n]);return i}NJ(s){const i=[],e=s.length;for(let t=0;t<e-1;t+=2){const n=s[t],r=s[t+1];i.push(this.kJ(n,r))}return e%2==1&&i.push(s[e-1]),i}BJ(t){for(;1<t.length;)t=this.NJ(t);return t[0]}WJ(){return this.EJ(),S.Rh(gr),this.j7.kH(this.tN(),gr),gr.length?1===gr.length?gr[0]:this.BJ(gr):[]}MJ(){return this.T5()&&0<this.ME()&&this.jJ()}jJ(){if(this.rJ()||!this.z5())return!0;for(const t of this.Y7)if(t.jJ())return!0;return!1}UJ(){return this.X5()||!this.Lz()||0!==this.Y5()||this.F7.VJ()}HJ(){if(this.UJ())return!0;for(const t of this.Y7)if(t.HJ())return!0;return!1}oP(){return this.f7}tJ(t){if(this.$H.p5())return 1;{const s=this.zJ();return s/(s-t)}}JJ(t){const s=this.Xc.fN();if(this.$H.p5())return s;{const i=this.zJ(),e=this.Qy();return e/Math.abs(i-t)*s}}jz(){this.x7=!0,this.G7=!0,this.v7=!0}qJ(t){return this.x7&&(this.$J(t,this.sA,0,0,null),this.x7=!1),this.sA}sJ(t){return this.Qy(t)/this.XJ()}zJ(){return this.dJ()?this.HO().uJ()[2]:this.sJ()}YJ(){if(this.dJ()){const t=this.HO().uJ();return[t[0],t[1],t[2]]}return this.ZJ()}ZJ(t=0,s=0,n=0){let r=this.Xc,i=this.HO(),e=r.KJ(),h=r.QJ(),o=(this.Vk()-e)*this.n7+e,a=(this.zk()-h)*this.r7+h,l=(r.NF()&&(o=Math.round(o),a=Math.round(a)),o+t),u=a+s,c=i.p5()?this.Qy(n):this.sJ(n),[f,d]=this.c5();if(.5!==f||.5!==d){let t=this.Qy(n)/c,s=(f-.5)*r.iJ()/t,i=(d-.5)*r.eJ()/t,e=this.jk();0!==e&&(Gr.set(s,i),Gr.rotate(e),s=Gr.Xa(),i=Gr.Za()),l+=s,u+=i}return[l,u,c]}$J(t,s,i,e,n){const r=this.Xc,h=this.HO();if(this.dJ()){Tn.T(br,h.uJ()),Tn.T(xr,h.t9()),Tn.T(Mr,h.s9());const o=r.KJ(),a=r.QJ(),l=xr[0]-br[0],u=xr[1]-br[1],c=xr[2]-br[2];br[0]=(br[0]-o)*this.n7+o,br[1]=(br[1]-a)*this.r7+a,br[2]*=Math.max(this.n7,this.r7),xr[0]=br[0]+l,xr[1]=br[1]+u,xr[2]=br[2]+c}else{const[f,d,p]=this.ZJ(i,e,n),m=(Tn.set(br,f,d,p),Tn.set(xr,f,d,p-100),this.jk());0===m?Tn.set(Mr,0,1,0):Tn.set(Mr,Math.sin(m),Math.cos(m),0)}t.ww(s,br,xr,Mr,n||r.eJ())}i9(){this.b7=!0,this.G7=!0,this.v7=!0}e9(t){return this.b7&&(this.n9(t),this.b7=!1),this.wx}n9(t){const s=this.Xc.wL(),[i,e]=this.c5();if(this.$H.p5())t.yw(this.wx,s.r9(),s.h9());else if(.5===i&&.5===e)Gn.T(this.wx,s.o9());else{const n=s.r9(),r=s.h9();t.mw(this.wx,n/r,i,e)}}MU(t,s=!0,i=0,e=0,n=0){s&&t.fE(this.e9(t));let r;r=0===i&&0===e&&0===n?this.qJ(t):(this.$J(t,wr,i,e,n),wr),t.wE(r)}a9(t){this.MU(t),t.eS(this.d2())}l9(t){let s=null;if(t.QS()&&this.Xc.u9()){const i=this.Xc.wL().c9(this);i&&(s=i.qC(),t.xP(s))}return s}f9(t){if(t.gw()&&this.Xc.u9()){const s=2*(this.gF()+1);t.StartMeasuringRenderPassTime(s,1+s)}}sb(t,s,i){let e=this.Xc.wL(),n=this.UJ(),r=null,h=this.l9(t);if(this.f9(t),n){const o={fb:this.Xc.LF(),Kb:!0,d9:!!t.gw()&&this.Xc.p9()};"low"===e.m9()&&(o.width=e.r9(),o.height=e.h9()),r=this.Xc.g9(o),this.f7=r,t.dP(r),this.z5()&&t.tP(0,0,0,0)}else this.f7=s,t.dP(s);if(this.z5()||t.Clear(this.i7),this.$H.y9(t,this.f7,this.Y7,n&&this.z5()),this.f9(t),this.MU(t),t.eS(this.d2()),t.eP(this.oJ()),this.XJ()>Number.EPSILON){this.EJ();const a=this.X7()&&0===this.d2()&&!this.A7;this.dJ()?this.w9(t):a?this.S9(t):this.v9(t,this.hJ())}t.eS(0),t.rS(0),n&&(t.eP(!1),this.b9(t,r,s,i)),h&&t.GP(h),this.f7=null}v9(i,e){let n=this.tN(),r=this.f7,h=this.HO().p5(),o=this.HO().x9(),a=null;for(let t=0,s=e.length;t<s;++t){const l=e[t];if(l!==a){const u=(a=l).aD();u.T5()&&u.M9(n,o,h)&&this.G9(l,u,i,r)}}}w9(e){const n=this.f7,r=this.T9(),h=Tr,o=_r,a=this.hJ();for(let s=0,i=a.length;s<i;){const l=a[s],u=l.aD();if(u.T5()&&u._9(r)){(!l.I9()||0<u.C9())&&o.push(l);const c=l.aD().L4();h.push(l);let t=s+1;for(;t<i;++t){const f=a[t],d=f.aD();if(d.T5()&&d._9(r)){if(d.L4()!==c)break;(f.I9()?(0<d.C9()&&o.push(f),h):o).push(f)}}if(1!==h.length||h[0].E9()){this.P9(e,h);for(let t=0,s=o.length;t<s;++t){const p=o[t],m=p.aD();m.R9(!0),this.G9(p,m,e,n),m.R9(!1)}}else{this.G9(l,u,e,n);for(let t=0,s=o.length;t<s;++t){const g=o[t];if(g!==l){const y=g.aD(),w=y.lD();w.G9(g,y,e,n)}}}s=t,S.Rh(h),S.Rh(o)}else++s}}P9(i,e){const n=this.f7;i.wP();for(let t=0,s=e.length;t<s;++t){const r=e[t],h=r.aD();h.A9(!0),this.F9(r,h,i)}i.SP();for(let t=0,s=e.length;t<s;++t){const o=e[t],a=o.aD();this.G9(o,a,i,n),a.A9(!1)}i.bP()}S9(t){let s=this.j7,i=this.z7,e=this.H7,n=this.tN(),r;i.set(s.OH(n.pl()),s.DH(n.ml()),s.OH(n.gl()),s.DH(n.yl())),this.V7&&i.equals(e)?r=this.U7:(r=this.WJ(),this.V7=!0,e.T(i)),this.v9(t,r),r!==this.U7&&S.Dh(this.U7,r)}G9(t,s,i,e){s.VJ()?this.O9(t,s,i,e):this.F9(t,s,i)}F9(t,s,i){const e=s.D9();i.Ww()!==e&&e.Yv(),t.sb(i)}O9(t,s,i,e){this.L9(t,s,i,e,null)&&this.MU(i)}L9(t,s,i,e,n){const r=s.C4().mF();return r.dA(i,e,{pA:t,mA:s.Y5(),devicePixelRatio:this.Xc.k9(),time:t.N9(),gA:this.Xc.B9()*this.XJ(),yA:this.jk(),NA:s.B4(),BA:r.iF()?null:this.W9(s),xA:n&&n.xA,MA:n&&n.MA,GA:n&&n.GA,TA:n&&n.TA}),i.eS(this.d2()),r.vE()}b9(t,s,i,e){const n=this.F7.kz(),r=this.Xc;0===n.length?(t.dP(i),t.Tw(),e&&0===this.qv&&this.Lz()?t.pP(s):(t.SetBlendMode(this.qv),t.Zv(this.h7),t.mP(s)),t.gP(s),r.k7(s)):this.mF().dA(t,i,{pA:this,mA:this.Y5(),devicePixelRatio:r.k9(),gA:r.B9()*this.XJ(),yA:this.jk(),NA:this.tN(),BA:null,eR:!0})}O5(){return this.d7}F5(t){this.d7!==t&&(this.d7=t,this.$H.j9(),this.jz(),this.Xc.mD())}fN(){return this.XJ()*this.Xc.fN()}Oj(){return this.XJ()*this.Xc.Oj()}XJ(){return(this.d7*this.$H.Bk()-1)*this.c7+1}$z(){if(this.v7){this.v7=!1;let t=this.Xc.KJ(),s=this.Xc.QJ(),i=(this.Vk()-t)*this.n7+t,e=(this.zk()-s)*this.r7+s,n=this.XJ(),r=this.Xc.iJ()/n,h=this.Xc.eJ()/n,o=i-r/2,a=e-h/2;this.Xc.NF()&&(o=Math.round(o),a=Math.round(a));const l=this.w7,u=(l.set(o,a,o+r,a+h),this.jk()),c=(0!==u&&(pr.T(l),pr.offset(-l.xl(),-l.Ml()),mr.fu(pr,u),mr.pu(pr),pr.offset(l.xl(),l.Ml()),l.T(pr)),this.Xv);this.Qz(c,this.h3),this.dJ()?this.U9(c,this.S7):this.S7.T(this.h3)}}U9(t,s){let i=this.Xc.wL(),e=i.xL(),n=i.GL(),[r,h]=this.iN(0,0,t),[o,a]=this.iN(e,0,t),[l,u]=this.iN(e,n,t),[c,f]=this.iN(0,n,t),d=Math.min(r,o,l,c),p=Math.min(h,a,u,f),m=Math.max(r,o,l,c),g=Math.max(h,a,u,f);isFinite(d)||(d=-1/0),isFinite(p)||(p=-1/0),isFinite(m)||(m=1/0),isFinite(g)||(g=1/0),s.set(d,p,m,g)}iN(t,s,i=0){return this.V9(t,s,i,this.Oj())}aN(t,s,i=0){return this.V9(t,s,i,this.fN()*this.EL())}V9(t,s,i,e){const n=this.Xc,r=n.Rv(),h=this.XJ(),o=n.iJ()/h,a=n.eJ()/h,l=vr,u=(Vn.set(l,0,0,o,a),t/=e,s=l[3]-s/e,this.e9(r)),c=this.qJ(r),f=Sr,d=S.Ug.zg(t,s,i,c,u,l,f);return d?[f[0],f[1]]:[NaN,NaN]}H9(t,s){const i=this.d7,e=this.c7,n=this.n7,r=this.r7,h=this.p7,o=(this.d7=1,this.c7=1,this.n7=1,this.r7=1,this.p7=0,this.jz(),this.iN(t,s));return this.d7=i,this.c7=e,this.n7=n,this.r7=r,this.p7=h,this.jz(),o}hN(t,s,i=0){return this.z9(t,s,i,this.Oj())}uN(t,s,i=0){return this.z9(t,s,i,this.fN()*this.EL())}z9(t,s,i,e){const n=this.Xc,r=n.Rv(),h=this.XJ(),o=n.iJ()/h,a=n.eJ()/h,l=vr,u=(Vn.set(l,0,0,o,a),this.e9(r)),c=this.qJ(r),f=Sr,d=S.Ug.Vg(t,s,i,c,u,l,f);return d?[f[0]*e,(l[3]-f[1])*e]:[NaN,NaN]}J9(t,s){return t*=this.fN()*this.EL(),0!==s&&(t*=this.tJ(s)),t}W9(t){const s=t.B4(),i=t.L4(),e=t.C9(),l=i+e,u=s.pl(),c=s.ml(),f=s.gl(),d=s.yl();if(this.dJ()){if(this.q9(u,c,i)||this.q9(f,c,i)||this.q9(f,d,i)||this.q9(u,d,i))return null;if(0<e&&(this.q9(u,c,l)||this.q9(f,c,l)||this.q9(f,d,l)||this.q9(u,d,l)))return null}else if(l>=this.sJ())return null;let[p,m]=this.uN(u,c,i),[g,y]=this.uN(f,d,i);if(0!==this.jk()||0<e||this.dJ()){const[w,S]=this.uN(f,c,i),[v,b]=this.uN(u,d,i);if(0<e){let[t,s]=this.uN(u,c,l),[i,e]=this.uN(f,c,l),[n,r]=this.uN(f,d,l),[h,o]=this.uN(u,d,l),a=Math.min(p,g,w,v,t,i,n,h);g=Math.max(p,g,w,v,t,i,n,h),p=a,a=Math.min(m,y,S,b,s,e,r,o),y=Math.max(m,y,S,b,s,e,r,o),m=a}else{let t=Math.min(p,g,w,v);g=Math.max(p,g,w,v),p=t,t=Math.min(m,y,S,b),y=Math.max(m,y,S,b),m=t}}return pr.set(p,m,g,y),pr}T9(){return this.G7&&(this.X9(),this.G7=!1),this.M7}X9(){const t=this.Xc.Rv(),s=this.e9(t),i=this.qJ(t);this.M7.Qg(i,s)}q9(t,s,i){return this.T9().iy(t,s,i)}Y9(){const t={d:this.Fz(),s:this.O5(),a:this.k5(),v:this.x5(),i:this._5(),html:this.E5(),bc:this.i7.toJSON(),t:this.z5(),sx:this.m7,sy:this.g7,hosp:this.y7,px:this.B5(),py:this.j5(),c:this.$v.toJSON(),sr:this.L5(),fx:this.F7.G2(),cg:this.C7};return t}Z9(t){this.QH=!!t.d,this.d7=t.s,this.p7=t.a,this.t7=!!t.v,this.s7=!t.hasOwnProperty("i")||t.i,this.YH=!!t.html,this.i7.Fa(t.bc),this.e7=!!t.t,t.hasOwnProperty("sx")&&(this.m7=t.sx),t.hasOwnProperty("sy")&&(this.g7=t.sy),t.hasOwnProperty("hosp")&&(this.y7=!!t.hosp),this.n7=t.px,this.r7=t.py,this.$v.Fa(t.c),this.q7(),this.c7=t.sr,S.Dh(this.C7,t.cg),S.Dh(this.I7,this.T7);let i=new Set(this.C7),e=0;for(let t=0,s=this.I7.length;t<s;++t)i.has(this.I7[t][2])||(this.I7[e]=this.I7[t],++e);S.Ph(this.I7,e),this.F7.T2(t.fx),this.B7=!0}K9(){this.wz(!1),this.pD(),this.jz(),this.i9()}$k(){return this.J7}Ik(t,s=!1){if(this.vH.includes(t))s&&this.vH.sort((t,s)=>{const i=t.aD().Q9(),e=s.aD().Q9();return i-e});else if(t.tq()){const i=[...t.pB()];i.push(t),i.sort((t,s)=>{const i=t.aD().Q9(),e=s.aD().Q9();return i-e});for(const e of i)if(e.IN())for(const n of e.CN())if(!i.includes(n)){const r=[...n.pB()];r.push(n),r.sort((t,s)=>{const i=t.aD().Q9(),e=s.aD().Q9();return i-e}),r&&r.length&&i.splice(i.length,0,...r)}for(const h of i)h.uk().WL()&&this.cz(h,!0)}else if(t.uk().WL()&&this.cz(t,!0),t.IN())for(const o of t.CN()){const a=[...o.pB()];if(a.push(o),a.sort((t,s)=>{const i=t.aD().Q9(),e=s.aD().Q9();return i-e}),a&&a.length)for(const l of a)l.uk().WL()&&this.cz(l,!0)}}}}{let l=function(t,s,i,e){return t[0]===Math.fround(s)&&t[1]===Math.fround(i)&&t[2]===Math.fround(e)},b=function(t,s){I!==t&&(t.a9(s),I=t)},x=(l,b,self.Os),e=self.C3Debugger,n=(x.tr(x.Rect),x.tr(x.Rect),x.tr(x.Rect)),M=x.tr(x.Lo),t=self.ys,u=t.Ts,a=[],G=[],T=[],_=[],I=null;x.sq=class extends x.Kn{constructor(t,s,i){super(),this.iq=t,this.Xc=t.ED(),this.rr=i[0],this.eq=i[1],this.nq=i[2],this.Dm=i[1],this.Lm=i[2],this.rq=!!i[3],this.hq=!!i[4],this.oq=i[5],this.aq=i[6],this.lq=i[7],this.uq=null,this.KH=i[8],this.Dg=s,this.m7=0,this.g7=0,this.d7=1,this.p7=0,this.cq=new Set,this.fq=new Set,this.pq=new Set,this.mq=[],this.gq=[],this.yq=new Map,this.wq=new Map,this.Sq=[],this.vq=!1,this.bq=u.create(),this.xq=u.create(),this.Mq=u.create(),this.Gq=[],this.Tq=[],this._q=new Map,this.Iq=new Map,this.Cq=-1;const n=this.Xc.wL();this.F7=x.tr(x.O7,this,i[11]),this.fF=x.tr(x.Ug.cR,n.D7(),{tR:(t,s)=>{const i=s.nF(),e=i.oP();t._E(),t.mP(e),t.gP(e),n.k7(e)},iR:t=>this.Ok().N7(t)}),this.B7=!0,this.Eq=!1,this.f7=null,this.Pq={},this.Rq=new Map,this.Aq=!0,this.Fq=new self.Fk(this),this.Oq=x.tr(x.Event.Rf);for(const e of i[9])this.Gq.push(x.qH.Z7(this,null,e));this.Dq();for(const r of this.Zk())r.K7();for(const h of i[10]){const o=this.Xc.Q7(h[1]);if(!o)throw new Error("missing nonworld object class");o.iz()||o.ez(h),this.Sq.push(h),this.sz(o)}}ir(){for(const t of this.Tq)t.ir();x.Rh(this.Tq),this.pq.clear(),this.uq=null,this.iq=null,this.Xc=null}ED(){return this.Xc}jc(){return this.rr}Az(){return this.KH}gF(){return this.Dg}Ok(){return this.F7}mF(){return this.Dz(),this.fF}Dz(){const t="low"===this.Xc.wL().m9();if(this.B7||this.Eq!==t||this.fF.iA()){const s=this.Ok().kz();this.fF.eA(s.map(t=>t.QM()),{nR:s.map(t=>t.gF()),hR:t,uR:!0}),this.B7=!1,this.Eq=t}}S6(){this.Ok().S6(),this.B7=!0}Lq(){let i=this.Tq[0].XJ();for(let t=1,s=this.Tq.length;t<s;++t){const e=this.Tq[t];0===e.B5()&&0===e.j5()||(i=Math.min(i,e.XJ()))}return i}kq(){return.5*this.Xc.iJ()/this.Lq()}Nq(){return.5*this.Xc.eJ()/this.Lq()}Vz(){return this.Bq()?-1/0:this.kq()}zz(){return this.Bq()?1/0:this.$p()-this.kq()}Jz(){return this.Bq()?-1/0:this.Nq()}qz(){return this.Bq()?1/0:this.hm()-this.Nq()}Uk(t){const s=this.Vz(),i=this.zz();this.m7!==(t=(t=i<t?i:t)<s?s:t)&&(this.m7=t,this.Wq(),this.Xc.mD())}Vk(){return this.m7}Hk(t){const s=this.Jz(),i=this.qz();this.g7!==(t=(t=i<t?i:t)<s?s:t)&&(this.g7=t,this.Wq(),this.Xc.mD())}zk(){return this.g7}Bq(){return this.rq}j9(){this.Uk(this.Vk()),this.Hk(this.zk());for(const t of this.Tq)t.Uz()&&(t.Uk(t.Vk()),t.Hk(t.zk()))}l5(t,s){this.oq===t&&this.aq===s||(this.oq=t,this.aq=s,this.jq()&&(this.Uq(),this.Wq(),this.Xc.mD()))}Zz(){return this.p5()?.5:this.oq}Kz(){return this.p5()?.5:this.aq}x9(){const t=this.Zz(),s=this.Kz();return t<0||1<t||s<0||1<s}f5(){this.hq&&(this.hq=!1,this.Uq(),this.Wq(),this.Xc.mD())}d5(){this.hq||(this.hq=!0,this.Uq(),this.Wq(),this.Xc.mD())}p5(){return this.hq}jq(){return!this.p5()}Vq(t){this.vq!==(t=!!t)&&(this.vq=t,this.Wq(),this.Xc.mD())}pJ(){return this.vq}Hq(t,s,i,e,n,r,h,o,a){l(this.bq,t,s,i)&&l(this.xq,e,n,r)&&l(this.Mq,h,o,a)||(u.set(this.bq,t,s,i),u.set(this.xq,e,n,r),u.set(this.Mq,h,o,a),this.zq())}zq(){this.Wq(),this.Xc.mD()}uJ(){return this.bq}t9(){return this.xq}s9(){return this.Mq}Bk(){return this.d7}Nk(t){this.d7!==t&&(this.d7=t,this.Wq(),this.j9(),this.Xc.mD())}Wk(t){t=x.ur(t),this.p7!==t&&(this.p7=t,this.Wq(),this.Xc.mD())}jk(){return this.p7}$p(){return this.Dm}im(t){!isFinite(t)||t<1||(this.Dm=t)}hm(){return this.Lm}Xp(t){!isFinite(t)||t<1||(this.Lm=t)}Jq(){return this.uq}Rz(){return this.Gq}*Zk(){for(const t of this.Gq)yield*t.b5()}Yk(){return this.Tq}qq(){return this.Tq.length}lD(t){return"number"==typeof t?this.cD(t):this._z(t.toString())}cD(t){return t=x.lr(Math.floor(t),0,this.Tq.length-1),this.Tq[t]}_z(t){return this._q.get(t.toLowerCase())||null}$q(t){return!!this._z(t)}Xq(t){return this.Iq.get(t)||null}Uq(){for(const t of this.Tq)t.i9()}Wq(){for(const t of this.Tq)t.jz()}s5(t,s,i){if(this.$q(t))throw new Error(`layer name '${t}' already in use`);if(!s&&i<2)throw new Error("invalid insert position");const e=2<=i?s:s.g5(),n=x.tr(x.qH,this,e,{name:t,sid:Math.floor(1e15*Math.random()),BH:!0});this.Yq(n,s,i),this.ED().mD(),this.Ez()}e5(t,s,i){if(!s&&i<2)throw new Error("invalid insert position");t===s&&i<2||(this.Zq(t),this.Yq(t,s,i),this.ED().mD(),this.Ez())}r5(t){if(this.Zq(t)){const s=this.Xc.qF();s.Ck(!0),t.ir(),s.Ck(!1),this.ED().mD(),this.Ez()}}o5(){const t=new Set;for(const s of this.Zk())s.Fz()&&!s.Oz()&&t.add(s);if(0!==t.size){const i=this.Xc.qF();i.Ck(!0);for(const e of t)this.Zq(e),e.ir();i.Ck(!1),this.ED().mD(),this.Ez()}}Yq(s,i,e){if(2<=e)if(i){if(i===s||i.GJ(s))throw new Error(`cannot move layer '${s.jc()}' to sub-layer of itself`);i.SJ(s,2===e),s.yJ(i)}else 2===e?this.Gq.push(s):this.Gq.unshift(s),s.yJ(null);else{const t=i.g5();if(t){if(i.GJ(s))throw new Error(`cannot move layer '${s.jc()}' to sub-layer of itself`);t.vJ(s,i,0===e),s.yJ(t)}else{let t=this.Gq.indexOf(i);if(-1===t)throw new Error("cannot find layer to insert by");0===e&&++t,this.Gq.splice(t,0,s),s.yJ(null)}}}Zq(t){const s=t.g5();if(s)return s.bJ(t),!0;if(1<this.Gq.length){const i=this.Gq.indexOf(t);if(-1===i)throw new Error("cannot find layer to remove");return this.Gq.splice(i,1),!0}return!1}Dq(){this.Tq=[...this.Zk()],this._q.clear(),this.Iq.clear();for(let t=0,s=this.Tq.length;t<s;++t){const i=this.Tq[t];i.Iz(t),this._q.set(i.jc().toLowerCase(),i),this.Iq.set(i.Az(),i)}}Kq(){let t=0;for(const s of this.Gq){for(const i of s.b5())i.Cz(t);s.E5()&&t++}}Qq(){return this.Gq.at(-1)._j()+1}async Ez(){this.Dq(),this.Kq(),this.Cq=this.Qq()}t$(){return this.Cq}s$(){this.Cq=-1}AJ(t){const s=[];for(const i of this.Gq){const e=i._j();if(e===t)s.push(i);else if(t<e)break}return s}_J(){return{scrollX:this.Vk(),scrollY:this.zk(),scale:this.Bk(),angle:this.jk(),vpX:this.Zz(),vpY:this.Kz()}}IJ(t){this.Uk(t.scrollX),this.Hk(t.scrollY),this.Nk(t.scale),this.Wk(t.angle),this.l5(t.vpX,t.vpY)}i$(){let t=this.Gq.filter(t=>t.MJ())[0];for(;t;){if(!t.z5())return M.Xo(t.Z5()),M.$o(1),M;if(t.UJ())return M.jo(0,0,0,0),M;t=t.S5().filter(t=>t.MJ())[0]}return M.jo(0,0,0,0),M}oz(){return this.Aq}e$(){return[...this.cq]}sz(t){if(t.IN())for(const s of t.r$().n$())this.cq.add(s);else this.cq.add(t)}h$(){return[...this.fq]}o$(t,s){if(t===this||!s)return Promise.resolve();t&&(x.Co(this.fq,t.fq),t.fq.clear());const i=[];for(const e of this.cq)this.fq.has(e)||(i.push(e.a$(s)),this.fq.add(e));return Promise.all(i)}async l$(t){if(t.Gz())throw new Error("cannot load textures for family");const s=this.Xc.Rv();if(s&&!s.SC()&&!this.fq.has(t)){this.fq.add(t);const i=t.a$(s);this.u$(i),await i,t.c$(),this.Xc.mD()}}u$(t){this.pq.add(t),t.then(()=>this.pq.delete(t)).catch(()=>this.pq.delete(t))}f$(){return Promise.all([...this.pq])}d$(t){if(t.Gz()||0<t.Gk())throw new Error("cannot unload textures");const s=this.Xc.Rv();s&&this.fq.has(t)&&(this.fq.delete(t),t.p$(s))}m$(t,s){if(t!==this&&s)for(const i of this.fq)i.uz()||t.cq.has(i)||(i.p$(),this.fq.delete(i))}g$(){this.fq.clear()}async y$(t){const s=this.Xc,i=this.iq,e=s.qF(),n=(this.lq&&(this.uq=e.w$(this.lq),this.uq.S$()),i.v$(this),this.Dm=this.eq,this.Lm=this.nq,this.m7=s.FF()/2,this.g7=s.DF()/2,this.j9(),this.Uq(),this.Wq(),this.Kq(),await this.Xc.wL().b$(this.Qq(),!0),this.x$(t),this.Xc.M$(!0),this.G$(),this.Aq||this.T$(),this._$(this.mq),this._$(this.gq),this.I$(),i.C$(),s.Ak(),this.Xc.M$(!1),this.Xc.E$());if(await Promise.all(n),x.Rh(n),!s.P$()){for(const r of this.mq)r.R$();for(const h of this.gq)h.A$(this.yq,this.wq);for(const[o,a]of Object.entries(this.Pq)){const l=this.Xc.d8(parseInt(o,10));l&&!l.Gz()&&l.az()&&x.Rh(a)}for(const u of this.mq)u.F$();for(const c of this.gq)c.F$()}x.Rh(this.mq),x.Rh(this.gq),this.yq.clear(),this.wq.clear(),await Promise.all([...this.cq].map(t=>t.O$(this.Xc.Rv()))),t&&(s.Rf().dispatchEvent(new x.Event("beforefirstlayoutstart")),await s.D$(new x.Event("beforeprojectstart"))),await this.L$(new x.Event("beforeanylayoutstart")),s.Rf().dispatchEvent(new x.Event("beforelayoutstart")),await this.D$(new x.Event("beforelayoutstart")),s.P$()||await s.i4(x.W$.B$.N$.k$,null,null),s.Rf().dispatchEvent(new x.Event("afterlayoutstart")),await this.D$(new x.Event("afterlayoutstart")),await this.L$(new x.Event("afteranylayoutstart")),t&&(s.Rf().dispatchEvent(new x.Event("afterfirstlayoutstart")),await s.D$(new x.Event("afterprojectstart"))),e.j$(i),await this.f$(),this.Aq=!1}x$(t){for(const s of this.Xc.Mz())if(!s.Gz()&&s.WL())for(const i of s.bk()){const e=i.aD(),n=e.lD(),r=x.lr(n.gF(),0,this.Tq.length-1),h=this.Tq[r];e.dD(h,!0),h.fz(i)}if(!t)for(const o of this.Tq)o.wz(!1)}G$(){for(const t of this.Tq)t.hz(this.mq),t.vz()}T$(){let s=!1;for(const[t,i]of Object.entries(this.Pq)){const e=this.Xc.d8(parseInt(t,10));if(e&&!e.Gz()&&e.az())for(const n of i){let t=null;if(!e.WL()||(t=n.hasOwnProperty("instJson")?this.Xq(n.instJson.w.l):this.Xq(n.w.l))){const r=this.Xc.lz(e,t,!1,0,0,!0);n.hasOwnProperty("instJson")?r.T2(n.instJson):r.T2(n),s=!0,this.gq.push(r),n.hasOwnProperty("instJson")&&(this.yq.set(r,n),this.wq.set(n.index,r))}}}for(const h of this.Tq)h.wz(!0),h.pD();s&&(this.Xc.Ak(),this.Xc.U$())}_$(s){for(const i of s)if(i.IN()){const e=i.aD(),t=i.V$();for(const n of i.mN().r$().H$())if(n!==i.mN()){const r=n.bk();if(r.length>t)i.z$(r[t]);else{let t;t=e?this.Xc.lz(n,e.lD(),!0,e.a2(),e.c2(),!0):this.Xc.lz(n,null,!0,0,0,!0),this.Xc.Ak(),n.J$(),i.z$(t),s.push(t)}}}}I$(){for(const t of this.Sq){const s=this.Xc.Q7(t[1]);s.IN()||this.Xc.lz(t,null,!0)}}q$(){let i=[],e=this.Sq,n=0;for(let t=0,s=e.length;t<s;++t){const r=e[t],h=this.Xc.Q7(r[1]);h.uz()?h.IN()&&h.r$().$$()||i.push(this.Xc.lz(r,null,!0)):(e[n]=r,++n)}x.Ph(e,n),this.Xc.Ak(),this._$(i)}xz(t,s,i,e,n,r,h){if(i)return i.xz(t,s,n,r,e,h);{const o=[];for(const a of this.Tq)o.push(a.xz(t,s,n,r,e,h));return o.flat()}}async X$(){const t=this.iq;this.Xc.P$()||(await this.L$(new x.Event("beforeanylayoutend")),await this.D$(new x.Event("beforelayoutend")),await this.Xc.i4(x.W$.B$.N$.Y$,null,null),await this.D$(new x.Event("afterlayoutend")),await this.L$(new x.Event("afteranylayoutend"))),t.Z$(!0),this.Xc.qF().K$(),this.Aq||this.Q$();for(const s of this.Tq)s.bz();for(const i of this.Xc.Mz())if(!(i.uz()||i.WL()||i.uk().NL()||i.Gz())){for(const e of i.bk())this.Xc.xN(e);this.Xc.Ak()}t.Z$(!1),t.WO()===this&&t.v$(null)}tX(t,s){const i=t.mN().Az().toString(),e=(this.Pq.hasOwnProperty(i)||(this.Pq[i]=[]),this.Pq[i]),n={index:s,instJson:t.G2(),sceneGraphJson:{children:[]}};e.push(n),this.Rq.set(t,n)}sX(t){const s=this.Rq.get(t);for(const i of t.iX()){const e=this.Rq.get(i);e&&s.sceneGraphJson.children.push({index:e.index,flags:x.nX.eX(i.aD())})}}Q$(){this.Rq.clear();let t=0;for(const s of this.Tq){s.EJ();for(const i of s.fD()){const e=i.mN();!e.uz()&&e.az()&&(this.tX(i,t),t++)}}for(const n of this.Tq)for(const r of n.fD()){const h=r.mN();!h.uz()&&h.az()&&this.sX(r)}this.Rq.clear()}rX(){this.Pq={},this.Aq=!0}oP(){return this.f7}UJ(){const t=this.Xc,s=t.Rv().QS();return"low"===t.wL().m9()||s&&t.p9()||this.F7.VJ()||s&&t.fJ()}hX(t){const s=this.Xc.wL();if(this.UJ()){t.dP(null),t.tP(0,0,0,0);const i={fb:this.Xc.LF(),Kb:t.gw()||this.Xc.p9()||this.F7.VJ(),d9:!!t.gw()&&this.Xc.p9()};"low"===s.m9()&&(i.width=s.r9(),i.height=s.h9()),this.f7=this.Xc.g9(i)}else this.f7=null}aX(t){this.Xc.lX(t)&&(t.eP(!1),t.dP(null),t.Tw(),t.pP(this.f7))}uX(t){this.UJ()&&(t.eP(!1),this.cX(t,this.f7))}fX(t){t.dP(this.f7),t.Clear(this.i$()),this.Xc.fJ()&&t.iP();const s=this.AJ(0);this.y9(t,this.f7,s,!0),t.gw()&&t.StartMeasuringRenderPassTime(0,1),this.uX(t),this.f7=null}dX(t,s){let i=null;this.Xc.lX(t)&&(i=this.f7),t.dP(i),t.tP(0,0,0,0),this.Xc.fJ()&&t.iP();const e=this.AJ(s);this.y9(t,i,e,!0),this.aX(t),t.JS(),this.Xc.wL().pX(s)}y9(t,e,s,n){const r=s.filter(t=>t.MJ());for(let s=0,i=r.length;s<i;){const h=r[s];if(h.mJ()&&!h.HJ()){a.push(h);for(let t=s+1;t<i;++t){const o=r[t];if(!o.mJ()||o.HJ())break;a.push(r[t])}if(2<=a.length||1===a.length&&a[0].xJ()){this.mX(t,e,a),s+=a.length,x.Rh(a);continue}x.Rh(a)}h.sb(t,e,n&&0===s),++s}}cX(t,s){const i=this.F7.kz(),e=this.Xc;0===i.length?(t.dP(null),t.Tw(),t.pP(s),t.gP(s),e.k7(s)):(n.set(0,0,e.iJ(),e.eJ()),this.mF().dA(t,null,{pA:this,mA:3,devicePixelRatio:this.Xc.k9(),gA:this.Xc.B9()*this.Bk(),yA:this.jk(),NA:n,BA:null,eR:!0}))}mX(e,n,t){t[0].z5()||(M.Xo(t[0].Z5()),M.$o(1),e.Clear(M)),this.Xc.wL(),e.eP(!0);const r=G,h=T,o=_;for(const a of t)a.EJ(),a.lJ(r);const s=t[0],i=s.l9(e);s.f9(e);for(let s=0,i=r.length;s<i;){const l=r[s],u=l.aD(),c=u.lD();if(u.T5()&&u._9(c.T9())){(!l.I9()||0<u.C9())&&o.push(l);const f=l.aD().L4();h.push(l);let t=s+1;for(;t<i;++t){const d=r[t],p=d.aD();if(p.T5()&&p._9(p.lD().T9())){if(p.L4()!==f)break;(d.I9()?(0<p.C9()&&o.push(d),h):o).push(d)}}if(1!==h.length||h[0].E9()){this.gX(e,n,h);for(let t=0,s=o.length;t<s;++t){const m=o[t],g=m.aD(),y=g.lD();g.R9(!0),b(y,e),y.G9(m,g,e,n),g.R9(!1)}}else{b(c,e),c.G9(l,u,e,n);for(let t=0,s=o.length;t<s;++t){const w=o[t];if(w!==l){const S=w.aD(),v=S.lD();b(v,e),v.G9(w,S,e,n)}}}s=t,x.Rh(h),x.Rh(o)}else++s}i&&e.GP(i),x.Rh(r),I=null}gX(i,e,n){i.wP();for(let t=0,s=n.length;t<s;++t){const r=n[t],h=r.aD(),o=h.lD();h.A9(!0),b(o,i),o.F9(r,h,i)}i.SP();for(let t=0,s=n.length;t<s;++t){const a=n[t],l=a.aD(),u=l.lD();b(u,i),u.G9(a,l,i,e),l.A9(!1)}i.bP()}Y9(){const t={sx:this.Vk(),sy:this.zk(),s:this.Bk(),a:this.jk(),w:this.$p(),h:this.hm(),ortho:this.p5(),vpX:this.Zz(),vpY:this.Kz(),fv:this.Aq,persist:this.Pq,fx:this.F7.G2(),layers:{},dynamicLayers:[]};for(const s of this.Tq)if(s.Fz()){const i=s.g5();t.dynamicLayers.push({sid:s.Az(),name:s.jc(),parentSid:i?i.Az():null,siblingIndex:s.Pz(),data:s.Y9()})}else t.layers[s.Az().toString()]=s.Y9();return t}Z9(t){this.m7=t.sx,this.g7=t.sy,this.d7=t.s,this.p7=t.a,this.Dm=t.w,this.Lm=t.h,this.hq=!!t.ortho,t.hasOwnProperty("vpX")&&(this.oq=t.vpX),t.hasOwnProperty("vpY")&&(this.aq=t.vpY),this.Aq=!!t.fv,this.Pq=t.persist,this.F7.T2(t.fx),this.B7=!0;for(const[s,i]of Object.entries(t.layers)){const e=parseInt(s,10),n=this.Xq(e);n&&n.Z9(i)}if(t.hasOwnProperty("dynamicLayers")){this.o5(),this.Xc.Ak();const r=new Map,h=t.dynamicLayers;for(let t=h.length-1;0<=t;--t){const o=h[t],a=o.sid,l=o.name,u=o.parentSid,c=o.siblingIndex,f=o.data;if(this.Dq(),!this.$q(l)&&!this.Xq(a)){let t,s;if(null===u)t=null,s=this.Gq;else{if(!(t=this.Xq(u)))continue;s=t.S5()}const d=x.tr(x.qH,this,t,{name:l,sid:a,BH:!0});s.push(d);let i=r.get(s);i||(i=[],r.set(s,i)),i.push({E4:d,siblingIndex:c}),d.Z9(f)}}for(const[p,m]of r){m.sort((t,s)=>t.siblingIndex-s.siblingIndex);for(const g of m){let t=g.E4,s=g.siblingIndex,i=p.indexOf(t);p.splice(i,1),p.splice(s,0,t)}}}this.Ez(),this.Uq(),this.Wq()}jO(){return this.Fq}VF(){return this.Oq}yX(t){t.layout=this.jO();const s=this.Xc,i=s.wX()&&!s.qF().Pk();i&&e.StartMeasuringScriptTime(),this.Oq.dispatchEvent(t),i&&e.AddScriptTime()}D$(t){return t.layout=this.jO(),this.Oq.Bf(t)}L$(t){return t.layout=this.jO(),this.Xc.D$(t)}SX(){this.vX(this.Gq)}vX(t,s=0){const i=t.slice(0);i.reverse();for(const e of i)console.log("\t".repeat(s)+"- "+e.jc()),this.vX(e.S5(),s+1)}}}{const Er=self.Os;Er.bX=class extends Er.Kn{#p8;#xX=[];#MX=new Map;#GX=new Map;#TX=null;#_X=[];#IX=null;#CX=0;#EX=null;constructor(t){super(),this.#p8=t}ir(){this.#p8=null,this.#TX=null,this.#IX=null,this.#EX=null,Er.Rh(this.#xX),this.#MX.clear(),this.#GX.clear(),Er.Rh(this.#_X)}tM(t){const s=Er.tr(Er.sq,this,this.#xX.length,t);this.#xX.push(s),this.#MX.set(s.jc().toLowerCase(),s),this.#GX.set(s.Az(),s)}ED(){return this.#p8}PX(t){this.#IX=t}RX(){if(this.#IX)return this.#IX;if(this.#xX.length)return this.#xX[0];throw new Error("no first layout")}AX(t){return this.#MX.get(t.toLowerCase())||null}FX(t){return this.#GX.get(t)||null}OX(t){return t=Er.lr(Math.floor(t),0,this.#xX.length-1),this.#xX[t]}HO(t){return"number"==typeof t?this.OX(t):this.AX(t.toString())}JO(){return this.#xX}v$(t){this.#TX=t}WO(){return this.#TX}DX(t){if(this.#_X.includes(t))throw new Error("layout already running");this.#_X.push(t)}LX(t){const s=this.#_X.indexOf(t);if(-1===s)throw new Error("layout not running");this.#_X.splice(s,1)}*kX(){this.#TX&&(yield this.#TX),this.#_X.length&&(yield*this.#_X)}NX(t){return this.#TX===t||this.#_X.includes(t)}Z$(t){if(t)this.#CX++;else{if(this.#CX<=0)throw new Error("already unset");this.#CX--}}Rk(){return 0<this.#CX}XO(t){this.#EX=t}C$(){this.#EX=null}$O(){return!!this.#EX}BX(){return this.#EX}WX(){const t=this.WO();t&&t.Uq()}jX(){const t=this.WO();t&&t.Wq()}}}{const v=self.Os,Pr=new RegExp("<(.+?)>","g");v.UX=class extends v.Kn{constructor(t){super(),this.Xc=t,this.VX=v.tr(v.HX),this.zX=null,this.JX=[],this.qX=new Map,this.$X=new Map,this.XX=new Map,this.YX=[],this.ZX=[],this.KX=[],this.QX=!1,this.tY=!1,this.sY=!1,this.iY=()=>this.eY(),this.nY=()=>this.rY(),this.hY=()=>this.aY(),this.lY=()=>this.uY(),this.cY=t=>this.fY(t.f6),this.dY=t=>this.pY(),this.mY=t=>this.gY(),this.yY=t=>this.wY(),this.SY=[],this.vY=0}ir(){this.bY(),this.iY=null,this.nY=null,this.hY=null,this.lY=null,this.cY=null,this.mY=null;for(const t of this.JX)t.oW(),t.ir();v.Rh(this.JX),this.JX=null,this.VX.ir(),this.VX=null,v.Rh(this.YX),this.YX=null,v.Rh(this.ZX),this.ZX=null,v.Rh(this.KX),this.KX=null,this.qX.clear(),this.qX=null,this.$X.clear(),this.$X=null,this.XX.clear(),this.XX=null,v.Rh(this.SY),this.SY=null,this.Xc=null}xY(){const t=this.Xc.Rf();t.addEventListener("pretick",this.iY),t.addEventListener("tick2",this.nY),t.addEventListener("beforelayoutchange",this.hY),t.addEventListener("layoutchange",this.lY),t.addEventListener("instancedestroy",this.cY),t.addEventListener("beforeload",this.dY),t.addEventListener("afterload",this.mY),t.addEventListener("afterlayoutstart",this.yY)}bY(){const t=this.Xc.Rf();t.removeEventListener("pretick",this.iY),t.removeEventListener("tick2",this.nY),t.removeEventListener("beforelayoutchange",this.hY),t.removeEventListener("layoutchange",this.lY),t.removeEventListener("instancedestroy",this.cY),t.removeEventListener("beforeload",this.dY),t.removeEventListener("afterload",this.mY),t.removeEventListener("afterlayoutstart",this.yY)}tM(t){this.VX.tc(t);const s=v.GY.MY(t,this);this.tc(s),this.TY(s),this.XX.set(s.jc(),0)}_Y(t){const s=this.IY(),i=t.RN(),e=s.Ks(i),n=v.GY._Y(i+":"+this.XX.get(i),e,this);return this.CY(i),this.tc(n),n}CY(t){this.XX.set(t,this.XX.get(t)+1)}EY(){for(const t of this.JX)if(!t.PY()){const s=t.RN();this.CY(s)}}RY(){for(const t of this.XX.keys())this.XX.set(t,0)}tc(t){this.JX.push(t),this.qX.set(t.jc().toLowerCase(),t)}u0(t){t.AY(),t.PY()||(v.kh(this.JX,t),v.kh(this.YX,t),v.kh(this.ZX,t),v.kh(this.KX,t),this.qX.delete(t.jc().toLowerCase()),this.FY(t),t.rW())||t.ir()}t4(t){this.Xc.t4(t,this.zX,null)}ED(){return this.Xc}IY(){return this.VX}OY(t){this.zX=t}DY(){return this.zX}*LY(){for(const t of this.JX)yield t}*kY(){for(const t of this.ZX)yield t}NY(t,s){this.$X.has(t)||this.$X.set(t,new Set),this.$X.get(t).add(s)}TY(t){for(const s of t.BY())this.NY(s,t)}FY(t){for(const[s,i]of this.$X.entries())i.has(t)&&(i.delete(t),0===i.size)&&this.$X.delete(s)}WY(t){if(this.$X.has(t))return this.$X.get(t)}jY(t,s){if(s)for(const i of this.JX){const e=s.every(t=>i.UY(t.f6,t.trackId));if(e&&i.jc().includes(t.jc()))return i}}VY(t){return this.qX.get(t.toLowerCase())||null}HY(t){for(const s of this.YX)if(s.jc()===t)return s;for(const i of this.ZX)if(i.jc()===t)return i;return null}*zY(i){if(Pr.test(i)){Pr.lastIndex=0;let t,s=new Set;do{if(t=Pr.exec(i)){const e=t[1].split(",");for(const n of e)s.add(n)}}while(t);for(const r of s.values()){const h=this.VY(r);h&&(yield h)}s.clear()}else{const t=this.VY(i);t&&(yield t)}}*JY(t){for(const s of this.JX)s.lW(t)&&(yield s)}qY(t){this.YX.includes(t)||this.YX.push(t),this.$Y()}XY(t){v.kh(this.ZX,t),this.YY()}ZY(t){this.ZX.includes(t)?(t.KY(!0),t.QY(!1),t.tZ(!1)):(t.KY(!1),t.QY(!0),t.tZ(!1),this.YX.includes(t)||this.YX.push(t)),this.$Y()}sZ(t){t.KY(!1),t.QY(!1),t.iZ(),v.kh(this.YX,t),this.YY()}eZ(t){t.KY(!1),t.QY(!1),this.ZX.includes(t)&&(t.tZ(!0),this.KX.push(t),v.kh(this.ZX,t)),this.YX.includes(t)&&t.tZ(!0)}nZ(t){t.KY(!1),t.QY(!1),t.tZ(!1),t.yW(1),v.kh(this.ZX,t)}rZ(t){this.eZ(t),t.iZ()}eY(){if(!this.ED().P$()&&this.QX&&!this.tY){for(this.sY=!0;this.YX.length;){const t=this.YX.pop();(t.hZ()?(t.oZ(),this.KX):(t.aZ(),this.ZX)).push(t),0!==t.lZ()&&(this.vY=1)}const s=this.Xc.uZ(),i=this.Xc.cZ(),e=this.Xc.bO();for(let t=this.ZX.length-1;0<=t;t--){const n=this.ZX[t];n&&n.fZ(s,e,i)}this.sY=!1,0!==this.vY&&this.ED().mD()}}rY(){if(!this.ED().P$()&&this.QX&&!this.tY){let i;for(let t=0,s=this.KX.length;t<s;t++){const e=this.KX[t];i=i||new Set,e.AY(),this.dZ(e),i.add(e)}if(i){v.Wh(this.KX,i);for(let t=this.vY=0,s=this.ZX.length;t<s;t++)if(0!==this.ZX[t].lZ()){this.vY=1;break}}this.YY()}}dZ(t){t.rW()||t.pZ()&&t.mZ()&&t.gZ()&&t.yZ()}$Y(){this.QX||(this.QX=!0)}YY(){this.KX.length||this.ZX.length||this.YX.length||this.sY||(this.QX=!1)}aY(){for(this.tY=!0;this.YX.length;)this.sZ(this.YX.pop());const t=new Set;for(const s of this.ZX){const i=s.aY();i&&(s.AY(),t.add(s))}v.Wh(this.ZX,t),t.clear();for(const e of this.KX){const n=e.aY();n&&(e.AY(),t.add(e))}v.Wh(this.KX,t),this.YY();for(const r of this.JX)r.wZ()}uY(){this.tY=!1}fY(t){const s=t.mN(),i=this.WY(s);if(i)if(this.Xc.P$())this.SY.push(t);else for(const e of i)e.PY()||(e.rW()?this.u0(e):e.pZ()||(this.dZ(e),this.u0(e)))}pY(){for(const t of this.YX.map(t=>t))this.dZ(t),this.u0(t);for(const s of this.ZX.map(t=>t))this.dZ(s),this.u0(s)}gY(){for(const t of this.SY)this.fY(t);v.Rh(this.SY);for(const s of this.JX)s.gY()}wY(){const t=this.Xc.VO(),s=t.WO();if(s)for(const i of this.JX){const e=i.SZ();e&&s.jc()===e&&this.ZY(i)}}Y9(){return{timelinesJson:this.vZ(),scheduledTimelinesJson:this.bZ(),playingTimelinesJson:this.xZ(),markedForRemovalTimelinesJson:this.MZ(),hasRuntimeListeners:this.QX,changingLayout:this.tY,isTickingTimelines:this.sY}}Z9(t){t&&(this.RY(),this.GZ(t.timelinesJson),this.TZ(t.scheduledTimelinesJson),this._Z(t.playingTimelinesJson),this.IZ(t.markedForRemovalTimelinesJson),this.QX=!t.hasRuntimeListeners,this.tY=!!t.changingLayout,this.sY=!!t.isTickingTimelines,this.EY(),this.$Y(),this.YY())}vZ(){return this.JX.map(t=>t.Y9())}GZ(t){for(const s of t){let t=this.VY(s.name);if(t)t.Z9(s);else{const i=this.CZ(s);if(!i)continue;const e=this.VY(i);(t=this._Y(e)).Z9(s)}t.EZ()||this.u0(t)}}CZ(t){const s=t.name,i=s.split(":");return i&&2===i.length?i[0]:null}bZ(){return this.PZ(this.YX)}TZ(t){this.RZ(t,this.YX)}xZ(){return this.PZ(this.ZX)}_Z(t){this.RZ(t,this.ZX)}MZ(){return this.PZ(this.KX)}IZ(t){this.RZ(t,this.KX)}AZ(t,s){if(s)for(const i of s)if(i===t.jc())return!0;return!1}PZ(t){return t.map(t=>t.jc())}RZ(t,s){const i=new Set;for(const e of s)this.AZ(e,t)||i.add(e);if(v.Wh(s,i),t)for(const n of t){const r=this.VY(n);if(r){const h=s.find((s=>t=>t.jc()===s)(n));h||s.push(r)}}}}}{const Rr=self.Os,Ar=[0,0],Fr=[0,0],Or=[0,0],Dr=[0,0,0,0,0],Lr=new Array(4),kr=[{x:0,y:0,t:0,It:0},{x:0,y:0,t:0,It:0},{x:0,y:0,t:0,It:0}],Nr={x:0,y:0,t:0,It:0};Rr.FZ=class{constructor(t,s){this.OZ=!1,this.DZ=t,this.LZ=[];let i=null;if(i=s?this.DZ.kZ(s):Rr.first(this.DZ.NZ())){const e=i.DW("offsetX"),n=i.DW("offsetY");if(e&&n){this.BZ=e,this.WZ=n;const r=e.jZ(),h=n.jZ();for(let t=1,s=Math.min(r.length,h.length);t<s;++t){const o=r[t],a=(o.UZ(),o.VZ()),l=h[t],u=(l.UZ(),l.VZ());a&&"cubic-bezier"===a.HZ()&&u&&"cubic-bezier"===u.HZ()?this.LZ.push(Rr.tr(Rr.zZ,a,u,o,l,this.LZ.length)):(a&&"line"===a.HZ()&&u&&u.HZ(),this.LZ.push(Rr.tr(Rr.JZ,o,l,this.LZ.length)))}this.OZ=!0}}}ir(){for(const t of this.LZ)t.ir();Rr.Rh(this.LZ),this.LZ=null,this.DZ=null,this.BZ=null,this.WZ=null}qZ(){return this.OZ}$Z(){return this.LZ}XZ(t){const s="relative"===this.BZ.YZ()?t.a2():0,i="relative"===this.WZ.YZ()?t.c2():0;for(const e of this.LZ)e.XZ(s,i)}Vg(s,i,t){let e=NaN,n=this.LZ.length;for(let t=0;t<n;t++){const r=this.LZ[t];if("cubic-bezier"===r.iG()){const h=r.Vg(s,i);(isNaN(e)||h[3]<e)&&(e=h[3],Or[0]=h[2],Or[1]=r.gF())}}return Or}ZZ(s,i,t){const e=t.tRange;Rr.le(e[0])||(e[0]=0),Rr.le(e[1])||(e[1]=1);let n=NaN,r=this.LZ.length;for(let t=0;t<r;t++){const h=this.LZ[t];if("cubic-bezier"===h.iG()){const o=h.KZ(s,i,e);(isNaN(n)||o[3]<n)&&(n=o[3],Or[0]=o[2],Or[1]=h.gF())}}return Or}QZ(t,s){return this.LZ[s].QZ(t)}tK(t,s){return this.LZ[s].tK(t)}},Rr.zZ=class{constructor(t,s,i,e,n){this.Dg=n;const r=t.sK("cubic-bezier"),h=i.sK("cubic-bezier"),o=s.sK("cubic-bezier"),a=e.sK("cubic-bezier");this.iK=t.eK(),this.nK=s.eK(),this.rK=t.eK()+r.hK(),this.oK=s.eK()+o.hK(),this.aK=i.eK()+h.lK(),this.uK=e.eK()+a.lK(),this.cK=i.eK(),this.fK=e.eK(),this.dK=0,this.pK=0,this.mK=0,this.gK=0,this.yK=0,this.wK=0,this.SK=0,this.vK=0,this.bK=0,this.xK=0,this.MK=0,this.GK=0,this.TK=0,this._K=0,this.IK=0,this.CK=0,this.EK=0,this.PK=0,this.RK=0,this.AK=0,this.FK=NaN,this.OZ=!1,this.DK=100,this.LK=new Array(this.DK+1),this.LK[0]=0,this.kK=0,this.NK=[],this.BK=[];for(let t=0;t<100;t++)this.BK.push({x:0,y:0,t:0,It:0});this.WK()}ir(){Rr.Rh(this.LK),this.LK=null,Rr.Rh(this.NK),this.NK=null,Rr.Rh(this.BK),this.BK=null}iG(){return"cubic-bezier"}gF(){return this.Dg}jK(){return Math.floor(this.kK/25)}UK(){return 1/this.jK()}XZ(t,s){this.VK=t,this.HK=s,this.LK=new Array(this.DK+1),this.LK[0]=0,this.WK(),this.dK=this.iK+this.VK,this.pK=this.nK+this.HK,this.mK=this.rK+this.VK,this.gK=this.oK+this.HK,this.yK=this.aK+this.VK,this.wK=this.uK+this.HK,this.SK=this.cK+this.VK,this.vK=this.fK+this.HK,this.bK=3*(this.mK-this.dK),this.xK=3*(this.gK-this.pK),this.MK=3*(this.yK-this.mK),this.GK=3*(this.wK-this.gK),this.TK=3*(this.SK-this.yK),this._K=3*(this.vK-this.wK),this.IK=3*(this.mK-this.dK),this.CK=3*(this.dK+this.yK-2*this.mK),this.EK=this.SK-this.dK+3*(this.mK-this.yK),this.PK=3*(this.gK-this.pK),this.RK=3*(this.pK+this.wK-2*this.gK),this.AK=this.vK-this.pK+3*(this.gK-this.wK)}Map(t){if(!this.OZ)return NaN;const s=this.zK(t);return Fr[0]=this.JK(s),Fr[1]=this.qK(s),Fr}Vg(t,s){const i=this.$K(100),e=this.XK(t,s,i),n=this.YK(t,s,i,e);return Dr[0]=n.x,Dr[1]=n.y,Dr[2]=n.t,Dr[3]=n.It,Dr}KZ(t,s,i){const e=this.$K(100),n=this.ZK(t,s,e,i),r=this.YK(t,s,e,n);return Dr[0]=r.x,Dr[1]=r.y,Dr[2]=r.t,Dr[3]=r.It,Dr}QZ(t){const s=1-t,i=s*s,e=2*s*t,n=t*t,r=i*this.bK+e*this.MK+n*this.TK,h=i*this.xK+e*this.GK+n*this._K,o=Math.hypot(r,h);return Ar[0]=r/o,Ar[1]=h/o,Ar}tK(t){const s=1-t,i=s*s,e=2*s*t,n=t*t,r=i*this.bK+e*this.MK+n*this.TK,h=i*this.xK+e*this.GK+n*this._K;return Math.atan2(h,r)}zK(n){if(this.OZ){let t=n*this.LK[this.DK],s=0,i=this.DK,e=0;for(;s<i;)e=s+((i-s)/2|0),this.LK[e]<t?s=e+1:i=e;this.LK[e]>t&&e--;const r=this.LK[e];return r===t?e/this.DK:(e+(t-r)/(this.LK[e+1]-r))/this.DK}}JK(t){return this.OZ?self.ec.vc("cubicbezier")(t,this.iK+this.VK,this.rK+this.VK,this.aK+this.VK,this.cK+this.VK):NaN}qK(t){return this.OZ?self.ec.vc("cubicbezier")(t,this.nK+this.HK,this.oK+this.HK,this.uK+this.HK,this.fK+this.HK):NaN}$K(s){if(!(this.NK.length>=(s=s||100))){this.NK=new Array(s),s++;for(let t=0;t<s-1;t++){const i=t/(s-1),e=i**2,n=i**3,r=this.IK*i,h=this.CK*e,o=this.EK*n,a=this.PK*i,l=this.RK*e,u=this.AK*n,c=this.dK+r+h+o,f=this.pK+a+l+u;this.BK[t].x=c,this.BK[t].y=f,this.BK[t].t=i,this.BK[t].It=0,this.NK[t]=this.BK[t]}}return this.NK}XK(s,i,e,t=0,n=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.FK))for(let t=0;t<100;t++){const h=e[t],o=h.x-s,a=h.y-i;h.It=o*o+a*a,h.It<n&&(n=h.It,r=t)}else{for(let t=this.FK;t<this.FK+5&&!(t>=e.length);t++){const l=e[t],u=l.x-s,c=l.y-i;l.It=u*u+c*c,l.It<n&&(n=l.It,r=t)}for(let t=this.FK;t>this.FK-5&&!(t<0);t--){const f=e[t],d=f.x-s,p=f.y-i;f.It=d*d+p*p,f.It<n&&(n=f.It,r=t)}}return this.FK=r}ZK(s,i,e,n,r=Number.MAX_SAFE_INTEGER){let h=0;if(isNaN(this.FK))for(let t=0;t<100;t++){const o=e[t],a=o.x-s,l=o.y-i;o.It=a*a+l*l,o.t>=n[0]&&o.t<=n[1]&&o.It<r&&(r=o.It,h=t)}else{for(let t=this.FK;t<this.FK+5&&!(t>=e.length);t++){const u=e[t],c=u.x-s,f=u.y-i;u.It=c*c+f*f,u.t>=n[0]&&u.t<=n[1]&&u.It<r&&(r=u.It,h=t)}for(let t=this.FK;t>this.FK-5&&!(t<0);t--){const d=e[t],p=d.x-s,m=d.y-i;d.It=p*p+m*m,d.t>=n[0]&&d.t<=n[1]&&d.It<r&&(r=d.It,h=t)}}return this.FK=h}YK(h,o,a,l){let u=a[l],t=1,c=Number.MAX_SAFE_INTEGER;t:do{let t=a.length,s=0===l?0:l-1,i=l===t-1?t-1:l+1,e=a[s].t,n=a[i].t,r=(n-e)/4;if(r<.001)break;Lr[0]=a[s];for(let t=1;t<=2;t++){const f=e+t*r,d=f**2,p=f**3,m=this.IK*f,g=this.CK*d,y=this.EK*p,w=this.PK*f,S=this.RK*d,v=this.AK*p,b=this.dK+m+g+y,x=this.pK+w+S+v,M=b-h,G=x-o,T=M*M+G*G;if(T<c){c=T,l=t,Nr.x=b,Nr.y=x,Nr.t=f,Nr.It=T,u=Nr;break t}const _=kr[t-1];_.x=b,_.y=x,_.t=f,_.It=T,Lr[t]=_}Lr[3]=a[i],a=Lr}while(t++<20);return u}WK(){this.OZ=!0;let s=this.JK(0),i=this.qK(0),e=0;for(let t=1;t<=this.DK;t++){const n=this.JK(.01*t),r=this.qK(.01*t),h=s-n,o=i-r;e+=Math.hypot(h,o),this.LK[t]=e,s=n,i=r}this.kK=e}},Rr.JZ=class{constructor(t,s,i){this.Dg=i,this.KK=t.eK(),this.QK=s.eK(),this.VK=0,this.HK=0}ir(){}iG(){return"line"}gF(){return this.Dg}XZ(t,s){this.VK=t,this.HK=s}a2(){return this.KK+this.VK}c2(){return this.QK+this.HK}}}{const b=self.Os;b.GY=class extends b.Kn{constructor(t,s,i){super(),this.Xc=i.ED(),this.tQ=i,this.sQ=s,this.rr=t,this.iQ=[],this.eQ=0,this.nQ=null,this.rQ=0,this.hQ(),this.oQ=null,this.aQ=null,this.lQ=0,this.uQ=0,this.cQ=1,this.fQ=0,this.dQ=1,this.pQ=!1,this.mQ=!1,this.gQ=!1,this.yQ=!0,this.wQ=!1,this.SQ=!1,this.vQ=-1,this.bQ=!1,this.xQ=!1,this.MQ=!1,this.GQ=!1,this.TQ=NaN,this._Q=[""],this.IQ="",this.CQ=!1,this.vY=0,this.EQ=0,this.PQ=null}static MY(t,s){const i=s.IY(),e=i.RQ(),n=i.Ks(t[e]),r=b.tr(b.GY,t[e],n,s);return r.AQ(!0),r}static _Y(t,s,i){return b.tr(b.GY,t,s,i)}ir(){if(!this.rW()){const t=this.Xc.Rf();this.tQ.sZ(this),this.tQ.rZ(this);for(const s of this.iQ)s.ir();b.Rh(this.iQ),this.iQ=null,this.Xc=null,this.tQ=null,this.sQ=null,this.wQ=!0,this.oQ=null,this.aQ=null,this.FQ(t)}}FQ(t){const s=b.tr(b.Event,"timelinestatereleased");s.OQ=this,t.dispatchEvent(s)}iG(){return 0}hQ(){for(const t of this.sQ.LQ().DQ())this.eQ=this.iQ.push(b.kQ.tM(this,t))}NQ(){return this.tQ}ED(){return this.Xc}NZ(){return this.iQ}BQ(e,n,r,h){if(this.EQ){let i;for(let s=0;s<this.iQ.length;s++){let t=this.iQ[s];if(e===t.EW()){const o=t.DW(r);o&&n.constructor===o.WQ().constructor&&o.YZ()===h.YZ()&&(i=i||[]).push(o)}}return i}}EZ(){return!!this.iQ.length}kZ(t){for(const s of this.iQ)if(b.pn(s.FW(),t))return s;return null}jQ(t){for(const s of this.iQ)if(!s.UQ()&&b.pn(s.jc(),t))return s;return null}G8(t){this.rr=t}jc(){return this.rr}VQ(){return this.sQ}RN(){return this.sQ.jc()}fW(){return this.sQ.fW()}cW(t){this.sQ.cW(t)}HQ(){return this.sQ.HQ()}zQ(t){this.sQ.zQ(t)}JQ(){return this.sQ.JQ()}qQ(t){this.sQ.qQ(t)}YZ(){return this.sQ.YZ()}$Q(t){this.sQ.YZ(t)}IW(t){for(const s of this.NZ())s.IW(t)}pW(){return this.sQ.pW()}dW(t){return this.sQ.dW(t)}gW(){return this.sQ.gW()}mW(t){return this.sQ.mW(t)}T6(){return this.sQ.T6()}XQ(t){return this.sQ.XQ(t)}yW(t){return this.cQ=t}wW(){return this.cQ}SZ(){return this.sQ.SZ()}YQ(){return this.sQ.YQ()}ZQ(){return this.sQ.ZQ()}KQ(){return this.fQ}QQ(){return!this.IsPlaying()||0<this.cQ}vW(){return this.oQ||(this.oQ=new Promise(t=>{this.aQ=t})),this.oQ}iZ(){this.oQ&&(this.aQ(),this.oQ=null,this.aQ=null)}ttt(t){this._Q=b.GY.stt(t),this.CQ=!0}SW(){return this._Q}itt(){return this.CQ&&(this.IQ=this._Q.join(" ")),this.CQ=!1,this.IQ}lW(t){if(!this._Q)return!1;if(!this._Q.length)return!1;const s=b.GY.stt(t);return!!s&&!!s.length&&s.every(b.GY.ett,this)}ntt(){b.W$.Timeline&&this.constructor===b.GY&&(b.W$.Timeline.N$.PushTriggerTimeline(this),this.tQ.t4(b.W$.Timeline.N$.OnTimelineStarted),this.tQ.t4(b.W$.Timeline.N$.OnTimelineStartedByName),this.tQ.t4(b.W$.Timeline.N$.OnTimelineStartedByTags),this.tQ.t4(b.W$.Timeline.N$.OnAnyTimelineStarted),b.W$.Timeline.N$.PopTriggerTimeline())}htt(){this.vQ=this.Xc.ott()}yZ(){this.MQ||(this.MQ=!0,b.W$.Timeline&&this.constructor===b.GY&&(b.W$.Timeline.N$.PushTriggerTimeline(this),this.tQ.t4(b.W$.Timeline.N$.OnTimelineFinished),this.tQ.t4(b.W$.Timeline.N$.OnTimelineFinishedByName),this.tQ.t4(b.W$.Timeline.N$.OnTimelineFinishedByTags),this.tQ.t4(b.W$.Timeline.N$.OnAnyTimelineFinished),b.W$.Timeline.N$.PopTriggerTimeline()))}KY(t){this.pQ=t}att(){return this.vQ===this.Xc.ott()}IsPlaying(t=!1){return!!this.att()||!(!this.ltt()||t)||this.pQ}utt(){return this.IsPlaying(!0)}xW(){return this.ctt()}ctt(){return!(this.rW()||this.ltt()||this.utt()||this.mZ())}QY(t){this.mQ=t}ltt(){return this.mQ}ftt(t){this.yQ=t;const s=this.KP();(s<=0||s>=this.fW())&&(this.yQ=!0)}mZ(){return this.yQ}rW(){return this.wQ}tZ(t){this.SQ=t}hZ(){return this.SQ}dtt(t){this.bQ=t}ptt(){return this.bQ}AQ(t){this.xQ=!!t}PY(){return this.xQ}gZ(){return this.gQ}KP(){return this.lQ}uW(t){const s=this.KP();this.mtt(t),this.ftt(!1),this.mZ()||this.dtt(!0),!this.utt()&&!this.ltt()&&this.gQ||(this.utt()||this.ltt()||this.gQ?this.utt()?this.oW():this.ltt()&&(this.tQ.sZ(this),this.gtt()):this.gtt()),this.ytt(),this.wtt(this.KP(),!1,!0,!0,s),this.Stt(),this.vY&&this.ED().mD(),this.vtt()}mtt(t){(t=b.le(t)?t:this.fW())<0?this.lQ=0:t>=this.fW()?this.lQ=this.fW():this.lQ=t}btt(t){(t=b.le(t)?t:this.fW())<0?this.lQ=0:t>=this.fW()?this.lQ=this.fW():this.lQ=t;for(const s of this.iQ)s.xtt()}vtt(){b.W$.Timeline&&this.constructor===b.GY&&(b.W$.Timeline.N$.PushTriggerTimeline(this),this.tQ.t4(b.W$.Timeline.N$.OnTimeSet),this.tQ.t4(b.W$.Timeline.N$.OnTimeSetByName),this.tQ.t4(b.W$.Timeline.N$.OnTimeSetByTags),b.W$.Timeline.N$.PopTriggerTimeline())}Mtt(){if(!this.pW())if(this.gW()&&1===this.fQ){if(this.QQ()){if(this.KP()>=this.fW())return!1}else if(this.KP()<=0)return!1}else if(!this.pW()&&!this.gW())if(this.QQ()){if(this.KP()>=this.fW())return!1}else if(this.KP()<=0)return!1;return!0}aW(){this.rW()||this.Mtt()&&this.Play(!0)}Play(t=!1){return!this.rW()&&!this.ltt()&&(this.utt()&&this.att()?this.Gtt():!this.utt()&&!!(this.mZ()||t||this.ptt())&&this.Ttt())}Gtt(){return this.dtt(!1),this.tQ.XY(this),this.tQ.ZY(this),this.vW(),!0}Ttt(){return this.dtt(!1),this.tQ.ZY(this),this.vW(),!0}oW(t=!1){this.rW()||(this.ftt(t),this.tQ.eZ(this),this.mZ()&&this.iZ())}Kf(t=!0,s=!1){if(!this.rW()){if(!this.utt()&&this.ltt())return this.tQ.sZ(this);if(!this.mZ()){this.oW(!0),this.QQ()?this.mtt(0):this.mtt(this.fW());const i=this.KP();this.ytt(),s?this._tt(i):this.wtt(i,!1,!1,!0),t&&this.vtt(),this.Stt(),this.vY&&t&&this.ED().mD()}}}Itt(){this.Kf(!1,!0)}_tt(t){this.wtt(t,!1,!1,!0,NaN,!1,!0)}aY(){if(!this.rW()){if(!this.ED().P$()&&this.Ctt())return!1;this.tQ.nZ(this),this.ED().P$()||this.Itt()}return!0}gtt(){this.aZ(!0)}oZ(){this.aZ(!1,!0),this.KY(!1),this.QY(!1)}aZ(t=!1,s=!1){if(!this.hZ()||s){if(t){this.MQ=!1,this.gQ=!0,this.GQ=!0,this.ytt();for(const i of this.iQ)i.aZ()}else if(this.KY(!0),this.QY(!1),this.ntt(),this.mZ()){this.vQ=-1,0!==this.fQ&&(this.cQ=Math.abs(this.cQ)),this.fQ=0,this.dQ=1,this.yQ=!1,this.MQ=!1,this.gQ=!0,this.GQ=!0,this.QQ()?this.mtt(0):this.mtt(this.fW()),this.ytt();for(const e of this.iQ)e.aZ()}else{this.GQ=!0,this.MQ=!1,this.ytt();for(const n of this.iQ)n.Ett()}this.Stt()}}lZ(){return this.vY}ytt(){this.EQ=0;for(const t of this.iQ)t.jC()&&(this.EQ=1)}Stt(){this.vY=0;for(const t of this.iQ)t.Ptt(),0===this.vY&&1===t.lZ()&&(this.vY=1),this.nQ||1!==t.Rtt()||(this.nQ||(this.nQ=[]),this.rQ=this.nQ.push(t))}fZ(t,s,i){if(this.ZQ()){if(0===t&&0===this.TQ)return;this.TQ=t,t=i}else{if(0===i&&0===this.TQ)return;t=this.TQ=i,s=1}const e=this.lQ+this.uQ,n=t*s*this.cQ,r=e+n,h=this.sQ.Att;r<0?(this.lQ=0,this.uQ=-r):h<=r?(this.lQ=h,this.uQ=this.lQ-r):(this.lQ=r,this.uQ=0);let o=!1,a=!1,l=this.pW(),u=this.gW();l||u?l&&!u?0<this.cQ?this.lQ>=h&&(this.btt(0),a=!0):this.lQ<=0&&(this.btt(h),a=!0):!l&&u?0<this.cQ?this.lQ>=h&&(this.mtt(h),this.yW(-1*this.wW()),a=!0,1===this.fQ?this.dQ<this.T6()?(this.dQ++,this.fQ=0):o=!0:0===this.fQ&&(this.fQ=1)):this.lQ<=0&&(this.mtt(0),this.yW(-1*this.wW()),a=!0,1===this.fQ?this.dQ<this.T6()?(this.dQ++,this.fQ=0):o=!0:0===this.fQ&&(this.fQ=1)):l&&u&&(0<this.cQ?this.lQ>=h&&(this.mtt(h),this.yW(-1*this.wW()),a=!0,this.fQ++,b.wrap(this.fQ,0,2)):this.lQ<=0&&(this.mtt(0),this.yW(-1*this.wW()),a=!0,this.fQ++,b.wrap(this.fQ,0,2))):0<this.cQ?this.lQ>=h&&(this.dQ<this.T6()?(this.dQ++,this.btt(0),a=!0):(this.mtt(h),o=!0)):this.lQ<=0&&(this.dQ<this.T6()?(this.dQ++,this.btt(h),a=!0):(this.mtt(0),o=!0));let c,f=this.eQ;if(o){for(c=0;c<f;c++)this.iQ[c].Ftt();this.oW(!0),this.htt()}else{const d=this.rQ;for(c=0;c<d;c++)this.nQ[c].Ott();if(1===this.EQ)for(c=0;c<f;c++){const p=this.iQ[c],m=p.Dtt(),g=this.lQ-m,y=e-m;g<0&&0<y?(this.lQ=m<0?0:h<=m?h:m,p.Rc(m,!0,!1,a,this.GQ,!1)):p.Rc(this.lQ,!0,!1,a,this.GQ,!1)}else for(c=0;c<f;c++)this.iQ[c].Rc(this.lQ,!0,!1,a,this.GQ,!1);for(c=0;c<d;c++)this.nQ[c].Ltt();this.GQ&&(this.GQ=!1)}}wtt(s,i=!1,e=!1,n=!1,r=NaN,t=!1,h=!1){for(const o of this.iQ)o.Ott();for(const a of this.iQ){let t=s;if("number"==typeof r&&!isNaN(r)){const l=this.KP(),u=l-a.Dtt(),c=r-a.Dtt();u<0&&0<c&&(t=a.Dtt(),this.mtt(t))}a.Rc(t,i,e,n,this.GQ,h)}for(const f of this.iQ)f.Ltt();this.GQ&&t&&(this.GQ=!1)}ktt(){const t=this.sQ.LQ().Ntt(),s=b.kQ.tM(this,t);return this.eQ=this.iQ.push(s),s}AY(){if(!this.rW())for(const t of this.iQ)t.Btt()}wZ(){for(const t of this.iQ)t.wZ()}Wtt(){for(const t of this.iQ)t.jtt()}Utt(t,s,i){if(s){if("number"==typeof i&&0<=i){const e=this.iQ[i];return e?(e.Vtt(s),void this.tQ.NY(s.mN(),this)):void 0}for(const n of this.iQ)if(n.UQ())if(t){if(n.FW()===t){n.Vtt(s),this.tQ.NY(s.mN(),this);break}}else if(!n.Htt()){n.Vtt(s),this.tQ.NY(s.mN(),this);break}}}UY(t,s){for(const i of this.iQ)if(i.UQ())if(s){if(s===i.FW()&&t===i.EW())return!0}else if(t===i.EW())return!0;return!1}pZ(){return this.iQ.some(t=>!t.UQ()||t.ztt())}Ctt(){return this.iQ.some(t=>{if(t.UQ()){if(!t.ztt())return!1;const s=t.mN();return!!s&&s.uz()}return!1})}DW(t){for(const s of this.NZ())for(const i of s.Jtt())if(i.qtt()===t)return i}$tt(t){for(const s of this.iQ)if(t===s.EW())return s;return null}Xtt(t){let s=t?t.split(" "):[],i=new Set(s.map(t=>t.toLowerCase().trim()));s=[...i.values()];for(const e of this.NZ())for(const n of e.Ytt()){const r=s.every(t=>n.Ztt(t));if(r)return n}}BY(){const t=[];for(const s of this.NZ())t.push(s.mN());return t.filter(t=>t)}gY(){for(const t of this.NZ())t.gY()}Y9(){return{tracksJson:this.Ktt(),name:this.rr,playheadTime:this.KP(),playbackRate:this.cQ,pingPongState:this.fQ,currentRepeatCount:this.dQ,isPlaying:this.pQ,isScheduled:this.mQ,initialStateSet:this.gQ,finishedTriggers:this.MQ,complete:this.yQ,released:this.wQ,markedForRemoval:this.SQ,completedTick:this.vQ,implicitPause:this.bQ,isTemplate:this.xQ,tags:this._Q.join(" "),stringTags:this.IQ,tagsChanged:this.CQ,firstTick:this.GQ}}Z9(t){t&&(this.Qtt(t.tracksJson),this.rr=t.name,this.lQ=t.playheadTime,this.cQ=t.playbackRate,this.fQ=t.pingPongState,this.dQ=t.currentRepeatCount,this.pQ=!!t.isPlaying,this.mQ=!!t.isScheduled,this.gQ=!!t.initialStateSet,this.MQ=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.yQ=!!t.complete,this.wQ=!!t.released,this.SQ=!!t.markedForRemoval,this.vQ=t.completedTick,this.bQ=!!t.implicitPause,this.xQ=!!t.isTemplate,this._Q=t.tags.split(" "),this.IQ=t.stringTags,this.CQ=!!t.tagsChanged,this.GQ=!!t.firstTick)}Ktt(){return this.iQ.map(t=>t.Y9())}Qtt(t){this.Wtt(),t.forEach((t,s)=>{const i=this.iQ[s];i.Z9(t)}),this.iQ.filter(t=>t.ztt())}static ett(t){const s=this.SW();return""===t?1===s.length&&""===s[0]:s.map(t=>t.toLowerCase()).includes(t.toLowerCase())}static stt(t){if(b.De(t))return t.slice(0);if(b.Se(t))return t.split(" ");throw new Error("invalid tags")}tst(){return this.PQ||(this.PQ=b.tr(self.GW,this)),this.PQ}}}{const Br=self.Os;Br.kQ=class extends Br.Kn{constructor(t,s){super(),this.DZ=t,this.sst=s,this.ist=s.LQ(),this.est=NaN,this.nst=NaN,this.rst=null,this.hst=null,this.ost=!1,this.DC=0<s.Dtt(),this.ast=!1,this.lst=!1,this.ust=NaN,this.cst=null,this.fst=this.sst.pst().dst(),this.mst=[],this.gst(),this.yst=0,this.vY=0,this.wst=0}static tM(t,s){return Br.tr(Br.kQ,t,s)}ir(){this.fst=null;for(const t of this.mst)t.ir();Br.Rh(this.mst),this.mst=null,this.DZ=null,this.rst=null,this.hst=null,this.sst=null,this.cst=null}gst(){for(const t of this.sst.vst().Sst())this.mst.push(Br.bst.tM(this,t))}Btt(){for(const t of this.mst)t.Btt()}wZ(){for(const t of this.mst)t.wZ();this.rst=null,this.hst=null}xst(){return this.DZ}ED(){return this.DZ.ED()}Ytt(){return this.fst||(this.fst=this.sst.pst().dst()),this.fst}Jtt(){return this.mst}DW(s){for(let t=0;t<this.mst.length;t++){const i=this.mst[t];if(i.qtt()===s)return i}}Mst(){this.rst||this.EW()}Gst(){return!!this.rst&&!this.rst.Fj()}ztt(){if(!this.UQ())return!1;const t=this.Tst(),s=this.ED().eD(t);return!!s&&!s.Fj()}mN(){if(this.UQ()){const t=this._st();if(-1!==t)return this.ED().Q7(t)}}Ist(){return this.DZ.NZ().indexOf(this)}jtt(){this.rst=null,this.est=NaN,this.hst=null,this.nst=NaN,this.ost=!0}Htt(){return!!this.rst}EW(){if(!this.ost){if(!this.rst||!this.Gst()){const t=this.Tst();this.rst=this.ED().eD(t)}return this.rst}}Vtt(t){if(this.ost=!1,this.rst!==t){this.wZ(),this.rst=t,this.nst=t.mN().gF(),this.est=t.EN(),this.hst=t.aD();for(const s of this.Cst()){const i=s.Est,e=s.Pst,n=i.Rst();switch(n){case"instance-variable":{e.Ast();const r=t.mN(),h=r.Fst(s.name),o=r.Ost(h),a=r.Dst(h);o===s.name&&a===s.type&&e.Lst(h);break}case"behavior":{const l=s.l6,u=this.mN(),c=t.mN(),f=e.c6(c);if(l&&f){const d=l.jc();u.kst(d),c.kst(d),e.Ast(),e.Nst(f.Az())}break}}}}}*Cst(){for(const t of this.mst){const s=t.WQ(),i=this.mN(),e={Est:t,Pst:s};switch(t.Rst()){case"world-instance":e.property=t.qtt();break;case"instance-variable":{const n=s.Ast();e.name=i.Ost(n),e.type=i.Dst(n);break}case"effect":{const r=i.Ok(),h=s.Bst(r);e.Wst=h;break}case"behavior":{const o=s.c6(i);e.l6=o;break}case"plugin":e.lk=i.uk()}yield e}}aD(){if(!this.hst||!this.Gst()){const t=this.EW();t&&(this.hst=t.aD())}return this.hst}jst(){return this.sst}Tst(){return isNaN(this.est)?this.sst.Tst():this.est}Ust(t){this.sst.Ust(t)}JQ(){return this.sst.JQ()}qQ(t){this.sst.qQ(t)}YZ(){return this.sst.YZ()}FW(){return this.sst.FW()}Dtt(){return this.sst.Dtt()}Vst(){return this.sst.Vst()}Hst(t){this.sst.Hst(t)}$Q(t){this.sst.$Q(t)}IW(t){for(const s of this.Ytt())s.IW(t);for(const i of this.Jtt())i.IW(t)}zst(){return this.sst.zst()}Jst(t){this.sst.Jst(t)}_st(){return isNaN(this.nst)?this.sst._st():this.nst}qst(t){this.sst.qst(t)}$st(t){this.sst.$st(t)}Xst(){const t=this.EW();if(t){const s=t.s6();if(s.Yst())return t.s6().Xst()}return this.sst.Xst()}Zst(t){this.sst.Zst(t)}Kst(){const t=this.EW();if(t){const s=t.s6();if(s.Yst())return t.s6().Kst()}return this.sst.Kst()}iG(){return this.sst.iG()}jc(){return this.sst.jc()}UQ(){return 0===this.iG()}Qst(){return 1===this.iG()}tit(){return 2===this.iG()}sit(){return this.yst}lZ(){return this.vY}Rtt(){return this.wst}jC(){return this.DC}xtt(){for(const t of this.mst)t.xtt()}aZ(){if(this.Mst(),this.Gst()||!this.UQ()){const t=this.xst(),s=t.QQ(),i=s?0:this.Vst();for(const n of this.mst)n.aZ(i),0===this.yst&&1===n.sit()&&(this.yst=1),0===this.vY&&1===n.lZ()&&(this.vY=1);this.wst=0;const e=this.mst.some(t=>t.Rtt());e&&(this.wst=1),this.cst=this.iit(i),this.ast=!1,this.lst=!1,this.Rc(i),this.eit(this.iit(i))}}Ett(){if(this.Mst(),this.Gst()||!this.UQ()){this.DZ.QQ();const t=this.DZ.KP()-this.Dtt();this.cst=this.iit(t);for(const s of this.mst)s.Ett(t)}}Ftt(){if(!this.xst().mZ()&&(this.Mst(),this.Gst()||!this.UQ())&&!this.DC){const t=this.DZ.KP(),s=this.Dtt()+this.Vst();s<=t?this.Rc(this.Vst(),!0,!1,!0,!1,!1,!0):t<=0&&this.Rc(0,!0,!1,!0,!1,!1,!0)}}Ptt(){for(let t=0,s=this.mst.length;t<s;t++){const i=this.mst[t];i.Ptt(),0===this.yst&&1===i.sit()&&(this.yst=1),0===this.vY&&1===i.lZ()&&(this.vY=1)}}Ott(){const s=this.mst.length;for(let t=0;t<s;t++)this.mst[t].Ott()}Rc(i,t=!1,e=!1,n=!1,s=!1,r=!1,h=!1){this.rst||this.EW();const o=this.rst&&!this.rst.Fj(),a=0===this.sst.nf;if((o||!a)&&!(r&&a&&this.mN().uz()||(i-=this.Dtt())<0)){this.nit(i,t),this.rit(i,t,s);for(let t=0,s=this.mst.length;t<s;t++)this.mst[t].Rc(i,e,n,h);this.hit(i,t),0!==this.yst&&(this.hst||(this.hst=this.rst.aD()),this.hst)&&this.hst.P4()}}Ltt(){const s=this.mst.length;for(let t=0;t<s;t++)this.mst[t].Ltt()}nit(t,s){if(s&&this.DC&&!this.ast){const i=this.xst();if(i.QQ()){if(t<0)return}else if(t>this.Vst())return;for(const e of this.mst)e.aZ();this.ast=!0}}hit(t,s){if(s&&this.DC&&!this.lst){const i=this.xst();if(i.QQ()){if(t>=this.Vst()){for(const e of this.mst)e.Rc(this.Vst(),!1,!0);this.lst=!0}}else if(t<=0){for(const n of this.mst)n.Rc(0,!1,!0);this.lst=!0}}}rit(t,s,i){if(!i&&s&&Br.W$.Timeline){const e=this.xst(),n=this.cst.UZ(),r=this.cst.KP(),h=n?n.KP():e.fW();if(t<=r||h<=t)if(this.cst=this.ist.oit(t,this.sst),e.QQ())n&&this.eit(this.cst);else{const o=this.cst.UZ();o&&this.eit(o)}}}iit(t){const s=this.ist.ait(t,this.sst);return s||this.ist.oit(t,this.sst)}eit(t){if(Br.W$.Timeline){const s=this.xst(),i=s.NQ();Br.W$.Timeline.N$.PushTriggerTimeline(s),Br.W$.Timeline.N$.PushTriggerKeyframe(t),i.t4(Br.W$.Timeline.N$.OnAnyKeyframeReached),i.t4(Br.W$.Timeline.N$.eit),Br.W$.Timeline.N$.PopTriggerTimeline(s),Br.W$.Timeline.N$.PopTriggerKeyframe(t)}}lit(){const t=this.sst.pst(),s=t.uit();return s}cit(){const t=this.sst.vst(),s=t.dit(),i=Br.bst.tM(this,s);return this.mst.push(i),i}pit(t){const s=this.sst.pst();s.mit(t)}git(t){for(const s of this.mst)s.git(t)}yit(){for(const t of this.mst)t.yit()}wit(){if(this.Mst(),this.Gst()||!this.UQ())for(const t of this.mst)t.wit()}Sit(){if(this.Mst(),this.Gst()||!this.UQ()){let t=!1;for(const s of this.mst){const i=s.Sit();!t&&i&&(t=!0)}if(t){const e=this.lit();e.uW(this.xst().KP()),e.IW("noease"),e.Jst(!0),e.ttt("")}}}gY(){isNaN(this.ust)||this.vit(this.ust),this.ust=NaN}Y9(){const t=this.EW(),s=t?t.EN():this.Tst();return{propertyTracksJson:this.bit(),lastKeyframeDataItemJson:this.xit(),initialStateOfNestedSet:this.ast,endStateOfNestedSet:this.lst,instanceUid:s,cleared:this.ost}}Z9(t){if(t){this.Mit(t.propertyTracksJson),this.Git(t.lastKeyframeDataItemJson),this.ust=t.instanceUid,this.ast=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.ast=t.initialStateOfNestedSet),this.lst=!1,t.hasOwnProperty.endStateOfNestedSet&&(this.lst=t.endStateOfNestedSet),this.ost=!!t.hasOwnProperty("cleared")&&t.cleared;for(const s of this.mst)0===this.yst&&1===s.sit()&&(this.yst=1),0===this.vY&&1===s.lZ()&&(this.vY=1);this.wst=0,this.mst.some(t=>t.Rtt())&&(this.wst=1)}}xit(){const t=this.sst.pst();return t.Tit(this.cst)}bit(){return this.mst.map(t=>t.Y9())}Mit(t){t.forEach((t,s)=>{const i=this.mst[s];i.Z9(t)})}vit(t){if(Br.le(t)){const s=this.ED().eD(t);if(s){const i=this.xst();i.Utt(this.sst.FW(),s,this.Ist())}}}Git(t){const s=this.sst.pst();this.cst=s._it(t)}}}{const Wr=self.Os;Wr.bst=class extends Wr.Kn{constructor(t,s){super(),this.Iit=t,this.Cit=s,this.Eit=s.vst(),this.yst=0,this.vY=0,this.wst=0,this.Pit=this.WQ(),this.Rit=this.Cit.Fit().Ait(),this.Oit=null,this.Dit=null}static tM(t,s){return Wr.tr(Wr.bst,t,s)}ir(){this.Iit=null,this.Pit&&(this.Pit.ir(),this.Pit=null),this.Rit=null,this.Cit=null,this.Eit=null}sit(){return this.yst}lZ(){return this.vY}Rtt(){return this.wst}Lit(){return!!this.Dit}kit(t){this.Dit=t}Nit(){return this.Dit}Bit(){return this.Iit}Wit(){return this.Cit}vst(){return this.Eit}xst(){return this.Iit.xst()}ED(){return this.Iit.ED()}EW(){return this.Iit.EW()}WQ(){if(!this.Pit){let t=this.Cit.Rst(),s;switch(t){case"behavior":s=new Wr.bst.jit(this);break;case"effect":s=new Wr.bst.Uit(this),this.vY=1;break;case"instance-variable":s=new Wr.bst.Vit(this);break;case"plugin":s=new Wr.bst.Hit(this),this.vY=1;break;case"world-instance":s=new Wr.bst.zit(this),this.vY=1,this.yst=1;break;case"value":s=new Wr.bst.Jit(this);break;case"audio":s=new Wr.bst.qit(this)}this.Pit=s}return this.Pit}Rst(){return this.Cit.Rst()}$it(t){this.Cit.$it(t)}Xit(){return this.Cit.Yit()}Zit(t){this.Cit.Kit(t)}OW(){return this.WQ().Qit()}qtt(){return this.Cit.tet()}iet(t){this.Cit.eet(t)}net(){return this.Cit.iG()}ret(t){this.Cit.het(t)}oet(){return this.vst().aet(this.Cit).iG()}let(){return this.Cit.let()}uet(t){this.Cit.uet(t)}cet(){return this.Cit.cet()}fet(t){this.Cit.fet(t)}zst(){return this.Cit.zst()}Jst(t){this.Cit.Jst(t)}JQ(){return this.Cit.JQ()}qQ(t){this.Cit.qQ(t)}YZ(){return this.Cit.YZ()}$Q(t){this.Cit.$Q(t)}IW(t){for(const s of this.det())s.IW(t)}pet(){return this.Cit.pet()}det(){return this.Rit||(this.Rit=this.Cit.Fit().Ait()),this.Rit}jZ(){return this.Cit.Fit().jZ()}met(t){return this.Eit.met(t,this.Cit)}yet(t){return this.Eit.yet(t,this.Cit)}wet(t){let s=this.Eit.met(t,this.Cit),i;return i=s?this.Eit.vet(t,this.Cit):(s=this.Eit.yet(t,this.Cit),this.Eit.bet(t,this.Cit)),{start:s,end:i}}*xet(){for(const t of this.det())yield t.eK()}*Met(){for(const t of this.det())yield t.KP()}Btt(){this.WQ().Btt()}wZ(){this.WQ().wZ()}Get(){return this.WQ().Get()}xtt(){this.WQ().xtt()}aZ(t){this.WQ().aZ(),this.Oit=this.Tet(t),this.Ptt()}Ett(t){this.WQ().Ett(),this.Oit=this.Tet(t)}Ptt(){const t=this.Bit();if(this.wst=0,t.UQ()){const s=this.xst(),i=t.EW(),e=this.WQ(),n=this.qtt(),r=e._et();if(r){const h=s.BQ(i,e,n,this);h&&h.length&&(this.wst=1)}else this.wst=0}}Tet(t){const s=this.xst(),i=this.Eit.met(t,this.Cit);return i||(s.QQ()?this.Eit.yet(t,this.Cit):this.Eit.bet(t,this.Cit))}Ott(){this.Pit.Ott()}Rc(t,s=!1,i=!1,e=!1){let n,r,h=!1;if(s)n=this.Eit.yet(t,this.Cit);else{if(this.Oit){const o=this.xst(),a=this.Oit.UZ(),l=this.Oit.KP(),u=a?a.KP():o.fW();(t<=l||u<=t)&&(this.Oit=this.Eit.yet(t,this.Cit),h=!0)}else this.Oit=this.Eit.yet(t,this.Cit),h=!0;n=this.Oit}n&&(r=n.UZ()),this.Pit.Rc(t,n,r,s,i,e,h)}Iet(t){if(this.Oit){const e=this.xst(),n=this.Oit.UZ(),r=this.Oit.KP(),h=n?n.KP():e.fW();(t<=r||h<=t)&&(this.Oit=this.Eit.yet(t,this.Cit))}else this.Oit=this.Eit.yet(t,this.Cit);const s=this.Oit,i=s.UZ();return this.Pit.Iet(t,s,i)}Cet(t,s,i){return this.Pit.Iet(t,s,i)}Ltt(){this.Pit.Ltt()}static Eet(t,s){const i=s.Wit(),e=s.Eit;return e.yet(t,i)}static Pet(t,s){const i=s.Wit(),e=s.Eit;return e.bet(t,i)}Ret(){const t=this.Cit.Fit(),s=t.Aet();return this.Oit=null,s}git(t){this.Oit=null;const s=this.Cit.Fit();s.Fet(t)}yit(){this.WQ().yit()}wit(){const t=this.WQ().wit();if(t){const s=this.Eit.aet(this.Cit),i=this.WQ().Get();s.Oet(i)}}Sit(){const t=this.WQ().Sit();return t&&this.Det(),this.WQ().Let(),t}Det(){const t=this.xst().KP(),s=this.WQ(),i=Wr.bst.Eet(t,this),e=this.Ret();e.het(i.iG()),e.uW(t),e.IW(i.ket()),e.Jst(!0),e.Net(s.Bet()),e.Oet(s.Get())}Y9(){return{sourceAdapterJson:this.WQ().Y9()}}Z9(t){t&&this.WQ().Z9(t.sourceAdapterJson)}}}{const jr=self.Os,Ur=jr.bst;Ur.zit=class{constructor(t){this.Wet=t,this.jet=null,this.Uet()}ir(){this.jet&&(this.jet.ir(),this.jet=null),this.Wet=null}_et(){return this.jet._et()}DW(){return this.Wet}Btt(){this.jet&&this.jet.Btt()}wZ(){this.jet&&this.jet.wZ()}Uet(){return this.jet||(this.jet=this.Vet()),this.jet}Ast(){}gF(){return this.Ast()}Het(){}xtt(){this.Uet().xtt()}aZ(){this.Uet().aZ()}Ett(){this.Uet().Ett()}Ott(){this.jet.zet()}Rc(t,s,i,e,n,r,h){let o=this.Wet.oet(),a;switch(o){case"numeric":a=Ur.Jet.Rc(t,s,i,this.Wet);break;case"angle":a=Ur.qet.Rc(t,s,i,this.Wet);break;case"boolean":a=Ur.$et.Rc(t,s,i,this.Wet);break;case"color":a=Ur.Xet.Rc(t,s,i,this.Wet);break;case"text":a=Ur.Yet.Rc(t,s,i,this.Wet)}this.jet.Zet(t,a,s,i,e,n,r,h)}Iet(t,s,i){switch(this.Wet.oet()){case"numeric":return Ur.Jet.Rc(t,s,i,this.Wet);case"angle":return Ur.qet.Rc(t,s,i,this.Wet);case"boolean":return Ur.$et.Rc(t,s,i,this.Wet);case"color":return Ur.Xet.Rc(t,s,i,this.Wet);case"text":return Ur.Yet.Rc(t,s,i,this.Wet)}}Ltt(){this.jet.Ket()}yit(){this.Uet().Qet()}Let(){this.Uet().Let()}Get(){return this.Uet().Get()}wit(){return this.Uet().wit()}Sit(){return this.Uet().Sit()}Bet(){const t=this.Wet,s=t.Bit(),i=s.xst().KP(),e=Ur.Eet(i,t),n=e.UZ(),r=t.oet();switch(r){case"numeric":return Ur.Jet.Rc(i,e,n,t);case"angle":return Ur.qet.Rc(i,e,n,t);case"boolean":return Ur.$et.Rc(i,e,n,t);case"color":return Ur.Xet.Rc(i,e,n,t);case"text":return Ur.Yet.Rc(i,e,n,t)}}Vet(){const t=this.Wet,s=t.pet()?t.oet():"";switch(s){case"combo":case"boolean":case"text":case"string":return new Ur.snt.tnt(this);case"numeric":case"number":case"angle":return new("combo"===this.Wet.net()?Ur.snt.tnt:Ur.snt.int)(this);case"color":case"offsetColor":return new Ur.snt.ent(this);default:return new Ur.snt.int(this)}}Y9(){return{propertyAdapterJson:this.Uet().Y9()}}Z9(t){t&&this.Uet().Z9(t.propertyAdapterJson)}}}{const Vr=self.Os;class Hr extends Vr.bst.zit{constructor(t){super(t),this.nnt=NaN}Ast(){return this.Wet.Wit().Yit()[0]}gF(){return this.nnt||super.gF()}Het(){return this.Wet.Bit().EW()}Lst(t){const s=this.Wet.Wit().Yit()[0];s!==t&&(this.nnt=t)}Rc(t,s,i,e,n,r,h){this.Uet().rnt(s.Qit())&&super.Rc(t,s,i,e,n,r,h)}Iet(t,s,i){if(this.Uet().rnt(s.Qit()))return super.Iet(t,s,i)}Y9(){return Object.assign(super.Y9(),{index:this.nnt})}Z9(t){t&&(super.Z9(t),this.nnt=t.index)}}Vr.bst.Vit=Hr}{const zr=self.Os;class Jr extends zr.bst.zit{constructor(t){super(t),this.KH=NaN}Ast(){const t=this.Wet.Wit();return t.Yit()[1]}Het(){const t=this.Wet.Wit(),s=this.Wet.Bit(),i=this.KH||t.Yit()[0],e=s.EW(),n=e.hnt(i),r=e.ont()[n];return r.s6()}c6(t){const s=this.Wet.Wit(),i=s.Yit()[2];return t.ant(i)}Nst(t){const s=this.Wet.Wit();s.Yit()[0]!==t&&(this.KH=t)}Rc(t,s,i,e,n,r,h){const o=this.Wet.Bit(),a=o.EW();this.c6(a.mN())&&super.Rc(t,s,i,e,n,r,h)}Iet(t,s,i){const e=this.Wet.Bit(),n=e.EW();if(this.c6(n.mN()))return super.Iet(t,s,i)}Y9(){return Object.assign(super.Y9(),{sid:this.KH})}Z9(t){t&&(super.Z9(t),this.KH=t.sid)}}zr.bst.jit=Jr}{const qr=self.Os;class $r extends qr.bst.zit{constructor(t){super(t)}Ast(){return this.Wet.Wit().Yit()[1]}Het(){const t=this.Wet,s=t.Bit(),i=s.aD(),e=i.C4(),n=e.Ok(),r=this.Bst(n),h=r.gF();return e.y6(h)?e.lnt(h):null}Bst(t){const s=this.Wet,i=s.Wit().Yit()[0];return t.unt(i)}Rc(t,s,i,e,n,r,h){this.cnt()&&super.Rc(t,s,i,e,n,r,h)}Iet(t,s,i){if(this.cnt())return super.Iet(t,s,i)}cnt(){const t=this.Wet,s=t.Bit(),i=s.aD(),e=i.C4(),n=e.Ok(),r=this.Bst(n);if(r){const h=r.gF();return e.y6(h)}}}qr.bst.Uit=$r}{const Xr=self.Os;class Yr extends Xr.bst.zit{constructor(t){super(t)}Ast(){return this.Wet.Wit().Yit()[0]}Het(){return this.Wet.Bit().EW().s6()}Rc(t,s,i,e,n,r,h){const o=this.Wet.Bit(),a=o.mN().uk(),l=o.EW().mN().uk();a===l&&super.Rc(t,s,i,e,n,r,h)}Iet(t,s,i){const e=this.Wet.Bit(),n=e.mN().uk(),r=e.EW().mN().uk();if(n===r)return super.Iet(t,s,i)}fnt(){const t=this.Wet.Bit(),s=t.mN().uk();if(Xr.W$.dnt&&s instanceof Xr.W$.dnt&&("initial-frame"===this.Wet.qtt()||"initial-animation"===this.Wet.qtt()))switch(this.Wet.YZ()){case"relative":case"absolute":return null}}}Xr.bst.Hit=Yr}{const Zr=self.Os;class Kr extends Zr.bst.zit{constructor(t){super(t),this.pnt=0,this.mnt=!1}_et(){return!1}aZ(){let t=this.Wet.vst(),s=this.Wet.Wit();s=t.aet(s),this.pnt=s.eK()}Ett(){}Qit(){return this.mnt||this.Wet.Rc(0),this.pnt}Rc(t,s,i,e,n,r,h){this.pnt=Zr.bst.Jet.Rc(t,s,i,this.Wet),this.mnt=!0}yit(){}Let(){}Get(){return this.pnt}wit(){return!1}Sit(){return!1}Y9(){return{value:this.pnt,init:this.mnt}}Z9(t){t&&(this.pnt=t.value,this.mnt=!t.hasOwnProperty("init")||t.init)}}Zr.bst.Jit=Kr}{const Qr=self.Os;class th extends Qr.bst.zit{constructor(t){super(t),this.gnt=!1,this.ynt=null,this.wnt=null,this.Snt=null,this.DZ=this.Wet.xst(),this.Iit=this.Wet.Bit(),this.vnt=this.Wet.Xit(),this.bnt=this.vnt[0],this.xnt=this.vnt[1],this.vnt[3]?this.Mnt=this.vnt[3]:this.Mnt=Math.random().toString(36).slice(2),this.Gnt=NaN,this.Tnt=NaN,this._nt=NaN,this.Int=null,this.Cnt()}ir(){super.ir(),this.ynt=null,this.wnt=null,this.Snt=null,this.DZ=null,this.Iit=null,this.vnt=null,this.bnt=null,this.Int=null}Cnt(){if(self.Os.W$.Audio){const t=this.Wet.ED(),s=t.Ent(self.Os.W$.Audio);s&&(this.ynt=s.hk().s6()),this.wnt=self.Os.W$.Audio.Pnt,this.Snt=self.Os.W$.Audio.Rnt}}Ant(){if(!this.Int){const t=this.Wet.Bit(),s=t.DW("audioSource");s&&(this.Int=s.WQ())}}Fnt(){const t=this.Wet.Bit(),s=t.DW("volume");return(s?s.WQ():this).Tnt}Btt(){super.Btt(),this.gnt=!1,this.ynt&&(this.Snt&&(this.Gnt=this.Snt.Ont.call(this.ynt,this.Mnt),this.Tnt=this.Snt.Dnt.call(this.ynt,this.Mnt)),this.wnt)&&this.wnt.oW.call(this.ynt,this.Mnt)}Lnt(){return this.Mnt}knt(){return this._nt}Nnt(t){this._nt=t}aZ(){super.aZ(),this.Gnt=NaN,this.gnt=!1}Ett(){super.Ett();const t=this.Wet.xst(),s=t.KP();switch(this.Gnt=s-this.xnt,this.Wet.qtt()){case"audioSource":break;case"volume":this.Tnt=this.Wet.Iet(s)}this.gnt=!1}Rc(t,s,i,e,n,r,h){if(this.ynt)switch(this.Wet.qtt()){case"audioSource":{if(!this.DZ.QQ())return;if(e)return void(this.wnt&&this.wnt.oW.call(this.ynt,this.Mnt));if(t<this.xnt)return void(this.gnt=!1);const o=this.Snt.Bnt.call(this.ynt,this.Mnt),a=this.DZ.wW();if(a!==o&&this.wnt.yW.call(this.ynt,this.Mnt,a),this.gnt)return;if(!this.Wet.xst().IsPlaying())return;if(this.gnt=!0,isNaN(this.Gnt)){const l=self.performance.now(),u=t-this.xnt,c=this.ynt.Wnt();if("suspended"===c)return void(this.gnt=!1);const f=self.performance.now(),d=(f-l)/1e3,p=u+d;if(this.wnt){let t=this.knt();isNaN(t)?(this.Nnt(0),t=0):this.Nnt(t),this.wnt.jnt.call(this.ynt,this.bnt,t,this.Mnt,p)}}else{const m=this.Gnt,g=(this.Gnt=NaN,this.Fnt()),y=(this.Tnt=NaN,this.ynt.Wnt());if("suspended"===y)return void(this.gnt=!1);this.wnt&&(this.Nnt(g),this.wnt.jnt.call(this.ynt,this.bnt,g,this.Mnt,m))}break}case"volume":this.Ant(),super.Rc(t,s,i,e,n,r,h)}}Iet(t,s,i){if(this.ynt)switch(this.Wet.qtt()){case"audioSource":return;case"volume":return this.Ant(),super.Iet(t,s,i)}}Unt(t,s){return this.Int?this.Int.knt():0}Vnt(t,s,i,e){this.Int&&this.Int.Nnt(this.Unt()+s),this.wnt&&this.Int&&this.wnt.Nnt.call(this.ynt,this.Int.Lnt(),this.Int.knt())}Hnt(t,s,i){this.Int&&this.Int.Nnt(s),this.wnt&&this.Int&&this.wnt.Nnt.call(this.ynt,this.Int.Lnt(),this.Int.knt())}znt(){return!0}Y9(){return{audioPlaybackStarted:this.gnt,audioTag:this.Mnt,pauseTime:this.Gnt,pauseVolume:this.Tnt,volume:this._nt}}Z9(t){t&&(this.gnt=t.audioPlaybackStarted,this.Mnt=t.audioTag,this.Gnt=t.pauseTime,this.Tnt=t.pauseVolume,this._nt=t.volume,this.Cnt())}}Qr.bst.qit=th}{const sh=self.Os;sh.bst.snt=class{constructor(t){this.Pit=t,this.Wet=t.DW(),this.hst=this.Wet.Bit().aD(),this.Jnt=this.Wet.qtt(),this.qnt=!1,this.$nt=null,this.Xnt=null}ir(){this.Pit=null,this.Wet=null,this.hst=null,this.$nt=null,this.Xnt=null}_et(){return!1}Btt(){}wZ(){this.hst=null,this.$nt=null,this.Xnt=null}WQ(){return this.Pit}DW(){return this.Wet}aD(){return this.hst||(this.hst=this.Wet.Bit().aD()),this.hst}Ynt(t){this.qnt=!!t}Znt(){return this.qnt}xtt(){}aZ(){}Ett(){}Qet(){this.$nt=this.Get()}Let(){this.$nt=null}Get(){}wit(){}Sit(){}rnt(t){const s=typeof this.Knt(),i=typeof t;return s==i}zet(){}Zet(t,s,i,e,n,r,h,o){}Ket(){}Qnt(){const t=this.trt(()=>{const t=this.Wet.Wit(),s=this.Wet.vst();return s.aet(t)},()=>{const t=this.Wet.Wit(),s=this.Wet.vst();return s.srt(t)});return t.irt()}ert(){const t=this.Wet.xst(),e=t.KP()-this.Wet.Bit().Dtt(),s=this.trt(()=>{const t=this.Wet.Wit(),s=this.Wet.vst();return s.yet(e,t)},()=>{const t=this.Wet.Wit(),s=this.Wet.vst(),i=s.bet(e,t);return i||s.srt(t)});return s.irt()}trt(t,s){const i=this.Wet.xst();return(i.QQ()?t:s)()}nrt(t,s){const i=this.Wet.YZ();return("relative"===i?t:s)()}rrt(t,s){return(this.Znt()?(this.Ynt(!1),t):s)()}hrt(t){}ort(){return this.Pit.gF()}art(){return this.Xnt||(this.Xnt=this.Pit.Het()),this.Xnt}lrt(t,s,i,e,n,r){const h=this.Wet.Rst();switch(h){case"behavior":return t();case"effect":return s();case"instance-variable":return i();case"plugin":return e();case"world-instance":return n();case"audio":return r()}}Y9(){return{firstAbsoluteUpdate:this.qnt,saveState:this.$nt}}Z9(t){t&&(this.qnt=t.firstAbsoluteUpdate,this.$nt=t.saveState)}urt(t,s=!1){const i=[];for(const e of t){const n=e.Bit().Dtt();for(const r of e.det())(s&&0===r.KP()||!s)&&i.push({time:n+r.KP(),value:r.irt()})}return i.sort((t,s)=>t.time-s.time)}crt(t,s,i){return this.frt(s,i)}frt(s,i){for(let t=i.length-1;0<=t;t--){const e=i[t].time;if(e<=s)return i[t]}return null}}}{const ih=self.Os,eh=new Map,nh=[0,0,0];class rh extends ih.bst.snt{constructor(t){super(t)}xtt(){}aZ(){}Ett(){}Get(){const t=this.Wet.Rst(),s=this.art(),i=this.ort();switch(t){case"behavior":return this.drt(s.prt(i));case"effect":return this.drt(s[i]);case"plugin":return this.drt(s.prt(i));case"world-instance":return this.drt(this.Knt())}}wit(){const t=this.Qnt();return!this.mrt(t,this.Knt())}Sit(){return!ih.de(this.$nt)&&!this.mrt(this.$nt,this.Knt())}mrt(t,s){return t=this.grt(t),s=this.grt(s),t.na(s)}Qnt(){const t=super.Qnt();return this.grt(t)}ert(){const t=super.ert();return this.grt(t)}hrt(t){}drt(t){return(ih.Xe(t,ih.Lo)?t.toArray():t).slice(0,3)}grt(t){return ih.Xe(t,ih.Lo)?t:new ih.Lo(t[0],t[1],t[2],1)}rnt(t){return!0}_et(){return!0}zet(){const t=this.Wet.xst(),s=this.Wet.EW(),i=this.Wet.WQ(),e=t.BQ(s,i,this.Jnt,this.Wet);if(e&&1<e.length){eh.has(s)||eh.set(s,new Map);const n=eh.get(s),r=this.Wet.Rst(),h=(n.has(r)||n.set(r,new Map),n.get(r));h.has(this.Jnt)||h.set(this.Jnt,{yrt:!1,color:new ih.Lo(0,0,0,1)})}}wrt(t,s,i){const e=eh.get(t).get(s).get(i);return e.yrt=!0,e.color}Zet(t,s,i,e,n,r,h,o){const a=this.Wet.xst(),l=this.Wet.Bit(),u=this.Wet.EW(),c=this.Wet.WQ(),f=this.Wet.Rst(),d=this.Jnt,p=a.BQ(u,c,d,this.Wet);if(p&&1<p.length){const m=this.urt(p,!0),g=this.crt(a,a.KP(),m);if(g){const y=l.Dtt(),w=g.time-y;if(0==w)this.wrt(u,f,this.Jnt).Vo(s[0],s[1],s[2]);else if(!(w<0)){const S=s[0],v=s[1],b=s[2],x=this.Wet.Rc(w,!1,!0),M=ih.Lo.Na(S,x[0]),G=ih.Lo.Na(v,x[1]),T=ih.Lo.Na(b,x[2]);this.wrt(u,f,this.Jnt).Vo(M,G,T)}}}else this.Srt(s[0],s[1],s[2])}Ket(){const t=this.Wet.EW();if(eh.has(t)){const s=eh.get(t),i=this.Wet.Rst();if(s.has(i)){const e=s.get(i);if(e.has(this.Jnt)){const n=e.get(this.Jnt),r=n.yrt,h=n.color;r&&this.Srt(h.Yo(),h.Zo(),h.Ko()),0===e.size&&s.delete(i),0===s.size&&eh.delete(t)}}}}Knt(){const t=this.Wet.Rst(),s=this.art(),i=this.ort();switch(t){case"behavior":return this.grt(s.prt(i));case"effect":return s[i].clone();case"plugin":return this.grt(s.prt(i));case"world-instance":return this.aD().z4().clone()}}Srt(t,s,i){const e=this.Wet.Rst(),n=this.art(),r=this.ort();switch(e){case"behavior":nh[0]=t,nh[1]=s,nh[2]=i,n.vrt(r,nh);break;case"effect":n[r].Uo(t,s,i);break;case"plugin":nh[0]=t,nh[1]=s,nh[2]=i,n.vrt(r,nh);break;case"world-instance":this.aD().brt(t,s,i)}}Y9(){}Z9(t){}}ih.bst.snt.ent=rh}{const hh=self.Os,oh=hh.bst;class ah extends hh.bst.snt{constructor(t){super(t)}xtt(){}aZ(){}Ett(){}Get(){return this.Knt()}wit(){const t=this.Qnt();return t!==this.Get()}Sit(){return!hh.de(this.$nt)&&this.$nt!==this.Get()}_et(){return!1}Zet(t,s,i,e,n,r,h,o){const a=this.Wet,l=a.Bit(),u=a.Rst(),c=a.xst(),f=l.EW(),d=a.WQ(),p=this.Jnt,m=c.BQ(f,d,p,a);if(m&&1<m.length){const y=this.urt(m),w=t+l.Dtt(),S=this.crt(c,w,y);S&&(s=S.value)}const g=a.oet();switch(g){case"numeric":if(oh.Jet.xrt(this.ort(),this.art(),s,u))break;return;case"angle":if(oh.qet.xrt(this.ort(),this.art(),s,u))break;return;case"boolean":if(oh.$et.xrt(this.ort(),this.art(),s,u))break;return;case"color":if(oh.Xet.xrt(this.ort(),this.art(),s,u))break;return;case"text":if(!oh.Yet.xrt(this.ort(),this.art(),s,u))return}this.Srt(s)}Knt(){const t=this.Wet.Rst(),s=this.art(),i=this.ort();switch(t){case"behavior":return s.prt(i);case"effect":return s[i];case"instance-variable":return s.Mrt(i);case"plugin":return s.prt(i)}}Srt(t){const s=this.Wet.Rst(),i=this.art(),e=this.ort();switch(s){case"behavior":i.vrt(e,t);break;case"effect":i[e]=t;break;case"instance-variable":i.Grt(e,t);break;case"plugin":i.vrt(e,t)}}}hh.bst.snt.tnt=ah}{const lh=self.Os,uh=(lh.bst.snt,new Map),ch=(t,s,i,e,n,r=!1,h=null,o=null)=>{uh.set(t,{Trt:s,_rt:i,Irt:e,round:n,Crt:r,init:h,reset:o})};ch("offsetX",(t,s,i,e)=>{"relative"===e.Wet.YZ()?t.Ert(s,i.xst().YQ()):t.Ert(s)},(t,s)=>t.l2(s),t=>t.a2(),!0),ch("offsetY",(t,s,i,e)=>{"relative"===e.Wet.YZ()?t.Prt(s,i.xst().YQ()):t.Prt(s)},(t,s)=>t.f2(s),t=>t.c2(),!0),ch("offsetWidth",(s,t,o,i,e)=>{if(0!==t){const n="relative"===i.Wet.YZ(),l=1===i.Rrt.iG();if((n||l)&&s.SB()&&s._B()){if(isNaN(i.Art)){let e=[],t=s.hB();for(;t;)e.push(t),t=t.hB();e.reverse();let a=(t,s)=>s.xst().$tt(t.EW()),n=(t,s)=>{const i=a(t,s);if(i)return i.Xst();const e=t.EW().s6();return e.Yst()?e.Xst():t.Ort().Frt()},r=(t,s,i,e=0)=>{const n=a(t,s);if(!n)return e;const r=n.DW(i);if(!r)return e;const h=r.Wit().Fit();if(!h)return e;const o=h.srt();return o?o.Qit():e},h;if(l){let t=e[e.length-1];h=t.$p()}else{let s=e[0],t=s.Ort().Frt(),i=s.Ort().Drt();h=t*i,h=(h+=r(s,o,"offsetWidth"))+n(s,o)*r(s,o,"offsetScaleX");for(let t=1;t<e.length;t++){const u=(s=e[t]).Ort().Drt();h=(h=(h*=u)+r(s,o,"offsetWidth"))+n(s,o)*r(s,o,"offsetScaleX")}}i.Art=0===h?Number.EPSILON:h}e||s.Rm(t/i.Art,!0)}else s.Rm(t)}},(t,s)=>t.im(s),t=>t.$p(),!0),ch("offsetHeight",(s,t,o,i,e)=>{if(0!==t){const n="relative"===i.Wet.YZ(),a=1===i.Rrt.iG();if((n||a)&&s.SB()&&s.CB()){if(isNaN(i.Art)){let e=[],t=s.hB();for(;t;)e.push(t),t=t.hB();e.reverse();let n=(t,s)=>{e=t;const i=s.xst().$tt(e.EW());var e;if(i)return i.Kst();const n=t.EW().s6();return n.Yst()?n.Kst():t.Ort().Lrt()},r=(t,s,i,e=0)=>{const n=s.xst().$tt(t.EW());if(!n)return e;const r=n.DW(i);if(!r)return e;const h=r.Wit().Fit();if(!h)return e;const o=h.srt();return o?o.Qit():e},h;if(a){let t=e[e.length-1];h=t.hm()}else{let s=e[0],t=s.Ort().Lrt(),i=s.Ort().krt();h=t*i,h=(h+=r(s,o,"offsetHeight"))+n(s,o)*r(s,o,"offsetScaleY");for(let t=1;t<e.length;t++){const l=(s=e[t]).Ort().krt();h=(h=(h*=l)+r(s,o))+n(s,o)*r(s,o,"offsetScaleY")}}i.Art=0===h?Number.EPSILON:h}e||s.Nrt(t/i.Art,!0)}else s.Nrt(t)}},(t,s)=>t.Xp(s),t=>t.hm(),!0),ch("offsetAngle",(t,s,i,e,n)=>{t.Brt(s)},(t,s)=>t.Wk(s),t=>t.jk(),!1,!0),ch("offsetOpacity",(t,s,i,e,n)=>{const r=e.Wrt||1,h=(s/=r,t.ME()),o=h+s;if(0===e.jrt)1<o?e.jrt+=o-1:o<0&&(e.jrt+=o),t.Urt(s);else{const a=t.ME()+s;0<s&&0<e.jrt?1<a&&(e.jrt+=a-1):0<s&&e.jrt<0?(e.jrt+=s,0<e.jrt&&(t.Urt(e.jrt),e.jrt=0)):s<0&&0<e.jrt?(e.jrt+=s,e.jrt<0&&(t.Urt(e.jrt),e.jrt=0)):s<0&&e.jrt<0&&a<0&&(e.jrt+=a)}},(t,s)=>{t.TE(s)},t=>t.ME(),!1,!0,(r,n,h)=>{switch(r.jrt=0,r.Wet.YZ()){case"relative":{r.Wet.vst();let t=r.Wet.Wit(),s=t.Fit(),i=s.Ait(),e=r.aD().ME(),n=e;for(const o of i){const a=o.KP(),l=r.Wet.Iet(a);n=e+l,n=lh.lr(n,0,1)}r.Vrt=e-n,r.Vrt=Math.round(100*(r.Vrt+Number.EPSILON))/100,n=e;for(let t=i.length-1;0<=t;t--){const u=i[t].KP(),c=r.Wet.Iet(u);n-=c,n=lh.lr(n,0,1)}r.Hrt=n,r.Hrt=Math.round(100*(r.Hrt+Number.EPSILON))/100;break}}const t="relative"===r.Wet.YZ(),s=1===r.Rrt.iG();if((t||s)&&n.SB()&&n.DB()){let s=[],t=n.hB();for(;t;)s.push(t),t=t.hB();s.reverse();let i=(t,s,i)=>{const e=s.xst().$tt(t.EW());if(!e)return 0;const n=e.DW(i);if(!n)return 0;const r=n.Wit().Fit();if(!r)return 0;const h=r.srt();return h?h.Qit():0},e=s[0].Ort().zrt();e+=i(s[0],h,"offsetOpacity");for(let t=1;t<s.length;t++)e+=i(s[t],h,"offsetOpacity");r.Wrt=0===e?1:e}},i=>{switch(i.Wet.YZ()){case"relative":{i.jrt=0;let t=i.aD(),s=t.ME();s=Math.round(100*(s+Number.EPSILON))/100,i.Wet.xst().QQ()?(t.TE(s+i.Vrt),i.zG=0):(t.TE(s-i.Hrt),i.zG=i.WQ().Bet());break}}}),ch("offsetOriginX",(t,s)=>t.Jrt(s),(t,s)=>t.qrt(s),t=>t.j6(),!1),ch("offsetOriginY",(t,s)=>t.$rt(s),(t,s)=>t.Xrt(s),t=>t.V6(),!1),ch("offsetZElevation",(t,s)=>t.Yrt(s),(t,s)=>t.m2(s),t=>t.d2(),!0),ch("offsetScaleX",(t,s,i,e)=>{if(0!==s){const n=t.$p()<0?-1:1;if("relative"===e.Wet.YZ()&&t.SB()&&t._B()){const r=i.Xst()*n*s;isNaN(e.Art)&&uh.get("offsetWidth").Trt(t,1,i,e,!0),t.Rm(r/e.Art,!0)}else t.Rm(i.Xst()*n*s)}},(t,s,i)=>{t.im(i.Xst()*s)},(e,n)=>{const r=e.$p()<0?-1:1;if(e._B()){let t=e.hB(),s=n.xst().$tt(t.EW()),i=NaN;if(s)i=t.$p()/s.Xst();else{const h=t.EW().s6();i=h.Yst()?t.$p()/h.Xst():1}return e.$p()*r/(n.Xst()*i)}return e.$p()*r/n.Xst()},!1),ch("offsetScaleY",(t,s,i,e)=>{if(0!==s){const n=t.hm()<0?-1:1;if("relative"===e.Wet.YZ()&&t.SB()&&t.CB()){const r=i.Kst()*n*s;isNaN(e.Art)&&uh.get("offsetHeight").Trt(t,1,i,e,!0),t.Nrt(r/e.Art,!0)}else t.Nrt(i.Kst()*n*s)}},(t,s,i)=>{t.Xp(i.Kst()*s)},(e,n)=>{const r=e.hm()<0?-1:1;if(e.CB()){let t=e.hB(),s=n.xst().$tt(t.EW()),i=NaN;if(s)i=t.hm()/s.Kst();else{const h=t.EW().s6();i=h.Yst()?t.hm()/h.Kst():1}return e.hm()*r/(n.Kst()*i)}return e.hm()*r/n.Kst()},!1);class fh extends lh.bst.snt{constructor(t){super(t),this.zG=0,this.jrt=0,this.Vrt=0,this.Hrt=0,this.Wrt=NaN,this.Art=NaN,this.Zrt=void 0,this.Krt=void 0,this.Qrt=null,this.tht=null,this.sht=null,this.iht=null,this.eht=null,this.nht=null,this.rht=null,this.hht=null,this.oht=!1,this.aht=!1,lh.Xe(this.Wet.xst(),lh.lht)?this.Rrt=new lh.bst.snt.uht(this):this.Rrt=new lh.bst.snt.cht(this);const s=this.Wet.qtt();switch(this.Wet.Rst()){case"world-instance":{const i=uh.get(s);this.Qrt=i.Irt,this.tht=i.Trt,this.sht=i._rt,this.oht=i.round,this.aht=i.Crt,this.eht=i.init,this.iht=i.reset;break}case"audio":this.nht=t.Unt,this.rht=t.Vnt,this.hht=t.Hnt,this.oht=!!t.znt(),this.aht=!1}}ir(){this.Rrt=null,this.Qrt=null,this.tht=null,this.sht=null,this.iht=null,this.eht=null,this.nht=null,this.rht=null,this.hht=null,super.ir()}_et(){return this.Rrt._et()}fht(){return this.zG}dht(t){this.zG=t}xtt(){this.iht&&this.iht(this)}aZ(){const t=this.Rrt.aZ();if("number"==typeof t&&(this.zG=t),this.eht){const s=this.aD(),i=this.Wet.Bit();this.eht(this,s,i)}}Ett(){const t=this.Rrt.Ett();"number"==typeof t&&(this.zG=t)}Get(){return this.Knt()}wit(){const t=this.Qnt();return t!==this.Get()}Sit(){return!lh.de(this.$nt)&&this.$nt!==this.Get()}zet(){this.Rrt.zet()}Zet(t,s,i,e,n,r,h,o){return this.Rrt.Zet(t,s,i,e,n,r,h,o)}Ket(){this.Rrt.Ket()}Knt(){const t=this.art(),s=this.ort(),i=this.aD(),e=this.Wet.Bit(),n=this.Wet.Rst();switch(n){case"behavior":return t.prt(s);case"effect":return t[s];case"instance-variable":return t.Mrt(s);case"plugin":return t.prt(s);case"world-instance":return this.Qrt(i,e);case"audio":return this.nht.call(this.WQ(),i,e)}}Srt(t,s,i){const e=this.art(),n=this.ort(),r=this.aD(),h=this.Wet.Bit(),o=this.Wet.Rst();switch(o){case"behavior":e.pht(n,t);break;case"effect":e[n]+=t;break;case"instance-variable":e.mht(n,t);break;case"plugin":e.pht(n,t,this.WQ().fnt());break;case"world-instance":this.tht(r,t,h,this);break;case"audio":this.rht.call(this.WQ(),r,t,h,this)}}ght(t,s,i){let e=this.Wet.JQ();if("discrete"!==(e="default"===e?"continuous":e)||s){if("discrete"===e&&i){const l=this.Wet.xst(),u=l.KP(),c=this.Wet.met(u);if(!c)return}const n=this.art(),r=this.ort(),h=this.aD(),o=this.Wet.Bit(),a=this.Wet.Rst();switch(a){case"behavior":n.vrt(r,t);break;case"effect":n[r]=t;break;case"instance-variable":n.Grt(r,t);break;case"plugin":n.vrt(r,t,this.WQ().fnt());break;case"world-instance":this.sht(h,t,o);break;case"audio":this.hht.call(this.WQ(),h,t,o)}}}yht(t,s,i,e,n,r,h,o){this.Rrt.yht(t,s,i,e,n,r,h,o)}wht(t,s,i,e,n){let r=(t="angle"===this.Wet.net()?lh.dr(t):t).toString(),h=r.split(".")[1]||"",o=h.length,a=this.Knt(),l;switch(l=0===o?this.oht?Math.round(a):this.aht?"angle"===this.Wet.net()?lh.cr(Math.round(lh.dr(a))):Number(lh.toFixed(a,2)):a:this.oht?Number(lh.toFixed(a,o)):(this.aht,a),this.Srt(l-a,s,i),this.Wet.qtt()){case"offsetWidth":case"offsetScaleX":{const u=this.aD(),c=u.$p(),f=Number(lh.toFixed(c,2));u.Rm(f-c);break}case"offsetHeight":case"offsetScaleY":{const d=this.aD(),p=d.hm(),m=Number(lh.toFixed(p,2));d.Nrt(m-p);break}}}Y9(){return Object.assign(super.Y9(),{v:this.zG,a:this.jrt,fod:this.Vrt,bod:this.Hrt,of:this.Wrt,sf:this.Art,armorf:this.Zrt,armandf:this.Krt})}Z9(t){t&&(super.Z9(t),this.zG=t.v,this.jrt=t.a,this.Vrt=lh.le(t.fod)?t.fod:0,this.Hrt=lh.le(t.bod)?t.bod:0,this.Wrt=lh.le(t.of)?t.of:NaN,this.Art=lh.le(t.sf)?t.sf:NaN,this.Zrt=lh.le(t.armorf)?t.armorf:void 0,this.Krt=lh.le(t.armandf)?t.armandf:void 0)}}lh.bst.snt.int=fh}{const dh=self.Os;class ph{constructor(t){this.Sht=!1,this.pnt=0,this.vht=!1,this.bht=!1,this.mst=t;for(let t=0,s=this.mst.length;t<s;t++)this.mst[t].kit(this)}Jtt(){return this.mst}xht(){this.Sht=!0}Mht(){return this.Sht}Net(t){this.pnt=t}Qit(){return this.pnt}Ght(t){this.vht=t}Tht(){return this.vht}Ftt(t){this.bht=t}_ht(){return this.bht}Kf(){this.Sht=!1,this.pnt=0,this.vht=!1,this.bht=!1}}class mh{constructor(t){this.Iht=t}ir(){this.Iht=null}iG(){return 0}aZ(){const t=this.Iht;return this.Iht.DW(),t.nrt(()=>t.trt(()=>0,()=>t.WQ().Bet()),()=>{})}Ett(){}_et(){this.Iht;const t=this.Iht.DW();switch(t.YZ()){case"relative":return!1;case"absolute":return!0}}zet(){this.Iht;const t=this.Iht.DW(),s=t.qtt();switch(t.YZ()){case"relative":break;case"absolute":if(t.Lit()){const i=t.Nit();i.Kf()}else{const e=t.xst(),n=t.EW(),r=t.WQ(),h=e.BQ(n,r,s,t);h&&1<h.length&&new ph(h)}}}Zet(t,s,i,e,n,r,h,o){const a=this.Iht,l=this.Iht.DW();switch(l.YZ()){case"relative":{const u=a.fht();a.Srt(s-u,i,e),r&&this.yht(t,i,e,n,u,s),a.dht(s);break}case"absolute":{const c=l.xst(),f=l.Bit();if(l.EW(),l.WQ(),l.Lit()){const d=l.Nit(),p=d.Jtt(),m=a.urt(p,!0),g=a.crt(c,c.KP(),m);if(g){const y=f.Dtt(),w=g.time-y;if(0==w)d.Ftt(h),d.Ght(o),d.xht(),d.Net(d.Qit()+s);else{if(w<0)return;const S=l.Iet(w);d.Ftt(h),d.Ght(o),d.xht(),d.Net(d.Qit()+(s-S))}}}else a.ght(s,o,h);break}}}Ket(){const t=this.Iht,s=this.Iht.DW();switch(s.YZ()){case"relative":break;case"absolute":if(s.Lit()){const i=s.Nit();i.Mht()&&t.ght(i.Qit(),i.Tht(),i._ht())}}}yht(t,s,i,e,n,r){const h=this.Iht;e||(s&&t===s.KP()?h.wht(s.eK(),s,i):i&&t===i.KP()?h.wht(i.eK(),s,i):r-n==0&&h.wht(s.eK(),s,i))}}dh.bst.snt.cht=mh}{const gh=self.Os;class yh{constructor(t){this.Iht=t}ir(){this.Iht=null}iG(){return 1}aZ(){const t=this.Iht;return t.Ynt(!0),this.hrt(t.Qnt())}Ett(){const t=this.Iht;if(t.Qnt()!==t.ert())return t.Ynt(!0),this.hrt(t.ert())}_et(){return!1}zet(){}Zet(t,s,i,e,n,r,h,o){const a=this.Iht,l=a.fht();switch(a.DW().YZ()){case"relative":a.Srt(s-l,i,e),r&&this.yht(t,i,e,n,l,s,!1,h);break;case"absolute":a.Znt()?(a.Ynt(!1),a.Srt(l,i,e)):0===t&&0===a.DW().xst().fW()?a.ght(s,!0,!1):(a.Srt(s-l,i,e),r&&this.yht(t,i,e,n,l,s,this.Cht(),h))}a.dht(s)}Ket(){}hrt(t){const s=this.Iht;return t-s.Get()}Cht(){let t=this.Iht,s=t.aD().EW(),i=t.DW().ED(),e=i.NQ(),n=0;for(const r of e.kY())0===r.iG()?r.UY(s)&&n++:1===r.iG()&&r.EW()===s&&n++;return n<=1}yht(t,s,i,e,n,r,h,o){const a=this.Iht;e?s&&t===s.KP()?a.wht(s.eK(),s,i,h,o):i&&t===i.KP()?a.wht(i.eK(),s,i,h,o):i||a.wht(s.eK(),s,i,h,o):s&&t===s.KP()?a.wht(s.eK(),s,i,h,o):i&&t===i.KP()?a.wht(i.eK(),s,i,h,o):r-n==0&&a.wht(s.eK(),s,i,h,o)}}gh.bst.snt.uht=yh}{const wh=self.Os,Sh=self.ec;wh.bst.Jet=class{constructor(){}static xrt(t,s,i,e){let n;switch(e){case"behavior":n=s.prt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Mrt(t);break;case"plugin":n=s.prt(t)}return n!==i}static Rc(r,h,o,a){if(!o){let t=a.Wit(),s=a.vst();return(t=s.srt(t)).eK()}let l=a.JQ();if("default"===l&&(l="continuous"),"discrete"===(l="combo"===a.net()?"discrete":l))return h.eK();if("continuous"===l||"step"===l){const u=a.xst().HQ();if("step"===l&&0!==u){const g=1/u;r=Math.floor(r*g)/g}const c=h.eK(),f=o.eK(),d=h.sK("cubic-bezier"),p=o.sK("cubic-bezier"),m=d&&d.Eht()&&p&&p.Pht();if(!m&&c===f)return c;let t=h.KP(),s=o.KP(),i=("step"===l&&0!==u&&(r=wh.lr(r,t,s)),wh.normalize(r,t,s)),e=h.ket(),n;if(m){const y=s-t;n=Sh.vc(e)(y*i,0,1,y),n=Sh.vc("cubicbezier")(n,c,c+d.hK(),f+p.lK(),f)}else n=Sh.vc(e)((s-t)*i,c,f-c,s-t);return"integer"===a.net()?Math.floor(n):n}}}}{const vh=self.Os;vh.bst.qet=class{constructor(){}static xrt(t,s,i,e){let n;switch(e){case"behavior":n=s.prt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Mrt(t);break;case"plugin":n=s.prt(t)}return n!==i}static Rc(t,s,i,e){if(!i){let t=e.Wit(),s=e.vst();return(t=s.srt(t)).eK()}let n=e.JQ();if("default"===n&&(n="continuous"),"discrete"===(n="combo"===e.net()?"discrete":n))return s.eK();if("continuous"===n||"step"===n){const r=e.xst().HQ();if("step"===n&&0!==r){const c=1/r;t=Math.floor(t*c)/c}const h=s.KP(),o=i.KP(),a=s.eK(),l=i.eK(),u=("step"===n&&0!==r&&(t=vh.lr(t,h,o)),s.sK("angle"));if(!u){if(a===l)return a;const f=vh.normalize(t,h,o),d=self.ec.vc(s.ket());return vh.br(a,l,d(f,0,1,1))}{const p=u.Rht();if(a===l&&0===p)return a;const m=vh.normalize(t,h,o),g=self.ec.vc(s.ket()),y=g(m,0,1,1);switch(u.Aht()){case"closest":return vh.br(a,l,y,p);case"clockwise":return vh.Mr(a,l,y,p);case"anti-clockwise":return vh.Gr(a,l,y,p)}}}}}}{const bh=self.Os;bh.bst.$et=class{constructor(){}static xrt(t,s,i,e){let n;switch(e){case"behavior":n=s.prt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Mrt(t);break;case"plugin":n=s.prt(t)}return!!n!=!!i}static Rc(t,s,i,e){if(i)return s.eK()?1:0;{let t=e.Wit(),s=e.vst();return(t=s.srt(t)).eK()?1:0}}}}{const xh=self.Os,Mh=[0,0,0],Gh=[0,0,0],Th=[0,0,0];xh.bst.Xet=class{constructor(){}static xrt(t,s,i,e){let n;switch(e){case"behavior":n=s.prt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Mrt(t);break;case"plugin":n=s.prt(t)}return Array.isArray(i)?(Mh[0]=i[0],Mh[1]=i[1],Mh[2]=i[2]):(Th.ba(i),Mh[0]=Math.floor(255*Th.Yo()),Mh[1]=Math.floor(255*Th.Zo()),Mh[2]=Math.floor(255*Th.Ko())),Array.isArray(n)?(Gh[0]=n[0],Gh[1]=n[1],Gh[2]=n[2]):(Th.ba(n),Gh[0]=Math.floor(255*Th.Yo()),Gh[1]=Math.floor(255*Th.Zo()),Gh[2]=Math.floor(255*Th.Ko())),Mh[0]!==Gh[0]||Mh[1]!==Gh[1]||Mh[2]!==Gh[2]}static Rc(t,s,i,e){if(!i){let t=e.Wit(),s=e.vst(),i=(t=s.srt(t)).eK();return Mh[0]=i[0],Mh[1]=i[1],Mh[2]=i[2],Mh}let n=e.JQ();if("discrete"===(n="default"===n?"continuous":n)){const r=s.eK();return Mh[0]=r[0],Mh[1]=r[1],Mh[2]=r[2],Mh}if("continuous"===n||"step"===n){const h=e.xst().HQ();if("step"===n&&0!==h){const x=1/h;t=Math.floor(t*x)/x}const o=s.KP(),a=i.KP(),l=s.eK(),u=i.eK(),c=("step"===n&&0!==h&&(t=xh.lr(t,o,a)),xh.normalize(t,o,a)),f=s.ket(),d=l[0],p=l[1],m=l[2],g=u[0],y=u[1],w=u[2],S=self.ec.vc(f),v=a-o,b=v*c;return Mh[0]=d===g?d:S(b,d,g-d,v),Mh[1]=p===y?p:S(b,p,y-p,v),Mh[2]=m===w?m:S(b,m,w-m,v),Mh}}}}{const _h=self.Os;_h.bst.Yet=class{constructor(){}static xrt(t,s,i,e){let n;switch(e){case"behavior":n=s.prt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Mrt(t);break;case"plugin":n=s.prt(t)}return n!==i}static Rc(t,s,i,e){if(i)return s.eK();{let t=e.Wit(),s=e.vst();return(t=s.srt(t)).eK()}}}}{const Ih=self.Os;Ih.HX=class{constructor(){this.Fht=new Map}ir(){for(const t of this.Fht.values())t.ir();this.Fht.clear(),this.Fht=null}tc(t){const s=new Ih.Oht(t),i=s.jc();this.Fht.set(i,s)}Ks(t){return this.Fht.get(t)}RQ(){return 0}static Dht(t,s,i,e){if(s)for(const n of s)Ih.HX.Lht("create",n,t,i,e)}static kht(t,s,i,e){if(s)for(const n of s)Ih.HX.Lht("create-including-disabled",n,t,i,e)}static Nht(i,t,s,e){i.length?t.forEach((t,s)=>{i[s].Z9(t)}):t.forEach(t=>{Ih.HX.Lht("load",t,i,s,e)})}static Lht(t,s,i,e,n){let r;if("function"==typeof e)switch(t){case"load":r=new e(null,n);break;case"create":case"create-including-disabled":r=new e(s,n)}else if("object"==typeof e){const h=e.prop,o=s[h],a=e.map.get(o);switch(t){case"load":r=new a(null,n);break;case"create":case"create-including-disabled":r=new a(s,n)}}switch(t){case"load":r.Z9(s),i.push(r);break;case"create":if("function"==typeof r.zst&&!r.zst())return r.ir();i.push(r);break;case"create-including-disabled":i.push(r)}}}}{const Ch=self.Os;Ch.Oht=class{constructor(t){this.rr="",this.Att=NaN,this.Bht=0,this.Wht="default",this.jht="default",this.Uht=!1,this.Vht=!1,this.Hht=1,this.ist=null,this.zht="",this.Jht=!1,this.qht=!0,t&&(this.rr=t[0],this.Att=t[1],this.Bht=t[2],this.Wht=t[3],this.jht=t[4],this.Uht=!!t[6],this.Vht=!!t[7],this.Hht=t[8],this.zht=t[9],this.Jht=!!t[10],this.qht=!!t[11],this.ist=new Ch.$ht(t[5],this))}ir(){this.ist.ir(),this.ist=null}LQ(){return this.ist||(this.ist=new Ch.$ht(null,this)),this.ist}jc(){return this.rr}G8(t){this.rr=t}fW(){return this.Att}cW(t){this.Att=t}HQ(){return this.Bht}zQ(t){this.Bht=t}JQ(){return this.Wht}qQ(t){this.Wht=t}YZ(){return this.jht}$Q(t){this.jht=t}pW(){return this.Uht}dW(t){this.Uht=t}gW(){return this.Vht}mW(t){this.Vht=t}T6(){return this.Hht}XQ(t){this.Hht=t}SZ(){return this.zht}YQ(){return this.Jht}ZQ(){return this.qht}Y9(){return{trackDataJson:this.ist.Y9(),name:this.rr,totalTime:this.Att,step:this.Bht,interpolationMode:this.Wht,resultMode:this.jht,loop:this.Uht,pingPong:this.Vht,repeatCount:this.Hht,startOnLayout:this.zht,transformWithSceneGraph:!!this.Jht,useSystemTimescale:this.qht}}Z9(t){t&&(this.LQ().Z9(t.trackDataJson),this.rr=t.name,this.Att=t.totalTime,this.Bht=t.step,this.Wht=t.interpolationMode,this.jht=t.resultMode,this.Uht=t.loop,this.Vht=t.pingPong,this.Hht=t.repeatCount,this.zht=t.startOnLayout,this.Jht=!!t.transformWithSceneGraph,this.qht=!!t.useSystemTimescale)}}}{const Eh=self.Os;class Ph{constructor(t,s){this.ist=s,this.Xht=null,this.Yht=null,this.est=NaN,this.nst=NaN,this.Wht="default",this.jht="default",this.Cu=!1,this.Zht=null,this.Eit=null,this.Zc="",this.Kht=null,this.Qht=0,this.tot=this.ist.VQ().fW(),this.nf=0,this.rr="",t&&(t[0]&&(this.Xht=t[0],this.est=t[0][2],this.nst=t[0][1]),this.Wht=t[1],this.jht=t[2],this.Cu=!!t[3],t[6]&&(this.Zc=t[6]),t[7]&&(this.Kht=t[7],this.Qht=t[7][0],this.tot=t[7][1]),t[8]&&(this.Yht=t[8]),t[8]&&(this.Yht=t[8]),t[9]&&(this.nf=t[9]),t[10]&&(this.rr=t[10]),this.Zht=new Eh.sot(t[4],this),this.Eit=new Eh.iot(t[5],this))}ir(){this.Xht=null,this.ist=null,this.Zht&&(this.Zht.ir(),this.Zht=null),this.Eit&&(this.Eit.ir(),this.Eit=null),this.Kht=null}LQ(){return this.ist}pst(){return this.Zht||(this.Zht=new Eh.sot(null,this)),this.Zht}vst(){return this.Eit||(this.Eit=new Eh.iot(null,this)),this.Eit}eot(){return this.Xht}_st(){return this.nst}qst(t){this.nst=t}Tst(){return this.est}Ust(t){this.est=t}JQ(){return this.Wht}qQ(t){this.Wht=t}YZ(){return this.jht}$Q(t){this.jht=t}zst(){return this.Cu}Jst(t){this.Cu=!!t}FW(){return this.Zc}Dtt(){return this.Qht}Vst(){return this.tot}Hst(t){this.tot=t}Xst(){return this.Yht[0]}$st(t){this.Yht||(this.Yht=[]),this.Yht[0]=t}Kst(){return this.Yht||(this.Yht=[]),this.Yht[1]}Zst(t){this.Yht||(this.Yht=[]),this.Yht[1]=t}iG(){return this.nf}jc(){return this.rr}Y9(){return{keyframeDataJson:this.Zht.Y9(),propertyTrackDataJson:this.Eit.Y9(),instanceData:this.Xht,additionalInstanceData:this.Yht,instanceUid:this.est,objectClassIndex:this.nst,interpolationMode:this.Wht,resultMode:this.jht,enabled:this.Cu,id:this.Zc,nestedData:this.Kht,type:this.nf,name:this.rr}}Z9(t){t&&(this.Xht=t.instanceData,this.est=t.instanceUid,this.nst=t.objectClassIndex,this.Wht=t.interpolationMode,this.jht=t.resultMode,this.Cu=t.enabled,this.Zc=t.id,this.nf=t.type||0,this.rr=t.name||"",this.tot=this.ist.VQ().fW(),t.nestedData&&(this.Kht=t.nestedData,this.Qht=this.Kht[0],this.tot=this.Kht[1]),t.additionalInstanceData&&(this.Yht=t.additionalInstanceData),this.pst().Z9(t.keyframeDataJson),this.vst().Z9(t.propertyTrackDataJson))}}Eh.$ht=class{constructor(t,s){this.sQ=s,this.not=[],Eh.HX.Dht(this.not,t,Ph,this)}ir(){this.sQ=null;for(const t of this.not)t.ir();Eh.Rh(this.not),this.not=null}VQ(){return this.sQ}Ntt(){const t=new Ph(null,this);return this.not.push(t),t}rot(t){return t.pst().dst()[0]}hot(t){const s=t.pst().dst();return s.at(-1)}ait(s,t){const i=t.pst().dst(),e=i.length;for(let t=0;t<e;t++){const n=i[t];if(n.KP()===s)return n}}oot(s,t){const i=t.pst().dst(),e=i.length;for(let t=0;t<e;t++){const n=i[t];if(n.KP()>s)return n}}aot(s,t){const i=t.pst().dst(),e=i.length;for(let t=0;t<e;t++){const n=i[t];if(n.KP()>=s)return n}}oit(s,t){const i=t.pst().dst();for(let t=i.length-1;0<=t;t--){const e=i[t];if(e.KP()<=s)return e}}*DQ(){for(const t of this.not)yield t}Y9(){return{trackDataItemsJson:this.not.map(t=>t.Y9())}}Z9(t){t&&Eh.HX.Nht(this.not,t.trackDataItemsJson,Ph,this)}}}{const Rh=self.Os;class Ah{constructor(t,s){this.Eit=s,this.lot="",this.uot=null,this.Jnt=null,this.nf=null,this.cot=NaN,this.dot=NaN,this.Wht="default",this.jht="default",this.Cu=!1,this.pot=null,this.mot=!0,t&&(this.lot=t[0][0],this.uot=t[0].slice(1),this.Jnt=t[1],this.nf=t[2],this.cot=t[3],this.dot=t[4],this.Wht=t[5],this.jht=t[6],this.Cu=!!t[7],this.pot=new Rh.got(t[8],this),this.mot=t[9])}ir(){this.pot.ir(),this.pot=null,this.Eit=null,this.uot=null}vst(){return this.Eit}Fit(){return this.pot||(this.pot=new Rh.got(null,this)),this.pot}Rst(){return this.lot}$it(t){this.lot=t}Yit(){return this.uot}Kit(t){this.uot=t}tet(){return this.Jnt}eet(t){this.Jnt=t}iG(){return this.nf}het(t){this.nf=t}let(){return this.cot}uet(t){this.cot=t}cet(){return this.dot}fet(t){this.dot=t}JQ(){return this.Wht}qQ(t){this.Wht=t}YZ(){return this.jht}$Q(t){this.jht=t}zst(){return this.Cu}Jst(t){this.Cu=!!t}pet(){return!!this.mot}Y9(){return{propertyKeyframeDataJson:this.pot.Y9(),sourceAdapterId:this.lot,sourceAdapterArguments:this.uot,property:this.Jnt,type:this.nf,min:this.cot,max:this.dot,interpolationMode:this.Wht,resultMode:this.jht,enabled:this.Cu,canHavePropertyKeyframes:this.mot}}Z9(t){t&&(this.lot=t.sourceAdapterId,this.uot=t.sourceAdapterArguments,this.Jnt=t.property,this.nf=t.type,this.cot=t.min,this.dot=t.max,this.Wht=t.interpolationMode,this.jht=t.resultMode,this.Cu=t.enabled,this.mot=t.canHavePropertyKeyframes,this.Fit().Z9(t.propertyKeyframeDataJson))}}Rh.iot=class{constructor(t,s){this.sst=s,this.yot=[],Rh.HX.Dht(this.yot,t,Ah,this)}ir(){this.sst=null;for(const t of this.yot)t.ir();Rh.Rh(this.yot),this.yot=null}jst(){return this.sst}dit(){const t=new Ah(null,this);return this.yot.push(t),t}aet(t){const s=t.Fit();return s.Ait()[0]}srt(t){const s=t.Fit(),i=s.Ait();return i.at(-1)}met(s,t){const i=t.Fit(),e=i.Ait(),n=e.length;for(let t=0;t<n;t++){const r=e[t];if(r.KP()===s)return r}}vet(s,t){const i=t.Fit(),e=i.Ait(),n=e.length;for(let t=0;t<n;t++){const r=e[t];if(r.KP()>s)return r}}bet(s,t){const i=t.Fit(),e=i.Ait(),n=e.length;for(let t=0;t<n;t++){const r=e[t];if(r.KP()>=s)return r}}yet(s,t){const i=t.Fit(),e=i.Ait();for(let t=e.length-1;0<=t;t--){const n=e[t];if(n.KP()<=s)return n}}*Sst(){for(const t of this.yot)yield t}Y9(){return{propertyTrackDataItemsJson:this.yot.map(t=>t.Y9())}}Z9(t){t&&Rh.HX.Nht(this.yot,t.propertyTrackDataItemsJson,Ah,this)}}}{const Fh=self.Os;class Oh{constructor(t,s){if(this.Zht=s,this.$R=-1,this.wot="noease",this.Sot=!1,this._Q=null,this.vot=null,t){this.$R=t[0],this.wot=t[1],this.Sot=!!t[2];const i=t[3];this._Q=i?i.split(" "):[],this.vot=new Set(this._Q.map(t=>t.toLowerCase())),this.bot=null}}ir(){this.Zht=null,Fh.Rh(this._Q),this._Q=null,this.vot.clear(),this.vot=null,this.bot=null}pst(){return this.Zht}UZ(){return this.bot}xot(t){this.bot=t}KP(){return this.$R}uW(t){this.$R=t,this.Zht.Mot()}ket(){return this.wot}IW(t){this.wot=t}zst(){return this.Sot}Jst(t){this.Sot=!!t}SW(){return this._Q}ttt(t){this._Q=t?t.split(" "):[],this.vot=new Set(this._Q.map(t=>t.toLowerCase()))}Got(){return this.vot}Ztt(t){return this.vot.has(t.toLowerCase())}Y9(){return{time:this.$R,ease:this.wot,enable:this.Sot,tags:this._Q}}Z9(t){t&&(this.$R=t.time,this.wot=t.ease,this.Sot=t.enable,this._Q=t.tags,this.vot=new Set(this._Q.map(t=>t.toLowerCase())))}}Fh.sot=class{constructor(t,s){this.sst=s,this.fst=[],Fh.HX.Dht(this.fst,t,Oh,this),this.Mot()}ir(){this.sst=null;for(const t of this.fst)t.ir();Fh.Rh(this.fst),this.fst=null}Mot(){this.fst.sort((t,s)=>t.KP()-s.KP());for(let t=0;t<this.fst.length;t++){const s=this.fst[t];s.xot(this.fst[t+1])}}jst(){return this.sst}Tot(){return this.fst.length}dst(){return this.fst}uit(){const t=new Oh(null,this);return this.fst.push(t),this.Mot(),t}mit(t){for(const s of this.fst)if(t(s)){const i=this.fst.indexOf(s);-1!==i&&(s.ir(),this.fst.splice(i,1))}this._ot(),this.Mot()}_ot(){this.fst.sort((t,s)=>t.KP()-s.KP())}Tit(t){return this.fst.indexOf(t)}_it(t){return this.fst[t]}*Iot(){for(const t of this.fst)yield t}*Cot(){for(let t=this.fst.length-1;0<=t;t--)yield this.fst[t]}Y9(){return{keyframeDataItemsJson:this.fst.map(t=>t.Y9())}}Z9(t){t&&(Fh.HX.Nht(this.fst,t.keyframeDataItemsJson,Oh,this),this.Mot())}}}{const Dh=self.Os;class Lh{constructor(t,s){this.pot=s,this.pnt=null,this.Eot=null,this.nf="",this.$R=NaN,this.wot="noease",this.Sot=!1,this.Pot=null,this.Rot=void 0,this.Aot="line",t&&(this.pnt=t[0][0],this.Eot=t[0][1],this.nf=t[0][2],this.$R=t[1],this.wot=t[2],this.Sot=!!t[3],this.Aot=t[5],this.Pot=null,t[4]&&(this.Pot=new Dh.Fot(t[4],this)),this.bot=null,this.Oot=null)}ir(){this.pot=null,this.Pot&&(this.Pot.ir(),this.Pot=null),this.bot=null,this.Oot=null}Dot(){return this.Pot}xot(t){this.bot=t}UZ(){return this.bot}Lot(t){this.Oot=t}VZ(){return this.Oot}Qit(){return this.pnt}Net(t){"color"===this.nf&&Dh.le(t)?(this.pnt[0]=Dh.Wr(t),this.pnt[1]=Dh.jr(t),this.pnt[2]=Dh.Ur(t)):this.pnt=t}irt(){return this.Eot}Oet(t){"color"===this.nf&&Dh.le(t)?(this.Eot[0]=Dh.Wr(t),this.Eot[1]=Dh.jr(t),this.Eot[2]=Dh.Ur(t)):this.Eot=t}eK(){const t=this.pot.Wit().YZ();return"relative"===t?this.Qit():"absolute"===t?this.irt():void 0}iG(){return this.nf}het(t){this.nf=t}KP(){return this.$R}uW(t){this.$R=t,this.pot.kot()}ket(){return this.wot}IW(t){this.wot=t}zst(){return this.Sot}Jst(t){this.Sot=!!t}HZ(){return this.Aot}sK(s){if(this.Pot){if(!this.Rot&&null!==this.Rot){const i=this.Pot.Not();if(i){const e=i.length;for(let t=0;t<e;t++){const n=i[t];if(n.FW()===s)return this.Rot=n,this.Rot}}this.Rot=null}return this.Rot}}Y9(){const t=this.Pot;return{addonDataJson:t&&t.Y9(),value:this.pnt,aValue:this.Eot,type:this.nf,time:this.$R,ease:this.wot,enable:this.Sot}}Z9(t){t&&(t.addonDataJson&&this.Pot._SetFromJson(t.addonDataJson),this.pnt=t.value,this.Eot=t.aValue,this.nf=t.type,this.$R=t.time,this.wot=t.ease,this.Sot=t.enable)}}Dh.got=class{constructor(t,s){this.Cit=s,this.Rit=[],this.Bot=[],Dh.HX.Dht(this.Rit,t,Lh,this),Dh.HX.kht(this.Bot,t,Lh,this),this.kot()}ir(){this.Cit=null;for(const t of this.Rit)t.ir();Dh.Rh(this.Rit),this.Rit=null;for(const s of this.Bot)s.ir();Dh.Rh(this.Bot),this.Bot=null}kot(){let s=this.Rit;s.sort((t,s)=>t.KP()-s.KP());for(let t=0;t<s.length;t++){const i=s[t];t+1<s.length&&i.xot(s[t+1]),0<=t-1&&i.Lot(s[t-1])}(s=this.Bot).sort((t,s)=>t.KP()-s.KP());for(let t=0;t<s.length;t++){const e=s[t];t+1<s.length&&e.xot(s[t+1]),0<=t-1&&e.Lot(s[t-1])}}Aet(){const t=new Lh(null,this);return this.Rit.push(t),this.kot(),t}Fet(t){for(const s of this.Rit)if(t(s)){const i=this.Rit.indexOf(s);-1!==i&&(s.ir(),this.Rit.splice(i,1))}this.Wot(),this.kot()}Wot(){this.Rit.sort((t,s)=>t.KP()-s.KP())}Wit(){return this.Cit}jot(){return this.Rit.length}srt(){return this.Rit[this.Rit.length-1]}Ait(){return this.Rit}jZ(){return this.Bot}*Uot(){for(const t of this.Rit)yield t}*Vot(){for(let t=this.Rit.length-1;0<=t;t--)yield this.Rit[t]}Y9(){const t=this.Rit,s=this.Bot;return{propertyKeyframeDataItemsJson:t.map(t=>t.Y9()),propertyKeyframeDataItemsIncludingDisabledJson:s.map(t=>t.Y9())}}Z9(t){t&&(Dh.HX.Nht(this.Rit,t.propertyKeyframeDataItemsJson,Lh,this),Dh.HX.Nht(this.Bot,t.propertyKeyframeDataItemsIncludingDisabledJson,Lh,this),this.kot())}}}{const kh=self.Os;class Nh{constructor(t,s){this.Pot=s,this.Zc=t[0],this.Hot=t[1]}ir(){this.Pot=null,this.Hot=null}Dot(){return this.Pot}FW(){return this.Zc}Y9(){return{id:this.Zc,data:this.Hot}}Z9(t){t&&(this.Zc=t.id,this.Hot=t.data)}}class Bh extends Nh{constructor(t,s){super(t,s),this.zot=this.Hot[0],this.Jot=!!this.Hot[1],this.qot=this.Hot[2],this.$ot=!!this.Hot[3]}ir(){super.ir()}hK(){return this.zot}Eht(){return this.Jot}lK(){return this.qot}Pht(){return this.$ot}Y9(){return Object.assign(super.Y9(),{startAnchor:this.zot,startEnable:!!this.Jot,endAnchor:this.qot,endEnable:!!this.$ot})}Z9(t){t&&(super.Z9(t),this.zot=t.startAnchor,this.Jot=!!t.startEnable,this.qot=t.endAnchor,this.$ot=!!t.endEnable)}}class Wh extends Nh{constructor(t,s){super(t,s),this.Xot=this.Hot[0],this.Yot=this.Hot[1]}ir(){super.ir()}Aht(){return this.Xot}Rht(){return this.Yot}Y9(){return Object.assign(super.Y9(),{direction:this.Xot,revolutions:this.Yot})}Z9(t){t&&(super.Z9(t),this.Xot=t.direction,this.Yot=t.revolutions)}}kh.Fot=class{constructor(t,s){this.Zot=s,this.Kot=[],kh.HX.Dht(this.Kot,t,{prop:0,map:new Map([["cubic-bezier",Bh],["angle",Wh]])},this)}ir(){this.Zot=null;for(const t of this.Kot)t.ir();kh.Rh(this.Kot),this.Kot=null}Qot(){return this.Zot}Not(){return this.Kot}*tat(){for(const t of this.Kot)yield t}Y9(){return{addonDataItemsJson:this.Kot.map(t=>t.Y9())}}Z9(t){t&&kh.HX.Nht(this.Kot,t.addonDataItemsJson,{prop:"id",map:new Map([["cubic-bezier",Bh],["angle",Wh]])},this)}}}{let m=self.Os,i=0;m.lht=class extends m.GY{constructor(t,s){super("tween-"+i++,t,s),this.Zc="",this.sat=!1,this.iat="start-value",this.rst=null,this.eat=null,this.nat=null,this.Iit=null,this.rat=null}FQ(t){const s=m.tr(m.Event,"tweenstatereleased");s.hat=this,t.dispatchEvent(s)}iG(){return 1}hQ(){for(const t of this.sQ.LQ().DQ())this.iQ.push(m.oat.tM(this,t));this.Iit=this.iQ[0]}ktt(){const t=this.sQ.LQ().Ntt(),s=m.oat.tM(this,t);return this.iQ.push(s),this.aat(),s}aat(){this.Iit=this.iQ[0]}DW(t){return this.Iit.Jtt()[0]}ret(t){this.lat=t}EW(){const t=this.NZ();if(t&&t.length){const s=t[0];if(this.Iit=s){const i=s.EW();return s.Gst()?i:void 0}}}uat(t){this.nat||(this.nat=[]),this.nat.push(t)}cat(t){this.eat||(this.eat=[]),this.eat.push(t)}fat(t){if(this.nat){const s=this.nat.indexOf(t);-1!==s&&this.nat.splice(s,1)}}dat(t){if(this.eat){const s=this.eat.indexOf(t);-1!==s&&this.eat.splice(s,1)}}pat(t,s){for(const i of this.iQ)for(const e of i.mst)if(e.qtt()===s){const n=e.vst(),r=e.Wit(),h=n.aet(r);h.Net(t),h.Oet(t)}}mat(t){for(const s of this.iQ)for(const i of s.mst)if(i.qtt()===t)return i}gat(t){for(const s of t){const i=this.mat(s);this.pat(i.Get(),s)}if(this.QQ()){const e=this.fW()-this.KP();this.cW(e);for(const n of this.iQ)n.Hst(e);this.mtt(0)}else{const r=this.KP();this.cW(r);for(const h of this.iQ)h.Hst(r);this.mtt(r)}this.gtt()}yat(t,s){const i=this.mat(s),e=i.vst(),n=i.Wit(),r=e.srt(n);r.uW(this.fW()),r.Net(t),r.Oet(t)}wat(t){this.Zc=t}FW(){return this.Zc}Sat(t){this.iat=t}vat(){return this.iat}AW(t){this.sat=t}RW(){return this.sat}ntt(){if(this.nat)for(const t of this.nat)t(this);if(!this.mZ())for(const s of this.iQ)s.Sit()}htt(){this.vQ=this.Xc.ott()}yZ(){if(!this.MQ&&(this.MQ=!0,this.eat))for(const t of this.eat)t(this)}uW(t){this.bat(),super.uW(t)}btt(t){(t=m.le(t)?t:this.fW())<0?this.lQ=0:t>=this.fW()?this.lQ=this.fW():this.lQ=t,this.Iit.xtt()}aZ(t){if(!this.gZ()&&"current-state"===this.vat())for(const s of this.iQ)s.wit();super.aZ(t)}oW(t=!1){if(super.oW(t),!this.mZ())for(const s of this.iQ)s.yit()}Kf(t=!0,s=!1){this.bat(),super.Kf(t,s)}bat(){for(const t of this.iQ){const s=t=>{const s=t.KP(),i=this.fW();return 0!==s&&s!==i};t.pit(s),t.git(s)}}aY(){if(!this.rW()){const t=this.EW();if(t&&t.mN().uz())return!1;this.tQ.nZ(this),this.Itt()}return!0}fZ(n,t,s){if(this.rst||(this.rst=this.EW()),!this.rst||this.rst.Fj())this.oW(!0),this.htt();else{const i=this.rst.bO();if(0!==(n=-1!==i?s*i:n)||0!==this.TQ){this.TQ=n;const r=this.lQ+this.uQ,h=n*this.cQ,o=r+h,a=this.sQ.Att;o<0?(this.lQ=0,this.uQ=-o):a<=o?(this.lQ=a,this.uQ=this.lQ-o):(this.lQ=o,this.uQ=0);let t=!1,s=!1,i=this.pW(),e=this.gW();i||e?i&&!e?0<this.cQ?this.lQ>=a&&(this.btt(0),this.xat(m.Mat.Tween.N$.OnAnyTweenLoop),this.xat(m.Mat.Tween.N$.OnTweensLoop),s=!0):this.lQ<=0&&(this.btt(a),this.xat(m.Mat.Tween.N$.OnAnyTweenLoop),this.xat(m.Mat.Tween.N$.OnTweensLoop),s=!0):!i&&e?0<this.cQ?this.lQ>=a&&(this.mtt(a),this.yW(-1*this.wW()),s=!0,1===this.fQ?this.dQ<this.T6()?(this.dQ++,this.xat(m.Mat.Tween.N$.OnAnyTweenLoop),this.xat(m.Mat.Tween.N$.OnTweensLoop),this.xat(m.Mat.Tween.N$.OnAnyTweenPingPong),this.xat(m.Mat.Tween.N$.OnTweensPingPong),this.fQ=0):(this.xat(m.Mat.Tween.N$.OnAnyTweenPingPong),this.xat(m.Mat.Tween.N$.OnTweensPingPong),t=!0):0===this.fQ&&(this.xat(m.Mat.Tween.N$.OnAnyTweenPingPong),this.xat(m.Mat.Tween.N$.OnTweensPingPong),this.fQ=1)):this.lQ<=0&&(this.mtt(0),this.yW(-1*this.wW()),s=!0,1===this.fQ?this.dQ<this.T6()?(this.dQ++,this.xat(m.Mat.Tween.N$.OnAnyTweenLoop),this.xat(m.Mat.Tween.N$.OnTweensLoop),this.xat(m.Mat.Tween.N$.OnAnyTweenPingPong),this.xat(m.Mat.Tween.N$.OnTweensPingPong),this.fQ=0):(t=!0,this.xat(m.Mat.Tween.N$.OnAnyTweenPingPong),this.xat(m.Mat.Tween.N$.OnTweensPingPong)):0===this.fQ&&(this.xat(m.Mat.Tween.N$.OnAnyTweenPingPong),this.xat(m.Mat.Tween.N$.OnTweensPingPong),this.fQ=1)):i&&e&&(0<this.cQ?this.lQ>=a&&(this.mtt(a),this.yW(-1*this.wW()),s=!0,0===this.fQ&&(this.xat(m.Mat.Tween.N$.OnAnyTweenPingPong),this.xat(m.Mat.Tween.N$.OnTweensPingPong)),1===this.fQ&&(this.xat(m.Mat.Tween.N$.OnAnyTweenLoop),this.xat(m.Mat.Tween.N$.OnTweensLoop),this.xat(m.Mat.Tween.N$.OnAnyTweenPingPong),this.xat(m.Mat.Tween.N$.OnTweensPingPong)),this.fQ++,this.fQ=m.wrap(this.fQ,0,2)):this.lQ<=0&&(this.mtt(0),this.yW(-1*this.wW()),s=!0,0===this.fQ&&(this.xat(m.Mat.Tween.N$.OnAnyTweenPingPong),this.xat(m.Mat.Tween.N$.OnTweensPingPong)),1===this.fQ&&(this.xat(m.Mat.Tween.N$.OnAnyTweenLoop),this.xat(m.Mat.Tween.N$.OnTweensLoop),this.xat(m.Mat.Tween.N$.OnAnyTweenPingPong),this.xat(m.Mat.Tween.N$.OnTweensPingPong)),this.fQ++,this.fQ=m.wrap(this.fQ,0,2))):0<this.cQ?this.lQ>=a&&(this.dQ<this.T6()?(this.dQ++,this.btt(0),this.xat(m.Mat.Tween.N$.OnAnyTweenLoop),this.xat(m.Mat.Tween.N$.OnTweensLoop),s=!0):(this.mtt(a),t=!0)):this.lQ<=0&&(this.dQ<this.T6()?(this.dQ++,this.btt(a),this.xat(m.Mat.Tween.N$.OnAnyTweenLoop),this.xat(m.Mat.Tween.N$.OnTweensLoop),s=!0):(this.mtt(0),t=!0)),t?(this.Iit.Ftt(),this.oW(!0),this.htt()):(this.Iit.Rc(this.lQ,!0,!1,s,this.GQ,!1),this.GQ&&(this.GQ=!1))}}}xat(t){const s=this.EW(),i=s.Gat(m.Mat.Tween);i.PushTriggerTween(this),this.Xc.t4(t,s,i.c6()),i.PopTriggerTween()}Y9(){const t=super.Y9(),s=this.VQ();return Object.assign(t,{tweenDataItemJson:s.Y9(),id:this.Zc,destroyInstanceOnComplete:this.sat,initialValueMode:this.iat})}Z9(t){if(t){const s=this.VQ();s.Z9(t.tweenDataItemJson),super.Z9(t),this.Zc=t.id,this.sat=t.destroyInstanceOnComplete,this.iat=t.initialValueMode,this.aat()}}static IsPlaying(t){return t.IsPlaying()}static xW(t){return t.xW()}static Tat(t){return!!t.gW()&&0===t.KQ()}static _at(t){return!!t.gW()&&1===t.KQ()}static Iat(t){const s=t.runtime.NQ(),i=new m.Oht;if(t.json){i.Z9(t.json.tweenDataItemJson);const e=new m.lht(i,s);return e.Z9(t.json),e}{const n=new m.lht(i,s),r=(m.De(t.Cat)||(t.Cat=[t.Cat]),n.wat(t.id),n.ttt(t.tags),n.Sat(t.initialValueMode),n.AW(t.releaseOnComplete),n.dW(t.loop),n.mW(t.pingPong),n.cW(t.time),n.zQ(0),n.qQ("default"),n.$Q(t.Cat[0].resultMode),n.XQ(t.repeatCount),n.ktt()),h=(r.Ust(t.f6.EN()),r.qQ("default"),r.$Q(t.Cat[0].resultMode),r.Jst(!0),r.qst(t.f6.mN().gF()),t.f6.s6()),o=h.Yst()?h.Xst():t.f6.aD().$p(),a=h.Yst()?h.Kst():t.f6.aD().hm(),l=(r.$st(o),r.Zst(a),r.lit()),u=(l.uW(0),l.IW("noease"),l.Jst(!0),l.ttt(""),r.lit());u.uW(t.time),u.IW("noease"),u.Jst(!0),u.ttt("");for(const c of t.Cat){const f=r.cit(),d=(f.$it(c.sourceId),f.Zit(c.sourceArgs),f.iet(c.property),f.ret(c.type),f.uet(NaN),f.fet(NaN),f.qQ("default"),f.$Q(c.resultMode),f.Jst(!0),f.Ret()),p=(d.het(c.valueType),d.uW(0),d.IW(c.ease),d.Jst(!0),d.Net(c.startValue),d.Oet(c.startValue),f.Ret());p.het(c.valueType),p.uW(t.time),p.IW(c.ease),p.Jst(!0),p.Net(c.endValue),p.Oet(c.endValue),f.WQ()}return n}}static Ust(t,s){if(!isNaN(s))for(const i of t.NZ())i.Ust(s)}Eat(t,s){return this.rat||(this.rat=m.tr(self.TW,this,t,s)),this.rat}}}{const jh=self.Os;jh.oat=class extends jh.kQ{constructor(t,s){super(t,s),this.Pat=null,this.Rat=null}static tM(t,s){return jh.tr(jh.oat,t,s)}Aat(){1===this.mst.length?this.Pat=this.mst[0]:(this.Pat=this.mst[0],this.Rat=this.mst[1])}gst(){for(const t of this.sst.vst().Sst())this.mst.push(jh.Fat.tM(this,t));this.Aat()}cit(){const t=this.sst.vst(),s=t.dit(),i=jh.Fat.tM(this,s);return this.mst.push(i),this.Aat(),i}aZ(){if(this.Mst(),this.Gst()||!this.UQ()){const t=this.xst(),s=t.QQ(),i=s?0:this.Vst();for(const n of this.mst)n.aZ(i),0===this.yst&&1===n.sit()&&(this.yst=1),0===this.vY&&1===n.lZ()&&(this.vY=1);this.wst=0;const e=this.mst.some(t=>t.Rtt());e&&(this.wst=1),this.cst=this.iit(i),this.ast=!1,this.lst=!1,this.Rc(i)}}Ott(){}Rc(t,s=0,i=!1,e=!1,n,r=!1,h=!1){if(this.rst||this.EW(),this.rst){const o=!this.rst.Fj();return o&&(!r||!this.mN().uz())&&((this.Rat?(this.Pat.Rc(t,i,e,h),this.Rat):this.Pat).Rc(t,i,e,h),void(0!==this.Pat.sit()&&(this.hst||(this.hst=this.rst.aD()),this.hst)&&this.hst.P4()))}}Ltt(){}Z9(t){super.Z9(t),this.Aat()}}}{const Uh=self.Os;Uh.Fat=class extends Uh.bst{constructor(t,s){super(t,s),this.Oat=!1}static tM(t,s){return Uh.tr(Uh.Fat,t,s)}Rc(t,s=!1,i=!1,e=!1){let n,r;if(this.Oat)n=this.Rit[0],r=this.Rit[1];else{if(s)n=this.Eit.yet(t,this.Cit);else{if(this.Oit){const h=this.xst(),o=this.Oit.UZ(),a=this.Oit.KP(),l=o?o.KP():h.fW();(t<=a||l<=t)&&(this.Oit=this.Eit.yet(t,this.Cit))}else this.Oit=this.Eit.yet(t,this.Cit);n=this.Oit}r=n.UZ()}this.Pit.Rc(t,n,r,s,i,e)}Ret(){const t=this.Cit.Fit(),s=t.Aet();return this.Oit=null,this.Oat=this.det().length<=2,s}git(t){this.Oit=null;const s=this.Cit.Fit();s.Fet(t),this.Oat=this.det().length<=2}Y9(){return{sourceAdapterJson:this.WQ().Y9(),basic:this.Oat}}Z9(t){t&&(this.WQ().Z9(t.sourceAdapterJson),this.Oat=t.basic)}}}{const Vh=self.Os,Hh=self.ec;Vh.Ac=class extends Vh.Kn{constructor(t,s=!0){super(),this.rr=t[0],this.Dat=t[2],this.Lat=[];for(const i of t[1]){const e=Vh.kat.tM(this,i);this.Lat.push(e)}for(let t=0;t<this.Lat.length;t++){const n=this.Lat[t],r=this.Lat[t+1],h=this.Lat[t-1];n.xot(r),n.Lot(h)}this.Nat=new Map,this.Bat=new Map,this.Wat(),s&&Hh.Oc(this.rr,(t,s,i,e)=>this.Rc(t,s,i,e),null,{transition:this})}static tM(t){return Vh.tr(Vh.Ac,t)}ir(){for(const t of this.Lat)t.ir();Vh.Rh(this.Lat),this.Lat=null,this.Nat.clear(),this.Nat=null,this.Bat.clear(),this.Bat=null}Fc(t){this.Dat=!!t}jat(t){const s=this.Bat.get(t);if(s)return s;for(const i of this.Lat)if(i.Uat()===t)return this.Bat.set(t,i),i}Vat(s){for(let t=this.Lat.length-1;0<=t;t--){const i=this.Lat[t],e=i.Uat();if(e<=s){let t=i;if(e<s)return t;if(e===s){for(;t;){const n=t.VZ();if(!n)break;if(n.Uat()!==t.Uat())break;t=n}return t}}}}Rc(t,s,i,e){let n=t/e;if(this.Dat){const w=this.jat(0),S=this.jat(1),v=s+(s+i)*w.Hat(),b=(s+i)*S.Hat(),x=b-v;return 0===e?v+x:Hh.Lc(t,v,x,e)}0===e&&(n=1);let r=this.Vat(n),h=r.UZ();if(!h){const M=r.VZ(),G=r;r=M,h=G}const o=h.Uat()-r.Uat(),a=Vh.hr(n,r.Uat(),h.Uat(),0,o);if(r.zat()||0==o){const T=s+(s+i)*r.Hat(),_=(s+i)*h.Hat(),I=_-T;return 0==o?1===a?T+I:T:Hh.Lc(a,T,I,o)}let l=r.Uat(),u=r.Hat(),c=r.Uat()+r.Jat(),f=r.Hat()+r.qat(),d=h.Uat()+h.$at(),p=h.Hat()+h.Xat(),m=h.Uat(),g=h.Hat(),y=Hh.vc("spline")(a,l,u,c,f,d,p,m,g,this.Nat.get(r));return(1-(y+=r.Hat()))*s+y*(s+i)}Wat(){this.Nat.clear();for(let t=0;t<this.Lat.length-1;t++){const s=this.Lat[t];if(s.Eht()){const i=s,e=this.Lat[t+1];if(e.Pht()){const n=i.Uat(),r=i.Uat()+i.Jat(),h=e.Uat()+e.$at(),o=e.Uat();this.Nat.set(i,Hh.kc(n,r,h,o))}}}}}}{const zh=self.Os;zh.kat=class extends zh.Kn{constructor(t,s){super(),this.Yat=t,this.Zat=s[0],this.Kat=s[1],this.Qat=s[2],this.tlt=s[3],this.slt=s[4],this.ilt=s[5],this.Jot=s[6],this.$ot=s[7],this.elt=s[8],this.bot=null,this.Oot=null}ir(){this.Yat=null}static tM(t,s){return zh.tr(zh.kat,t,s)}xot(t){this.bot=t}UZ(){return this.bot}Lot(t){this.Oot=t}VZ(){return this.Oot}Uat(){return this.Zat}Hat(){return this.Kat}Jat(){return this.Qat}qat(){return this.tlt}$at(){return this.slt}Xat(){return this.ilt}Eht(){return this.Jot}Pht(){return this.$ot}zat(){return"linear"===this.elt}nlt(){return"cubic"===this.elt}}}{const Jh=self.Os;Jh.rlt=class extends Jh.Kn{constructor(t){super(),this.Xc=t,this.hlt=[]}ir(){for(const t of this.hlt)t.ir();Jh.Rh(this.hlt),this.hlt=null}tM(t){this.hlt.push(Jh.Ac.tM(t))}}}{const qh=self.Os;qh.olt=class extends qh.Kn{constructor(t){super(),this.Xc=t,this.llt=null,this.ult=null,this.cY=t=>this.fY(t.f6)}ir(){if(this.bY(),this.llt){for(const t of this.llt.values())t.clear();this.llt.clear()}this.llt=null,this.Xc=null}tM(t){if(this.llt||(this.llt=new Map),t){const s=t[0][16],i=s[0],e=t[1],n=(this.llt.has(e)||this.llt.set(e,new Map),this.llt.get(e));n.set(i,t)}}xY(){const t=this.Xc.Rf();t&&t.addEventListener("instancedestroy",this.cY)}bY(){const t=this.Xc.Rf();t&&t.removeEventListener("instancedestroy",this.cY)}clt(){return!!this.llt&&0!==this.llt.size}flt(t,s){let i;if(i=t instanceof qh.dlt?t.gF():t,this.llt.has(i)){const e=this.llt.get(i).get(s);return e?JSON.parse(JSON.stringify(e)):void 0}}plt(t,s){this.ult||(this.ult=new WeakMap),this.ult.has(t)||this.ult.set(t,s)}mlt(t){if(!this.ult)return"";const s=this.ult.get(t);return s||""}fY(t){this.ult&&this.ult.has(t)&&this.ult.delete(t)}}}{const $h=self.Os;$h.glt=class{constructor(t){this.Xc=t,this.ylt=new $h.wlt}ir(){this.ylt.ir(),this.ylt=null,this.Xc=null}ED(){return this.Xc}tM(t){this.ylt.tc(t)}Slt(t){return this.ylt.Ks(t)}vlt(){return this.ylt.vlt()}}}{const x=self.Os;x.blt=class{constructor(t,s,i,e,n,r,h){this.Xc=n.ED(),this.xlt=n,this.Mlt=t,this.Glt=i,this.Tlt=e,this.Lg=s,this.zX=r,this._lt=h??r.EW().EN(),this.Ilt(),this.Clt=this.Plt?.Elt()??-1,this.Rlt=[],this.Alt=null,this.Flt=NaN,this.Olt=null,this.Dlt=null,this.Llt=null,this.klt="",this.Nlt=null,this.Blt="",this.Wlt="",this.jlt=0,this.Ult=!1,this.wQ=!1}ir(){this.wQ||(x.Rh(this.Rlt),this.Rlt=null,this.Xc=null,this.xlt=null,this.Tlt=null,this.zX=null,this.Alt=null,this.Flt=NaN,this.Olt&&this.Olt.clear(),this.Olt=null,this.Dlt=null,this.Llt=null,this.klt="",this.Nlt=null,this.Blt="",this.Wlt="",this.wQ=!0)}er(){return this.wQ}Vlt(){return this.xlt}ED(){return this.Xc}jc(){return this.Mlt}Hlt(){return this.Tlt}nW(){return this.Lg}DY(){return this.zX||(this.zX=this.Xc.eD(this._lt).s6()),this.zX}zlt(){return this.Jlt(this.Clt)}qlt(){const t=this.zlt();return t?t.nW():""}$lt(){const t=this.zlt();return t?t.SW():[]}Xlt(t){const s=this.$lt();if(!s)return!1;if(!s.length)return!1;const i=x.blt.stt(t);return!(!i||!i.length)&&i.every(x.blt.ett,s)}Ylt(t,s){const i=this.$lt();if(!i)return!1;if(!i.length)return!1;const e=x.blt.stt(t);return!(!e||!e.length)&&e.every(t=>x.blt.Zlt.call(i,t,s))}static ett(t){return""===t?1===this.length&&""===this[0]:this.map(t=>t.trim().toLowerCase()).includes(t.trim().toLowerCase())}static stt(t){return t.trim().split(" ")}static Zlt(s,i){return""===s?1===this.length&&""===this[0]:this.some(t=>x.compare(t.trim(),i,s.trim()))}Klt(t){const s=this.zlt();if(s){if(x.le(t)){const i=s.Qlt(),e=i?i[t]:void 0;if(x.le(e))return this.Jlt(e)}if("string"==typeof t)for(const n of s.Qlt()){const r=this.Jlt(n);if(r.lW(t))return this.Jlt(r.Elt())}}}tut(t){const s=this.Klt(t);return s?s.nW():""}sut(t){const s=this.Klt(t);return s?s.SW():""}iut(t){const s=this.zlt();if(!s)return-1;const i=s.Qlt();if(!i)return-1;const e=this.Klt(t);return e?i.indexOf(e.Elt()):-1}eut(){const t=this.zlt();if(!t)return 0;const s=t.Qlt();return s?s.length:0}Jlt(t){return this.Tlt.Jlt(t)}Kf(){const t=this.nut();t.rut(!0)}rut(t){if(this.hut()){for(const[s,i]of this.hut().entries())i.rut(!1);this.hut().clear()}if(this.Olt=null,this.Alt=null,this.out=null,this.Dlt=null,this.klt="",this.Nlt=null,this.Blt="",this.Wlt="",this.Rlt=[],t){this.xlt.aut(this);const e=this.Plt.Elt();e!==this.Clt&&this.lut(e)}else this.Clt=this.Plt.Elt()}uut(){const t=this.Tlt.Jlt(this.Clt);return t?t.fut().cut():0}dut(t){const s=this.mut(t);return s?s.jc():""}gut(t){let s;return x.le(t)&&(s=this.mut(t)),"string"==typeof t&&(s=this.yut(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),s?s.Qit():""}wut(t){let s;if(x.le(t)&&(s=this.mut(t)),s="string"==typeof t?this.yut(t):s){const i=s.Sut();x.le(i)&&(this.Rlt.push(this.Clt),this.lut(i))}}vut(t){const s=this.Tlt.but(t);if(s){const i=this.Tlt.Jlt(s.Elt());i&&(this.Rlt.push(this.Clt),this.lut(i.Elt()))}}xut(){const t=this.Rlt.pop();x.le(t)?this.lut(t):this.Mut()&&(this.xlt.aut(this.Mut(),!0,!1,!1),this.Mut().lut(this.Gut()),this.nut().Tut(this.Mut()))}_ut(t){const s=this.zlt();if(s){s.Elt();const i=this.Klt(t);i&&(this.Rlt.push(this.Clt),this.lut(i.Elt()))}}Iut(s){if(x.le(s)){const t=this.Tlt.Jlt(this.Clt),i=t.fut().Cut();return!!i[s]}if("string"==typeof s){const e=this.Tlt.Jlt(this.Clt),n=e.fut().Cut();for(let t=0;t<n.length;t++)if(n[t].jc()===s)return!0}return!1}Eut(){this.Ult=!0}Put(){return 0<this.jlt}Rut(){this.jlt++}Aut(){this.jlt--,0===this.jlt&&this.Ult&&this.xlt.Fut(this)}lut(t){const i=this.Clt,s=this.DY().EW();if(this.Rut(),this.xlt.Out(this),this.Xc.t4(x.W$.Flowchart.N$.OnBeforeAnyNodeChange,s),this.Xc.t4(x.W$.Flowchart.N$.OnBeforeTaggedNodeChange,s),this.Xc.t4(x.W$.Flowchart.N$.OnBeforeAnyNodeChangeInFlowchart,s),this.Xc.t4(x.W$.Flowchart.N$.OnBeforeTaggedNodeChangeInFlowchart,s),this.Clt=t,this.Xc.t4(x.W$.Flowchart.N$.OnAnyNodeChange,s),this.Xc.t4(x.W$.Flowchart.N$.OnTaggedNodeChange,s),this.Xc.t4(x.W$.Flowchart.N$.OnAnyNodeChangeInFlowchart,s),this.Xc.t4(x.W$.Flowchart.N$.OnTaggedNodeChangeInFlowchart,s),this.xlt.Dut(),this.Aut(),!this.er()){const e=this.Jlt(this.Clt);if("reference"===e.iG()){const n=e.Lut();if(this.kut(e)){this.Rlt.pop();const r=this.Nut(e),h=(this.xlt.aut(r,!0,!0,!1),r.But(this,i),this.nut());h.Tut(r)}else{const o=e.Wut();if(n){this.Rlt.pop();let s=e.jut();if(s){let t=this.xlt.Uut(s);for(;t;)s=x.N1(s),t=this.xlt.Uut(s)}else{s=n+"-ref";let t=this.xlt.Uut(s);for(;t;)s=x.N1(s),t=this.xlt.Uut(s)}const a=this.xlt.Vut(n,o,s,this.zX,!0),l=(a.But(this,i),this.Hut(e,a),this.nut());a.zut(l),l.Tut(a)}}}}}mut(t){const s=this.Tlt.Jlt(this.Clt);if(!s)return null;const i=s.fut().Cut();if(!i)return null;const e=i[t];return e||null}yut(t){const s=this.Tlt.Jlt(this.Clt);if(!s)return null;const i=s.fut().Jut(t);return i||null}Ilt(s){if("number"==typeof s){let t=this.Jlt(s);t=t||this.Tlt.qut(),this.Plt=t}else{let t=this.Tlt.but(this.Glt);t=t||this.Tlt.qut(),this.Plt=t}}Y9(){return this.Ult?null:{flowchartName:this.Mlt,flowchartTag:this.Lg,startNodeTag:this.Glt,currentNodeId:this.Clt,previousNodeIds:this.Rlt,pluginUID:this.zX.EW().EN(),reference:{previousFlowchartTag:this.Mut()?this.Mut().nW():"",previousStartNodeId:x.le(this.Gut())?this.Gut():NaN,referencesJson:this.$ut(),currentReferenceFlowchartTag:this.Xut()?this.Xut().nW():"",rootFlowchartTag:this.nut()?this.nut().nW():""}}}$ut(){if(!this.Yut())return null;const t=[];for(const[s,i]of this.hut().entries())t.push({flowchartElementId:s.Elt(),flowchartStateTag:i.nW()});return t.length?t:null}Z9(t){if(t){if(this.Mlt=t.flowchartName,this.Lg=t.flowchartTag,this.Glt=t.startNodeTag,this.Clt=t.currentNodeId,this.Rlt=t.previousNodeIds,this._lt=t.pluginUID,t.hasOwnProperty("reference")){const s=t.reference;this.klt=s.previousFlowchartTag,this.Flt=s.previousStartNodeId,this.Nlt=s.referencesJson,this.Blt=s.currentReferenceFlowchartTag,this.Wlt=s.rootFlowchartTag}this.Ilt()}}Mut(){return"string"==typeof this.klt&&this.klt&&(this.Alt=this.xlt.Uut(this.klt),this.klt=""),this.Alt}Gut(){return this.Flt}But(t,s){this.Alt=t,this.Flt=s}Xut(){return"string"==typeof this.Blt&&this.Blt&&(this.Dlt=this.xlt.Uut(this.Blt),this.Blt=""),this.Dlt}Tut(t){this.Dlt=t,this.Dlt===this&&(this.Dlt=null)}nut(){return"string"==typeof this.Wlt&&this.Wlt&&(this.Llt=this.xlt.Uut(this.Wlt),this.Wlt=""),this.Llt||this}zut(t){this.Llt=t}Yut(){return this.Zut(),!!this.Olt}kut(t){return this.Zut(),this.Olt&&this.Olt.has(t)}Zut(){if(this.Nlt){this.Olt&&this.Olt.clear(),this.Olt||(this.Olt=new Map);for(const t of this.Nlt){const s=this.xlt.Uut(t.flowchartStateTag),i=s.Jlt(t.flowchartElementId);this.Olt.set(i,s)}this.Nlt=null}}hut(){return this.Zut(),this.Olt}Nut(t){return this.Zut(),this.Olt.get(t)}Hut(t,s){this.Olt||(this.Olt=new Map),this.Olt.set(t,s)}}}{const Xh=self.Os;Xh.Kut=class{constructor(t){this.Xc=t,this.Qut=new Map,this.tct=null,this.sct=[],this.ict=()=>this.gY(),this.ect=null}ir(){Xh.Rh(this.sct),this.sct=null,this.Qut.clear(),this.Qut=null,this.tct=null,this.Xc=null,this.ect=null}ED(){return this.Xc}Vut(t,s,i,e,n,r){const h=this.Xc.Vlt().Slt(t);if(h){if(!this.Qut.has(i)){const o=new Xh.blt(t,i,s,h,this,e,r);return this.Qut.set(i,o),n&&this.aut(o,!0),o}{const a=this.Qut.get(i);a&&this.Fut(a)}}else console.warn(`[Flowcharts] no flowchart found with name '${t}'`)}Fut(t){if(t.Eut(),!t.Put()){const s=t.nW();this.Qut.delete(s),t.ir(),this.tct===t&&(this.tct=null)}}nct(t){t.Kf()}Uut(t){return this.Qut.get(t)}Out(t){this.sct.push(t)}Dut(){this.sct.pop()}aut(t,s=!1,i=!1,e=!0){if(e){const n=t.Xut();t=n||t}t!==this.tct&&(this.rct(),this.hct(t,s,i))}oct(t){return"string"==typeof t?this.Uut(t):this.sct.length?this.sct[this.sct.length-1]:this.tct}rct(){if(this.tct&&!this.tct.er()){const t=this.tct.DY().EW();this.tct.Rut(),this.Out(this.tct),this.Xc.t4(Xh.W$.Flowchart.N$.OnBeforeFlowchartChange,t),this.Dut(),this.tct.Aut()}}hct(t,s=!1,i=!1){if(this.tct=t,this.tct&&!this.tct.er()){const e=this.tct.DY().EW();this.tct.Rut(),this.Out(this.tct),this.Xc.t4(Xh.W$.Flowchart.N$.OnFlowchartChange,e),!0!==i&&"number"!=typeof i||this.tct.Ilt(i),s&&(this.Xc.t4(Xh.W$.Flowchart.N$.OnAnyNodeChange,e),this.Xc.t4(Xh.W$.Flowchart.N$.OnTaggedNodeChange,e)),this.Dut(),this.tct.Aut()}}Y9(){return{flowchartJsonObjects:[...this.Qut.values()].map(t=>t.Y9()),currentFlowchartTag:this.tct?this.tct.nW():null}}Z9(t){if(t){this.ect=t;const s=new Map;for(const i of this.ect.flowchartJsonObjects){const e=i.flowchartTag;if(this.Qut.has(e)){const n=this.Qut.get(e);n.Z9(i),s.set(e,n)}else{const r=this.Vut(i.flowchartName,i.startNodeTag,i.flowchartTag,null,!1,i.pluginUID);r.Z9(i),s.set(i.flowchartTag,r)}}for(const[h,o]of this.Qut.entries())s.has(h)||o.ir();this.Qut.clear(),this.Qut=s,this.Xc.P$()?this.Xc.Rf().addEventListener("afterload",this.ict):this.gY()}}gY(){this.Xc.Rf().removeEventListener("afterload",this.ict);const t=this.Qut.get(this.ect.currentFlowchartTag);t&&this.aut(t,!0),this.ect=null}}}{const Yh=self.Os;Yh.wlt=class{constructor(){this.lct=new Map}ir(){for(const t of this.lct.values())t.ir();this.lct.clear(),this.lct=null}tc(t){const s=new Yh.uct(t),i=s.jc();this.lct.set(i,s)}Ks(t){return this.lct.get(t)}vlt(){return!!this.lct.size}static cct(t,s,i,e){if(s)for(const n of s){const r=new i(n,e);t.push(r)}}}}{const Zh=self.Os;Zh.uct=class{constructor(t){this.rr=t[0],this.fct=new Zh.dct(t[1],this)}ir(){this.fct.ir(),this.fct=null}pct(){return this.fct}Jlt(t){return this.fct.Jlt(t)}but(t){return this.fct.but(t)}qut(){return this.fct.qut()}jc(){return this.rr}}}{const Kh=self.Os;class Qh{constructor(t,s){this.fct=s,this.nf=t[7],this.mct=t[0],this.Lg=t[1],this.Lg?this._Q=this.Lg.trim().split(" ").map(t=>t.trim()):this._Q=[],this.gct=t[2],this.yct=null,this.wct=null,"dictionary"===this.nf&&(this.yct=t[3],this.wct=t[4]),this.Sct=t[6],this.vct=null,this.bct=null,this.xct=null,"reference"===this.nf&&(this.vct=t[8],this.bct=t[9],this.xct=t[10]),this.Mct=new Kh.Gct(t[5],this)}ir(){this.fct=null}pct(){return this.fct}fut(){return this.Mct}Elt(){return this.mct}nW(){return this.Lg}SW(){return this._Q}lW(t){if(!this._Q)return!1;if(!this._Q.length)return!1;const s=Kh.blt.stt(t);return!(!s||!s.length)&&s.every(Kh.blt.ett,this._Q)}Tct(){return this.Sct}Qlt(){return this.gct}_ct(){return this.yct}Ict(){return this.wct}iG(){return this.nf}Lut(){return this.vct}Wut(){return this.bct}jut(){return this.xct}}Kh.dct=class{constructor(t,s){this.Tlt=s,this.Cct=[],this.Ect=new Map,this.Pct=new Map,this.Rct=null,Kh.wlt.cct(this.Cct,t,Qh,this);for(const i of this.Cct){const e=i.Elt(),n=i.nW(),r=i.SW(),h=i.Tct();if(this.Ect.set(e,i),n)for(const a of r)this.Pct.has(a)||this.Pct.set(a,new Set),this.Pct.get(a).add(i);h&&(this.Rct=i);const o=i.fut();for(const l of o.Act()){const u=l.Elt();this.Ect.set(u,l)}}}ir(){this.Tlt=null;for(const t of this.Cct)t.ir();Kh.Rh(this.Cct),this.Cct=null}Hlt(){return this.Tlt}Jlt(t){return this.Ect.get(t)}but(t){if(!t||!t.length)return null;const i=[];for(const e of t.trim().split(" ")){let t=this.Pct.get(e.trim())??new Set;if(0===t.size)return null;i.push(t)}const s=i.reduce((t,s)=>s.size<t.size?s:t);return[...s].filter(s=>i.every(t=>t.has(s)))[0]}qut(){return this.Rct}*Fct(){for(const t of this.Cct)yield t}}}{const to=self.Os;class so{constructor(t,s){this.Mct=s,this.mct=t[0],this.rr=t[1],this.pnt=t[2],this.Oct=t[3]}ir(){this.Mct=null}fut(){return this.Mct}Elt(){return this.mct}jc(){return this.rr}Qit(){return this.pnt}Sut(){return this.Oct}}to.Gct=class{constructor(t,s){this.Dct=s,this.Lct=[],this.kct=new Map,to.wlt.cct(this.Lct,t,so,this);for(const i of this.Lct)this.kct.set(i.jc(),i)}ir(){this.Dct=null;for(const t of this.Lct)t.ir();to.Rh(this.Lct),this.Lct=null}Nct(){return this.Dct}cut(){return this.Lct.length}Cut(){return this.Lct}Jut(t){return this.kct.get(t)}*Act(){for(const t of this.Lct)yield t}}}{const io=self.Os;io.Bct=class extends io.Kn{constructor(t){super(),this.Wct=t,this.jct=[],this.jct.push(io.tr(io.Uct,this)),this.Dg=0,this.Vct=this.jct[0]}ir(){for(const t of this.jct)t.ir();io.Rh(this.jct),this.Vct=null,this.Wct=null}mN(){return this.Wct}xk(){return this.Vct}Hct(){return this.jct[this.Dg-1]}Clear(){this.xk().Clear()}zct(){const t=this.jct,s=++this.Dg;if(s===t.length){const i=io.tr(io.Uct,this);t.push(i),this.Vct=i}else{const e=t[s];e.Kf(),this.Vct=e}}Jct(){const t=this.jct,s=++this.Dg,i=(s===t.length&&t.push(io.tr(io.Uct,this)),t[s]);i.y0(t[s-1]),this.Vct=i}O8(){this.Vct=this.jct[--this.Dg]}qct(i){const e=this.jct;for(let t=0,s=e.length;t<s;++t)e[t].qct(i)}}}{const eo=self.Os;eo.Uct=class extends eo.Kn{constructor(t){super(),this.jct=t,this.Wct=this.jct.mN(),this.$ct=this.Wct.ED().hO(),this.Xct=!0,this.vH=[],this.Yct=[]}ir(){this.Zct(),this.jct=null,this.Wct=null,this.$ct=null}Zct(){eo.Rh(this.vH),eo.Rh(this.Yct)}mN(){return this.Wct}Kct(){return this.Xct}Qct(){return this.Xct?!!this.Wct.Gk():!!this.vH.length}bk(){return this.Xct?this.Wct.bk():this.vH}tft(){return!!this.Yct.length}ift(){return this.Yct}eft(){const t=this.bk();return t.length?t:this.Yct}Kf(){this.Xct=!0,eo.Rh(this.Yct)}Clear(){this.Xct=!0}y0(t){t.Kct()?this.Kf():(this.Xct=!1,eo.Dh(this.vH,t.vH),eo.Rh(this.Yct))}nft(t){this.vH.push(t)}rft(t){this.Yct.push(t)}hft(t){this.Xct=!!t}oft(){return this.vH}aft(){return this.Yct}lft(t){this.Xct=!1,eo.Rh(this.vH),this.vH.push(t)}uft(t){this.Xct=!1,eo.Dh(this.vH,t)}cft(t){this.Xct=!1,eo.Rh(this.vH);for(const s of t)this.vH.push(s)}fft(t,s){for(const i of s)t.has(i)||this.Yct.push(i)}dft(t){for(const s of t)this.vH.push(s);eo.Wh(this.Yct,t)}pft(){eo.Rh(this.Yct)}mft(t){if(t)if(this.$ct.b8().QF().gft()){this.Kct()&&(eo.Rh(this.vH),eo.Dh(this.Yct,t.mN().bk()),this.Xct=!1);const s=this.Yct.indexOf(t);-1!==s&&(this.vH.push(this.Yct[s]),this.Yct.splice(s,1))}else this.lft(t)}qct(t){eo.Wh(this.vH,t),eo.Wh(this.Yct,t)}}}{const no=self.Os;no.yft=class extends no.Kn{constructor(t){super(),this.wft=t,this.Xc=this.wft.ED(),this.jct=[],this.jct.push(no.tr(no.Sft,this,null)),this.Dg=0,this.vft=[]}ir(){for(const t of this.jct)t.ir();no.Rh(this.jct),no.Rh(this.vft),this.wft=null,this.Xc=null}qF(){return this.wft}ED(){return this.Xc}b8(){return this.jct[this.Dg]}bft(){return this.jct}xft(){return this.Dg}x8(t){const s=this.jct,i=++this.Dg;if(i===s.length){const e=no.tr(no.Sft,this,t);return s.push(e),e}{const n=s[i];return n.Kf(t),n}}O8(){--this.Dg}Mft(t){this.vft.push(t)}Gft(){this.vft.pop()}rO(){const t=this.vft;return 0===t.length?null:t.at(-1)}}}{const ro=self.Os;ro.Sft=class extends ro.Kn{constructor(t,s){super(),this.jct=t,this.Xc=this.jct.ED(),this.Tft=s,this._ft=0,this.Ift=0,this.Cft=!1,this.Eft=!1,this.Pft=null,this.Rft=0,this.Aft=0,this.Fft=null}ir(){this.Kf(null),this.jct=null,this.Xc=null}Kf(t){this.Tft=t,this._ft=0,this.Ift=0,this.Cft=!1,this.Eft=!1,this.Fft=null}Oft(t,s){this.Tft=t,this._ft=0,this.Ift=s}Dft(){this._ft=0,this.Ift=0}QF(){return this.Tft}Lft(t){this.Tft=t}kft(){return this._ft}Nft(t){this._ft=t}Bft(){return this.Ift}Wft(t){this.Ift=t}jft(t){this.Cft=!!t}Uft(){return this.Cft}Vft(t){this.Eft=!!t}Hft(){return this.Eft}zft(t){this.Pft=t}Jft(){return this.Pft}qft(t,s){this.Rft=t,this.Aft=s}oO(){return this.Rft}aO(t){this.Aft=t}$ft(){return this.Aft}Xft(){const t=this.Tft;return!!t.Yft()||this._ft<t.Zft()-1&&!!t.v8().length}Kft(t){this.Fft=t}Qft(){return this.Fft}}}{const ho=self.Os;ho.t0t=class extends ho.Kn{constructor(t){super(),this.wft=t,this.Xc=this.wft.ED(),this.jct=[],this.Dg=-1,this.Vct=null,this.s0t=[]}ir(){ho.Rh(this.jct),this.wft=null,this.Xc=null}i0t(t){this.s0t=t;const s=this.s0t.slice(0);this.jct.push(s),this.Dg=0,this.Vct=s}qF(){return this.wft}ED(){return this.Xc}e0t(){return this.Vct}x8(){const t=++this.Dg,s=this.jct;t===s.length?s.push(this.s0t.slice(0)):ho.Dh(s[t],this.s0t),this.Vct=s[t]}O8(){this.Vct=this.jct[--this.Dg]}}}{const oo=self.Os;oo.n0t=class extends oo.Kn{constructor(t){super(),this.wft=t,this.Xc=this.wft.ED(),this.jct=[],this.Dg=-1}ir(){oo.Rh(this.jct),this.wft=null,this.Xc=null}qF(){return this.wft}ED(){return this.Xc}r0t(){return 0<=this.Dg}e0t(){return this.jct[this.Dg]}x8(){if(++this.Dg,this.Dg===this.jct.length){const t=oo.tr(oo.h0t,this);return this.jct.push(t),t}{const s=this.jct[this.Dg];return s.Kf(),s}}O8(){--this.Dg}o0t(s){const i=this.jct;for(let t=this.Dg;0<=t;--t){const e=i[t];if(e.jc()===s)return e}return null}a0t(){return this.jct.slice(0,this.Dg+1)}}}{const ao=self.Os;ao.h0t=class extends ao.Kn{constructor(t){super(),this.l0t=t,this.rr="",this.Dg=0,this.u0t=!1,this.c0t=NaN}Kf(){this.rr="",this.Dg=0,this.u0t=!1,this.c0t=NaN}G8(t){this.rr=t}jc(){return this.rr}P8(t){this.Dg=t}gF(){return this.Dg}oW(){this.u0t=!0}F8(){return this.u0t}f0t(t){this.c0t=t}d0t(){return this.c0t}}}{const lo=self.Os;lo.p0t=class extends lo.Kn{constructor(){super(),this.jct=[],this.Dg=-1}ir(){lo.Rh(this.jct)}e0t(){return this.jct[this.Dg]}x8(){if(++this.Dg,this.Dg!==this.jct.length)return this.jct[this.Dg];{const t=[];return this.jct.push(t),t}}O8(){--this.Dg}}}{let t=function(t,s){return t.gF()-s.gF()},r=function(i,e){for(let t=0,s=i.length;t<s;++t)if(i[t]!==e[t])return!1;return!0};t,r;const M=self.Os;M.m0t=class extends M.Kn{constructor(t){super(),this.Xc=t,this.g0t=[],this.y0t=new Map,this.w0t=[],this.S0t=new Map,this.v0t=new Map,this.b0t=new Map,this.x0t=new Map,this.M0t=new Map,this.G0t=new Map,this.T0t=0,this._0t=[],this.I0t=[],this.C0t=[],this.E0t=new Map,this.P0t=new Map,this.$ct=M.tr(M.yft,this),this.R0t=M.tr(M.t0t,this),this.l0t=M.tr(M.n0t,this),this.A0t=[],this.F0t=[],this.O0t=[],this.D0t=0,this.L0t=0,this.k0t=0,this.N0t=[],this.B0t=[],this.W0t=[],this.j0t=new Map,this.U0t=new Map,self.c3_callFunction=(t,s)=>this.V0t(t,s)}ir(){this.K$(),this.$ct.ir(),this.$ct=null,this.R0t.ir(),this.R0t=null,M.Rh(this.F0t),M.Rh(this.O0t),this.Xc=null,M.Rh(this.g0t),this.y0t.clear()}tM(t){const s=M.tr(M.H0t,this,t);this.g0t.push(s),this.y0t.set(s.jc().toLowerCase(),s)}z0t(t){this.A0t.push(t)}J0t(){for(const t of this.P0t.values())t.q0t();for(const s of this.E0t.values())s.J0t();for(const i of this.P0t.values())i.J0t();for(const e of this.g0t)e.J0t();for(const n of this.g0t)n.S$();for(const r of this.A0t)r.J0t(!1);M.Rh(this.A0t),this.R0t.i0t(this.C0t)}ED(){return this.Xc}w$(t){return this.y0t.get(t.toLowerCase())||null}$0t(t){this.w0t.push(t),this.S0t.set(t.X0t(),t)}Y0t(t){this.v0t.set(t.Az(),t)}Z0t(t){this.b0t.set(t.Az(),t)}K0t(t){this.x0t.set(t.Az(),t)}Q0t(t){switch(t.tdt()){case 0:this.E0t.set(t.sdt().toLowerCase(),t);break;case 1:this.P0t.set(t.sdt().toLowerCase(),t)}}idt(t){this.G0t.set(t.Az(),t),(t.uz()?this._0t:this.I0t).push(t)}edt(i){2<=i.length&&i.sort(t);let e=this.M0t.get(i.length);e||(e=[],this.M0t.set(i.length,e));for(let t=0,s=e.length;t<s;++t){const n=e[t];if(r(i,n))return n}return e.push(i),i}ndt(t){return this.C0t.push(t.rdt()),this.T0t++}hO(){return this.$ct}hdt(){return this.hO().b8()}QF(){return this.hdt().QF()}odt(){const t=this.hdt(),s=t.QF();return s.adt(t.kft())}ldt(){const t=this.hdt(),s=t.QF();return s.udt(t.Bft())}cdt(){return this.R0t}M8(){return this.l0t}fdt(t){const s=[];for(t=t.ddt();t;)M.Vn(s,t.pdt()),t=t.ddt();return s}mdt(t){const s={};for(const i of this.fdt(t))s[i.gdt()]=i.ydt();return Object.create(Object.prototype,s)}wdt(t){return this.G0t.get(t)||null}Sdt(t){return this.v0t.get(t)||null}vdt(t){return this.b0t.get(t)||null}bdt(t){return this.x0t.get(t)||null}$F(t){return this.E0t.get(t.toLowerCase())||null}xdt(t,s){let i=this.P0t.get((t.jc()+"."+s).toLowerCase());if(i)return i;if(!t.Gz())for(const e of t.Mdt())if(i=this.P0t.get((e.jc()+"."+s).toLowerCase()))return i;return null}Gdt(){return this._0t}Tdt(){return this.I0t}_dt(t){for(const s of this._0t)s.Idt();if(t)for(const i of this.I0t)i.Xb()&&i.Idt()}Cdt(t){return this.S0t.get(t.toLowerCase())||null}Edt(t){const s=this.v0t.get(t);return s&&s.Pdt()?s:null}Rdt(){return this.w0t}Adt(){for(const t of this.w0t)t.Fdt()}Odt(){for(const t of this.g0t)t.Ddt()}Ldt(t){this.Odt(),this.D0t++;for(const s of t.kX()){const i=s.Jq();i&&(this.Xc.kdt(s),i.S_(),this.Xc.Ndt())}this.D0t--}async Bdt(t){this.Odt(),this.D0t++;for(const s of this.Wdt(t))await this.Xc.jdt(s);this.D0t--}*Wdt(t){for(const s of t.kX()){const i=s.Jq();i&&(this.Xc.kdt(s),yield*i.Udt(),this.Xc.Ndt())}}Vdt(t,s,i,e){let n=!1;if(!t.WO())return this.Hdt(s,i,e);this.L0t++;for(const r of t.kX()){const h=r.Jq();if(h){this.Xc.kdt(r);for(const a of h.zdt()){const l=a.Vdt(s,i,e);n=n||l}const o=h.Vdt(s,i,e);n=n||o,this.Xc.Ndt()}}return this.L0t--,n}*Jdt(t,s,i,e){let n=!1;if(!t.WO())return this.Hdt(s,i,e);this.L0t++;for(const r of t.kX()){const h=r.Jq();if(h){this.Xc.kdt(r);for(const a of h.zdt()){const l=yield*a.Jdt(s,i,e);n=n||l}const o=yield*h.Jdt(s,i,e);n=n||o,this.Xc.Ndt()}}return this.L0t--,n}Hdt(t,s,i){return this.F0t.push([t,s,i]),!1}qdt(t,s,i){let e=null,n=new Promise(t=>e=t);return this.O0t.push([t,s,i,e]),n}*$dt(){if(this.Xc.Xdt())throw new Error("should not be in breakpoint");const t=this.Xc.VO();for(;this.O0t.length;){const[s,i,e,n]=this.O0t.shift(),r=yield*this.Jdt(t,s,i,e);n(r)}}async Ydt(){for(const t of this.$dt())await this.Xc.jdt(t)}Zdt(t,i,e,n){let r=!1,s=t.WO(),h=s.Jq();if(h){this.L0t++,this.Xc.kdt(s);const o=h.zdt();for(let t=0,s=o.length;t<s;++t){const l=o[t].Zdt(i,e,n);r=r||l}const a=h.Zdt(i,e,n);return r=r||a,this.Xc.Ndt(),this.L0t--,r}}*Kdt(t,i,e,n){let r=!1,s=t.WO(),h=s.Jq();if(h){this.L0t++,this.Xc.kdt(s);const o=h.zdt();for(let t=0,s=o.length;t<s;++t){const l=yield*o[t].Kdt(i,e,n);r=r||l}const a=yield*h.Kdt(i,e,n);return r=r||a,this.Xc.Ndt(),this.L0t--,r}}Qdt(){return this.L0t}t1t(){return 0<this.Qdt()}s1t(){return++this.L0t}i1t(){--this.L0t}e1t(){return 0<this.D0t}Pk(){return this.e1t()||this.t1t()}j$(t){for(const[s,i,e]of this.F0t)this.Vdt(t,s,i,e);M.Rh(this.F0t)}Ck(t){t?this.k0t++:this.k0t--}MN(){return 0<this.k0t}n1t(i){for(let t=0,s=i.length;t<s;++t)i[t].r1t().Clear()}h1t(i){for(let t=0,s=i.length;t<s;++t)i[t].r1t().zct()}I8(i){for(let t=0,s=i.length;t<s;++t)i[t].r1t().Jct()}E8(i){for(let t=0,s=i.length;t<s;++t)i[t].r1t().O8()}tO(s){const i=new Set,e=this.$ct.bft(),n=this.$ct.xft();for(let t=0;t<=n;++t){const r=e[t].Qft();if(r)for(const h of r)s&&s.has(h)||i.add(h)}return i}o1t(t){const s=new Set([...t]),i=this.tO(s);if(0<i.size){for(const e of i)e.r1t().zct();return[...i]}return null}a1t(){const t=M.tr(M.l1t,this);return this.N0t.push(t),t}u1t(){return this.N0t}c1t(){if(this.N0t.length){let i=this.hdt(),e=!1;this.D0t++;for(let t=0,s=this.N0t.length;t<s;++t){const n=this.N0t[t];n.f1t()&&n.d1t(i),n.p1t()&&(e=!0)}e&&(this.m1t(),i.Kf(null)),this.D0t--}}async g1t(){if(this.N0t.length){let i=this.hdt(),e=!1;this.D0t++;for(let t=0,s=this.N0t.length;t<s;++t){const n=this.N0t[t];n.f1t()&&await n.y1t(i),n.p1t()&&(e=!0)}e&&(this.m1t(),i.Kf(null)),this.D0t--}}m1t(){const t=M.Bh(this.N0t,t=>t.p1t());for(const s of t)s.ir()}K$(){for(const t of this.N0t)t.ir();M.Rh(this.N0t)}w1t(t){for(const s of this.N0t)s.qct(t);for(const i of t){const e=this.U0t.get(i);if(this.U0t.delete(i),e)for(const{resolve:n}of e.S1t.values())n(!0)}}v1t(t){this.B0t.push({promise:t,b1t:this.Qdt()})}x1t(){M.Rh(this.B0t)}M1t(){const s=this.Qdt();this.B0t=this.B0t.filter(t=>t.b1t<=s)}G1t(){const t=Promise.all(this.B0t.map(t=>t.promise));return this.B0t=[],t}lO(t){const s=t.toLowerCase();this.W0t.push(s),this.Xc.t4(M.W$.B$.N$.T1t,null),this.W0t.pop();for(const e of this.Xc.qF().u1t())e._1t()&&e.I1t()===s&&e.C1t();const i=this.j0t.get(s);i&&(i.resolve(),this.j0t.delete(s))}cO(t){const i=t.toLowerCase(),s=this.j0t.get(i);if(s)return s.promise;{let s=null,t=new Promise(t=>s=t);return this.j0t.set(i,{promise:t,resolve:s}),t}}E1t(){if(0===this.W0t.length)throw new Error("not in a signal");return this.W0t.at(-1)}P1t(t){let s=this.U0t.get(t);return s||(s={R1t:[],S1t:new Map},this.U0t.set(t,s)),s}WN(t,s){const i=this.P1t(t),e=s.toLowerCase();i.R1t.push(e),this.Xc.t4(t.uk().F1t().N$.A1t,t),i.R1t.pop();for(const r of this.Xc.qF().u1t())r.O1t()&&r.I1t()===e&&r.D1t(t);const n=i.S1t.get(e);n&&(n.resolve(!1),i.S1t.delete(e)),0===i.R1t.length&&0===i.S1t.size&&this.U0t.delete(t)}jN(t,s){const i=this.P1t(t),e=s.toLowerCase(),n=i.S1t.get(e);if(n)return n.promise;{let s=null,t=new Promise(t=>s=t);return i.S1t.set(e,{promise:t,resolve:s}),t}}L1t(t){const s=this.P1t(t);if(s&&0!==s.R1t.length)return s.R1t.at(-1);throw new Error("not in a signal")}Y9(){return{groups:this.k1t(),cnds:this.N1t(),acts:this.B1t(),vars:this.W1t(),waits:this.j1t()}}Z9(t){this.U1t(t.groups),this.V1t(t.cnds),this.H1t(t.acts),this.z1t(t.vars),this.J1t(t.waits)}k1t(){const t={};for(const s of this.Rdt())t[s.Az().toString()]=s.q1t();return t}U1t(t){for(const[s,i]of Object.entries(t)){const e=parseInt(s,10),n=this.Edt(e);n&&n.$1t(i)}}N1t(){const t={};for(const[s,i]of this.b0t){const e=i.Y9();e&&(t[s.toString()]=e)}return t}V1t(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[n,r]of this.b0t)r.Z9(s.get(n)||null)}B1t(){const t={};for(const[s,i]of this.x0t){const e=i.Y9();e&&(t[s.toString()]=e)}return t}H1t(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[n,r]of this.x0t)r.Z9(s.get(n)||null)}W1t(){const t={};for(const[s,i]of this.G0t)i.X1t()||!i.uz()&&!i.Xb()||(t[s.toString()]=i.Qit());return t}z1t(t){for(const[s,i]of Object.entries(t)){const e=parseInt(s,10),n=this.wdt(e);n&&n.Net(i)}}j1t(){return this.N0t.filter(t=>!t.Y1t()).map(t=>t.Y9())}J1t(t){this.K$();for(const s of t){const i=M.l1t.Z1t(this,s);i&&this.N0t.push(i)}}K1t(){return[...this.Xc.VO().kX()].map(t=>t.Jq()).filter(t=>t).map(t=>t.Q1t())}tpt(t){for(;t;){const s=t.ddt();if(s instanceof M.spt)return s;t=s}return null}V0t(t,s){Array.isArray(s)||(s=[]);const i=this.$F(t.toLowerCase());if(!i)return null;if(!i.Uu())return i.XF();const e=i.ipt();if(s.length<e.length)for(s=s.slice(0);s.push(e[s.length].rdt()),s.length<e.length;);const n=i.ZF();return n.sO(n.KF(),!1,i.eO(),i.XF(),...s)}}}{const uo=self.Os;uo.H0t=class extends uo.Kn{constructor(t,s){super(),this.wft=t,this.Xc=t.ED(),this.rr=s[0],this.ept=[],this.npt=new Map,this.rpt=new Map,this.hpt=new Map,this.opt=!1,this.apt=[],this.lpt=[],this.upt=new Set;for(const i of s[1])this.cpt(i,null,this.ept);this.fpt=this.Xc.wX()?{type:"sheet",name:this.rr,dpt:0,children:[]}:null}ir(){this.wft=null,this.Xc=null}cpt(t,s,i){switch(t[0]){case 0:case 3:this.ppt(t,s,i);break;case 1:this.mpt(t,s,i);break;case 2:this.gpt(t,s,i);break;case 4:this.ypt(t,s);break;case 5:this.wpt(t,s,i);break;case 6:this.Spt(t,s);break;default:throw new Error("invalid event type")}}ppt(t,s,i){const e=uo.vpt.tM(this,s,t);if(e.gft()){i.push(e);const n=e.bpt();for(let t=0,s=n.length;t<s;++t)n[t].xpt()&&this.Mpt(e,t)}else e.xpt()?this.Mpt(e,0):i.push(e)}ypt(t,s){const i=uo.spt.Gpt(this,s,t);this.wft.Q0t(i)}Spt(t,s){const i=uo.spt.Tpt(this,s,t);this.wft.Q0t(i)}mpt(t,s,i){const e=uo._pt.tM(this,s,t);i.push(e)}gpt(t,s,i){const e=uo.Ipt.tM(this,s,t);i.push(e)}wpt(t,s,i){const e=uo.Cpt.tM(this,s,t);i.push(e)}Mpt(n,r){n.gft()||this.wft.z0t(n);const h=n.adt(r),o=h.Ept(),a=h.mN();if(h.Ppt()){let t=this.rpt.get(a),s=(t||(t=new Map,this.rpt.set(a,t)),h.Rpt().toLowerCase()),i=t.get(o),e=(i||(i=new Map,t.set(o,i)),i.get(s));e||(e=[],i.set(s,e)),e.push([n,r])}else{let t=this.npt.get(a),s=(t||(t={Apt:new Map,Fpt:new Map},this.npt.set(a,t)),h.c6()),i,e=(s?(i=t.Fpt.get(s))||(i=new Map,t.Fpt.set(s,i)):i=t.Apt,i.get(o));e||(e=[],i.set(o,e)),e.push([n,r])}}J0t(){const i=this.ept;for(let t=0,s=i.length;t<s;++t){const e=t<s-1&&i[t+1]instanceof uo.vpt&&i[t+1].Opt();i[t].J0t(e)}}Dpt(t){this.apt.push(t)}S$(){uo.Rh(this.lpt),this.Lpt(this),this.upt.clear()}Lpt(t){const s=t.lpt,i=t.upt;for(const e of this.apt){const n=e.kpt();e.Npt()&&t!==n&&!i.has(n)&&(i.add(n),n.Lpt(t),s.push(n))}}zdt(){return this.lpt}qF(){return this.wft}ED(){return this.Xc}jc(){return this.rr}Bpt(t,s){this.hpt.set(s,t)}Wpt(t){return this.hpt.get(t)||null}Ddt(){this.opt=!1}S_(){if(!this.opt){const t=this.Xc,s=t.jpt(),i=s?performance.now():0,e=(this.opt=!0,this.qF()),n=e.hdt();for(const r of this.ept)r.S_(n),e.n1t(r.v8()),e.x1t(),t.Ak();n.Kf(null),s&&(this.fpt.dpt+=performance.now()-i)}}*Udt(){if(!this.opt){this.opt=!0;const t=this.Xc,s=this.qF(),i=s.hdt();for(const e of this.ept)yield*e.Udt(i),s.n1t(e.v8()),s.x1t(),t.Ak();i.Kf(null)}}Vdt(e,n,r){if(!n)return this.Upt(e,n,null,null);{let t=n.mN(),s=!1,i=this.Upt(e,n,t,r);s=s||i;for(const h of t.Mdt())i=this.Upt(e,n,h,r),s=s||i}}Upt(t,s,i,e){const n=this.npt.get(i);if(!n)return!1;const r=e?n.Fpt.get(e):n.Apt;if(!r)return!1;const h=r.get(t);if(!h)return!1;let o=!1;for(const[a,l]of h){const u=this.Vpt(s,a,l);o=o||u}return o}*Jdt(e,n,r){if(!n)return yield*this.Hpt(e,n,null,null);{let t=n.mN(),s=!1,i=yield*this.Hpt(e,n,t,r);s=s||i;for(const h of t.Mdt())i=yield*this.Hpt(e,n,h,r),s=s||i}}*Hpt(t,s,i,e){const n=this.npt.get(i);if(!n)return!1;const r=e?n.Fpt.get(e):n.Apt;if(!r)return!1;const h=r.get(t);if(!h)return!1;let o=!1;for(const[a,l]of h){let t;t=a.zpt()?this.Vpt(s,a,l):yield*this.Jpt(s,a,l),o=o||t}return o}Zdt(t,s,i){const e=s.mN(),n=this.rpt.get(e);if(!n)return!1;const r=n.get(t);if(!r)return!1;const h=r.get(i);if(!h)return!1;let o=!1;for(let t=0,s=h.length;t<s;++t){const a=h[t],l=this.Vpt(null,a[0],a[1]);o=o||l}return o}*Kdt(t,s,i){const e=s.mN(),n=this.rpt.get(e);if(!n)return!1;const r=n.get(t);if(!r)return!1;const h=r.get(i);if(!h)return!1;let o=!1;for(let n=0,t=h.length;n<t;++n){let t=h[n],s=t[0],i=t[1],e;e=s.zpt()?this.Vpt(null,s,i):yield*this.Jpt(null,s,i),o=o||e}return o}Vpt(t,s,i){let e=this.Xc,n=this.wft,r=n.QF(),h=n.hO(),o=n.Qdt(),a=!1;r&&n.h1t(r.KF()),n.h1t(s.KF());const l=1<o,u=(l&&n.cdt().x8(),h.x8(s));if(t){const f=s.bpt()[i].mN(),d=f.xk();d.lft(t),t.IN()&&t.qpt()}let c=!0;if(s.hB()){const p=s.$pt();for(let t=0,s=p.length;t<s;++t)if(!p[t].Xpt(u)){c=!1;break}}return c&&(s.gft()?s.Ypt(u,i):s.S_(u),a=u.Uft()),h.O8(),l&&n.cdt().O8(),n.E8(s.KF()),r&&n.E8(r.KF()),r||1!==o||(n.x1t(),n.MN())||e.Ak(),a}*Jpt(t,s,i){let e=this.Xc,n=this.wft,r=n.QF(),h=n.hO(),o=n.Qdt(),a=!1;r&&n.h1t(r.KF()),n.h1t(s.KF());const l=1<o,u=(l&&n.cdt().x8(),h.x8(s));if(t){const f=s.bpt()[i].mN(),d=f.xk();d.lft(t),t.IN()&&t.qpt()}let c=!0;if(s.hB()){const p=s.$pt();for(let t=0,s=p.length;t<s;++t)if(!(yield*p[t].Zpt(u))){c=!1;break}}return c&&(s.gft()?yield*s.Kpt(u,i):yield*s.Udt(u),a=u.Uft()),h.O8(),l&&n.cdt().O8(),n.E8(s.KF()),r&&n.E8(r.KF()),r||1!==o||(n.x1t(),n.MN())||e.Ak(),a}Q1t(){return this.fpt}}}{let u=function(t,s){return!0};u;const co=self.Os,fo=[];function*W(t,s){return!0}co.vpt=class extends co.Kn{constructor(t,s,i){super(),this.uq=t,this.Xc=t.ED(),this.Qpt=s,this.tmt=null,this.$ct=this.Xc.qF().hO(),this.smt=[],this.imt=[],this.emt=!1,this.nmt=!1,this.rmt=!1,this.hmt=!1,this.omt=!!i[2],this.amt=!1,this.lmt=null,this.umt=[],this.wnt=[],this.cmt=[],this.fmt=u,this.dmt=W,this.pmt=!1,this.mmt=!1,this.gmt="",this.ymt=!1,this.wmt=null,this.fpt=null,this.KH=i[4],this.Smt=i[5],this.uq.Bpt(this,this.Smt),this.vmt=this.Xc.wX()?{bmt:i[3][0],xmt:i[3][1],Mmt:!1,Gmt:!1,Tmt:!1,_mt:!1}:null,this.qF().Y0t(this),3===i[0]&&this.Imt(i[1]);let e=0;for(const n of i[6]){const r=co.Cmt.tM(this,n,e++);this.umt.push(r),this.Emt(r.mN())}e=0;for(const h of i[7]){const o=co.Pmt.tM(this,h,e++);this.wnt.push(o)}if(9===i.length){const a=i[8];for(const l of a)this.uq.cpt(l,this,this.cmt)}this.umt.length&&(this.amt=null===this.umt[0].mN()&&this.umt[0].Ept()===co.W$.B$.N$.Rmt),0===this.umt.length&&(this.umt=fo),0===this.wnt.length&&(this.wnt=fo),0===this.cmt.length&&(this.cmt=fo)}static tM(t,s,i){return co.tr(co.vpt,t,s,i)}Imt(t){this.pmt=!0,this.mmt=!!t[0],this.ymt=this.mmt,this.gmt=t[1].toLowerCase(),this.wmt=[],this.qF().$0t(this),this.Xc.wX()&&(this.fpt={type:"group",name:t[1],dpt:0,children:[]})}Amt(t){this.wmt.push(t)}Fmt(t,s){for(const i of t.r$().H$())s.includes(i)||s.push(i)}Omt(t,s){if(t)if(s.includes(t)||s.push(t),t.Gz())for(const i of t.Dmt())i.IN()&&this.Fmt(i,s);else t.IN()&&this.Fmt(t,s)}Emt(t){this.Omt(t,this.smt)}Lmt(t){this.Omt(t,this.imt)}kmt(){this.smt=this.Xc.Mz()}J0t(t){this.hmt=!!t,this.Nmt(),this.Bmt();for(const s of this.umt)s.J0t();if(0<this.wnt.length){let t=!1;for(const e of this.wnt)e.J0t(),e.Wmt()&&(t=!0);t?(this.fmt=this.jmt,this.dmt=this.Umt):(this.fmt=this.Vmt,this.dmt=this.Hmt)}const i=this.cmt;for(let t=0,s=i.length;t<s;++t){const n=t<s-1&&i[t+1]instanceof co.vpt&&i[t+1].Opt();i[t].J0t(n)}this.vmt&&this.zmt(),this.fpt&&this.Jmt().Q1t().children.push(this.fpt)}Q1t(){return this.fpt}Jmt(){let t=this.hB();for(;t;){if(t.Pdt())return t;t=t.hB()}return this.uq}zmt(){const t=this.vmt;t.Mmt=this.umt.every(t=>t.zpt()),t.Gmt=this.wnt.every(t=>t.zpt()),t.Tmt=this.cmt.every(t=>t.zpt()),t._mt=t.Mmt&&t.Gmt&&t.Tmt}qmt(){let t=this;for(;t.zmt(),t=t.hB(););}Nmt(){if(this.Pdt()){let t=this.hB();for(this.rmt=!0;t;){if(!t.Pdt()){this.rmt=!1;break}t=t.hB()}}}$mt(){const t=this.Xc.Mz();if(this.smt===t)this.imt=t;else{this.imt=co.Vh(this.smt);let t=this.hB();for(;t;){for(const i of t.smt)this.Lmt(i);t=t.hB()}const s=this.qF();this.smt=s.edt(this.smt),this.imt=s.edt(this.imt)}}Bmt(){if(this.Xmt()){this.lmt=[];let t=this.hB();for(;t;)this.lmt.push(t),t=t.hB();this.lmt.reverse()}}Ymt(){this.nmt=!0,this.Qpt&&this.Qpt.Ymt()}Yft(){return this.nmt}v8(){return this.smt}KF(){return this.emt||(this.emt=!0,this.$mt()),this.imt}Zmt(t){return this.smt.includes(t)}$pt(){return this.lmt}Jq(){return this.uq}qF(){return this.uq.qF()}ED(){return this.Xc}hB(){return this.Qpt}Kmt(t){this.tmt=t}ddt(){return this.tmt||this.Qpt}Qmt(){return this.Smt}tgt(){return this.vmt&&this.vmt.xmt}sgt(){return this.tgt()&&this.vmt.bmt}igt(t){this.vmt.bmt=!!t,this.qmt()}Pdt(){return this.pmt}egt(){return this.rmt}Opt(){return this.amt}ngt(){return this.hmt}X0t(){return this.gmt}q1t(){return this.ymt}Fdt(){this.$1t(this.mmt)}$1t(t){if(t=!!t,!this.pmt)throw new Error("not a group");if(this.ymt!==t){this.ymt=t;for(const s of this.wmt)s.rgt();if(this.wmt.length){const i=this.Xc.hD(),e=i.Jq();e&&e.S$()}}}Az(){return this.KH}gft(){return this.omt}xpt(){return this.umt.length&&this.umt[0].xpt()}hgt(){return this.tmt&&this.tmt instanceof co.spt}Xmt(){return this.hgt()||this.umt.some(t=>t.xpt())}bpt(){return this.umt}Zft(){return this.umt.length}adt(t){if((t=Math.floor(t))<0||t>=this.umt.length)throw new RangeError("invalid condition index");return this.umt[t]}ogt(t){return this.adt(t)}agt(t){let s=t.gF();if(0!==s){--s;const i=t.lgt()?t.ugt():t.mN();for(;0<=s;--s){const e=this.umt[s];if(i===e.mN()||e.lgt()&&e.ugt()===i)return!1}}return!0}cgt(){return this.wnt}fgt(){return this.wnt.length}udt(t){if((t=Math.floor(t))<0||t>=this.wnt.length)throw new RangeError("invalid action index");return this.wnt[t]}dgt(s){s=Math.floor(s);const t=this.wnt.find(t=>t.pgt()===s);if(t)return t;throw new RangeError("invalid action debug index")}mgt(t){return 0<=(t=Math.floor(t))&&t<this.wnt.length}ggt(){return this.cmt}pdt(){return this.cmt.filter(t=>t instanceof co._pt)}Xpt(i){i.Lft(this);let e=this.umt,n=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(i.Nft(t),r.G6())throw new Error("trigger cannot be used as sub-event to a loop");if(r.S_())n=!0;else if(!this.omt)return!1}return!this.omt||n}Ypt(t,s){t.Lft(this),t.Nft(s),this.umt[s].S_()&&(this.fmt(t,0)&&this.ygt(t),t.jft(!0))}*Zpt(i){i.Lft(this);let e=this.umt,n=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(i.Nft(t),r.G6())throw new Error("trigger cannot be used as sub-event to a loop");if(r.zpt()?r.S_():yield*r.Udt())n=!0;else if(!this.omt)return!1}return!this.omt||n}*Kpt(t,s){t.Lft(this),t.Nft(s);let i=this.umt[s];if(i.zpt()?i.S_():yield*i.Udt())(this.wgt()?this.fmt(t,0):yield*this.dmt(t,0))&&(this.Sgt()?this.ygt():yield*this.vgt()),t.jft(!0)}S_(t){t.Lft(this),this.amt||t.Vft(!1),this.omt?this.bgt(t):this.xgt(t)}*Udt(t){(this.sgt()||this.Xc.Mgt())&&(yield this),t.Lft(this),this.amt||t.Vft(!1),this.omt?yield*this.Ggt(t):yield*this.Tgt(t)}bgt(i){let e=this.umt,n=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(!r.xpt()){i.Nft(t);const h=r.S_();n=n||h}}i.jft(n),n&&(this.fmt(i,0)&&this.ygt(i),this.hmt)&&i.Vft(!0)}*Ggt(i){let e=this.umt,n=0===e.length;for(let s=0,t=e.length;s<t;++s){const r=e[s];if(!r.xpt()){i.Nft(s);let t;t=r.zpt()?r.S_():yield*r.Udt(),n=n||t}}if(i.jft(n),n)(this.wgt()?this.fmt(i,0):yield*this.dmt(i,0))&&(this.Sgt()?this.ygt():yield*this.vgt()),this.hmt&&i.Vft(!0)}xgt(i){const e=this.umt;for(let t=0,s=e.length;t<s;++t){const n=e[t],r=(i.Nft(t),n.S_());if(!r)return void i.jft(!1)}i.jft(!0),this.fmt(i,0)&&this.ygt(i),i.Uft()&&this.hmt&&i.Vft(!0)}*Tgt(i){const e=this.umt;for(let t=0,s=e.length;t<s;++t){const n=e[t];i.Nft(t);if(!(n.zpt()?n.S_():yield*n.Udt()))return void i.jft(!1)}i.jft(!0);(this.wgt()?this.fmt(i,0):yield*this.dmt(i,0))&&(this.Sgt()?this.ygt():yield*this.vgt()),i.Uft()&&this.hmt&&i.Vft(!0)}Vmt(i,e){const n=this.wnt;for(let t=e,s=n.length;t<s;++t){const r=n[t];i.Wft(t),r.S_()}return!0}*Hmt(i,e){const n=this.wnt;for(let t=e,s=n.length;t<s;++t){const r=n[t];i.Wft(t),r.zpt()?r.S_():yield*r.Udt()}return!0}jmt(i,e){const n=this.qF(),r=this.wnt;for(let t=e,s=r.length;t<s;++t){const h=r[t],o=(i.Wft(t),h.S_());if(h._gt()&&!0===o)return!1;h.Igt()&&o instanceof Promise&&n.v1t(o)}return!0}*Umt(i,e){const n=this.qF(),r=this.wnt;for(let s=e,t=r.length;s<t;++s){const h=r[s];i.Wft(s);let t;if(t=h.zpt()?h.S_():yield*h.Udt(),h._gt()&&!0===t)return!1;h.Igt()&&t instanceof Promise&&n.v1t(t)}return!0}Cgt(t){this.fmt(t,t.Bft())&&this.ygt()}*Egt(t){(yield*this.dmt(t,t.Bft()))&&(yield*this.vgt())}ygt(){if(this.cmt.length){const t=this.Pdt()&&this.Xc.jpt(),s=t?performance.now():0,i=this.$ct,e=i.x8(this);this.nmt?this.Pgt(e):this.Rgt(e),i.O8(),t&&(this.fpt.dpt+=performance.now()-s)}}Pgt(e){const n=this.pmt,r=this.rmt,h=this.qF(),o=this.cmt;for(let t=0,s=o.length,i=s-1;t<s;++t){const a=o[t],l=a.v8(),u=!r||!n&&t<i;u&&h.I8(l),a.S_(e),u?h.E8(l):h.n1t(l)}}Rgt(i){const e=this.cmt;for(let t=0,s=e.length;t<s;++t)e[t].S_(i)}*vgt(){if(this.cmt.length){const t=this.$ct,s=t.x8(this);this.nmt?yield*this.Agt(s):yield*this.Fgt(s),t.O8()}}*Agt(e){const n=this.pmt,r=this.rmt,h=this.qF(),o=this.cmt;for(let t=0,s=o.length,i=s-1;t<s;++t){const a=o[t],l=a.v8(),u=!r||!n&&t<i;u&&h.I8(l),yield*a.Udt(e),u?h.E8(l):h.n1t(l)}}*Fgt(i){const e=this.cmt;for(let t=0,s=e.length;t<s;++t)yield*e[t].Udt(i)}C8(i,e){e.Dft();const n=this.umt;if(!this.gft())for(let t=i.kft()+1,s=n.length;t<s;++t){const r=n[t],h=(e.Nft(t),r.S_());if(!h)return!1}return this.fmt(e,0)&&this.ygt(e),!0}*Ogt(i,e){e.Dft();const n=this.umt;if(!this.gft())for(let t=i.kft()+1,s=n.length;t<s;++t){const r=n[t];e.Nft(t);if(!(r.zpt()?r.S_():yield*r.Udt()))return!1}return(this.wgt()?this.fmt(e,0):yield*this.dmt(e,0))&&(this.Sgt()?this.ygt():yield*this.vgt()),!0}zpt(){return!this.sgt()&&!this.Xc.Mgt()&&this.vmt._mt}wgt(){return!this.Xc.Mgt()&&this.vmt.Gmt}Sgt(){return!this.Xc.Mgt()&&this.vmt.Tmt}Dgt(i){if(this.hB()){const e=this.$pt();for(let t=0,s=e.length;t<s;++t)if(!e[t].Xpt(i))return!1}return!0}*Lgt(i){if(this.hB()){const e=this.$pt();for(let t=0,s=e.length;t<s;++t)if(!(yield*e[t].Zpt(i)))return!1}return!0}kgt(t,s,i){if(0<s.length)if(i){const e=s.map(t=>t.Ks(0));t.cdt().x8(),this.tmt.Ngt(e)}else this.tmt.Bgt(s);else i&&t.cdt().x8()}Wgt(t,s,i,e){let n,r,h=0<t.length,o=null,a=this.Xc,l=this.$ct,u=a.qF(),c=this.tmt,f=c.Igt(),d=u.s1t(),p=1<d;if(this.kgt(u,s,p),h&&(i?u.I8(t):u.h1t(t)),null!==e){if(e.jgt){const g=i?e.jgt.xk():e.jgt.r1t().Hct(),y=e.Ugt.xk();y.uft(g.bk()),y.pft(),i||e.Ugt.Vgt()}else if(e.Hgt){const w=e.Hgt.xk();w.uft(e.zgt),w.pft()}e.Jgt&&(o=u.o1t(t))}const m=l.x8(this);return i&&m.Kft(t),this.Dgt(m)&&(m.Lft(this),f&&([r,n]=c.qgt()),this.xgt(m),f)&&c.$gt(r),l.O8(),p&&u.cdt().O8(),null!==o&&u.E8(o),h&&u.E8(t),u.i1t(),f||u.M1t(),n}*Xgt(t,s,i,e){let n,r,h=((this.sgt()||this.Xc.Mgt())&&(yield this),0<t.length),o=null,a=this.Xc,l=this.$ct,u=a.qF(),c=this.tmt,f=c.Igt(),d=u.s1t(),p=1<d;if(this.kgt(u,s,p),h&&(i?u.I8(t):u.h1t(t)),null!==e){if(e.jgt){const g=i?e.jgt.xk():e.jgt.r1t().Hct(),y=e.Ugt.xk();y.uft(g.bk()),y.pft(),i||e.Ugt.Vgt()}else if(e.Hgt){const w=e.Hgt.xk();w.uft(e.zgt),w.pft()}e.Jgt&&(o=u.o1t(t))}const m=l.x8(this);return i&&m.Kft(t),(yield*this.Lgt(m))&&(m.Lft(this),f&&([r,n]=c.qgt()),yield*this.Tgt(m),f)&&c.$gt(r),l.O8(),p&&u.cdt().O8(),null!==o&&u.E8(o),h&&u.E8(t),u.i1t(),f||u.M1t(),n}Ygt(t,s){const i=this.KF(),e=0<i.length,n=this.Xc,r=this.$ct,h=n.qF(),o=h.s1t(),a=1<o,l=(a&&h.cdt().x8(),this.tmt.Ngt(t),e&&(s?h.I8(i):h.h1t(i)),r.x8(this));this.Dgt(l)&&(l.Lft(this),this.xgt(l)),r.O8(),a&&h.cdt().O8(),e&&h.E8(i),h.i1t(),h.M1t()}*Zgt(t,s){(this.sgt()||this.Xc.Mgt())&&(yield this);const i=this.KF(),e=0<i.length,n=this.Xc,r=this.$ct,h=n.qF(),o=h.s1t(),a=1<o,l=(a&&h.cdt().x8(),this.tmt.Ngt(t),e&&(s?h.I8(i):h.h1t(i)),r.x8(this));(yield*this.Lgt(l))&&(l.Lft(this),yield*this.Tgt(l)),r.O8(),a&&h.cdt().O8(),e&&h.E8(i),h.i1t(),h.M1t()}sO(t,s,i,e,...n){let r,h,o=0<t.length,a=this.Xc,l=this.$ct,u=a.qF(),c=this.tmt,f=c.Igt(),d=u.s1t(),p=1<d,m=(p&&u.cdt().x8(),0<n.length&&this.tmt.Ngt(n),o&&(s?u.I8(t):u.h1t(t)),l.x8(this));return m.qft(i,e),l.Mft(m),a.T8(!1),this.Dgt(m)&&(m.Lft(this),f&&([h,r]=c.qgt()),this.xgt(m),f)&&c.$gt(h),a.T8(!0),l.O8(),l.Gft(),p&&u.cdt().O8(),o&&u.E8(t),u.i1t(),f||u.M1t(),r||m.$ft()}}}{let e=self.Os,t=[],s=!1;e.Cpt=class extends e.Kn{constructor(t,s,i){super();const e=t.ED(),n=t.qF(),r=(this.uq=t,this.wft=n,this.Xc=t.ED(),this.Qpt=s,e.Kgt(i[1]));this.Qgt=r,this.Smt=i[2],this.uq.Bpt(this,this.Smt),this.vmt=e.wX()?{bmt:i[3][0],xmt:i[3][1]}:null}static tM(t,s,i){return e.tr(e.Cpt,t,s,i)}J0t(){const t=this.Qgt,s=this.Xc.qF().mdt(this);this.Qgt=t.bind(null,this.Xc.LL(),s)}hB(){return this.Qpt}ddt(){return this.Qpt}Jq(){return this.uq}Qmt(){return this.Smt}tgt(){return this.vmt&&this.vmt.xmt}sgt(){return this.tgt()&&this.vmt.bmt}igt(t){this.vmt.bmt=!!t}Opt(){return!1}v8(){return t}KF(){return this.Qpt?this.Qpt.KF():t}S_(t){t.Lft(this),this.wft.v1t(this.tyt())}async tyt(){try{await this.Qgt()}catch(t){console.error(`Unhandled exception running script %c${this.Jq().jc()}, event ${this.Qmt()}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),s||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),s=!0)}}*Udt(t){t.Lft(this),(this.sgt()||this.Xc.Mgt())&&(yield this),this.S_(t)}zpt(){return!this.sgt()&&!this.Xc.Mgt()}static syt(){return s}static iyt(){s=!0}}}{const po=self.Os;po.spt=class extends po.Kn{constructor(t,s,i){super(),this.uq=t,this.Xc=t.ED(),this.Qpt=s,this.eyt=0,this.nyt="",this.ryt=0,this.hyt=[],this.oyt=!0,this.ayt="",this.Wct=null,this.lyt=!1,this.uyt=[],this.cyt=!1,this.fyt=!1,this.dyt=0,this.pyt=-1,this.myt=new Map,this.gyt=po.vpt.tM(t,s,i),this.gyt.Kmt(this)}yyt(t){this.eyt=0,this.nyt=t[0],this.ryt=t[1],this.hyt=t[2].map(t=>po._pt.tM(this.uq,this,t)),this.oyt=t[3],this.fyt=t[4],this.cyt=t[5]}wyt(t){this.eyt=1,this.ayt=t[1],this.Wct=this.Xc.Q7(t[2]),this.gyt.Emt(this.Wct),this.nyt=this.Wct.jc()+"."+this.ayt,this.ryt=t[3],this.hyt=t[4].map(t=>po._pt.tM(this.uq,this,t)),this.oyt=t[5],this.fyt=t[6],this.cyt=t[7],this.Wct.Syt(this)}static Gpt(t,s,i){const e=po.tr(po.spt,t,s,i),n=i[1];return e.yyt(n),e}static Tpt(t,s,i){const e=po.tr(po.spt,t,s,i),n=i[1];return e.wyt(n),e}q0t(){if(this.Wct&&this.Wct.Gz())for(const t of this.Wct.Dmt())if(t.vyt(this.ayt)){this.lyt=!0;break}}J0t(){for(const t of this.hyt)t.J0t();this.gyt.J0t(!1)}tdt(){return this.eyt}pdt(){return this.hyt}ipt(){return this.hyt}YF(){return this.hyt.length}byt(t){this.uyt.push(t)}xyt(){return this.uyt}Bgt(i){const e=this.hyt;for(let t=0,s=e.length;t<s;++t)e[t].Net(i[t].Ks(0))}Ngt(i){const e=this.hyt;for(let t=0,s=e.length;t<s;++t)e[t].Net(i[t])}Myt(){return this.hyt.map(t=>t.Qit())}hB(){return this.Qpt}ddt(){return this.Qpt}sdt(){return this.nyt}Gyt(){return this.ayt}Tyt(){return this.lyt}eO(){return this.ryt}mN(){return this.Wct}Uu(){return this.oyt}XF(){switch(this.ryt){case 0:return null;case 2:return"";default:return 0}}ZF(){return this.gyt}iO(){return this.cyt}Igt(){return this.fyt}qgt(){const t=this.dyt++;this.pyt=t;let s,i=new Promise(t=>s=t);return this.myt.set(t,{resolve:s,_yt:0}),[t,i]}$gt(t){const s=this.myt.get(t);0===s._yt&&(s.resolve(),this.myt.delete(t)),this.pyt=-1}Iyt(){const t=this.myt.get(this.pyt);return t._yt++,this.pyt}Cyt(t){this.pyt=t;const s=this.myt.get(t);s._yt--}Eyt(t,s){const i=new Map,e=[];for(const n of this.Wct.xk().bk()){const r=n.mN();if(r.vyt(this.ayt)){const h=i.get(r);Array.isArray(h)?h.push(n):i.set(r,[n])}else e.push(n)}if(0<e.length&&this.gyt.Wgt(t,s,this.cyt,{Hgt:this.Wct,zgt:e}),0<i.size)for(const[o,a]of i){const l=o.Pyt(this.ayt).ZF(),u=[...new Set([...t,...l.v8()])];l.Wgt(u,s,this.cyt,{Hgt:o,zgt:a})}}*Ryt(t,s){const i=new Map,e=[];for(const n of this.Wct.xk().bk()){const r=n.mN();if(r.vyt(this.ayt)){const h=i.get(r);Array.isArray(h)?h.push(n):i.set(r,[n])}else e.push(n)}if(0<e.length&&(yield*this.gyt.Xgt(t,s,this.cyt,{Hgt:this.Wct,zgt:e})),0<i.size)for(const[o,a]of i){const l=o.Pyt(this.ayt).ZF(),u=[...new Set([...t,...l.v8()])];yield*l.Xgt(u,s,this.cyt,{Hgt:o,zgt:a})}}}}{const mo=self.Os,go=[];mo._pt=class extends mo.Kn{constructor(t,s,i){super();const e=t.qF();this.uq=t,this.wft=e,this.Xc=t.ED(),this.Qpt=s,this.R0t=e.cdt(),this.rr=i[1],this.nf=i[2],this.Ayt=i[3],this.bb=!!i[4],this.Fyt=!!i[5],this.Oyt=s instanceof mo.spt,this.KH=i[6],this.Dyt=this.Xc.gdt(i[8]),this.Lyt=t=>this.Net(t),this.kyt=()=>this.Qit(),this.Nyt=!this.Qpt||this.bb||this.Fyt,this.pnt=this.Ayt,this.Byt=-1,this.Wyt()&&(this.pnt=this.pnt?1:0),!this.jyt()||this.Xb()||this.X1t()||(this.Byt=e.ndt(this)),e.idt(this)}static tM(t,s,i){return mo.tr(mo._pt,t,s,i)}J0t(){if(this.jyt()&&!this.Xb()&&!this.X1t()&&!this.Uyt()){const t=this.wft.tpt(this);t&&t.byt(this)}}jc(){return this.rr}gdt(){return this.Dyt}hB(){return this.Qpt}ddt(){return this.hB()}uz(){return!this.hB()}jyt(){return!this.uz()}Uyt(){return this.Oyt}Xb(){return this.bb}X1t(){return this.Fyt}ae(){return 0===this.nf}Se(){return 1===this.nf}Wyt(){return 2===this.nf}Opt(){return!1}Az(){return this.KH}rdt(){return this.Ayt}v8(){return go}S_(t){!this.jyt()||this.Xb()||this.X1t()||this.Net(this.rdt())}zpt(){return!0}*Udt(t){this.S_(t)}Net(t){this.ae()?"number"!=typeof t&&(t=parseFloat(t)):this.Se()?"string"!=typeof t&&(t=t.toString()):this.Wyt()&&(t=t?1:0),this.Nyt?this.pnt=t:this.R0t.e0t()[this.Byt]=t}Qit(){return this.Nyt?this.pnt:this.R0t.e0t()[this.Byt]}Vyt(){let t=this.Qit();return this.Wyt()?!!t:t}Idt(){this.pnt=this.Ayt}ydt(){return{configurable:!1,enumerable:!0,get:this.kyt,set:this.Lyt}}}}{const yo=self.Os,wo=[];yo.Ipt=class extends yo.Kn{constructor(t,s,i){super();const e=t.qF();this.uq=t,this.wft=e,this.Xc=t.ED(),this.Qpt=s,this.Hyt=null,this.zyt=i[1],this.Zf=!0}static tM(t,s,i){return yo.tr(yo.Ipt,t,s,i)}J0t(){this.Hyt=this.wft.w$(this.zyt),this.uq.Dpt(this);let t=this.hB();for(;t;)t instanceof yo.vpt&&t.Pdt()&&t.Amt(this),t=t.hB();this.rgt(),this.Xc.wX()&&this.uq.Q1t().children.push(this.Hyt.Q1t())}hB(){return this.Qpt}v8(){return wo}kpt(){return this.Hyt}S_(t){const s=!!this.hB(),i=this.Xc.Mz();s&&this.wft.h1t(i),this.Hyt.S_(),s&&this.wft.E8(i)}*Udt(t){const s=!!this.hB(),i=this.Xc.Mz();s&&this.wft.h1t(i),yield*this.Hyt.Udt(),s&&this.wft.E8(i)}zpt(){return!1}Npt(){return this.Zf}rgt(){let t=this.hB();for(;t;){if(t instanceof yo.vpt&&t.Pdt()&&!t.q1t())return void(this.Zf=!1);t=t.hB()}this.Zf=!0}}}{let a=function(t,s){return s<=t?t%s:(t<0&&(t<=-s&&(t%=s),t<0)&&(t+=s),t)};a;const So=self.Os;So.Jyt=class extends So.Kn{constructor(t){super(),this.A2=t,this.Xc=t.ED()}J0t(){}static qyt(t,s){const i=s[0],e=[Go,xo,Mo,To,vo,bo];return So.tr(e[i],t,s)}};class vo extends So.Jyt{constructor(t,s){super(t),this.$yt=this.Xc.Xyt(),this.Qgt=this.Xc.Kgt(s[1]),this.Qgt!==So.W$.B$.Rnt.random&&this.Qgt!==So.W$.B$.Rnt.Yyt||this.A2.Zyt()}Kyt(){return this.$yt.Qyt(this.Qgt,this.$yt)}}class bo extends So.Jyt{constructor(t,s){super(t),this.twt=null,this.nyt=s[1],this.A2.Zyt()}J0t(){const t=this.Xc.qF(),s=(this.twt=t.$F(this.nyt),this.nyt=null,this.A2.ZF()),i=this.twt.ZF();this.swt=[...new Set([...s.KF(),...i.KF()])],this.swt=t.edt(this.swt)}Kyt(){const t=this.twt;if(t.Uu()){const s=t.ZF();return So.vpt.prototype.sO.bind(s,this.swt,t.iO(),t.eO(),t.XF())}{const i=t.XF();return()=>i}}}class xo extends So.Jyt{constructor(t,s){super(t),this.Wct=this.Xc.Q7(s[1]),this.Qgt=this.Xc.Kgt(s[2]),this.iwt=!!s[3],this.$ct=this.Xc.qF().hO(),this.A2.ewt(this.Wct)}Kyt(){return this.Wct.uk().Qyt(this.Qgt,this.Wct.hk().s6())}nwt(...t){const s=this.Wct,i=s.xk().eft(),e=i.length;if(0===e)return this.iwt?"":0;const n=a(this.A2.rwt(),e);return this.$ct.b8().zft(s),this.Qgt.apply(i[n].s6(),t)}hwt(t,...s){const i=this.Wct,e=i.bk(),n=e.length;if(0===n)return this.iwt?"":0;const r=a(t,n);return this.$ct.b8().zft(i),this.Qgt.apply(e[r].s6(),s)}}class Mo extends So.Jyt{constructor(t,s){super(t),this.Wct=this.Xc.Q7(s[1]),this.owt=s[3],this.iwt=!!s[2],this.A2.ewt(this.Wct)}awt(){const t=this.Wct.xk().eft(),s=t.length;if(0===s)return this.iwt?"":0;const i=a(this.A2.rwt(),s);return t[i].lwt(this.owt)}uwt(){const t=this.Wct,s=t.xk().eft(),i=s.length;if(0===i)return this.iwt?"":0;const e=a(this.A2.rwt(),i),n=s[e],r=n.mN().cwt(t.fwt());return n.lwt(this.owt+r)}dwt(t){const s=this.Wct,i=s.bk(),e=i.length;if(0===e)return this.iwt?"":0;let n=a(t,e),r=i[n],h=0;return s.Gz()&&(h=r.mN().cwt(s.fwt())),r.lwt(this.owt+h)}}class Go extends So.Jyt{constructor(t,s){super(t),this.Wct=this.Xc.Q7(s[1]),this.pwt=this.Wct.ant(s[2]),this.mwt=this.Wct.kst(s[2]),this.Qgt=this.Xc.Kgt(s[3]),this.iwt=!!s[4],this.$ct=this.Xc.qF().hO(),this.A2.ewt(this.Wct)}gwt(...t){const s=this.Wct,i=s.xk().eft(),e=i.length;if(0===e)return this.iwt?"":0;let n=a(this.A2.rwt(),e),r=(this.$ct.b8().zft(s),i[n]),h=0;return s.Gz()&&(h=r.mN().ywt(s.fwt())),this.Qgt.apply(r.ont()[this.mwt+h].s6(),t)}wwt(t,...s){const i=this.Wct,e=i.bk(),n=e.length;if(0===n)return this.iwt?"":0;let r=a(t,n),h=(this.$ct.b8().zft(i),e[r]),o=0;return i.Gz()&&(o=h.mN().ywt(i.fwt())),this.Qgt.apply(h.ont()[this.mwt+o].s6(),s)}}class To extends So.Jyt{constructor(t,s){super(t),this.Swt=null,this.vwt=s[1]}J0t(){this.Swt=this.Xc.qF().wdt(this.vwt)}bwt(){return this.Swt}}}{let r=function(t){const s=self.xwt[t];if(s)return s;throw new Error("invalid expression number")};r;const _o=self.Os;_o.Mwt=class extends _o.Kn{constructor(t,s,i){super(),this.A2=t,this.Dg=i,this.nf=s,this.Ks=null,this.Gwt=!1,this.Fyt=!1}static tM(t,s,i){const e=s[0],n=[Io,Co,Do,Po,Ao,Eo,Fo,Io,Po,Po,Lo,ko,Do,Bo,Co,Oo,Ro,No,Wo,jo,Uo,Vo];return _o.tr(n[e],t,e,i,s)}J0t(){}Zyt(){this.Gwt=!0}ewt(t){this.Gwt||!t||t.uk().NL()||(this.Gwt=!0)}Twt(){return this.Gwt}gF(){return this.Dg}ED(){return this.A2.ED()}ZF(){return this.A2.ZF()}X1t(){return this.Fyt}_wt(){return 4===this.nf}};class Io extends _o.Mwt{constructor(t,s,i,e){super(t,s,i),this.Iwt=0;const n=e[1];this.Cwt=n[0],this.Ewt=[],this.Pwt=null;for(let t=1,s=n.length;t<s;++t)this.Ewt.push(_o.Jyt.qyt(this,n[t]));this.Ewt.length?this.Ks=this.Rwt:(this.Ks=r(this.Cwt),this.Fyt=!0)}Awt(t){if(t<0||t>=this.Ewt.length)throw new RangeError("invalid numbered node");return this.Ewt[t]}J0t(){for(const s of this.Ewt)s.J0t();const t=r(this.Cwt);this.Ewt.length?this.Pwt=t(this):this.Pwt=t}rwt(){return this.Iwt}Rwt(t){return this.Iwt=t,this.Pwt()}}class Co extends Io{constructor(t,s,i,e){super(t,s,i,e),this.Ks=this.Fwt,14===s&&(this.ZF().kmt(),this.A2 instanceof _o.Pmt)&&this.ZF().Ymt()}Fwt(t){this.Iwt=t;const s=this.Pwt();return"string"==typeof s?s:""}Owt(){return r(this.Cwt)()}}class Eo extends Io{constructor(t,s,i,e){super(t,s,i,e),2<=t.Dwt()?this.Ks=this.$k:this.Ks=this.lD,this.Fyt=!1}lD(t){this.Iwt=t;const s=this.Pwt(),i=this.ED().hD();return i.lD(s)}$k(t){const s=this.lD(t);return s?s.$k():null}}class Po extends _o.Mwt{constructor(t,s,i,e){super(t,s,i),this.Lwt=e[1],this.Ks=this.kwt,this.Fyt=!0}kwt(){return this.Lwt}}class Ro extends _o.Mwt{constructor(t,s,i,e){super(t,s,i),this.Nwt=e[1],this.Ks=this.Bwt,this.Fyt=!0}Bwt(){return this.Nwt}}class Ao extends _o.Mwt{constructor(t,s,i,e){super(t,s,i),this.Wct=this.ED().Q7(e[1]),2<=t.Dwt()?this.Ks=this.ek:this.Ks=this.mN;const n=this.ZF();n.Emt(this.Wct),this.A2 instanceof _o.Pmt?n.Ymt():n.hB()&&n.hB().Ymt(),this.Fyt=!0}mN(){return this.Wct}ek(){return this.Wct?this.Wct.ek():null}}class Fo extends _o.Mwt{constructor(t,s,i,e){super(t,s,i),this.$H=this.ED().VO().AX(e[1]),2<=t.Dwt()?this.Ks=this.jO:this.Ks=this.HO,this.Fyt=!0}HO(){return this.$H}jO(){return this.$H?this.$H.jO():null}}class Oo extends _o.Mwt{constructor(t,s,i,e){super(t,s,i),this.DZ=this.ED().NQ().VY(e[1]),2<=t.Dwt()?this.Ks=this.tst:this.Ks=this.xst,this.Fyt=!0}xst(){return this.DZ}tst(){return this.DZ?this.DZ.tst():null}}class Do extends _o.Mwt{constructor(t,s,i,e){super(t,s,i),this.Wwt=e[1],this.Ks=this.jwt,this.Fyt=!0}jwt(){return this.Wwt}}class Lo extends _o.Mwt{constructor(t,s,i,e){super(t,s,i),this.Uwt=e[1];const n=this.A2.mN();this.A2 instanceof _o.Cmt&&this.A2.Xb()||!n||!n.Gz()?(this.Ks=this.Vwt,this.Fyt=!0):(this.Ks=this.Hwt,this.Zyt())}Vwt(){return this.Uwt}Hwt(t){t=t||0;let s=this.A2.mN(),i=s.xk(),e=i.bk(),n=null;if(e.length)n=e[t%e.length].mN();else if(i.tft()){const r=i.ift();n=r[t%r.length].mN()}else{if(!(0<s.Gk()))return 0;{const h=s.bk();n=h[t%h.length].mN()}}return this.Uwt+n.cwt(s.fwt())}}class ko extends _o.Mwt{constructor(t,s,i,e){super(t,s,i),this.vwt=e[1],this.Swt=null,2<=t.Dwt()?this.Ks=this.zwt:this.Ks=this.Jwt,this.Fyt=!0}J0t(){this.Swt=this.ED().qF().wdt(this.vwt)}Jwt(){return this.Swt}zwt(){return null}}class No extends _o.Mwt{constructor(t,s,i,e){super(t,s,i),this.qwt=e[1],this.twt=null,2<=t.Dwt()?this.Ks=this.$wt:this.Ks=this.Xwt,this.Fyt=!0}J0t(){this.twt=this.ED().qF().$F(this.qwt),this.qwt=null}Xwt(){return this.twt}$wt(){return null}}class Bo extends _o.Mwt{constructor(t,s,i,e){super(t,s,i),this.Ywt=[],this.Zwt=[],this.Fyt=!0;for(let t=1,s=e.length;t<s;++t){const n=_o.Mwt.tM(this.A2,e[t],0);this.Ywt.push(n),this.Zwt.push(0),n.X1t()||(this.Fyt=!1)}this.Ks=this.Kwt}J0t(){for(const t of this.Ywt)t.J0t()}Kwt(){const i=this.Ywt,e=this.Zwt;for(let t=0,s=i.length;t<s;++t)e[t]=i[t].Ks(0);return e}}class Wo extends _o.Mwt{constructor(t,s,i,e){super(t,s,i),this.Qwt=e[1],this.Ks=this.ket,this.Fyt=!0}ket(){return this.Qwt}}class jo extends _o.Mwt{constructor(t,s,i,e){super(t,s,i),this.tSt=e[1],this.Ks=this.sSt,this.Fyt=!0}sSt(){return this.tSt}}class Uo extends Io{constructor(t,s,i,e){super(t,s,i,e),this.Ks=this.RN,this.Fyt=!1}RN(){return this.Pwt()}}class Vo extends _o.Mwt{constructor(t,s,i,e){super(t,s,i),this.Tlt=this.ED().Vlt().Slt(e[1]),this.Ks=this.iSt,this.Fyt=!0}iSt(){return this.Tlt.jc()}}}{let e=function(i,e){for(let t=0,s=i.length;t<s;++t)e[t]=i[t].Ks(0)};e;const Ho=self.Os,zo=[],Jo=function(){};Ho.Cmt=class extends Ho.Kn{constructor(t,i,s){if(super(),this.gyt=t,this.Xc=t.ED(),this.Dg=s,this.Qgt=this.Xc.Kgt(i[1]),this.eSt=0<i[3],this.nSt=2===i[3],this.rSt=!!i[4],this.hSt=!!i[5],this.bb=!!i[6],this.KH=i[7],this.oSt=this.gyt.gft(),this.Wct=null,this.pwt=null,this.mwt=-1,this.$yt=null,this.S_=Jo,this.Udt=Jo,this.qs=[],this.aSt=[],this.lSt=!1,this.uSt=null,this.cSt=null,this.vmt=this.Xc.wX()?{bmt:i[8][0],fSt:i[8][1]}:null,-1===i[0]?this.$yt=this.Xc.Xyt():(this.Wct=this.Xc.Q7(i[0]),i[2]&&(this.pwt=this.Wct.ant(i[2]),this.mwt=this.Wct.kst(i[2])),this.gyt.hB()&&this.gyt.hB().Ymt()),10===i.length){let s=i[9];for(let t of s)this.qs.push(Ho.Mwt.tM(this,t,this.qs.length)),this.aSt.push(0)}0===this.qs.length&&(this.qs=zo,this.aSt=zo),this.gyt.qF().Z0t(this)}static tM(t,s,i){return Ho.tr(Ho.Cmt,t,s,i)}J0t(){for(const t of this.qs)t.J0t(),t.Twt()&&(this.lSt=!0);this.nSt?(this.S_=this.dSt,this.Udt=this.pSt):this.$yt?(this.mSt(),this.Udt=this.gSt):this.Wct.uk().NL()?(this.ySt(),this.Udt=this.wSt):this.bb?(this.S_=this.SSt,this.Udt=this.vSt):(this.S_=this.bSt,this.Udt=this.xSt)}mSt(){const t=this.$yt,s=this.$yt;this.MSt(t,s,this.GSt)}ySt(){const t=this.Wct.uk(),s=this.Wct.hk().s6();this.MSt(t,s,this.TSt)}MSt(t,s,i){const e=this.Qgt,n=this.hSt,r=this.qs;if(0===r.length){const h=t.Qyt(e,s);n?this.S_=function(){return Ho.xor(h(),n)}:this.S_=h}else if(1===r.length){const o=r[0];if(!n&&o.X1t())this.S_=t._St(e,s,o.Ks(0));else{const a=t.Qyt(e,s);this.S_=function(){return Ho.xor(a(o.Ks(0)),n)}}}else if(2===r.length){const l=r[0],u=r[1];if(!n&&l.X1t()&&u.X1t())this.S_=t.ISt(e,s,l.Ks(0),u.Ks(0));else{const c=t.Qyt(e,s);this.S_=function(){return Ho.xor(c(l.Ks(0),u.Ks(0)),n)}}}else if(3===r.length){const f=r[0],d=r[1],p=r[2];if(!n&&f.X1t()&&d.X1t()&&p.X1t())this.S_=t.CSt(e,s,f.Ks(0),d.Ks(0),p.Ks(0));else{const m=t.Qyt(e,s);this.S_=function(){return Ho.xor(m(f.Ks(0),d.Ks(0),p.Ks(0)),n)}}}else this.S_=i}Az(){return this.KH}Ept(){return this.Qgt}mN(){return this.Wct}c6(){return this.pwt}ESt(){return this.pwt?this.pwt.a6():this.Wct?this.Wct.uk():null}Dwt(){const t=this.ESt();return t?t.PSt():1}ZF(){return this.gyt}ED(){return this.Xc}gF(){return this.Dg}pgt(){return this.gF()}xpt(){return this.eSt}Ppt(){return this.nSt}RSt(){return this.hSt}G6(){return this.rSt}Xb(){return this.bb}ASt(){return this.vmt.bmt}FSt(){return!!this.$yt}lgt(){return this.FSt()||this.Wct.uk().NL()}ugt(){for(const t of this.qs)if(t._wt())return t.mN();return null}OSt(t){this.vmt.bmt=!!t,this.gyt.qmt()}DSt(){return this.vmt.fSt}zpt(){return!this.ASt()&&!this.Xc.Mgt()&&!this.DSt()}LSt(){return this.uSt||(this.uSt=new Map),this.uSt}kSt(){return this.cSt||(this.cSt=new Map),this.cSt}GSt(){const t=this.aSt;return e(this.qs,t),Ho.xor(this.Qgt.apply(this.$yt,t),this.hSt)}*gSt(){if((this.ASt()||this.Xc.Mgt())&&(yield this),this.DSt()){const s=this.aSt;e(this.qs,s);let t=this.Qgt.apply(this.$yt,s);return Ho.Oo(t)&&(t=yield*t),Ho.xor(t,this.hSt)}return this.S_()}TSt(){const t=this.aSt,s=(e(this.qs,t),this.Wct.hk().s6());return Ho.xor(this.Qgt.apply(s,t),this.hSt)}*wSt(){if((this.ASt()||this.Xc.Mgt())&&(yield this),this.DSt()){let t=this.aSt,s=(e(this.qs,t),this.Wct.hk().s6()),i=this.Qgt.apply(s,t);return Ho.Oo(i)&&(i=yield*i),Ho.xor(i,this.hSt)}return this.S_()}dSt(){return!0}*pSt(){return(this.ASt()||this.Xc.Mgt())&&(yield this),!0}NSt(){if(this.pwt){if(2<=this.pwt.a6().PSt())throw new Error("not yet implemented");return this.pwt}return 2<=this.Wct.uk().PSt()?this.Wct.ek():this.Wct}SSt(){const t=this.aSt,s=(e(this.qs,t),this.Qgt.apply(this.NSt(),t));return this.Wct.Vgt(),s}*vSt(){if((this.ASt()||this.Xc.Mgt())&&(yield this),this.DSt()){const s=this.aSt;e(this.qs,s);let t=this.Qgt.apply(this.NSt(),s);return Ho.Oo(t)&&(t=yield*t),this.Wct.Vgt(),t}return this.S_()}bSt(){const i=this.qs,e=this.aSt,t=this.Wct.xk();for(let t=0,s=i.length;t<s;++t){const n=i[t];n.Twt()||(e[t]=n.Ks(0))}return t.Kct()?this.BSt(t):this.WSt(t)}*xSt(){return(this.ASt()||this.Xc.Mgt())&&(yield this),this.bSt()}jSt(i){const e=this.qs,n=this.aSt;for(let t=0,s=e.length;t<s;++t){const r=e[t];r.Twt()&&(n[t]=r.Ks(i))}}BSt(i){const t=this.Wct,e=t.Gz(),n=t.fwt(),r=this.mwt,h=0<=r,o=t.bk(),a=this.lSt,l=this.aSt,u=this.Qgt,c=this.hSt,f=this.oSt&&!this.eSt;i.Zct();for(let s=0,t=o.length;s<t;++s){const d=o[s];a&&this.jSt(s);let t;if(h){const p=e?d.mN().ywt(n):0;t=u.apply(d.ont()[r+p].s6(),l)}else t=u.apply(d.s6(),l);Ho.xor(t,c)?i.nft(d):f&&i.rft(d)}return t.USt(!0),i.hft(!1),t.Vgt(),i.Qct()}WSt(t){let s=this.Wct,i=s.Gz(),e=s.fwt(),n=s.IN(),r=this.mwt,h=0<=r,o=this.lSt,a=this.aSt,l=this.Qgt,u=this.hSt,c=this.oSt&&!this.eSt,f=t.oft(),d=t.aft(),p=c&&!this.gyt.agt(this),m=p?d:f,g=0,y=!1;for(let s=0,t=m.length;s<t;++s){const S=m[s];o&&this.jSt(s);let t;if(h){const v=i?S.mN().ywt(e):0;t=l.apply(S.ont()[r+v].s6(),a)}else t=l.apply(S.s6(),a);Ho.xor(t,u)?(y=!0,p?(f.push(S),n&&S.VSt()):(m[g]=S,n&&S.HSt(g),++g)):p?(m[g]=S,n&&S.zSt(g),++g):c&&(d.push(S),n)&&S.JSt()}Ho.Ph(m,g),n&&s.qSt(p,g);const w=y;return p&&!y&&(y=this.$St(f)),s.USt(w||c),c?y:t.Qct()}$St(i){const t=this.Wct,e=t.Gz(),n=t.fwt(),r=this.lSt,h=this.mwt,o=0<=h,a=this.aSt,l=this.Qgt,u=this.hSt;for(let s=0,t=i.length;s<t;++s){const c=i[s];r&&this.jSt(s);let t;if(o){const f=e?c.mN().ywt(n):0;t=l.apply(c.ont()[h+f].s6(),a)}else t=l.apply(c.s6(),a);if(Ho.xor(t,u))return!0}return!1}XSt(t,s){return this.qs[t].Ks(s)}Rpt(){const t=this.qs;if(t.length)return t[0].Owt();throw new Error("no parameters")}Y9(){if(!this.uSt||!this.uSt.size)return null;const s={};for(const[i,e]of this.uSt.entries()){let t=e;"collmemory"===i&&(t=[...e.entries()].map(t=>[t[0].EN(),t[1].EN(),t[2]])),s[i]=t}return{ex:s}}Z9(t){if(this.uSt&&(this.uSt.clear(),this.uSt=null),t){const s=this.Xc,i=t.ex;if(i){const e=this.LSt();e.clear();for(const[n,r]of Object.entries(i)){let t=r;"collmemory"===n&&(t=Ho.tr(Ho.Vu,r.map(t=>[s.eD(t[0]),s.eD(t[1]),t[2]]).filter(t=>t[0]&&t[1]))),e.set(n,t)}}}}}}{let n=function(i,e){for(let t=0,s=i.length;t<s;++t)e[t]=i[t].Ks(0)};n;const qo=self.Os,$o=[],Xo=function(){},Yo=function*(){};qo.Pmt=class extends qo.Kn{constructor(t,s,i){super();const e=(this.gyt=t).ED(),n=(this.Xc=e,this.Dg=i,this.KH=4<=s.length?s[3]:-1,this.YSt=5<=s.length?255&s[4]:0,this.ZSt=5<=s.length?s[4]>>8:0,this.Qgt=null,this.Wct=null,this.pwt=null,this.mwt=-1,this.$yt=null,this.KSt="",this.QSt=null,this.tvt=null,this.S_=Xo,this.Udt=Xo,this.qs=[],this.aSt=[],this.lSt=!1,this.uSt=null,this.cSt=null,-3===s[0]),r=n?s[2]:s[5];if(this.vmt=e.wX()||n?{bmt:r[0],fSt:r[1],index:r[2]}:null,-1===s[0])this.$yt=e.Xyt(),this.Qgt=e.Kgt(s[1]);else if(-2===s[0])this.KSt=s[1];else if(n){const h=e.Kgt(s[1]);this.Qgt=h,this.S_=this.svt,this.Udt=this.ivt,this.ZSt|=8}else this.Wct=e.Q7(s[0]),4&this.ZSt?(this.KSt=s[1],this.QSt=e.Q7(s[2])):(s[2]&&(this.pwt=this.Wct.ant(s[2]),this.mwt=this.Wct.kst(s[2])),this.Qgt=e.Kgt(s[1]));if(7===s.length){const o=s[6];for(const a of o)this.qs.push(qo.Mwt.tM(this,a,this.qs.length)),this.aSt.push(0)}0===this.qs.length&&(this.qs=$o,this.aSt=$o),this.evt()&&(this.gyt.kmt(),this.gyt.Ymt()),this.gyt.qF().K0t(this)}static tM(t,s,i){return qo.tr(qo.Pmt,t,s,i)}J0t(){for(const t of this.qs)t.J0t(),t.Twt()&&(this.lSt=!0);if(this.$yt)this.mSt(),this.Udt=this.gSt;else if(this.KSt)4&this.ZSt?this.nvt():this.rvt(),this.KSt="",this.QSt=null;else if(this.S_===this.svt){const s=this.Qgt,i=this.Xc.qF().mdt(this.gyt);this.Qgt=s.bind(null,this.Xc.LL(),i)}else this.pwt?this.Igt()?(this.S_=this.hvt,this.Udt=this.ovt):(this.S_=this.avt,this.Udt=this.lvt):this.Wct.uk().NL()?(this.ySt(),this.Udt=this.wSt):this.Xb()?(this.S_=this.uvt,this.Udt=this.cvt):this.Igt()?(this.S_=this.fvt,this.Udt=this.dvt):this.pvt()?(this.S_=this.mvt,this.Udt=this.gvt):this.qs.length?this.qs.every(t=>t.Twt())?(this.S_=this.yvt,this.Udt=this.wvt):this.lSt?(this.S_=this.Svt,this.Udt=this.vvt):this.qs.every(t=>t.X1t())?(n(this.qs,this.aSt),this.S_=this.bvt,this.Udt=this.xvt):(this.S_=this.Mvt,this.Udt=this.Gvt):(this.S_=this.bvt,this.Udt=this.xvt)}mSt(){const t=this.$yt,s=this.$yt;this.MSt(t,s,this.GSt)}ySt(){const t=this.Wct.uk(),s=this.Wct.hk().s6();this.MSt(t,s,this.TSt)}rvt(){const t=this.gyt.qF(),i=t.$F(this.KSt);if(i.Uu()){const e=0!=(2&this.ZSt);this.tvt=i.ZF();let s=[...new Set([...this.gyt.KF(),...this.tvt.KF()])];s=t.edt(s);const n=!i.iO()&&this.Tvt()?{Jgt:!0}:null;if(this.S_=qo.vpt.prototype.Wgt.bind(this.tvt,s,this.qs,e,n),this.Xc.wX()){const r=this;this.Udt=function*(){(r.ASt()||r.Xc.Mgt())&&(yield r);const t=yield*r.tvt.Xgt(s,r.qs,e,n);return t}}else this.Udt=Yo}else this.S_=Xo,this.Udt=Yo}nvt(){const r=this.gyt.qF(),h=r.xdt(this.QSt,this.KSt);if(h.Uu()){const o=0!=(2&this.ZSt);this.tvt=h.ZF();let s=[...new Set([...this.gyt.KF(),...this.tvt.KF(),this.Wct,h.mN()])],t=(s=r.edt(s),!this.Wct.Gz()&&!h.mN().Gz()),i=!this.Wct.Gz()&&h.mN().Gz(),e=this.Wct.Gz(),n=null;if(!h.iO()&&this.Tvt()&&((n=n||{}).Jgt=!0),!i&&o||((n=n||{}).jgt=this.Wct,n.Ugt=h.mN()),t||i||e&&!h.Tyt()?this.S_=qo.vpt.prototype.Wgt.bind(this.tvt,s,this.qs,o,n):e&&(this.S_=qo.spt.prototype.Eyt.bind(h,s,this.qs)),this.Xc.wX()){const a=this;t||i||e&&!h.Tyt()?this.Udt=function*(){(a.ASt()||a.Xc.Mgt())&&(yield a);const t=yield*a.tvt.Xgt(s,a.qs,o,n);return t}:e&&(this.Udt=function*(){(a.ASt()||a.Xc.Mgt())&&(yield a);const t=yield*h.Ryt(s,a.qs);return t})}else this.Udt=Yo}else this.S_=Xo,this.Udt=Yo}MSt(t,s,i){const e=this.Qgt,n=this.qs;if(0===n.length)this.S_=t.Qyt(e,s);else if(1===n.length){const r=n[0];if(r.X1t())this.S_=t._St(e,s,r.Ks(0));else{const h=t.Qyt(e,s);this.S_=function(){return h(r.Ks(0))}}}else if(2===n.length){const o=n[0],a=n[1];if(o.X1t()&&a.X1t())this.S_=t.ISt(e,s,o.Ks(0),a.Ks(0));else{const l=t.Qyt(e,s);this.S_=function(){return l(o.Ks(0),a.Ks(0))}}}else if(3===n.length){const u=n[0],c=n[1],f=n[2];if(u.X1t()&&c.X1t()&&f.X1t())this.S_=t.CSt(e,s,u.Ks(0),c.Ks(0),f.Ks(0));else{const d=t.Qyt(e,s);this.S_=function(){return d(u.Ks(0),c.Ks(0),f.Ks(0))}}}else this.S_=i}Az(){return this.KH}Igt(){return 0!=(8&this.ZSt)}_gt(){return 0!=(16&this.ZSt)}pvt(){return 1===this.YSt}Xb(){return 2===this.YSt}evt(){return 0!=(1&this.ZSt)}Wmt(){return this.Igt()||this._gt()}mN(){return this.Wct}ESt(){return this.pwt?this.pwt.a6():this.Wct?this.Wct.uk():null}Dwt(){const t=this.ESt();return t?t.PSt():1}ZF(){return this.gyt}Tvt(){let t=this.gyt;do{if(t instanceof qo.spt&&t.iO())return!0}while(t=t.ddt());return!1}ED(){return this.Xc}gF(){return this.Dg}pgt(){return this.vmt.index}ASt(){return this.vmt.bmt}OSt(t){this.vmt.bmt=!!t,this.gyt.qmt()}DSt(){return this.vmt.fSt}zpt(){return!this.ASt()&&!this.Xc.Mgt()&&!this.DSt()}LSt(){return this.uSt||(this.uSt=new Map),this.uSt}kSt(){return this.cSt||(this.cSt=new Map),this.cSt}GSt(){const t=this.aSt;return n(this.qs,t),this.Qgt.apply(this.$yt,t)}*gSt(){if((this.ASt()||this.Xc.Mgt())&&(yield this),this.DSt()){const t=this.aSt,s=(n(this.qs,t),yield*this.Qgt.apply(this.$yt,t));return s}return this.S_()}TSt(){const t=this.aSt;return n(this.qs,t),this.Qgt.apply(this.Wct.hk().s6(),t)}*wSt(){if((this.ASt()||this.Xc.Mgt())&&(yield this),this.DSt()){const t=this.aSt,s=(n(this.qs,t),yield*this.Qgt.apply(this.Wct.hk().s6(),t));return s}return this.S_()}bvt(){const i=this.aSt,e=this.Wct.xk().bk();for(let t=0,s=e.length;t<s;++t)this.Qgt.apply(e[t].s6(),i)}*xvt(){if((this.ASt()||this.Xc.Mgt())&&(yield this),this.DSt()){const i=this.aSt,e=this.Wct.xk().bk();for(let t=0,s=e.length;t<s;++t)yield*this.Qgt.apply(e[t].s6(),i)}else this.bvt()}Mvt(){const i=this.aSt,e=(n(this.qs,i),this.Wct.xk().bk());for(let t=0,s=e.length;t<s;++t)this.Qgt.apply(e[t].s6(),i)}*Gvt(){if((this.ASt()||this.Xc.Mgt())&&(yield this),this.DSt()){const i=this.aSt,e=(n(this.qs,i),this.Wct.xk().bk());for(let t=0,s=e.length;t<s;++t)yield*this.Qgt.apply(e[t].s6(),i)}else this.Mvt()}yvt(){const e=this.qs,n=this.aSt,s=this.Qgt,r=this.Wct.xk().bk();for(let i=0,t=r.length;i<t;++i){const h=r[i];for(let t=0,s=e.length;t<s;++t)n[t]=e[t].Ks(i);s.apply(h.s6(),n)}}*wvt(){if((this.ASt()||this.Xc.Mgt())&&(yield this),this.DSt()){const e=this.qs,n=this.aSt,s=this.Qgt,r=this.Wct.xk().bk();for(let i=0,t=r.length;i<t;++i){const h=r[i];for(let t=0,s=e.length;t<s;++t)n[t]=e[t].Ks(i);yield*s.apply(h.s6(),n)}}else this.yvt()}Svt(){const e=this.qs,n=this.aSt,s=this.Qgt,r=this.Wct.xk().bk();for(let t=0,s=e.length;t<s;++t){const i=e[t];i.Twt()||(n[t]=i.Ks(0))}for(let i=0,t=r.length;i<t;++i){const h=r[i];for(let t=0,s=e.length;t<s;++t){const o=e[t];o.Twt()&&(n[t]=o.Ks(i))}s.apply(h.s6(),n)}}*vvt(){if((this.ASt()||this.Xc.Mgt())&&(yield this),this.DSt()){const e=this.qs,n=this.aSt,s=this.Qgt,r=this.Wct.xk().bk();for(let t=0,s=e.length;t<s;++t){const i=e[t];i.Twt()||(n[t]=i.Ks(0))}for(let i=0,t=r.length;i<t;++i){const h=r[i];for(let t=0,s=e.length;t<s;++t){const o=e[t];o.Twt()&&(n[t]=o.Ks(i))}yield*s.apply(h.s6(),n)}}else this.Svt()}mvt(){const e=this.qs,n=this.aSt,s=this.Qgt,t=this.Wct,i=t._vt(),r=t.xk().bk();i.Ivt(s);for(let i=0,t=r.length;i<t;++i){const h=r[i];for(let t=0,s=e.length;t<s;++t)n[t]=e[t].Ks(i);s.apply(h.s6(),n)}i.Cvt(s)}*gvt(){if((this.ASt()||this.Xc.Mgt())&&(yield this),this.DSt()){const e=this.qs,n=this.aSt,s=this.Qgt,t=this.Wct,i=t._vt(),r=t.xk().bk();i.Ivt(s);for(let i=0,t=r.length;i<t;++i){const h=r[i];for(let t=0,s=e.length;t<s;++t)n[t]=e[t].Ks(i);yield*s.apply(h.s6(),n)}i.Cvt(s)}else this.mvt()}uvt(){const t=this.aSt;return n(this.qs,t),this.Qgt.apply(this.pwt||this.Wct,t)}*cvt(){if((this.ASt()||this.Xc.Mgt())&&(yield this),this.DSt()){const s=this.aSt;n(this.qs,s);let t=this.Qgt.apply(this.pwt||this.Wct,s);return qo.Oo(t)?yield*t:t}return this.uvt()}avt(){const t=this.Wct,s=t.Gz(),e=t.fwt(),n=this.qs,r=this.lSt,h=this.aSt,o=this.Qgt,a=this.mwt,l=t.xk().bk();for(let t=0,s=n.length;t<s;++t){const i=n[t];i.Twt()||(h[t]=i.Ks(0))}for(let i=0,t=l.length;i<t;++i){const u=l[i];if(r)for(let t=0,s=n.length;t<s;++t){const f=n[t];f.Twt()&&(h[t]=f.Ks(i))}const c=s?u.mN().ywt(e):0;o.apply(u.ont()[a+c].s6(),h)}}*lvt(){if((this.ASt()||this.Xc.Mgt())&&(yield this),this.DSt()){const t=this.Wct,s=t.Gz(),e=t.fwt(),n=this.qs,r=this.lSt,h=this.aSt,o=this.Qgt,a=this.mwt,l=t.xk().bk();for(let t=0,s=n.length;t<s;++t){const i=n[t];i.Twt()||(h[t]=i.Ks(0))}for(let i=0,t=l.length;i<t;++i){const u=l[i];if(r)for(let t=0,s=n.length;t<s;++t){const f=n[t];f.Twt()&&(h[t]=f.Ks(i))}const c=s?u.mN().ywt(e):0;yield*o.apply(u.ont()[a+c].s6(),h)}}else this.avt()}fvt(){const e=this.qs,n=this.aSt,s=this.Qgt,r=this.Wct.xk().bk(),h=[];for(let i=0,t=r.length;i<t;++i){const o=r[i];for(let t=0,s=e.length;t<s;++t)n[t]=e[t].Ks(i);h.push(s.apply(o.s6(),n))}return Promise.all(h)}*dvt(){if((this.ASt()||this.Xc.Mgt())&&(yield this),this.DSt()){const e=this.qs,n=this.aSt,s=this.Qgt,r=this.Wct.xk().bk(),h=[];for(let i=0,t=r.length;i<t;++i){const o=r[i];for(let t=0,s=e.length;t<s;++t)n[t]=e[t].Ks(i);h.push(yield*s.apply(o.s6(),n))}return Promise.all(h)}return this.fvt()}hvt(){const t=this.Wct,s=t.Gz(),e=t.fwt(),n=this.qs,r=this.aSt,h=this.Qgt,o=this.mwt,a=t.xk().bk(),l=[];for(let i=0,t=a.length;i<t;++i){const u=a[i];for(let t=0,s=n.length;t<s;++t)r[t]=n[t].Ks(i);const c=s?u.mN().ywt(e):0;l.push(h.apply(u.ont()[o+c].s6(),r))}return Promise.all(l)}*ovt(){if((this.ASt()||this.Xc.Mgt())&&(yield this),this.DSt()){const t=this.Wct,s=t.Gz(),e=t.fwt(),n=this.qs,r=this.aSt,h=this.Qgt,o=this.mwt,a=t.xk().bk(),l=[];for(let i=0,t=a.length;i<t;++i){const u=a[i];for(let t=0,s=n.length;t<s;++t)r[t]=n[t].Ks(i);const c=s?u.mN().ywt(e):0;l.push(yield*h.apply(u.ont()[o+c].s6(),r))}return Promise.all(l)}return this.hvt()}async svt(){try{await this.Qgt()}catch(t){console.error(`Unhandled exception running script %c${this.gyt.Jq().jc()}, event ${this.gyt.Qmt()}, action ${this.pgt()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),qo.Cpt.syt()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),qo.Cpt.iyt())}}*ivt(){return(this.ASt()||this.Xc.Mgt())&&(yield this),this.svt()}Y9(){return this.uSt&&this.uSt.size?{ex:qo.Ro(this.uSt)}:null}Z9(t){if(this.uSt&&(this.uSt.clear(),this.uSt=null),t){const s=t.ex;s&&(this.uSt=qo.Ao(s))}}}}{let d=function(t){return t instanceof h?w.t5(t):t.EW()},u=function(t){return d(t).aD()},n=function(t){return w.t5(t)},C=function(t,s,i,e){const n=s.EN(),r=i.EN();n<r?t.Set(s,i,e):t.Set(i,s,e)},E=function(t,s,i){const e=s.EN(),n=i.EN();e<n?t.Ju(s,i):t.Ju(i,s)},P=function(t,s){t.qu(s)},R=function(t,s,i){const e=s.EN(),n=i.EN();return e<n?t.Ks(s,i):t.Ks(i,s)},e=function(t,s,i,e){if(!s)return!1;const n=0!==i||0!==e,r=t.aD(),h=w.MF(),o=w.odt(),a=o.ZF().gft(),l=o.mN(),u=o.RSt(),c=s.xk(),f=l!==s;_=s,T=f&&!u;let d,p=0,m=0,g=I=!1;c.Kct()?(S.T(r.B4()),S.offset(i,e),h.Evt(r.lD(),s,S,v),d=v):!a||w.Pvt()&&!c.aft().length&&c.oft().length?d=c.oft():(d=c.aft(),I=!0),n&&(p=r.a2(),m=r.c2(),r.O4(i,e),r.P4());for(const y of d)if(h.ZD(t,y)){if(g=!0,u)break;f&&O.add(y)}return n&&(r.R4(p,m),r.P4()),A.Rh(v),g},i=function(t){const s=w.QF().gft(),i=_.xk(),e=i.oft(),n=i.aft();i.Kct()?(i.cft(O),s&&(A.Rh(n),i.fft(O,_.bk()))):s?I?i.dft(O):(i.fft(O,e),i.cft(O)):i.cft(O),_.Vgt()},b=function(t,s){T&&(s&&i(),O.clear(),_=null,T=!1)},s=function(t,s){const i=w.eD(s);if(i){const e=t.xk();if(e.Kct()||e.oft().includes(i))if(t.Gz()){if(i.mN().Rvt(t))return e.mft(i),t.Vgt(),!0}else if(i.mN()===t)return e.mft(i),t.Vgt(),!0}return!1},r=function(t,n){const r=t.xk();if(r.Kct()){r.hft(!1),r.Zct();const i=t.bk();for(let t=0,s=i.length;t<s;++t){const e=i[t];e.EN()===n?r.rft(e):r.nft(e)}return t.Vgt(),!!r.oft().length}{let i=r.oft(),e=0;for(let t=0,s=i.length;t<s;++t){const h=i[t];(i[e]=h).EN()===n?r.rft(h):++e}return A.Ph(i,e),t.Vgt(),!!i.length}},A=(d,u,n,C,E,P,R,e,i,b,s,r,self.Os),l=new A.Lo,x={},M={},G={},w=null,h=(A.Avt=function(t){w=t},self.dN),S=(M.Fvt=function(t,s){return A.compare(this.aD().a2(),t,s)},G.Fvt=function(t,s){return A.compare(this.x,t,s)},M.Ovt=function(t,s){return A.compare(this.aD().c2(),t,s)},G.Ovt=function(t,s){return A.compare(this.y,t,s)},M.Dvt=function(){return this.aD().V4()},G.Dvt=function(){return this.U4()},x.Lvt=function(){const t=u(this),s=t.HO(),i=t.B4();return i.gl()<0||i.yl()<0||i.pl()>s.$p()||i.ml()>s.hm()},x.kvt=function(i,e,n){const t=this.xk(),r=t.bk();if(!r.length)return!1;let h=r[0],o=h.aD(),a=h,l=A.mr(o.a2(),o.c2(),e,n);for(let t=1,s=r.length;t<s;++t){h=r[t],o=h.aD();const u=A.mr(o.a2(),o.c2(),e,n);(0===i&&u<l||1===i&&u>l)&&(l=u,a=h)}return t.mft(a),!0},M.l2=function(t){const s=this.aD();s.a2()!==t&&(s.l2(t),s.P4())},G.l2=function(t){this.x=+t},M.f2=function(t){const s=this.aD();s.c2()!==t&&(s.f2(t),s.P4())},G.f2=function(t){this.y=+t},M.Nvt=function(t,s){const i=this.aD();i.Bvt(t,s)||(i.R4(t,s),i.P4())},G.Nvt=function(t,s){this.setPosition(t,s)},x.Wvt=function(t,s){if(t){const i=d(this),e=t.Sk(i);if(e){const[n,r]=e.jvt(s),h=i.aD();h.a2()===n&&h.c2()===r||(h.R4(n,r),h.P4())}}},x.Uvt=function(t){if(0!==t){const s=u(this);s.O4(s.Vvt()*t,s.Hvt()*t),s.P4()}},M.zvt=function(t,s){if(0!==s){const i=this.aD();t=A.cr(t),i.O4(Math.cos(t)*s,Math.sin(t)*s),i.P4()}},G.zvt=function(t,s){0!==s&&(t=A.cr(t),this.F4(Math.cos(t)*s,Math.sin(t)*s))},M.a2=function(){return this.aD().a2()},G.a2=function(){return this.x},M.c2=function(){return this.aD().c2()},G.c2=function(){return this.y},x.mO=function(){return w.mO(d(this))},M.Jvt=function(t,s){return A.compare(this.aD().$p(),t,s)},G.Jvt=function(t,s){return A.compare(this.width,t,s)},M.qvt=function(t,s){return A.compare(this.aD().hm(),t,s)},G.qvt=function(t,s){return A.compare(this.height,t,s)},M.im=function(t){const s=this.aD();s.$p()!==t&&(s.im(t),s.P4())},G.im=function(t){this.width=t},M.Xp=function(t){const s=this.aD();s.hm()!==t&&(s.Xp(t),s.P4())},G.Xp=function(t){this.height=t},M.HI=function(t,s){const i=u(this);i.$p()===t&&i.hm()===s||(i.HI(t,s),i.P4())},G.HI=function(t,s){this.kk(t,s)},M.$p=function(){return this.aD().$p()},G.$p=function(){return this.width},M.hm=function(){return this.aD().hm()},G.hm=function(){return this.height},x.$vt=function(){return u(this).B4().pl()},x.Xvt=function(){return u(this).B4().ml()},x.Yvt=function(){return u(this).B4().gl()},x.Zvt=function(){return u(this).B4().yl()},x.Kvt=function(){const t=u(this).B4();return(t.pl()+t.gl())/2},x.Qvt=function(){const t=u(this).B4();return(t.ml()+t.yl())/2},x.t2t=function(t,s){return A.yr(u(this).jk(),A.cr(s))<=A.cr(t)},x.s2t=function(t){return A.vr(u(this).jk(),A.cr(t))},x.i2t=function(t,s){const i=A.cr(t),e=A.cr(s),n=u(this).jk(),r=!A.vr(e,i);return r?!(!A.vr(n,i)&&A.vr(n,e)):A.vr(n,i)&&!A.vr(n,e)},M.Wk=function(t){const s=this.aD(),i=A.ur(A.cr(t));isNaN(i)||s.jk()===i||(s.Wk(i),s.P4())},G.Wk=function(t){this.N4=t},x.e2t=function(t){if(!isNaN(t)&&0!==t){const s=u(this);s.Wk(s.jk()+A.cr(t)),s.P4()}},x.n2t=function(t){if(!isNaN(t)&&0!==t){const s=u(this);s.Wk(s.jk()-A.cr(t)),s.P4()}},x.r2t=function(t,s){const i=u(this),e=i.jk(),n=A.Sr(e,A.cr(s),A.cr(t));isNaN(n)||e===n||(i.Wk(n),i.P4())},x.h2t=function(t,s,i){const e=u(this),n=e.jk(),r=s-e.a2(),h=i-e.c2(),o=Math.atan2(h,r),a=A.Sr(n,o,A.cr(t));isNaN(a)||n===a||(e.Wk(a),e.P4())},x.o2t=function(t,s){const i=u(this),e=i.jk(),n=t-i.a2(),r=s-i.c2(),h=Math.atan2(r,n);isNaN(h)||e===h||(i.Wk(h),i.P4())},M.jk=function(){return A.dr(this.aD().jk())},G.jk=function(){return this.N4},x.a2t=function(t,s){return A.compare(A.Dr(100*u(this).ME(),6),t,s)},M.T5=function(){return this.aD().T5()},G.T5=function(){return this.isVisible},x.M5=function(t){const s=u(this);t=2===t?!s.T5():0!==t,s.T5()!==t&&(s.M5(t),w.mD())},x.TE=function(t){const s=A.lr(t/100,0,1),i=u(this);if(i.DB()){if(i.Ort().l2t()===s)return}else if(i.ME()===s)return;i.TE(s),w.mD()},x.u2t=function(t){l.da(t);const s=u(this);s.z4().na(l)||(s.J4(l),w.mD())},x.IE=function(){const t=u(this).z4();return A.Nr(t.Yo(),t.Zo(),t.Ko(),t.Qo())},x.ME=function(){return A.Dr(100*u(this).ME(),6)},x.c2t=function(t){return!!t&&u(this).lD()===t},x.f2t=function(i){const t=this.xk(),e=t.bk();if(!e.length)return!1;let s=e[0],n=s;for(let t=1,s=e.length;t<s;++t){const r=e[t],h=r.aD(),o=n.aD(),a=h.lD().gF(),l=o.lD().gF();0===i?(l<a||a===l&&h.uD()>o.uD())&&(n=r):(a<l||a===l&&h.uD()<o.uD())&&(n=r)}return t.mft(n),!0},M.d2t=function(t,s,i){const e=this.aD(),n=0===t?e.d2():e.L4();return A.compare(n,s,i)},G.d2t=function(t,s,i){const e=0===t?this.U5:this.D4;return A.compare(e,s,i)},M.p2t=function(){this.aD().X4()},G.p2t=function(){this.q4()},M.m2t=function(){this.aD().Z4()},G.m2t=function(){this.Y4()},x.g2t=function(t){t&&u(this).Q4(t)},x.y2t=function(t,s){const i=0===t;if(s){const e=d(this),n=s.w2t(e);n&&e.aD().sB(n,i)}},M.m2=function(t){const s=this.aD();s.d2()!==t&&(s.m2(t),w.mD())},G.m2=function(t){this.U5=t},x.S2t=function(){return u(this).lD().gF()},x.v2t=function(){return u(this).lD().jc()},M.b2t=function(){return this.aD().uD()},G.b2t=function(){return this.zIndex},M.x2t=function(){return this.aD().d2()},G.x2t=function(){return this.U5},M.M2t=function(){return this.aD().L4()},G.M2t=function(){return this.D4},x.G2t=function(t){const s=d(this),i=s.mN().Ok().unt(t);if(i){const e=i.gF(),n=s.aD().C4();return n.y6(e)}},x.T2t=function(t,s){const i=d(this),e=i.mN().Ok().unt(s);if(e){const n=e.gF(),r=1===t,h=i.aD().C4();h.y6(n)!==r&&(h.w6(n,r),h.S6(),w.mD())}},x._2t=function(t,s,i){const e=d(this),n=e.mN().Ok().unt(t);if(n){s=Math.floor(s);const r=n.QM().sG(s);if(r){"color"===r?(l.da(i),i=l):"percent"===r&&(i/=100);const h=n.gF(),o=e.aD().C4(),a=o.b6(h,s,i);a&&o.y6(h)&&w.mD()}}},A.tr(A.Rect)),F=[],v=[],T=!1,_=null,I=!1,O=new Set;x.I2t=function(w){if(this.Xc.C2t())return function*(w){if(w){let t=this.Xc,s=t.MF(),e=t.qF(),i=e.hO(),n=e.odt(),r=n.mN(),h=n.LSt(),o=n.kSt(),a=i.b8(),l=t.ott(),u=l-1,c=a.QF(),f=i.x8(c),d=h.get("collmemory"),p=(d||(d=A.tr(A.Vu),h.set("collmemory",d)),o.get("collisionCreatedDestroyCallback")||(o.set("collisionCreatedDestroyCallback",!0),t.Rf().addEventListener("instancedestroy",t=>P(d,t.f6))),r.xk()),m=w.xk(),g=p.bk(),y=null;for(let t=0;t<g.length;++t){const S=g[t];m.Kct()?(s.Evt(S.aD().lD(),w,S.aD().B4(),F),y=F,s.E2t(S,w,y)):y=m.bk();for(let t=0;t<y.length;++t){const v=y[t];if(s.ZD(S,v)||s.P2t(S,v)){let t=R(d,S,v),s=!1,i=-2;"number"==typeof t&&(s=!0,i=t);const b=!s||i<u;if(C(d,S,v,l),b){const x=c.v8(),M=(e.I8(x),r.xk()),G=w.xk();if(M.hft(!1),G.hft(!1),r===w){const T=M.oft();A.Rh(T),T.push(S),T.push(v),r.Vgt()}else{const _=M.oft(),I=G.oft();A.Rh(_),A.Rh(I),_.push(S),I.push(v),r.Vgt(),w.Vgt()}yield*c.Ogt(a,f),e.E8(x)}}else E(d,S,v)}A.Rh(F)}i.O8()}return!1}.call(this,w);if(w){let t=this.Xc,s=t.MF(),e=t.qF(),i=e.hO(),n=e.odt(),r=n.mN(),h=n.LSt(),o=n.kSt(),a=i.b8(),l=t.ott(),u=l-1,c=a.QF(),f=i.x8(c),d=h.get("collmemory"),p=(d||(d=A.tr(A.Vu),h.set("collmemory",d)),o.get("collisionCreatedDestroyCallback")||(o.set("collisionCreatedDestroyCallback",!0),t.Rf().addEventListener("instancedestroy",t=>P(d,t.f6))),r.xk()),m=w.xk(),g=p.bk(),y=null;for(let t=0;t<g.length;++t){const S=g[t];m.Kct()?(s.Evt(S.aD().lD(),w,S.aD().B4(),F),y=F,s.E2t(S,w,y)):y=m.bk();for(let t=0;t<y.length;++t){const v=y[t];if(s.ZD(S,v)||s.P2t(S,v)){let t=R(d,S,v),s=!1,i=-2;"number"==typeof t&&(s=!0,i=t);const b=!s||i<u;if(C(d,S,v,l),b){const x=c.v8(),M=(e.I8(x),r.xk()),G=w.xk();if(M.hft(!1),G.hft(!1),r===w){const T=M.oft();A.Rh(T),T.push(S),T.push(v),r.Vgt()}else{const _=M.oft(),I=G.oft();A.Rh(_),A.Rh(I),_.push(S),I.push(v),r.Vgt(),w.Vgt()}c.C8(a,f),e.E8(x)}}else E(d,S,v)}A.Rh(F)}i.O8()}return!1},x.R2t=function(t){return e(d(this),t,0,0)},x.A2t=function(t,s,i){return e(d(this),t,s,i)},x.SB=function(){return u(this).SB()},x.tq=function(){return u(this).tq()},x.F2t=function(i,e){const t=this.xk(),n=t.bk();if(0===n.length)return!1;let s=i.xk(),r=s.bk();if(s.Kct()){const a=[...this.Xc.O2t(i)];0<a.length&&(r=r.concat(a))}if(0===r.length)return!1;const h=s.Kct()?null:new Set(r),o=new Set;for(let t=0,s=n.length;t<s;++t){const l=n[t];if(1===e)for(const u of l.lB())u.D2t(i)&&(null===h||h.has(u))&&o.add(u);else{let t;if(0===e){if(null===(t=l.hB()))continue}else t=l.aB();t.D2t(i)&&(null===h||h.has(t))&&o.add(t)}}return 0!==o.size&&(s.cft(o),i.Vgt(),!0)},x.L2t=function(i,e){const t=this.xk(),n=t.bk();if(0===n.length)return!1;let s=i.xk(),r=s.bk();if(s.Kct()){const a=[...this.Xc.O2t(i)];0<a.length&&(r=r.concat(a))}if(0===r.length)return!1;const h=s.Kct()?null:new Set(r),o=new Set;for(let t=0,s=n.length;t<s;++t){const l=n[t];2!==e||l.tq()||!l.D2t(i)||null!==h&&!h.has(l)||o.add(l);for(const u of 0===e?l.children():l.pB())2===e&&u.tq()||u.D2t(i)&&(null===h||h.has(u))&&o.add(u)}return 0!==o.size&&(s.cft(o),i.Vgt(),!0)},x.k2t=function(i,e,n){const t=this.xk(),r=t.bk();if(0===r.length)return!1;let s=i.xk(),h=s.bk();if(s.Kct()){const l=[...this.Xc.O2t(i)];0<l.length&&(h=h.concat(l))}if(0===h.length)return!1;const o=s.Kct()?null:new Set(h),a=[];for(let t=0,s=r.length;t<s;++t){const u=r[t];if(0===e){const c=u.dB(n);null!==c&&c.D2t(i)&&(null===o||o.has(c))&&a.push(c)}else if(1===e)for(const f of u.children())if(f.D2t(i)){if(0===n){null!==o&&!o.has(f)||a.push(f);break}--n}}return 0!==a.length&&(s.uft(a),i.Vgt(),!0)},x.N2t=function(t,s,i){const e=d(this);switch(t){case 0:default:return A.compare(e.cB(),s,i);case 1:return A.compare(e.B2t(),s,i)}},x.gB=function(t,s,i,e,n,r,h,o,a,l){const u=d(this),c=w.ldt().mN();for(const f of t.W2t(u,c)){if(!f.uk().YL())return;u.gB(f,{bB:s,MB:i,TB:e,IB:n,EB:r,OB:h,RB:o,LB:a,NB:l})}},x.yB=function(t){const s=d(this),i=w.ldt().mN();for(const e of t.W2t(s,i))s.yB(e)},x.j2t=function(){const t=d(this);if(t.SB()){const s=t.hB();s.yB(t)}},x.U2t=function(){return d(this).cB()},x.V2t=function(){return d(this).B2t()},x.H2t=function(t,s){t=Math.floor(t),s=Math.floor(s);const i=u(this);t<2||s<2||!isFinite(t)||!isFinite(s)?(i.VB(),i.P4()):i.jB(t,s)},x.zB=function(t,s,i,e,n,r,h,o){const a=u(this),l=a.zB(t,s,{mode:0===i?"absolute":"relative",x:e,y:n,U5:r,u:h,v:o});l&&a.P4()},x.z2t=function(){const t=u(this);return t.qB()?t.$B().j2():0},x.J2t=function(){const t=u(this);return t.qB()?t.$B().U2():0},x.q2t=function(t){const s=u(this);t=2===t?!s.T5():0!==t,s.T5()!==t&&s.M5(t)},x.r6=function(t,s){this instanceof self.dN?this.Nj(t,s):this.r6(t,s)},x.$2t=function(t,s){this instanceof self.dN?this.Bj(t,""+s):this.$2t(t,""+s)},x.X2t=function(t){this instanceof self.dN?this.Wj(t):this.X2t(t)},x.Y2t=function(){this instanceof self.dN?this.Dj():this.i6()},x.Z2t=function(){this instanceof self.dN?this.Lj():this.e6()},x.K2t=function(){return this instanceof self.dN?this.kj():this.K2t()},x.Q2t=function(t){this instanceof self.dN?this._setEnabled(0!==t):this._SetEnabled(0!==t)},x.tbt=function(){return this instanceof self.dN?this.oyt():this._IsEnabled()},M.sbt=function(t,s,i){return A.compare(this.EW().Mrt(t),s,i)},G.sbt=function(t,s,i){return A.compare(n(this).Mrt(t),s,i)},M.ibt=function(t){return!!this.EW().Mrt(t)},G.ibt=function(t){return!!n(this).Mrt(t)},x.ebt=function(i,e){const t=this.xk(),n=t.bk();if(!n.length)return!1;let r=this.Gz(),h=null,o=0;for(let t=0,s=n.length;t<s;++t){const a=n[t],l=r?a.mN().cwt(this.fwt()):0,u=a.Mrt(l+e);(null===h||0===i&&u<o||1===i&&u>o)&&(o=u,h=a)}return t.mft(h),!0},x.nbt=function(t){return(this.Xc.odt().RSt()?r:s)(this,t)},x.lW=function(t){const s=new Set(A.Jh(t)),i=d(this).LN();return s.he(i)},x.rbt=function(){return d(this).hbt()},x.obt=function(){return d(this).LN().size},x.abt=function(t){return d(this).lbt(t)},x.ubt=function(t,s){const i=A.Jh(s);if(0!==i.length){const e=d(this),n=new Set(e.LN());if(0===t)for(const r of i)n.add(r);else if(1===t)for(const h of i)n.delete(h);e.NN(n)}},x.cbt=function(){w.xN(d(this))},x.fbt=function(){return!0},x.dbt=function(){return!0},M.pbt=function(t,s){this.EW().Grt(t,s)},G.pbt=function(t,s){n(this).Grt(t,s)},M.mbt=function(t,s){const i=this.EW(),e=i.Mrt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.Grt(t,e+s)},G.mbt=function(t,s){const i=n(this),e=i.Mrt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.Grt(t,e+s)},M.gbt=function(t,s){const i=this.EW(),e=i.Mrt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.Grt(t,e-s))},G.gbt=function(t,s){const i=n(this),e=i.Mrt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.Grt(t,e-s))},M.ybt=function(t,s){this.EW().Grt(t,s?1:0)},G.ybt=function(t,s){n(this).Grt(t,s?1:0)},M.wbt=function(t){const s=this.EW();s.Grt(t,0===s.Mrt(t)?1:0)},G.wbt=function(t){const s=n(this);s.Grt(t,0===s.Mrt(t)?1:0)},x.Sbt=function(t){let s;try{s=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const i=d(this);w.vbt(),i.pY("state"),i.T2(s,"state"),w.bbt("state",{xbt:!0})},x.Mbt=function(){return JSON.stringify(d(this).G2("state"))},x.Gbt=function(){return d(this).mN().jc()},x.Tbt=function(){let t=w.hdt().Jft(),s=t.Gk();for(const i of w.O2t(t))++s;return s},x._bt=function(){return w.hdt().Jft().xk().bk().length},M.V$=function(){return this.EW().V$()},G.V$=function(){return n(this).V$()},M.EN=function(){return this.EW().EN()},G.EN=function(){return n(this).EN()},x.A1t=function(t){const s=d(this);return t.toLowerCase()===w.qF().L1t(s)},x.WN=function(t){const s=d(this);w.qF().WN(s,t)},x.Ibt=function(t){return w.qF().a1t().Cbt(this.xk().bk(),t),!0},x.Ebt=function(){return d(this).RN()},A.Pbt=function(t,s,i){const e=t[1],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],l=t[8],u=t[10],c=t[11],f=t[12],d=t[13],p=t[14],m=t[15],g=t[16],y=s.N$,w=s.Pnt,S=s.Rnt,v=Object.assign({},x,2<=i?G:M);n&&(y.Fvt=v.Fvt,y.Ovt=v.Ovt,y.Dvt=v.Dvt,y.Lvt=v.Lvt,y.kvt=v.kvt,w.l2=v.l2,w.f2=v.f2,w.Nvt=v.Nvt,w.Wvt=v.Wvt,w.Uvt=v.Uvt,w.zvt=v.zvt,S.Rbt=v.a2,S.Abt=v.c2,S.pO=v.mO),r&&(y.Jvt=v.Jvt,y.qvt=v.qvt,w.im=v.im,w.Xp=v.Xp,w.HI=v.HI,S.Fbt=v.$p,S.Obt=v.hm,S.Dbt=v.$vt,S.Lbt=v.Xvt,S.kbt=v.Yvt,S.Nbt=v.Zvt,S.Bbt=v.Kvt,S.Wbt=v.Qvt),h&&(y.jbt=v.t2t,y.Ubt=v.s2t,y.i2t=v.i2t,w.Wk=v.Wk,w.e2t=v.e2t,w.n2t=v.n2t,w.r2t=v.r2t,w.h2t=v.h2t,w.o2t=v.o2t,S.Vbt=v.jk),o&&(y.T5=v.T5,y.a2t=v.a2t,w.M5=v.M5,w.TE=v.TE,w.u2t=v.u2t,S.Opacity=v.ME,S.Hbt=v.IE),a&&(y.c2t=v.c2t,y.f2t=v.f2t,y.d2t=v.d2t,w.p2t=v.p2t,w.m2t=v.m2t,w.g2t=v.g2t,w.y2t=v.y2t,w.m2=v.m2,S.S2t=v.S2t,S.v2t=v.v2t,S.b2t=v.b2t,S.x2t=v.x2t,S.M2t=v.M2t),l&&(y.G2t=v.G2t,w.T2t=v.T2t,w._2t=v._2t),d&&(y.SB=v.SB,y.tq=v.tq,y.F2t=v.F2t,y.L2t=v.L2t,y.k2t=v.k2t,y.N2t=v.N2t,w.gB=v.gB,w.yB=v.yB,w.j2t=v.j2t,S.U2t=v.U2t,S.V2t=v.V2t),p&&(w.H2t=v.H2t,w.zB=v.zB,S.z2t=v.z2t,S.J2t=v.J2t),u&&(y.T5=v.T5,w.M5=v.q2t,w.zbt=v.r6,w.Jbt=v.$2t,w.qbt=v.X2t),c&&(y.$bt=v.K2t,w.Xbt=v.Y2t,w.Ybt=v.Z2t),f&&(y.Uu=v.tbt,w.Zbt=v.Q2t),m&&(y.I2t=v.I2t,y.R2t=v.R2t,y.A2t=v.A2t,s.Kbt=b),e||(y.sbt=v.sbt,y.ibt=v.ibt,y.ebt=v.ebt,y.nbt=v.nbt,y.lW=v.lW,w.pbt=v.pbt,w.mbt=v.mbt,w.gbt=v.gbt,w.ybt=v.ybt,w.wbt=v.wbt,w.ubt=v.ubt,y.fbt=v.fbt,y.dbt=v.dbt,w.cbt=v.cbt,w.Sbt||(w.Sbt=v.Sbt),S.Mbt||(S.Mbt=v.Mbt),S.Tbt=v.Tbt,S._bt=v._bt,S.Qbt=v.V$,S.txt=v.EN,S.Gbt=v.Gbt,S.rbt=v.rbt,S.obt=v.obt,S.abt=v.abt,y.A1t=v.A1t,w.WN=v.WN,w.Ibt=v.Ibt),g&&(S.Ebt=v.Ebt)}}{const Zo=self.Os;Zo.l1t=class extends Zo.Kn{constructor(t){super(),this.wft=t,this.nf="",this.$R=-1,this.sxt="",this.ixt=!1,this.nxt=null,this.Ift=0,this.smt=[],this.Fft=null,this.rxt=new Map,this.hxt=null,this.oxt=null,this.axt=-1,this.hyt=null,this.lxt=null,this.uxt=!1}ir(){this.nf="",this.$R=-1,this.sxt="",this.nxt=null,this.oxt=null,this.hyt=null,this.lxt=null,this.axt=-1,Zo.Rh(this.smt),this.Fft&&(this.Fft.clear(),this.Fft=null);for(const t of this.rxt.values())t.ir();this.rxt.clear(),this.hxt=null}o2(){const t=this.wft,s=t.ED().Mz(),i=t.hdt(),e=(this.nxt=i.QF(),this.Ift=i.Bft()+1,t.tpt(this.nxt));e&&(this.oxt=e,this.hyt=e.Myt(),this.lxt=e.xyt().map(t=>t.Qit()),e.Igt())&&(this.axt=e.Iyt());for(const r of s){const h=r.xk();h.Kct()&&!this.nxt.Zmt(r)||(this.smt.push(r),this.rxt.set(r,Zo.tr(Zo.cxt,h)))}const n=t.tO();this.Fft=0<n.size?n:null}fxt(t){this.nf="timer",this.o2(),this.$R=this.wft.ED().wO()+t}dxt(t){this.nf="signal",this.o2(),this.sxt=t.toLowerCase()}Cbt(t,s){this.nf="instance-signals",this.o2(),this.sxt=s.toLowerCase(),this.hxt=new Set(t)}pxt(t){this.nf="promise",this.o2(),t.then(()=>this.C1t()).catch(t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.C1t()})}mxt(){return"timer"===this.nf}_1t(){return"signal"===this.nf}O1t(){return"instance-signals"===this.nf}Y1t(){return"promise"===this.nf}I1t(){return this.sxt}gxt(){return this.ixt}C1t(){this.ixt=!0}D1t(t){this.hxt.delete(t),0===this.hxt.size&&this.C1t()}f1t(){return this.mxt()?this.$R<=this.wft.ED().wO():this.gxt()}yxt(t){t.Oft(this.nxt,this.Ift);for(const[i,e]of this.rxt.entries()){const n=i.xk();e.Oft(n)}this.Fft&&t.Kft([...this.Fft]);const s=this.oxt;s&&(s.Ngt(this.hyt),s.xyt().map((t,s)=>t.Net(this.lxt[s])),s.Igt())&&s.Cyt(this.axt)}d1t(t){this.yxt(t),this.nxt.Cgt(t),this.oxt&&this.oxt.Igt()&&this.oxt.$gt(this.axt),this.wft.n1t(this.smt),this.uxt=!0}async y1t(t){this.yxt(t);for(const s of this.nxt.Egt(t))await this.wft.ED().jdt(s);this.oxt&&this.oxt.Igt()&&this.oxt.$gt(this.axt),this.wft.n1t(this.smt),this.uxt=!0}p1t(){return this.uxt}qct(t){for(const s of this.rxt.values())s.qct(t);if("instance-signals"===this.nf){for(const i of t)this.hxt.delete(i);0===this.hxt.size&&this.C1t()}}Y9(){const t={},s={wt:this.nf,t:this.$R,st:this.sxt,s:this.ixt,ev:this.nxt.Az(),sm:this.smt.map(t=>t.Az()),dsm:this.Fft?[...this.Fft].map(t=>t.Az()):null,sols:t};this.nxt.mgt(this.Ift)&&(s.act=this.nxt.udt(this.Ift).Az());for(const[i,e]of this.rxt)t[i.Az().toString()]=e.Y9();return"instance-signals"===this.nf&&(s.pi=[...this.hxt].map(t=>t.EN())),s}static Z1t(t,s){const i=t.ED(),e=t.Sdt(s.ev);if(!e)return null;let n=0;if(s.hasOwnProperty("act")){const h=t.bdt(s.act);if(!h)return null;n=h.gF()}const r=Zo.tr(Zo.l1t,t);r.$R=s.t,s.hasOwnProperty("wt")?r.nf=s.wt:r.nf=-1===r.$R?"signal":"timer",r.sxt=s.st,r.ixt=s.s,r.nxt=e,r.Ift=n;for(const o of s.sm){const a=i.d8(o);a&&r.smt.push(a)}if(Array.isArray(s.dsm))for(const l of s.dsm){const u=i.d8(l);u&&(r.Fft||(r.Fft=new Set),r.Fft.add(u))}for(const[c,f]of Object.entries(s.sols)){const d=parseInt(c,10),p=i.d8(d);if(p){const m=Zo.tr(Zo.cxt,null);m.Z9(t,f),r.rxt.set(p,m)}}if("instance-signals"===r.nf){r.hxt=new Set;for(const g of s.pi){const y=i.eD(g);y&&r.hxt.add(y)}}return r}}}{const Ko=self.Os;Ko.cxt=class extends Ko.Kn{constructor(t){super(),this.Wct=null,this.wxt=!0,this.vH=[],t&&(this.Wct=t.mN(),this.wxt=t.Kct(),Ko.Dh(this.vH,t.oft()))}ir(){this.Wct=null,Ko.Rh(this.vH)}Oft(t){t.hft(this.wxt),Ko.Dh(t.oft(),this.vH)}qct(t){Ko.Wh(this.vH,t)}Y9(){return{sa:this.wxt,insts:this.vH.map(t=>t.EN())}}Z9(t,s){const i=t.ED();this.wxt=!!s.sa,Ko.Rh(this.vH);for(const e of s.insts){const n=i.eD(e);n&&this.vH.push(n)}}}}{let l=function(t,s){let i=t.get(s);return i||(i=new Map,t.set(s,i)),i};l;const Qo=self.Os;Qo.Sxt=class extends Qo.Kn{constructor(t){super(),this.Xc=t.runtime,this.vxt=!!t.kL,this.bxt=!!t.xxt,this.Mxt=!!t.VL,this.Gxt=!!t.Txt,this._xt=!!t.zL,this.Ixt=!!t.Cxt,this.Ext=!!t.ZL,this.Pxt=!!t.jL,this.Rxt=!!t.qL,this.Axt=t.Fxt,this.Oxt=null,this.Dxt=new Map,this.Lxt=new Map,this.kxt=new Map,this.Nxt=new Map,this.Bxt=t.Wxt,this.jxt=null}ir(){this.Xc=null}ED(){return this.Xc}Uxt(){}F1t(){return(2<=this.PSt()?this.jxt:this).constructor}PSt(){return this.Axt}Vxt(t=!1){let s=this.Bxt;return t&&"function"!=typeof s&&2<=this.PSt()?globalThis.LW:s}NL(){return this.vxt}WL(){return this.bxt}UL(){return this.Pxt}$L(){return this.Rxt}HL(){return this.Mxt}Lv(){return this.Gxt}JL(){return this._xt}YL(){return this.Ixt}KL(){return this.Ext}Qyt(t,s){if(!s)throw new Error("missing 'this' binding");let i=this.Dxt.get(t);return i||(i=t.bind(s),this.Dxt.set(t,i)),i}_St(t,s,i){if(!s)throw new Error("missing 'this' binding");let e=l(this.Lxt,t),n=e.get(i);return n||(n=t.bind(s,i),e.set(i,n)),n}ISt(t,s,i,e){if(!s)throw new Error("missing 'this' binding");let n=l(this.kxt,t),r=l(n,i),h=r.get(e);return h||(h=t.bind(s,i,e),r.set(e,h)),h}CSt(t,s,i,e,n){if(!s)throw new Error("missing 'this' binding");let r=l(this.Nxt,t),h=l(r,i),o=l(h,e),a=o.get(n);return a||(a=t.bind(s,i,e,n),o.set(n,a)),a}Hxt(t){if(!this.NL())throw new Error("must be single-global plugin");this.Oxt=t}nk(){if(this.NL())return this.Oxt;throw new Error("must be single-global plugin")}hk(){if(this.NL())return this.Oxt.hk();throw new Error("must be single-global plugin")}zxt(){const t=this.PSt(),s=(Qo.DL.Jxt(this,t),this.Vxt(!0));if(s){if(this.jxt=new s,!(this.jxt instanceof self.AL))throw new TypeError("plugin class must derive from IPlugin")}else this.jxt=new self.AL;Qo.DL.qxt(t)}sk(){return this.jxt}}}{const ta=self.Os;ta.$xt=class extends ta.Sxt{constructor(t,s){super(t),this.Xxt=s,this.Yxt=0,this.Zxt=new Map,this.Kxt("elem-focused",t=>t.Qxt()),this.Kxt("elem-blurred",t=>{t&&t.tMt()})}ir(){super.ir()}sMt(t){const s=this.Yxt++;return this.Zxt.set(s,t),s}iMt(t){this.Zxt.delete(t)}Kxt(t,i){this.Xc.n4(this.Xxt,t,t=>{const s=this.Zxt.get(t.elementId);i(s,t)})}}}{const sa=self.Os;sa.eMt=class extends sa.Kn{constructor(t){super(),this.Wct=t,this.Xc=t.ED(),this.nMt=t.uk()}ir(){this.Wct=null,this.Xc=null,this.nMt=null}mN(){return this.Wct}ED(){return this.Xc}uk(){return this.nMt}N6(){return this.Wct.N6()}Uxt(){}USt(t){}Ivt(t){}Cvt(t){}a$(t){}p$(){}c$(){}O$(t){}rMt(){}Vxt(){return null}hMt(t,s,i){const e=sa.tr(sa.Event,t,s);e.oMt=this,i&&Object.assign(e,i),this.mN().yX(e)}}}{const ia=self.Os;ia.aMt=class extends ia.Kn{constructor(t,s){super(),this.vi=t,this.Xxt=s,this.lMt=null,this.Xc=t.ED(),this.Wct=this.vi.mN(),this.uMt=this.Wct._vt(),this.iY=null,this.nY=null,this.u4=!1,this.f4=!1,this.l0=null,this.pI=!1}ir(){this.pI=!0,this.cMt(),this.fMt(),this.iY=null,this.nY=null,this.l0&&(this.l0.ir(),this.l0=null),this.vi=null,this.Xc=null,this.Wct=null,this.uMt=null}er(){return this.pI}EW(){return this.vi}ED(){return this.Xc}mN(){return this.Wct}uk(){return this.uMt.uk()}_vt(){return this.uMt}dMt(){return this.vi.nD()}t4(t){return this.Xc.t4(t,this.vi,null)}pMt(t){return this.Xc.pMt(t,this.vi,null)}i4(t){return this.Xc.i4(t,this.vi,null)}mMt(t,s){return this.Xc.mMt(t,this.vi,s)}gMt(t,s){return this.Xc.gMt(t,this.vi,s)}yMt(t){return this.Xc.yMt(t)}wMt(t,s){this.Xc.n4(this.Xxt,t,s)}SMt(t){for(const[s,i]of t)this.wMt(s,i)}vMt(t,s){this.Xc.Kc(this.Xxt,t,s)}bMt(t,s){return this.Xc.yD(this.Xxt,t,s)}xMt(t,s){if(!this.Xc.RF())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.Xxt,handler:t,data:s,responseId:null});this.vMt(t,s)}MMt(t){if(!t)throw new Error("cannot set empty component id");this.lMt=t}GMt(){if(this.lMt)return this.Xc.w4(this.lMt);throw new Error("wrapper extension component id not set")}v4(t,s){if(!this.lMt)throw new Error("wrapper extension component id not set");this.Xc.v4(this.lMt,t,s)}TMt(t){for(const[s,i]of t)this.v4(s,i)}e8(t,s){if(!this.lMt)throw new Error("wrapper extension component id not set");this.Xc.e8(this.lMt,t,s)}n8(t,s){if(this.lMt)return this.Xc.n8(this.lMt,t,s);throw new Error("wrapper extension component id not set")}fZ(){}_Mt(){}IMt(){this.u4||(this.iY||(this.iY=()=>this.fZ()),this.Xc.Rf().addEventListener("tick",this.iY),this.u4=!0)}cMt(){this.u4&&(this.Xc.Rf().removeEventListener("tick",this.iY),this.u4=!1)}CMt(){return this.u4}EMt(){this.f4||(this.nY||(this.nY=()=>this._Mt()),this.Xc.Rf().addEventListener("tick2",this.nY),this.f4=!0)}fMt(){this.f4&&(this.Xc.Rf().removeEventListener("tick2",this.nY),this.f4=!1)}PMt(){return this.f4}RMt(){return[]}G2(){return null}T2(t){}prt(t){}vrt(t,s){}pht(t,s,i){if(0!==s){const e=this.prt(t);if("number"!=typeof e)throw new Error("expected number");this.vrt(t,e+s,i)}}AMt(t,s,i,e){}FMt(t,...s){t.call(this,...s)}OMt(t,...s){return t.call(this,...s)}Vxt(){return null}hMt(t,s,i){if(this.vi.DMt()){const e=this.dMt(),n=ia.tr(ia.Event,t,s);n.f6=e,i&&Object.assign(n,i),e.dispatchEvent(n)}}Lv(){return!1}}}{const ea=self.Os;ea.LMt=class extends ea.aMt{constructor(t,s){super(t,s),this.hst=t.aD(),this.kMt=null,this.NMt=null}ir(){if(this.kMt){const t=this.Xc.Rf();t.removeEventListener("renderercontextlost",this.kMt),t.removeEventListener("renderercontextrestored",this.NMt),this.kMt=null,this.NMt=null}this.hst=null,super.ir()}BMt(){this.WMt()}jMt(){}UMt(){}WMt(){if(!this.kMt){this.kMt=()=>this.fH(),this.NMt=()=>this.VMt();const t=this.Xc.Rf();t.addEventListener("renderercontextlost",this.kMt),t.addEventListener("renderercontextrestored",this.NMt)}}fH(){this.jMt()}VMt(){this.UMt()}aD(){return this.hst}Yst(){return!1}Xst(){if(!this.Yst())throw new Error("original size not known");const t=this.HMt();if(t)return t.$p()}Kst(){if(!this.Yst())throw new Error("original size not known");const t=this.HMt();if(t)return t.hm()}HMt(){return null}zMt(){const t=this.HMt();if(t){const s=t.Ox();if(s)return[s.$p(),s.hm()]}return[100,100]}JMt(){const t=this.HMt();return t?t.bC():null}qMt(){const t=this.HMt();return t?t.$Mt():null}XMt(){const t=this.HMt();return!!t&&t.YMt()}jvt(t){const s=this.vi.aD();return[s.a2(),s.c2(),s.L4()]}rMt(t,s,i){}ZMt(t,s){}I9(){return!0}}}{const na=self.Os,ra=na.tr(na.Rect);na.KMt=class extends na.LMt{constructor(t,s){super(t,s),this.QMt=this.uk().sMt(this),this.tGt=!0,this.sGt=!1,this.iGt=!1,this.eGt=-.2,this.nGt=na.tr(na.Rect,0,0,-1,-1);const i=this.Xc.wL();this.rGt=i.Sj(),this.hGt=i.vj(),this.oGt=-1,this.aGt=-1,this.lGt=!1,this.IMt()}ir(){this.uk().iMt(this.QMt),this.uGt("destroy"),this.QMt=-1,super.ir()}t6(){if(this.Xc.RF())throw new Error("not valid in worker mode");return this.cGt("get-element")}uGt(t,s){(s=s||{}).elementId=this.QMt,this.vMt(t,s)}cGt(t,s){return(s=s||{}).elementId=this.QMt,this.xMt(t,s)}fGt(t,s){return(s=s||{}).elementId=this.QMt,this.bMt(t,s)}dGt(t){t=t||{};const s=this.aD();t.elementId=this.QMt,t.isVisible=s.T5(),t.htmlIndex=s.lD()._j(),t.htmlZIndex=s.Ij(),Object.assign(t,this.pGt()),this.tGt=!!t.isVisible,this.xMt("create",t),this.mGt(!0)}q2t(t){this.tGt!==(t=!!t)&&(this.tGt=t,this.uGt("set-visible",{isVisible:t}))}fZ(){this.mGt(!1)}gGt(){const t=this.Xc.wL().Aj();return"Android"===na.ni.ri&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}mGt(u){if(!this.EW().Fj()){let t=this.aD(),s=t.lD(),i=t.B4(),[e,n]=s.hN(i.pl(),i.ml()),[r,h]=s.hN(i.gl(),i.yl()),o=this.Xc.wL(),a=o.xL(),l=o.GL();if(t.T5()&&s.T5())if(!this.gGt()&&(r<=0||h<=0||a<=e||l<=n))this.q2t(!1);else{ra.set(e,n,r,h);const c=o.Sj(),f=o.vj(),d=s._j(),p=t.Ij();if(!u&&ra.equals(this.nGt)&&this.rGt===c&&this.hGt===f&&this.oGt===d&&this.aGt===p)this.q2t(!0);else{this.nGt.T(ra),this.rGt=c,this.hGt=f,this.oGt=d,this.aGt=p,this.q2t(!0);let t=null;this.iGt&&(t=s.Oj()+this.eGt),this.uGt("update-position",{left:Math.round(this.nGt.pl()),top:Math.round(this.nGt.ml()),width:Math.round(this.nGt.width()),height:Math.round(this.nGt.height()),htmlIndex:d,htmlZIndex:p,fontSize:t})}}else this.q2t(!1)}}i6(){this.cGt("focus",{focus:!0})}e6(){this.cGt("focus",{focus:!1})}Qxt(){this.sGt=!0}tMt(){this.sGt=!1}K2t(){return this.sGt}r6(t,s){this.uGt("set-css-style",{prop:na.Fo(t),val:s})}$2t(t,s){this.uGt("set-attribute",{name:t,val:s})}X2t(t){this.uGt("remove-attribute",{name:t})}yGt(){this.lGt||(this.lGt=!0,Promise.resolve().then(()=>{this.lGt=!1,this.uGt("update-state",this.pGt())}))}pGt(){}wGt(){return this.QMt}}}{const ha=self.Os,oa=self.m6;ha.SGt=class extends ha.Kn{constructor(t){super(),this.Xc=t.runtime,this.vGt=ha.tr(ha.Yu),this.bGt=ha.tr(ha.Yu),this.Axt=t.Fxt,this.Bxt=t.Wxt,this.xGt=null}ir(){this.bGt.ir(),this.vGt.ir(),this.Xc=null}ED(){return this.Xc}Uxt(){}PSt(){return this.Axt}Vxt(t=!1){let s=this.Bxt;return t&&"function"!=typeof s&&2<=this.PSt()?globalThis.Vj:s}MGt(t){this.vGt.tc(t)}BY(){return this.vGt.sc()}cz(t){this.bGt.tc(t)}pz(t){this.bGt.Ju(t)}bk(){return this.bGt.sc()}zxt(){const t=this.PSt(),s=(ha.DL.Jxt(this,t),this.Vxt(!0));if(s){if(this.xGt=new s,!(this.xGt instanceof oa))throw new TypeError("behavior class must derive from IBehavior")}else this.xGt=new oa;ha.DL.qxt(t)}o6(){return this.xGt}}}{const aa=self.Os;aa.GGt=class extends aa.Kn{constructor(t){super(),this.Xc=t.ED(),this.pwt=t,this.Wct=t.mN(),this.TGt=t.a6(),this.TGt.MGt(this.Wct)}ir(){this.Xc=null,this.pwt=null,this.Wct=null,this.TGt=null}Uxt(){}c6(){return this.pwt}mN(){return this.Wct}ED(){return this.Xc}a6(){return this.TGt}}}{const la=self.Os;la._Gt=class extends la.Kn{constructor(t,s){super(),this.IGt=t,this.Xxt=s,this.vi=t.d6(),this.Xc=t.ED(),this.pwt=t.c6(),this.uMt=this.pwt._vt(),this.u4=!1,this.f4=!1,this.s8=!1,this.l0=null}ir(){this.cMt(),this.fMt(),this.CGt(),this.l0&&(this.l0.ir(),this.l0=null),this.IGt=null,this.vi=null,this.Xc=null,this.pwt=null,this.uMt=null}a6(){return this.pwt.a6()}EGt(){return this.IGt}d6(){return this.vi}mN(){return this.vi.mN()}aD(){return this.vi.aD()}ED(){return this.Xc}c6(){return this.pwt}_vt(){return this.uMt}dMt(){return this.IGt.dMt()}t4(t){return this.Xc.t4(t,this.vi,this.pwt)}pMt(t){return this.Xc.pMt(t,this.vi,this.pwt)}i4(t){return this.Xc.i4(t,this.vi,this.pwt)}PGt(){}fZ(){}_Mt(){}RGt(){}IMt(){this.u4||(this.Xc.Xj(this),this.u4=!0)}cMt(){this.u4&&(this.Xc.Yj(this),this.u4=!1)}CMt(){return this.u4}EMt(){this.f4||(this.Xc.Zj(this),this.f4=!0)}fMt(){this.f4&&(this.Xc.Kj(this),this.f4=!1)}PMt(){return this.f4}AGt(){this.s8||(this.Xc.Qj(this),this.s8=!0)}CGt(){this.s8&&(this.Xc.t8(this),this.s8=!1)}FGt(){return this.s8}RMt(){return[]}wMt(t,s){this.Xc.n4(this.Xxt,t,s)}OGt(t,s){}G2(){return null}T2(t){}prt(t){}vrt(t,s){}pht(t,s){if(0!==s){const i=this.prt(t);if("number"!=typeof i)throw new Error("expected number");this.vrt(t,i+s)}}AMt(t,s,i,e){}FMt(t,...s){t.call(this,...s)}OMt(t,...s){return t.call(this,...s)}Vxt(){return null}hMt(t,s,i){if(this.IGt.DMt()){const e=this.dMt(),n=la.tr(la.Event,t,s);n.DGt=e,n.f6=e.f6,i&&Object.assign(n,i),e.dispatchEvent(n)}}}}{let s=function(t){if(t!==i)throw new Error("invalid internal API token")},r=(s,self.Os),i=(r.W$={},r.Mat={},r.Ds()),e=[],n=[],h=[],o=null,a=null,t=null,l=null,u=new Map,c=new Map;r.DL=class extends r.Kn{constructor(t,s){super(),this.Xc=t,this.LGt=[],this.$yt=null,this.kGt=[],this.NGt=new Map,this.BGt=null,this.WGt=null,this.jGt=new Set(s)}UGt(t){const s=t[19],i=this.Xc.Kgt(t[0]);if(!i)throw new Error("missing plugin");r.Pbt(t,i,s);const e=2<=s?r.Sxt:i,n=r.tr(e,{runtime:this.Xc,kL:t[1],xxt:t[2],VL:t[5],zL:t[8],Txt:t[9],Cxt:t[13],ZL:t[14],jL:t[17],qL:t[18],Fxt:s,Wxt:2<=s?i:null});n.Uxt(),this.LGt.push(n),u.set(i,n)}VGt(){this.$yt=r.tr(r.W$.B$,{runtime:this.Xc,kL:!0}),this.$yt.Uxt()}HGt(t){const i=t[1],e=this.Xc.Kgt(t[0]);if(!e)throw new Error("missing behavior");this.NGt.set(e,()=>{const t=2<=i?r.SGt:e,s=r.tr(t,{runtime:this.Xc,Fxt:i,Wxt:2<=i?e:null});s.Uxt(),this.kGt.push(s),c.set(e,s),!this.BGt&&r.Mat.solid&&s instanceof r.Mat.solid?this.BGt=s:!this.WGt&&r.Mat.jumpthru&&s instanceof r.Mat.jumpthru&&(this.WGt=s),s.zxt()})}zGt(t){const s=this.NGt.get(t);s&&(s(),this.NGt.delete(t))}static Jxt(t,s=1){if(r.DL.Jxt!==o)throw new Error("invalid method");1===s&&e.push(t),n.push(t)}static qxt(t=1){if(r.DL.qxt!==a)throw new Error("invalid method");1===t&&e.pop(),n.pop()}static SN(){if(r.DL.SN!==t)throw new Error("invalid method");if(0===e.length)throw new Error("no init object set");return e.at(-1)}static OL(t){if(r.DL.OL!==l)throw new Error("invalid method");if(s(t),0===n.length)throw new Error("no init object set");return n.at(-1)}static JGt(t){h.push(t)}static qGt(){h.pop()}static KN(){if(0===h.length)throw new Error("no init properties set");return h.at(-1)}$Gt(){for(const t of this.LGt)t.zxt()}static tk(t){return u.get(t)||null}static g6(t){return c.get(t)||null}Xyt(){return this.$yt}XGt(){return this.BGt}YGt(){return this.WGt}w4(t){return this.jGt.has(t)}},o=r.DL.Jxt,a=r.DL.qxt,t=r.DL.SN,l=r.DL.OL}{const ua=self.Os,ca=new Set;ua.ZGt=class extends ua.Kn{constructor(){super(),this.KGt=0,this.sH="",this.iH=0,this.QGt=0,this.tTt=0,this.Dm=0,this.Lm=0,this.sTt=!1,this.iTt=!1,this.eTt=null,this.nTt="",this.aI=ua.tr(ua.Rect),this.rTt=ua.tr(ua.Hl),this.hTt="",this.oTt=new self.ID(this),ca.add(this)}ir(){this.cI(),this.eTt&&0===this.eTt.mH()&&this.eTt.ir(),this.eTt=null,ca.delete(this),this.aTt()}static fH(){for(const t of ca)t.nTt="",t.aI.set(0,0,0,0),t.rTt.cu(t.aI)}lTt(t){this.sH=t[0],this.iH=t[1],this.QGt=t[2],this.tTt=t[3],this.Dm=t[4],this.Lm=t[5],this.sTt=t[6],this.iTt=!0}uTt(t,s){if(this.eTt)throw new Error("already loaded asset");this.sH=s;const i={};return ua.lo(s)&&(i.AV="remote"),this.CD(t,i),this.eTt.DV()}cTt(t,s){if(this.eTt)throw new Error("already loaded asset");this.sH="",this.iH=s.size,this.eTt=ua.tr(ua.FV,t.vF(),{blob:s,size:this.iH,AV:"local"})}fTt(t){if(t===this)throw new Error("cannot replace with self");this.KGt++,this.cI(),this.sH=t.sH,this.iH=t.iH,this.QGt=t.QGt,this.tTt=t.tTt,this.Dm=t.Dm,this.Lm=t.Lm,this.sTt=t.sTt,this.iTt=t.iTt,this.eTt=t.eTt,this.nTt=t.nTt,this.aI=t.aI,this.rTt=t.rTt,this.aTt()}OV(){return this.sH}$u(){return this.iH}dTt(){return this.QGt}pTt(){return this.tTt}YMt(){return this.sTt}$p(){return this.Dm}hm(){return this.Lm}mTt(){return this.eTt.$p()}gTt(){return this.eTt.hm()}CD(t,s){if(this.eTt)throw new Error("already got asset");s=Object.assign({},s,{url:this.OV(),size:this.$u()}),this.eTt=t.RV(s)}hH(){return this.eTt&&this.eTt.hH()}async dU(t,s){if(!this.eTt)throw new Error("no asset");if(this.nTt)throw new Error("already loaded texture");const i=this.KGt,e=(this.nTt="loading",await this.eTt.dU(t,s));if(this.KGt!==i)return null;if(!e)return this.nTt="",null;this.nTt="loaded",this.iTt||(this.Dm=e.$p(),this.Lm=e.hm(),this.iTt=!0);const n=this.sTt?this.Lm:this.Dm,r=this.sTt?this.Dm:this.Lm;return this.aI.set(this.QGt,this.tTt,this.QGt+n,this.tTt+r),this.aI.Tt(e.$p(),e.hm()),this.rTt.cu(this.aI),this.sTt&&this.rTt.yu(),e}cI(){this.nTt&&(this.eTt&&this.eTt.cI(),this.nTt="",this.aI.set(0,0,0,0),this.rTt.cu(this.aI))}Ox(){return this.eTt&&"loaded"===this.nTt?this.eTt.Ox():null}bC(){return this.aI}$Mt(){return this.rTt}XW(){return this.oTt}yTt(){return this.eTt}async wTt(t){t=t||await this.eTt.gH();const s=ua.Go(this.Dm,this.Lm),i=s.getContext("2d");return this.sTt?(i.rotate(Math.PI/-2),i.translate(-this.Lm,0),i.drawImage(t,this.QGt,this.tTt,this.Lm,this.Dm,0,0,this.Lm,this.Dm)):i.drawImage(t,this.QGt,this.tTt,this.Dm,this.Lm,0,0,this.Dm,this.Lm),s}async STt(t){if(!this.hTt){const s=await this.wTt(t),i=await ua.To(s);this.hTt=URL.createObjectURL(i)}return this.hTt}aTt(){this.hTt&&(URL.revokeObjectURL(this.hTt),this.hTt="")}}}{const fa=self.Os;fa.vTt=class extends fa.Kn{constructor(t){super(),this.rr=t[0],this.bTt=t[1],this.rSt=!!t[2],this.Hht=t[3],this.xTt=t[4],this.MTt=!!t[5],this.KH=t[6],this.GTt=t[7].map(t=>fa.tr(fa.TTt,t)),this._Tt=new self.x6(this)}static ITt(t,s){const i=fa.tr(fa.vTt,[s,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return i.GTt.push(fa.TTt.ITt(t)),i}ir(){for(const t of this.GTt)t.ir();fa.Rh(this.GTt)}CTt(t){for(const s of this.GTt)s.N6().CD(t)}ETt(s,i){return Promise.all(this.GTt.map(t=>t.N6().dU(s,i)))}PTt(){for(const t of this.GTt)t.N6().cI()}jc(){return this.rr}Az(){return this.KH}P6(){return this.GTt.length}A6(){return this.GTt}RTt(t){if((t=Math.floor(t))<0||t>=this.GTt.length)throw new RangeError("invalid frame");return this.GTt[t]}ATt(t,s){(s=Math.floor(s))<0?this.GTt.unshift(t):s>=this.GTt.length?this.GTt.push(t):this.GTt.splice(s,0,t)}FTt(t){if((t=Math.floor(t))<0||t>=this.GTt.length)throw new RangeError("invalid frame");this.GTt[t].ir(),this.GTt.splice(t,1)}OTt(i){for(let t=0,s=this.GTt.length;t<s;++t)if(fa.pn(this.GTt[t].nW(),i))return t;return-1}DTt(t){if("string"!=typeof t)return t;{const s=this.OTt(t);if(-1===s)throw new Error("cannot find animation frame with tag "+t);return s}}M6(){return this.bTt}G6(){return this.rSt}T6(){return this.Hht}I6(){return this.xTt}E6(){return this.MTt}LTt(){return this._Tt}}}{const da=self.Os,pa=(()=>{const i=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),e=new Uint8Array(i.length);for(let t=0,s=i.length;t<s;++t)e[t]=i.charCodeAt(t);return new Blob([e],{type:"image/png"})})();da.TTt=class extends da.Kn{constructor(t){super(),this.kTt=da.tr(da.ZGt),this.kTt.lTt(t),this.NTt=t[7],this.BTt=da.tr(da.Ha,t[8],t[9]),this.WTt=t[10].map(t=>da.tr(da.jTt,this,t)),this.UTt=new Map;for(const i of this.WTt)this.UTt.set(i.jc().toLowerCase(),i);this.VTt=null;const s=t[11];6<=s.length&&(this.VTt=da.tr(da.Gu,s)),this.Lg=t[12]||"",this.HTt=new self.k6(this)}static ITt(t){const s=da.tr(da.TTt,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return s.kTt.cTt(t,pa),s}ir(){this.VTt&&(this.VTt.ir(),this.VTt=null),this.kTt.ir(),this.kTt=null}N6(){return this.kTt}B6(){return this.NTt}j6(){return this.BTt.Xa()}V6(){return this.BTt.Za()}tW(){return this.VTt}K6(t){return this.UTt.get(t.toLowerCase())||null}Z6(t){return(t=Math.floor(t))<0||t>=this.WTt.length?null:this.WTt[t]}J6(){return this.WTt.length}nW(){return this.Lg}F6(){return this.HTt}}}{const ma=self.Os;ma.jTt=class extends ma.Kn{constructor(t,s){super(),this.zTt=t,this.rr=s[0],this.JTt=ma.tr(ma.Ha,s[1],s[2])}ir(){}jc(){return this.rr}a2(){return this.JTt.Xa()}c2(){return this.JTt.Za()}qTt(){return this.JTt}}}{const G=self.Os,ga=self.C3Debugger,ya=self.ak;G.dlt=class extends G.Kn{constructor(s,t,i){super();const e=s.Kgt(i[1]),[n,r]=(this.Xc=s,this.nMt=G.DL.tk(e),this.uMt=null,this.$Tt=e.Instance,this.Dg=t,this.KH=i[11],this.rr=i[0],this.Dyt=this.Xc.gdt(i[14]),this.XTt=!!i[9],this.YTt=!!i[2],this.ZTt=!!i[10],this.KTt=i[3].map(t=>({sid:t[0],type:t[1],name:t[2],QTt:s.gdt(t[3])})),this.t_t=i[4],this.s_t=i[5],this.bxt=this.nMt.WL(),this.i_t=G.tr(G.Event.Rf),this.F7=null,s.MF().nL());if(this.e_t=G.tr(G.n_t,n,r),this.r_t=!0,this.h_t=null,this.o_t=null,this.a_t=-1,this.l_t=null,this.u_t=null,this.c_t=null,this.f_t=null,this.d_t=null,this.p_t=!1,this.m_t=null,this.g_t=i[8].map(t=>G.y_t.tM(this,t)),this.w_t=[],this.S_t=new Map,this.v_t=new Map,this.b_t=new Set,this.x_t=new Map,this.M_t=G.tr(G.Bct,this),this.G_t=null,this.T_t=0,this.__t=!1,this.m_t=null,this.kTt=null,this.I_t=null,this.C_t=null,this.E_t=null,this.P_t=0,this.uSt=new Map,this.cSt=new Map,this.vH=[],this.R_t=new Map,this.A_t=!0,this.nMt.JL()&&(this.F7=G.tr(G.O7,this,i[12])),i[6]&&(this.kTt=G.tr(G.ZGt),this.kTt.lTt(i[6])),i[7]){this.I_t=i[7].map(t=>G.tr(G.vTt,t)),this.C_t=new Map,this.E_t=new Map;for(const a of this.I_t)this.C_t.set(a.jc().toLowerCase(),a),this.E_t.set(a.Az(),a)}this.YTt?(this.h_t=[],this.o_t=new Set,this.a_t=this.Xc.F_t()):(this.l_t=[],this.u_t=new Set,this.c_t=[],this.f_t=[],this.d_t=[]);const h=this.nMt.PSt();if(h<2&&(this.uMt=G.tr(e.O_t,this,i[15]),!(this.uMt instanceof G.eMt)))throw new Error("v1 sdk type must derive from SDKTypeBase");this.D_t=null,this.L_t=null,this.Oq=G.tr(G.Event.Rf),G.DL.Jxt(this,h);let o;if(o=2<=h?(o=e.O_t)||globalThis.JW:this.uMt.Vxt()){if(this.D_t=new o(h<2?this:null),h<2&&!(this.D_t instanceof ya))throw new TypeError("script interface class must derive from IObjectClass");if(2<=h&&!(this.D_t instanceof globalThis.JW))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else this.D_t=new ya;if(G.DL.qxt(h),i[13]){const l=i[13];if(l){const u=l[0],c=l[1],f=l[2];this.uMt.rMt(u,c,f)}}this.Xc.k_t()&&!this.YTt&&!this.ZTt&&this.bxt||this.Uxt(),this.nMt.NL()&&(this.nMt.Hxt(this),this.N_t(i)),this.B_t=null}static tM(t,s,i){return G.tr(G.dlt,t,s,i)}ir(){if(this.i_t.ir(),this.i_t=null,this.kTt&&(this.kTt.ir(),this.kTt=null),this.I_t){for(const t of this.I_t)t.ir();G.Rh(this.I_t),this.C_t.clear(),this.E_t.clear()}this.B_t=null,this.M_t.ir(),this.M_t=null,this.uSt.clear(),this.cSt.clear(),this.m_t=null,this.Xc=null}W_t(i){for(let t=1,s=i.length;t<s;++t){const e=this.Xc.Q7(i[t]);this.h_t.push(e),this.o_t.add(e),e.l_t.push(this),e.u_t.add(this)}}j_t(t){this.p_t=!0,this.m_t=t}IN(){return this.p_t}r$(){return this.m_t}U_t(){let t=0;if(!this.YTt)for(const s of this.l_t)for(const i of s.V_t()){const e=i.jc().toLowerCase();this.S_t.set(e,i),this.v_t.set(e,t),this.w_t.push(i),++t}for(const n of this.V_t()){const r=n.jc().toLowerCase();this.S_t.set(r,n),this.v_t.set(r,t),this.w_t.push(n),++t}for(const h of this.w_t)this.b_t.add(h.a6().constructor);if(!this.YTt&&this.l_t.length){let t=this.Xc.H_t(),s=(G.Fh(this.c_t,t,0),G.Fh(this.f_t,t,0),G.Fh(this.d_t,t,0),[]),i=0,e=0,n=0;for(const o of this.l_t){const a=o.fwt(),l=(this.c_t[a]=i,i+=o.z_t(),this.f_t[a]=e,e+=o.J_t(),this.d_t[a]=n,n+=o.q_t(),o.Ok());if(l&&this.F7)for(const u of l.Dk())s.push(u.$_t(this.F7))}this.F7&&this.F7.X_t(s)}}N_t(t){const s=this.Xc.Y_t(),i=G.tr(G.Instance,{runtime:this.Xc,pN:this,uid:s});i.Z_t(t[16],[]),this.Xc.K_t(s,i),this.vH.push(i)}_vt(){return this.uMt}Q_t(){return this.ZTt}Rf(){return this.i_t}Uxt(){this.YTt||(this.uMt?this.uMt.Uxt():this.D_t.qW())}tIt(){return 0<this.P_t}async a$(t){this.YTt||(this.P_t++,1===this.P_t&&(this.uMt?await this.uMt.a$(t):await this.D_t.YW(this.Xc.wL().sIt())))}p$(){if(!this.YTt){if(this.P_t--,this.P_t<0)throw new Error("released textures too many times");0===this.P_t&&(this.uMt?this.uMt.p$():this.D_t.ZW(this.Xc.wL().sIt()))}}c$(){if(this.YTt)throw new Error("not applicable to family");this.uMt?this.uMt.c$():this.D_t.KW()}async O$(t){this.YTt||(this.uMt?await this.uMt.O$(t):await this.D_t.QW(this.Xc.wL().sIt()))}ED(){return this.Xc}uk(){return this.nMt}iIt(){return this.$Tt}jc(){return this.rr}gdt(){return this.Dyt}gF(){return this.Dg}Az(){return this.KH}Gz(){return this.YTt}uz(){return this.XTt}WL(){return this.bxt}fwt(){return this.a_t}V_t(){return this.g_t}J_t(){return this.t_t}eIt(t){return t&&this.b_t.has(t)}z_t(){return this.KTt.length}nIt(){return this.KTt.map(t=>t.sid)}rIt(s){return this.KTt.findIndex(t=>t.sid===s)}Fst(s){return this.KTt.findIndex(t=>t.name===s)}hIt(){return this.KTt.map(t=>t.name)}oIt(){return this.KTt.map(t=>t.QTt)}Dst(t){if((t=Math.floor(t))<0||t>=this.KTt.length)throw new RangeError("invalid instance variable index");return this.KTt[t].type}Ost(t){if((t=Math.floor(t))<0||t>=this.KTt.length)throw new RangeError("invalid instance variable index");return this.KTt[t].name}q_t(){return this.s_t}aIt(){return this.w_t}ant(t){return this.S_t.get(t.toLowerCase())||null}kst(t){const s=this.v_t.get(t.toLowerCase());return void 0===s?-1:s}Ok(){return this.F7}JL(){return this.nMt.JL()}lIt(){return this.F7&&this.F7.uIt()}r1t(){return this.M_t}xk(){return this.M_t.xk()}N6(){return this.kTt}ez(t){this.G_t=t}iz(){return this.G_t}nz(t){this.T_t=t}cIt(){return this.T_t}fIt(){return this.I_t}dIt(){return this.I_t.length}Mdt(){return this.l_t}Rvt(t){return this.u_t.has(t)}Dmt(){return this.h_t}Tz(t){return this.o_t.has(t)}ywt(t){return this.f_t[t]}cwt(t){return this.c_t[t]}Syt(t){this.x_t.set(t.Gyt().toLowerCase(),t)}vyt(t){return!!this.Pyt(t)}Pyt(t){const s=this.x_t.get(t.toLowerCase());return s&&s.Uu()?s:null}pIt(){return this.I_t}mIt(t){if(this.I_t)return this.C_t.get(t.toLowerCase())||null;throw new Error("no animations")}gIt(t){if(this.I_t)return this.E_t.get(t)||null;throw new Error("no animations")}yIt(t){if(this.mIt(t))throw new Error(`animation name '${t}' already exists`);const s=G.vTt.ITt(this.ED(),t);return this.I_t.push(s),this.C_t.set(s.jc().toLowerCase(),s),this.E_t.set(s.Az(),s),s}wIt(t){const s=this.mIt(t);if(!s)throw new Error(`animation name '${t}' does not exist`);if(1===this.I_t.length)throw new Error("cannot remove last animation");const i=this.I_t.indexOf(s);this.I_t.splice(i,1),this.C_t.delete(s.jc().toLowerCase()),this.E_t.delete(s.Az()),s.ir()}SIt(){if(this.I_t)return this.I_t[0];throw new Error("no animations")}vIt(){return this.SIt().RTt(0)}bIt(){if(this.I_t){const t=this.vIt().N6();return[t.$p(),t.hm()]}return this.kTt?[this.kTt.$p(),this.kTt.hm()]:[100,100]}hk(){if(this.nMt.NL())return this.vH[0];throw new Error("not a single-global plugin")}bk(){return this.vH}*instances(){yield*this.vH}*vk(){yield*this.vH,yield*this.Xc.O2t(this)}Gk(){return this.vH.length}cz(t){this.vH.push(t)}xIt(){this.A_t=!0}J$(){if(this.A_t&&!this.YTt){let s=this.vH,i=0;for(let t=s.length;i<t;++i)s[i].MIt(i);const t=this.Xc.GIt();for(const e of t)e.mN()===this&&e.MIt(i++);this.A_t=!1}}TIt(t){const s=this.vH;if(t<s.length)return s[t];t-=s.length;const i=this.Xc.GIt();for(const e of i)if(e.mN()===this){if(0===t)return e;--t}return null}w2t(t){if(t&&t.IN()&&t.mN()!==this)for(const i of t.CN())if(i.mN()===this)return i;const s=this.xk().bk();return s.length?s[0]:null}Sk(t){const s=this.xk().bk();return 0<s.length?s[t.V$()%s.length]:null}*W2t(t,s){let i=this.xk().bk(),e=i.length,n=s.xk(),r=s.xk().bk(),h=r.length,o=t.V$(),a=(!s.Gz()&&n.Kct()||(o=r.indexOf(t)),Math.ceil(e/h)),l=e%h,u=0,c;c=0==l||o<l?(u=o*a,a):(u=l*a+(o-l)*(a-1),a-1);for(let t=u,s=u+c;t<s;++t)yield i[t]}USt(t){this.uMt?.USt(t)}Vgt(){if(this.p_t&&!this.YTt){this.J$();const t=this.xk(),s=t.oft(),i=t.Kct(),e=this.Xc.hdt(),n=e&&e.QF()&&e.QF().gft();for(const r of this.m_t.H$())if(r!==this){r.J$();const h=r.xk();if(h.hft(i),!i){const o=h.oft();G.Rh(o);for(const a of s)o.push(r.TIt(a.V$()));if(n){const l=t.aft(),u=h.aft();G.Rh(u);for(const c of l)u.push(r.TIt(c.V$()))}}}}}qSt(t,s){for(const i of this.r$().H$()){const e=i.xk();t?G.Ph(e.aft(),s):G.Ph(e.oft(),s)}}_It(){return this.e_t}IIt(t){this.r_t=!!t}CIt(){if(this.r_t&&this.bxt){for(const t of this.vH)t.aD().EIt();for(const s of this.Xc.GIt())s.mN()===this&&s.aD().EIt();this.r_t=!1}}PIt(s,t,i){if(t){const e=this.R_t.get(t);e&&(e.delete(s),0===e.size)&&this.R_t.delete(t)}if(i){let t=this.R_t.get(i);t||(t=new Set,this.R_t.set(i,t)),t.add(s)}}RIt(){if(this.Gz()){const t=new Set;for(const s of this.h_t)for(const i of s.RIt())t.add(i);return t.values()}return this.R_t.keys()}LSt(){return this.uSt||(this.uSt=new Map),this.uSt}kSt(){return this.cSt||(this.cSt=new Map),this.cSt}AIt(){return this.eIt(G.Mat.solid)}FIt(){return this.eIt(G.Mat.jumpthru)}OIt(){return this.eIt(G.Mat.NoSave)}az(){return this.eIt(G.Mat.Persist)}Y9(){const t={instances:this.vH.map(t=>t.G2())};return this.uSt&&this.uSt.size&&(t.ex=G.Ro(this.uSt)),t}Z9(t,e){this.uSt&&(this.uSt.clear(),this.uSt=null);const s=t.ex,n=(s&&(this.uSt=G.Ao(s)),this.vH),r=t.instances;for(let t=0,s=Math.min(n.length,r.length);t<s;++t)n[t].T2(r[t]);for(let t=r.length,s=n.length;t<s;++t)this.Xc.xN(n[t]);for(let i=n.length,t=r.length;i<t;++i){let t=r[i],s=null;if(!this.WL()||(s=this.Xc.WO().Xq(t.w.l))){const h=this.Xc.lz(this.G_t||this,s,!1,0,0,!0);h.T2(t),e&&e.add(h)}}this.B_t=r,this.xIt()}DIt(){return this.B_t}LIt(){this.B_t=null}kIt(){for(let t=0,s=this.vH;t<s;++t)this.vH[t].kIt()}ek(){return this.D_t}VF(){return this.Oq}NIt(){return this.L_t}Tk(t){this.L_t=t}yX(t){const s=this.Xc,i=s.wX()&&!s.qF().Pk();i&&ga.StartMeasuringScriptTime(),this.Oq.dispatchEvent(t),i&&ga.AddScriptTime()}}}{const wa=self.Os;wa.BIt=class extends wa.Kn{constructor(t,s){super(),this.Xc=t,this.WIt=s;for(const i of this.WIt)i.j_t(this)}ir(){this.Xc=null}ED(){return this.Xc}n$(){return this.WIt}H$(){return this.WIt}$$(){return this.WIt.some(t=>t.WL())}}}{let S=self.Os,n=self.C3Debugger,h=S.DL,o=[],a=0,v=new WeakMap,e=new WeakMap;S.Instance=class extends S.Kn{constructor(t){if(S.DL!==h)throw new Error("invalid addon manager");super(),this.Xc=t.runtime,this.jIt=t.pN,this.hst=null,this.UIt=null,this.VIt=null,this.HIt=0,this.zIt=t.uid,this.JIt=a++,this.ZSt=0,this.qIt=null;const s=S.Jh(t.tags),i=(0<s.length&&(this.qIt=new Set(s)),this.$It=o,this.XIt=o,this.jIt.aIt()),e=(0<i.length&&(this.XIt=i.map((t,s)=>S.tr(S.YIt,{runtime:this.Xc,l6:t,f6:this,index:s}))),this.ZIt=this.jIt.IN()?[]:null,this.KIt=-1,this.i_t=null,this.uk());if(e.Lv()&&(this.ZSt|=4),e.WL())if(this.hst=S.tr(S.QIt,this,t.E4),t.tCt)this.hst.sCt(t.tCt);else{this.hst.iCt();const[n,r]=this.jIt.bIt();this.hst.HI(n,r),this.mN().lIt()&&this.hst.C4().eCt()}t.nCt?this.rCt(t.nCt):this.hCt()}ir(){if(this.VIt&&(this.VIt.vN(),this.VIt=null),0<this.XIt.length){for(const i of this.XIt)i.ir();S.Rh(this.XIt)}this.UIt&&(this.UIt.ir(),this.UIt=null);const t=v.get(this),s=(t&&(t.clear(),v.delete(this)),e.get(this));s&&(s.clear(),e.delete(this)),this.ZIt&&S.Rh(this.ZIt),this.i_t&&(this.i_t.ir(),this.i_t=null),this.qIt&&this.qIt.clear(),this.qIt=null,this.Xc=null,this.jIt=null,0<this.$It.length&&S.Rh(this.$It),this.hst&&(this.hst.ir(),this.hst=null)}rCt(t){0<t.length&&(this.$It=[],S.Dh(this.$It,t))}hCt(){const s=this.jIt.z_t();if(0!==s){this.$It=[];const i=[0,0,""];for(let t=0;t<s;++t)this.$It.push(i[this.jIt.Dst(t)])}}Z_t(t,i){if(this.UIt)throw new Error("already got sdk instance");for(let t=0,s=this.XIt.length;t<s;++t){const e=this.XIt[t];e.Z_t(i?i[t]:null)}const s=this.uk().PSt();if(s<2){if(this.UIt=S.tr(this.jIt.iIt(),this,t),!(this.UIt instanceof S.aMt))throw new Error("sdk type must derive from SDKInstanceBase");!this.uk().WL()&&this.jIt.NIt()&&this.nD()}else{const n=this.uk().Vxt();this.oCt(n.Instance,t)}}s6(){return this.UIt??this.VIt}aD(){return this.hst}ED(){return this.Xc}bO(){return this.KIt}AN(){const t=this.KIt;return-1===t?this.ED().bO():t}xO(t){((t=+t)<0||!isFinite(t))&&(t=0),this.KIt=t,this.mN().lIt()&&this.Xc.aCt(this,!0)}ON(){this.KIt=-1,this.mN().lIt()&&this.Xc.aCt(this,!1)}N9(){return this.Xc.lCt(this)}Rf(){return this.i_t||(this.i_t=S.tr(S.Event.Rf)),this.i_t}sb(t){this.UIt?this.UIt.sb(t):this.VIt.hj(this.Xc.wL().sIt())}Uxt(t){this.UIt.Uxt(t)}uCt(){this.ZSt|=2}cCt(){return 0!=(2&this.ZSt)}fCt(){this.ZSt|=1}Fj(){return 0!=(1&this.ZSt)}Lv(){return 0!=(4&this.ZSt)||this.UIt.Lv()}dCt(){this.ZSt|=32}E9(){return 0!=(32&this.ZSt)}pCt(){return 0!=(8&this.ZSt)}mCt(t){t?this.ZSt|=8:this.ZSt&=-9}gCt(){return 0!=(16&this.ZSt)}yCt(t){t?this.ZSt|=16:this.ZSt&=-17}wCt(){return 0!=(64&this.ZSt)}SCt(t){t?this.ZSt|=64:this.ZSt&=-65}vCt(t,s){t<<=16,s?this.ZSt|=t:this.ZSt&=~t}bCt(t){return 0!=(this.ZSt&t<<16)}HMt(){return this.UIt.HMt()}zMt(){return this.UIt.zMt()}JMt(){return this.UIt.JMt()}qMt(){return this.UIt.qMt()}XMt(){return this.UIt.XMt()}jvt(t){return this.UIt.jvt(t)}mN(){return this.jIt}I9(){return this.UIt.I9()}D2t(t){return t.Gz()?t.Tz(this.mN()):this.mN()===t}xCt(n,t,s){const i=(t,s)=>{const i=s||t.mN(),e=n.get(i);e?e.add(t):n.set(i,new Set([t]))};if(i(this,t),this.IN())for(const e of this.CN())i(e);if(s)for(const r of this.pB())i(r)}MCt(){if(!this.uk().YL())throw new Error("object does not support scene graph")}SB(){return null!==this.hB()}hB(){const t=this.aD();if(!t)return null;const s=t.hB();return s?s.EW():null}aB(){const t=this.aD();if(!t)return null;const s=t.aB();return s?s.EW():null}*lB(){const t=this.aD();if(t)for(const s of t.lB())yield s.EW()}GCt(t){if(t)for(const s of this.children())if(s===t)return!0;return!1}tq(){const t=this.aD();return!!t&&t.tq()}TCt(t){const s=this.aD();if(!s)return[];const i=t.jc();return s.iX().map(t=>t.EW()).filter(t=>t.mN().jc()===i)}iX(){const t=this.aD();return t?t.iX().map(t=>t.EW()):[]}*children(){const t=this.aD();if(t)for(const s of t.children())yield s.EW()}*pB(){const t=this.aD();if(t)for(const s of t.pB())yield s.EW()}cB(){const t=this.aD();return t?t.cB():0}_Ct(){return[...this.lB()].length}B2t(){const t=this.aD();return t?t.B2t():0}dB(t){const s=this.aD();if(!s)return null;const i=s.dB(t);return i?i.EW():null}ICt(){const t=this.aD();if(!t)return NaN;const s=t.hB();return s?s.CCt(t):NaN}ECt(t){for(const s of this.aD().iX())if(s.EW().EN()===t)return!0;return!1}gB(t,s){this.MCt(),t.MCt(),this.aD().gB(t.aD(),s||{})}yB(t){const s=this.aD();s&&s.yB(t.aD())}BB(){const t=this.aD();return!!t&&t.BB()}R$(){const t=this.aD();if(t){const s=t.PCt();if(s)for(const i of s){const e=this.Xc.eD(i[2]);if(e){const n=i[3];this.gB(e,{bB:!!(n>>0&1),MB:!!(n>>1&1),TB:!!(n>>2&1),IB:!!(n>>3&1),EB:!!(n>>4&1),NB:!!(n>>5&1),RB:!!(n>>6&1),OB:!!(n>>7&1),LB:!!(n>>8&1)})}}}}A$(t,s){const i=t.get(this);if(i)for(const e of i.sceneGraphJson.children){const n=s.get(e.index);if(n){const r=e.flags;this.gB(n,{bB:!!(r>>0&1),MB:!!(r>>1&1),TB:!!(r>>2&1),IB:!!(r>>3&1),EB:!!(r>>4&1),NB:!!(r>>5&1),RB:!!(r>>6&1),OB:!!(r>>7&1),LB:!!(r>>8&1)})}}}RN(){const t=this.Xc.RCt();return t?t.mlt(this):""}IN(){return null!==this.ZIt}z$(t){this.ZIt.push(t)}TN(){return this.ZIt}ACt(t){return!!this.FCt(t)}FCt(t){const s=this.CN();if(null===s||0===s.length)return!1;for(const i of s)if(i.mN()===t)return i;return null}CN(){return this.ZIt}qpt(){for(const t of this.CN())t.mN().xk().lft(t)}VSt(){for(const t of this.CN())t.mN().xk().nft(t)}HSt(t){for(const s of this.CN())s.mN().xk().oft()[t]=s}JSt(){for(const t of this.CN())t.mN().xk().rft(t)}zSt(t){for(const s of this.CN())s.mN().xk().aft()[t]=s}uk(){return this.jIt.uk()}MIt(t){this.HIt=t}V$(){return this.jIt.J$(),this.HIt}EN(){return this.zIt}OCt(){return this.JIt}DCt(t){t?this.NN(new Set(t)):this.qIt=null}NN(t){if(0===t.size)this.qIt=null;else{this.qIt?this.qIt.clear():this.qIt=new Set;for(const s of t)this.qIt.add(s)}}LN(){return this.qIt??new Set}hbt(){return Array.from(this.LN()).join(" ")}lbt(t){t=Math.floor(t);for(const s of this.LN()){if(0===t)return s;--t}return""}ont(){return this.XIt}LCt(t){if(t)for(const s of this.XIt)if(s.a6()instanceof t)return s;return null}Gat(t){if(!t)return null;const s=this.LCt(t);return s?s.s6():null}hnt(i){const e=this.XIt;for(let t=0,s=e.length;t<s;++t)if(e[t].c6().Az()===i)return t;return-1}kCt(){return this.$It}hIt(){return this.jIt.hIt()}NCt(){return this.$It.length}Mrt(t){const s=this.$It;if((t|=0)<0||t>=s.length)throw new RangeError("invalid instance variable");return s[t]}lwt(t){return this.$It[t]}BCt(t){const s=this.$It[t];return 0===this.jIt.Dst(t)?!!s:s}Grt(t,s){const i=this.$It;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");const e=this.jIt.Dst(t);switch(e){case 0:i[t]=s?1:0;break;case 1:i[t]="number"==typeof s?s:parseFloat(s);break;case 2:i[t]="string"==typeof s?s:s.toString();break;default:throw new Error("unknown instance variable type")}}mht(t,s){if(0!==s){const i=this.$It;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");const e=i[t];if("number"!=typeof e)throw"boolean"==typeof e?new Error("can not set offset of boolean variable"):"string"==typeof e?new Error("can not set offset of string variable"):new Error("unknown instance variable type");i[t]+="number"==typeof s?s:parseFloat(s)}}LSt(){let t=v.get(this);return t||(t=new Map,v.set(this,t)),t}kSt(){let t=e.get(this);return t||(t=new Map,e.set(this,t)),t}WCt(t){const s=this.mN();if(s.VF().Lf(t))return!0;for(const i of s.Mdt())if(i.VF().Lf(t))return!0;return!!this.Xc.VF().Lf(t)}Ek(){const t=new Set,s=(t.add(this),this.aD());if(s&&s.tq())for(const i of this.pB())if(t.add(i),i.IN())for(const e of i.CN())t.add(e);if(this.IN())for(const n of this.CN())t.add(n);for(const r of t.values())r.F$()}jCt(){this.jIt.NIt()&&this.nD();for(const t of this.XIt)t.PGt()}UCt(){this.jCt()}F$(){if(this.jCt(),this.WCt("instancecreate")){const t=this.mN(),s=new S.Event("instancecreate");s.f6=this.nD(),t.yX(s);for(const i of t.Mdt())i.yX(s);this.Xc.yX(s)}this.Xc.t4(this.uk().F1t().N$.fbt,this,null)}VCt(){this.Xc.t4(this.uk().F1t().N$.dbt,this,null)}HCt(t){if(this.VIt){const s=new S.Event("destroy");s.zCt=t,this.yX(s)}if(this.WCt("instancedestroy")){const i=this.mN(),e=new S.Event("instancedestroy");e.f6=this.nD(),e.zCt=t,i.yX(e);for(const n of i.Mdt())n.yX(e);this.Xc.yX(e)}}JCt(){return this.UIt?this.UIt.RMt():this.VIt.d4()}G2(t="full",s=null){const i={},e=("full"===t?i.uid=this.EN():i.c3=!0,this.LN());if(0<e.size&&(i.tags=Array.from(e)),"visual-state"!==t){const r=v.get(this);if(r&&r.size&&(i.ex=S.Ro(r)),-1!==this.bO()&&(i.mts=this.bO()),0<this.jIt.z_t()){const h={},o=this.jIt.nIt();for(let t=0,s=this.$It.length;t<s;++t)h[o[t].toString()]=this.$It[t];i.ivs=h}if(this.XIt.length){const a={};for(const l of this.XIt){const u=l.G2(t);u&&(a[l.c6().Az().toString()]=u)}i.behs=a}}this.hst&&(i.w=this.hst.Y9(t,s));const n=this.UIt?this.UIt.G2():this.VIt.m4();return n&&(i.data=n),i}pY(t="full",s){this.hst&&this.hst.pY(t)}gY(t,s="full",i=null){this.hst&&this.hst.gY(t,s,i)}qCt(t,s="full",i=null){this.hst&&this.hst.qCt(t,s,i)}kIt(){this.uk().WL()&&this.hst.kIt()}T2(s,t="full",i){if("full"===t)this.zIt=s.uid;else if(!s.c3)return;if(this.DCt(s.tags),"visual-state"!==t){let t=v.get(this);t&&(t.clear(),v.delete(this));const n=s.ex,r=(n&&(t=S.Ao(n),v.set(this,t)),this.KIt=s.hasOwnProperty("mts")?s.mts:-1,s.ivs);if(r)for(const[h,o]of Object.entries(r)){const a=parseInt(h,10),l=this.jIt.rIt(a);if(!(l<0||l>=this.$It.length)){let t=o;null===t&&(t=NaN),this.$It[l]=t}}}if(this.uk().WL()){const u=s.w;if(u){const c=u.l;if(this.hst.lD().Az()!==c){const f=this.hst.lD(),d=f.HO().Xq(c);d?(this.hst.dD(d),f.pz(this,!0),d.cz(this,!0),d.pD(this),this.hst.P4()):"full"===t&&this.Xc.xN(this)}this.hst.Z9(u,t)}}if("visual-state"!==t){const p=s.behs;if(p)for(const[m,g]of Object.entries(p)){const y=parseInt(m,10),w=this.hnt(y);w<0||w>=this.XIt.length||this.XIt[w].T2(g,t)}}const e=s.data;e&&(this.UIt?this.UIt.T2(e,t):this.VIt.g4(e))}nD(){return this.VIt||this.oCt()}DMt(){return!!this.VIt}oCt(t,s){const i=this.hst?t?self.tj:self.YB:t?self.UN:self.dN,e=t||this.UIt.Vxt(),n=this.jIt.NIt(),r=n||e||i,h=this.uk().PSt();if(S.DL.Jxt(this,h),S.DL.JGt(s),this.VIt=new r,S.DL.qGt(),S.DL.qxt(h),e&&!(this.VIt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);if(n){const o=e||i;if(!(this.VIt instanceof o))throw new TypeError(`setInstanceClass(): class '${n.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this.VIt}gN(t){if(0!==this.$It.length){const i={},e=this.jIt.oIt();for(let t=0,s=e.length;t<s;++t)i[e[t]]={configurable:!1,enumerable:!0,get:S.Instance.prototype.BCt.bind(this,t),set:S.Instance.prototype.Grt.bind(this,t)};const s=Object.create(Object.prototype,i);t.$Ct={value:s,writable:!1}}}yN(t){const s=this.XIt;if(0!==s.length){const i={};for(const n of s)i[n.c6().gdt()]={value:n.dMt(),writable:!1};const e=Object.create(Object.prototype,i);t.Fpt={value:e,writable:!1}}}yX(t){if(this.DMt()){const s=this.nD(),i=(t.f6=s,this.Xc),e=i.wX()&&!i.qF().Pk();e&&n.StartMeasuringScriptTime(),s.dispatchEvent(t),e&&n.AddScriptTime()}}}}{const Sa=self.Os;Sa.nX=class extends Sa.Kn{constructor(e){super(),this.A2=e,this.Qpt=null,this.XCt=[],this.YCt=e.$p(),this.ZCt=e.hm(),this.KCt=1,this.QCt=1,this.t3t=0,this.s3t=1,this.i3t=e.ME(),this.e3t=null,this.n3t=null,this.r3t=NaN,this.h3t=!1,this.eq=NaN,this.nq=NaN,this.o3t=t=>{if(t.f6===this.Qpt.EW()){const s=e.ED(),i=(s.Rf().removeEventListener("instancecreate",this.o3t),this.Qpt.EW().s6());this.h3t=!!i.Yst(),this.eq=this.h3t?i.Xst():NaN,this.nq=this.h3t?i.Kst():NaN}}}ir(){this.Qpt=null,this.e3t=null,this.n3t=null,this.r3t=NaN,this.h3t=!1,this.eq=NaN,this.nq=NaN,Sa.Rh(this.XCt)}a3t(t){if(this.s3t=this.A2.ME(),this.i3t=this.s3t,this.Qpt=t,this.t3t=t?t.jk():0,this.Qpt){const s=this.A2,i=s.ED(),e=this.Qpt.EW().uk().PSt();if(e<2){const n=this.Qpt.EW().s6();n?(this.h3t=!!n.Yst(),this.eq=this.h3t?n.Xst():NaN,this.nq=this.h3t?n.Kst():NaN):this.Qpt.EW().Fj()||i.Rf().addEventListener("instancecreate",this.o3t)}else this.h3t=!1,this.eq=NaN,this.nq=NaN}else this.h3t=!1,this.eq=NaN,this.nq=NaN}hB(){return this.Qpt}tq(){return 0<this.XCt.length}iX(){return this.XCt}l3t(){this.tq()&&1!==this.XCt.length&&(this.n3t?this.XCt.sort((t,s)=>{const i=this.n3t.get(t.EW()),e=this.n3t.get(s.EW());return Sa.le(i)&&Sa.le(e)?i-e:0}):this.XCt.sort((t,s)=>{const i=t.Ort().u3t(),e=s.Ort().u3t();return Sa.le(i)&&Sa.le(e)?i-e:0}))}u3t(){return this.r3t}Drt(){return this.KCt}c3t(t){this.KCt=t}krt(){return this.QCt}f3t(t){this.QCt=t}zrt(){return this.i3t}l2t(){return this.s3t}d3t(t){this.s3t=t}Frt(){return 0===this.YCt?Number.EPSILON:this.YCt}Lrt(){return 0===this.ZCt?Number.EPSILON:this.ZCt}p3t(){if(this.A2._B()){let t=this.Qpt,s=t.$p(),i=t.Ort().Frt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.h3t?1+s/this.eq:s/i}return 1}m3t(){if(this.A2.CB()){let t=this.Qpt,s=t.hm(),i=t.Ort().Lrt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.h3t?1+s/this.nq:s/i}return 1}g3t(){return 0}y3t(){return{sw:this.YCt,sh:this.ZCt,sx:this.KCt,sy:this.QCt,psa:this.t3t,oo:this.s3t,so:this.i3t,pi:this.A2.EW().ICt()}}Y9(t,s=null){const i=this.y3t();return s&&s.selfOnly?Object.assign(i,{p:null,c:[]}):Object.assign(i,{p:this.w3t(t),c:this.S3t(t)})}v3t(t){let s="";return t.xB()&&(s+="x"),t.GB()&&(s+="y"),t._B()&&(s+="w"),t.CB()&&(s+="h"),t.PB()&&(s+="a"),t.AB()&&(s+="z"),t.BB()&&(s+="d"),t.DB()&&(s+="o"),t.kB()&&(s+="v"),s}w3t(t){return this.Qpt&&this.Qpt.EW()&&!this.Qpt.EW().Fj()?this.b3t(this.Qpt,this.A2,t):null}S3t(s){return this.XCt.map(t=>this.b3t(t,t,s)).filter(t=>t)}b3t(t,s,i){const e=t.EW();if(e&&e.Fj())return null;const n={};return n.uid=e.EN(),n.f=this.v3t(s),n.offsets=s.x3t(),n.data=Sa.nX.M3t(e),n.oci=e.mN().gF(),"state"===i?(n.inst=e.G2("full",{selfOnly:!0}),n.instIndex=NaN):(n.instIndex=e.mN().bk().indexOf(e),n.inst=null),n}Z9(t){this.YCt=t.sw,this.ZCt=t.sh,this.KCt=t.sx,this.QCt=t.sy,this.t3t=t.psa,this.s3t=t.oo,this.i3t=t.so,this.r3t=Sa.le(t.pi)?t.pi:NaN}G3t(t,s){if(!t&&!s&&this.e3t)for(const i of this.e3t)i.Fj()||i.SB()||i.ED().xN(i);this.e3t=t,this.n3t=s}gY(t,s){const i=this.A2,e=i.ED(),n=new Set;if(t.p&&!this.Qpt){const o=t.p.uid,a=e.eD(o);if(s?.xbt,a){const l=a.aD();if(a.GCt(i.EW()))this.Qpt=l;else{a.ECt(i.EW().EN())?e.xN(i.EW()):a.gB(i.EW(),this.T3t(t.p.f)),n.has(i)||(i._3t(t.p.offsets),this.I3t(a,t.p,s)),n.add(i);const u=a.aD();u.Ort().l3t()}}else if(Sa.le(t.p.oci)){const c=e.Q7(t.p.oci),f=(e.Xyt(),e._k(c,i.lD(),0,0,!0));if(s?.xbt,f){const d=this.C3t(t.p,e),p=(d&&f.T2(d),f.aD()),m=(p.lD().Ik(f),f.gB(i.EW(),this.T3t(t.p.f)),f.aD());m.Ort().l3t()}}}const r=[];for(const g of t.c){const y=g.uid,w=e.eD(y);w&&r.push(w)}let h=0;for(const S of t.c){const v=S.uid,b=e.eD(v);if(s?.xbt,b){if(this.e3t){if(this.e3t.includes(b)){const T=b;if(T.mN()!==b.mN()){h++;continue}if(T.Fj()){h++;continue}const _=t.c[h];if(!s?.xbt&&this.E3t(T,r,i)){this.P3t(h,_,i,n,s),h++;continue}if(T.SB()&&T.hB()!==i.EW()){const I=this.R3t(_,s);this.A3t(I,_,n,s),h++;continue}this.A3t(T.aD(),_,n,s,!0),h++;continue}if(this.e3t[h]){const C=this.e3t[h];if(C.mN()!==b.mN()){h++;continue}if(C.Fj()){h++;continue}const E=t.c[h];if(!s?.xbt&&this.E3t(C,r,i)){this.P3t(h,E,i,n,s),h++;continue}if(C.SB()&&C.hB()!==i.EW()){const P=this.R3t(E,s);this.A3t(P,E,n,s),h++;continue}this.A3t(C.aD(),E,n,s,!0),h++;continue}}const x=b.mN(),M=this.F3t(r,x),G=i.EW().TCt(x).length;if(M===G){const R=i.EW().dB(h);if(R){const A=R.aD();A&&(n.has(A)||(A._3t(S.offsets),this.I3t(R,S,s)),n.add(A))}h++;continue}if(b.SB()&&b.hB()!==i.EW()){const F=this.R3t(S,s);this.A3t(F,S,n,s),h++;continue}this.A3t(b.aD(),S,n,s)}else if(this.e3t&&this.e3t[h]){const O=this.e3t[h],L=e.Q7(this.O3t(S));if(O.mN()!==L){h++;continue}if(O.Fj()){h++;continue}const D=t.c[h];if(!s?.xbt&&this.E3t(O,r,i)){this.P3t(h,D,i,n,s),h++;continue}if(O.SB()&&O.hB()!==i.EW()){const k=this.R3t(D,s);this.A3t(k,D,n,s),h++;continue}this.A3t(O.aD(),D,n,s)}else{const N=this.R3t(S,s);this.A3t(N,S,n,s)}h++}}E3t(t,s,i){const e=t.mN(),n=this.F3t(s,e),r=i.EW().TCt(e).length;return n===r}P3t(t,s,i,e,n){const r=i.EW().dB(t,s);if(r){const h=r.aD();h&&(e.has(h)||(h._3t(s.offsets),this.I3t(r,s,n)),e.add(h))}}T3t(t){const s={};return s.bB=t.includes("x"),s.MB=t.includes("y"),s.TB=t.includes("w"),s.IB=t.includes("h"),s.EB=t.includes("a"),s.RB=t.includes("z"),s.NB=t.includes("d"),s.OB=t.includes("o"),s.LB=t.includes("v"),s}O3t(t){return Sa.le(t.oci)?t.oci:t[1]}R3t(e,n){if(Sa.le(e.oci)){let t=this.A2,s=t.ED(),i;if(e.data)i=s.lz(e.data,t.lD(),!1,0,0,!1,!0);else{const r=s.Q7(e.oci);i=s._k(r,t.lD(),0,0,!0)}if(n?.xbt,i){const h=this.C3t(e,s),o=(h&&i.T2(h),i.aD());return o.lD().Ik(i,!0),o}}}A3t(t,s,i,e,n=!0){const r=this.A2,h=r.gB(t,this.T3t(s.f));h&&n&&(i.has(t)||(t._3t(s.offsets),this.I3t(t.EW(),s,e)),i.add(t)),this.l3t()}I3t(t,s,i){let e=this.C3t(s,this.A2.ED());e&&((e=JSON.parse(JSON.stringify(e))).w=null,t.T2(e))}F3t(t,s){return t.filter(t=>t.mN().jc()===s.jc()).length}C3t(t,s){if(Sa.le(t.instIndex)){const i=s.Q7(t.oci),e=i.DIt();return e?e[t.instIndex]:null}return Sa.Se(t.inst)?JSON.parse(t.inst):t.inst||void 0}static M3t(t){let s=t.aD().lD().rz(t.EN());if(!s)return null;s=JSON.parse(JSON.stringify(s));const i=[];for(const e of[...t.iX()]){const n=e.aD();i.push([n.HO().Az(),n.lD().gF(),e.EN(),Sa.nX.eX(n),e.mN().IN()?1:0,n.uD(),Sa.nX.M3t(e)])}return Sa.De(s[0][14])?s[0][14][1]=i:(s[0][14]=[],s[0][14][0]=Sa.nX.D3t(),s[0][14][1]=i,s[0][14][2]=t.aD().uD()),s}static eX(t){let s=0;return(s|=Number(t.kB())<<8)|Number(t.DB())<<7|Number(t.AB())<<6|Number(t.BB())<<5|Number(t.PB())<<4|Number(t.CB())<<3|Number(t._B())<<2|Number(t.GB())<<1|Number(t.xB())<<0}static D3t(t){let s=0;return s,511}}}{let d=self.Os,t=self.ys,r=(t.Ts,d.tr(d.Rect)),h=d.tr(d.Hl),s=d.tr(d.Event,"bboxchange",!1),f=d.tr(d.Lo,0,0,0,0),u=d.tr(d.Gu),i=d.tr(d.Lo,1,1,1,1),o=d.tr(d.Rect,0,0,-1,-1),n=d.tr(d.Rect,0,0,-1,-1),p=new Set(["absolute","relative"]),e=[],m=!0,g=new WeakMap,a=new WeakMap;d.QIt=class extends d.Kn{constructor(t,s){super(),this.vi=t,this.Wct=t.mN(),this.Xc=t.ED(),this.L3t=s,this.Wct.PIt(this,null,s),this.k3t=-1,this.N3t=-1,this.ZSt=196635,this.Wct.uk().HL()&&(this.ZSt|=128),this.za=NaN,this.Ja=NaN,this.Xv=NaN,this.B3t=NaN,this.W3t=NaN,this.mx=NaN,this.Wo=NaN,this.j3t=NaN,this.U3t=NaN,this.V3t=NaN,this.H3t=NaN,this.z3t=d.tr(d.Rect),this.J3t=d.tr(d.Hl),this.q3t=n,this.$3t=o,this.X3t=null,this.Y3t=null,this.Z3t=null,this.$v=i,this.K3t=i,this.Q3t=null,this.tEt=null,this.vi.mN().lIt()&&(this.tEt=d.tr(d.sEt,this.vi,this)),this.iEt=null,this.e3t=null,this.n3t=null,this.eEt=-1,this.nEt=null}fCt(){this.ZSt|=256}ir(){if(this.Wct.PIt(this,this.L3t,null),this.Q3t&&(this.Xc.Rv().zw(this.Q3t),this.Q3t=null),this.X3t=null,this.Y3t&&(this.Y3t.rEt.ir(),this.Y3t=null),this.Z3t&&(this.Z3t.clear(),this.Z3t=null),this.VB(),this.tEt&&this.tEt.ir(),this.SB()&&this.hB().yB(this),this.tq()){const t=[...this.iX()];for(const s of t)this.yB(s)}this.hEt(),this.oEt(),g.delete(this),a.delete(this),this.vi=null,this.Wct=null,this.Xc=null,this.L3t=null}sCt(t){if(m=!1,this.R4(t[0],t[1]),this.m2(t[2]),this.HI(t[3],t[4]),this.mx=0,this.HL()?this.Wk(t[6]):this.Wo=0,f.Fa(t[7]),this.aEt(f),this.qrt(t[8]),this.Xrt(t[9]),this.SetBlendMode(t[10]),this.tEt&&this.tEt.lEt(t[12]),t[14]&&g.set(this,{uEt:t[14][1],cEt:t[14][2]}),t[15]){const s=t[15],e=(this.jB(s[0],s[1]),this.$B()),n=s[2];for(let i=0,t=n.length;i<t;++i){const r=n[i];for(let t=0,s=r.length;t<s;++t){const h=r[t],o=e.Q2(t,i);o.l2(h[0]),o.f2(h[1]),o.m2(h[2]),o.w2(h[3]),o.v2(h[4])}}}if(t[16]){const i=t[16][0],a=t[16][1],l=!!a,u=!l,c=this.Xc.RCt();l&&c&&c.plt(this.EW(),a),u&&c&&c.plt(this.EW(),i)}m=!0,this.fEt()}iCt(){this.za=0,this.Ja=0,this.Xv=0,this.B3t=0,this.W3t=0,this.mx=0,this.Wo=0,this.j3t=0,this.U3t=1,this.V3t=0,this.H3t=0,this.fEt()}ED(){return this.Xc}mN(){return this.Wct}EW(){return this.vi}dEt(){return this.PB()?this.pEt(this.hB().mEt()-this.iEt.g3t()):0}l2(t){if(t=+t,this.xB()){const s=this.iEt,i=t-this.a2(),e=-this.dEt();0==e?this.za+=i/s.p3t():(this.za+=Math.cos(e)*i/s.p3t(),this.GB()&&(this.Ja+=Math.sin(e)*i/s.m3t()))}else this.za=t}Ert(t,s=!1){t=+t,!s&&this.xB()?this.l2(this.a2()+t):this.za+=t}a2(){if(this.xB()){let t=this.za,s=this.iEt,i=this.hB(),e=this.dEt();return 0===e?t*=s.p3t():(t=t*s.p3t()*Math.cos(e),this.GB()&&(t-=this.Ja*s.m3t()*Math.sin(e))),i.a2()+t}return this.za}f2(t){if(t=+t,this.GB()){const s=this.iEt,i=t-this.c2(),e=-this.dEt();0==e?this.Ja+=i/s.m3t():(this.xB()&&(this.za-=Math.sin(e)*i/s.p3t()),this.Ja+=Math.cos(e)*i/s.m3t())}else this.Ja=t}Prt(t,s=!1){t=+t,!s&&this.GB()?this.f2(this.c2()+t):this.Ja+=t}c2(){if(this.GB()){let t=this.Ja,s=this.iEt,i=this.hB(),e=this.dEt();return 0===e?t*=s.m3t():(t=t*s.m3t()*Math.cos(e),this.xB()&&(t+=this.za*s.p3t()*Math.sin(e))),i.c2()+t}return this.Ja}R4(t,s){if(t=+t,s=+s,this.gEt()){const i=this.xB(),e=this.GB(),n=this.iEt,r=t-this.a2(),h=s-this.c2(),o=-this.dEt();if(0==o)i?this.za+=r/n.p3t():this.za=t,e?this.Ja+=h/n.m3t():this.Ja=s;else{const a=Math.sin(o),l=Math.cos(o);i?this.za+=e?(l*r-a*h)/n.p3t():l*r/n.p3t():this.za=t,e?this.Ja+=i?(a*r+l*h)/n.m3t():l*h/n.m3t():this.Ja=s}}else this.za=t,this.Ja=s}yEt(){return[this.a2(),this.c2()]}O4(t,s){t=+t,s=+s,this.gEt()?this.R4(this.a2()+t,this.c2()+s):(this.za+=t,this.Ja+=s)}Bvt(t,s){return this.a2()===t&&this.c2()===s}m2(t){if(t=+t,this.AB()&&(t-=this.hB().d2()),this.Xv!==t){this.Xv=t,this.wEt();const s=this.lD();0!==this.Xv&&s.yz(),s.pD(this)}}wEt(){if(this.fEt(),this.tq()){const i=this.iX();for(let t=0,s=i.length;t<s;t++){const e=i[t];e.AB()&&e.wEt()}}}Yrt(t){this.m2(this.d2()+t)}d2(){return this.AB()?this.hB().d2()+this.Xv:this.Xv}L4(){return this.lD().d2()+this.d2()}Yst(){const t=this.EW().uk().PSt();return t<2&&this.EW().s6().Yst()}im(t){if(t=+t,this._B()){const s=this.$p();0===s?this.B3t=Number.EPSILON:this.B3t*=t/s}else this.B3t=t;this.SEt()}Rm(t,s){t=+t,!s&&this._B()?this.im(this.$p()+t):this.B3t+=t,this.SEt()}$p(){if(this._B()){const t=this.hB(),s=t.$p(),i=t.Ort().Frt();return i===Number.EPSILON?(this.Ort().Frt()+s)*this.B3t:s*this.B3t}return this.B3t}Xp(t){if(t=+t,this.CB()){const s=this.hm();0===s?this.W3t=Number.EPSILON:this.W3t*=t/s}else this.W3t=t;this.SEt()}Nrt(t,s){t=+t,!s&&this.CB()?this.Xp(this.hm()+t):this.W3t+=t,this.SEt()}hm(){if(this.CB()){const t=this.hB(),s=t.hm(),i=t.Ort().Lrt();return i===Number.EPSILON?(this.Ort().Lrt()+s)*this.W3t:s*this.W3t}return this.W3t}HI(t,s){if(t=+t,s=+s,this._B()){const i=this.$p();0===i?this.B3t=Number.EPSILON:this.B3t*=t/i}else this.B3t=t;if(this.CB()){const e=this.hm();0===e?this.W3t=Number.EPSILON:this.W3t*=s/e}else this.W3t=s;this.SEt()}$u(){return[this.$p(),this.hm()]}C9(){return this.mx}vEt(t){if(t<0)throw new RangeError("invalid depth");this.mx=t}bEt(){if(this.SB()){const t=this.iEt;return Math.min(t.p3t(),t.m3t())}return 1}HL(){return 0!=(128&this.ZSt)}Wk(t){t=+t,this.HL()&&(this.PB()&&(t-=this.hB().jk()),t=d.ur(t),this.Wo!==t)&&(this.Wo=t,this.SEt())}Brt(t){0!=(t=+t)&&this.HL()&&(this.Wo=d.ur(this.Wo+t),this.SEt())}SEt(){if(this.ZSt|=1<<18,this.tq()){const i=this.iX();for(let t=0,s=i.length;t<s;t++)i[t].SEt()}}jk(){return this.PB()&&this.HL()?this.pEt(d.ur(this.hB().mEt()+this.Wo)):this.Wo}mEt(){return this.PB()&&this.HL()?d.ur(this.hB().mEt()+this.Wo):this.Wo}pEt(t){return this._B()&&this.aB().$p()<0&&(t=d.ur(d.Tr(t,this.aB().jk()+Math.PI))),this.CB()&&this.aB().hm()<0?d.Tr(t,this.aB().jk()):t}xEt(){const t=this.hB();return!!(this._B()&&t.$p()<0)||!!(this.CB()&&t.hm()<0)}MEt(){const t=this.hB();return!!(this._B()&&t.$p()<0&&this.CB()&&t.hm()<0)}GEt(){const t=this.ZSt;if(0!=(t&1<<18)){const s=this.jk();this.j3t=Math.sin(s),this.U3t=Math.cos(s),this.ZSt=-262145&t}}Hvt(){return this.GEt(),this.j3t}Vvt(){return this.GEt(),this.U3t}qrt(t){this.V3t=+t}Jrt(t){this.V3t+=+t}j6(){return this.V3t}Xrt(t){this.H3t=+t}$rt(t){this.H3t+=+t}V6(){return this.H3t}aEt(t){this.$v.equals(t)||(this.$v===i?(this.$v=d.tr(d.Lo,t),this.K3t=d.tr(d.Lo,t),this.K3t.ca()):t.oa(1,1,1,1)?(this.$v=i,this.K3t=i):(this.$v.set(t),this.K3t.set(t),this.K3t.ca()),this.fEt())}TE(t){if(t=d.lr(+t,0,1),this.DB()){if(this.Ort().l2t()===t)return;this.Ort().d3t(t),t=this.ME()}else if(this.$v.a===t)return;this.TEt(t)}_Et(){if(this.tq()){const i=this.iX();for(let t=0,s=i.length;t<s;t++){const e=i[t];e.TEt(e.ME())}}}TEt(t){f.Xo(this.$v),f.a=t,this.aEt(f),this._Et()}Urt(t){this.DB()?this.TE(this.Ort().l2t()+t):this.TE(this.ME()+t)}ME(){return this.DB()?this.hB().ME()*this.Ort().l2t():this.$v.a}J4(t){this.$v.na(t)||(f.Xo(t),f.a=this.ME(),this.aEt(f))}brt(t,s,i){f.Uo(t,s,i),this.J4(f)}IEt(t,s,i){0===t&&0===s&&0===i||(f.Xo(this.$v),f.r+=t,f.Oa+=s,f.b+=i,this.J4(f))}z4(){return this.$v}L7(){return this.K3t}BB(){return 0!=(512&this.ZSt)}CEt(t){this.EEt(512,t)}xB(){return 0!=(1024&this.ZSt)}PEt(t){this.EEt(1024,t)}GB(){return 0!=(2048&this.ZSt)}gEt(){return 0!=(3072&this.ZSt)}REt(t){this.EEt(2048,t)}_B(){return 0!=(4096&this.ZSt)}AEt(t){this.EEt(4096,t)}CB(){return 0!=(8192&this.ZSt)}FEt(t){this.EEt(8192,t)}PB(){return 0!=(16384&this.ZSt)}OEt(t){this.EEt(16384,t)}AB(){return 0!=(32768&this.ZSt)}DEt(t){this.EEt(32768,t)}DB(){return 0!=(this.ZSt&1<<22)}LEt(t){this.EEt(1<<22,t)}kB(){return 0!=(this.ZSt&1<<23)}kEt(t){this.EEt(1<<23,t)}NEt(){this.ZSt&=-12647937}gB(t,s){if(t===this)return!1;if(t.SB())return!1;if(this.BEt(t))return!1;if(this.WEt(t))return!1;const i=t.a2(),e=t.c2(),n=t.$p(),r=t.hm(),h=t.jk(),o=t.d2(),a=t.ME(),l=(t.jEt(this),t.PEt(s.bB),t.REt(s.MB),t.AEt(s.TB),t.FEt(s.IB),t.OEt(s.EB),t.DEt(s.RB),t.LEt(s.OB),t.kEt(s.LB),t.CEt(s.NB),i-this.a2()),u=e-this.c2(),c=-this.jk(),f=Math.cos(c),d=Math.sin(c);if(s.bB&&(s.EB?t.za=l*f-u*d:t.za=l,s.TB)){const p=this.$p()/this.iEt.Frt();0!=p&&(t.za/=p)}if(s.MB&&(s.EB?t.Ja=l*d+u*f:t.Ja=u,s.IB)){const m=this.hm()/this.iEt.Lrt();0!=m&&(t.Ja/=m)}if(s.TB){const g=this.$p();0===g||g===Number.EPSILON?(t.B3t=1,t.iEt.c3t(1)):(t.B3t=n/this.$p(),t.iEt.c3t(t.B3t))}if(s.IB){const y=this.hm();0===y||y===Number.EPSILON?(t.W3t=1,t.iEt.f3t(1)):(t.W3t=r/this.hm(),t.iEt.f3t(t.W3t))}return s.EB&&(t.Wo=h-this.jk()),s.RB&&(t.Xv=o-this.d2()),s.OB&&t.iEt.d3t(a),s.LB&&t.M5(this.T5()),this.UEt(t),this.P4(),this._Et(),!0}yB(t){if(t.hB()===this){const s=t.a2(),i=t.c2(),e=t.$p(),n=t.hm(),r=t.jk(),h=t.d2(),o=t.ME();t.jEt(null),t.NEt(),t.R4(s,i),t.HI(e,n),t.Wk(r),t.m2(h),t.TE(o),this.VEt(t),this.P4()}}HEt(){return this.eEt}zEt(){this.JEt();const t=[...this.children()];for(const i of t)this.yB(i);const s=this.hB();s&&s.yB(this),this.NEt()}JEt(){if(this.qEt(),!this.e3t){const s=[...this.children()];s.length&&(this.e3t=[],this.n3t=new WeakMap);let t=0;for(const i of s){const e=i.EW();this.e3t.push(e),this.n3t.set(e,t),t++}}const t=this.hB();t&&t.JEt()}qEt(){if(-1===this.eEt){const t=[...this.lB()];this.eEt=t.length;for(const i of t)i.qEt();const s=[...this.children()];for(const e of s)e.qEt()}}oEt(){this.e3t&&(this.e3t.length=0),this.e3t=null,this.n3t=null;const t=this.hB();t&&t.oEt(),this.eEt=-1}SB(){return null!==this.hB()}hB(){const t=this.iEt;return null!==t?t.hB():null}aB(){let t=this;for(;t.SB();)t=t.hB();return t}*lB(){let t=this.hB();for(;t;)yield t,t=t.hB()}GCt(t){return this.iX().includes(t)}tq(){const t=this.iEt;return null!==t&&t.tq()}iX(){const t=this.iEt;return null!==t?t.iX():e}children(){return this.iX()}*pB(){for(const t of this.children())yield t,yield*t.pB()}cB(){return this.iX().length}B2t(){return[...this.pB()].length}dB(t){const s=this.iX();return(t=Math.floor(+t))<0||t>=s.length?null:s[t]}CCt(s){if(s){const i=this.iX();if(i)for(let t=0;t<i.length;t++)if(s===i[t])return t}return NaN}$Et(t){this.iEt||(this.iEt=d.tr(d.nX,this)),t&&this.iEt.a3t(t)}Ort(){return this.iEt}hEt(){this.iEt&&(this.iEt.ir(),this.iEt=null)}jEt(t){t?(t.$Et(null),this.$Et(t)):(this.iEt&&this.iEt.a3t(null),this.tq()||this.hEt())}WEt(t){if(!this.SB())return!1;const s=this.hB();return s===t||s.WEt(t)}BEt(t){if(this.GCt(t))return!0;for(const s of this.iX())if(s.BEt(t))return!0;return!1}UEt(t){this.iEt.iX().push(t)}VEt(t){const s=this.iEt.iX(),i=s.indexOf(t);-1!==i&&s.splice(i,1),0!==s.length||this.SB()||this.hEt(),t.tq()||t.hEt()}PCt(){const t=g.get(this);return t?t.uEt:null}XEt(){const t=g.get(this);return t?t.cEt:NaN}Q9(){const t=a.get(this);return d.le(t)?t:NaN}YEt(t){a.set(this,t)}ZEt(){this.EEt(1<<19,!0),this.fEt()}fEt(){if(m){const s=this.Xc.Rv();this.Q3t&&s.zw(this.Q3t);let t;t=0!=(this.ZSt&1<<19)?s.Iw()||"<point>":s.Gw()||"<default>",this.Q3t=s.jw(t,this.Y5(),this.K3t,this.d2())}}D9(){return this.Q3t}Lz(){return this.$v===i}SetBlendMode(t){if((t|=0)<0||31<t)throw new RangeError("invalid blend mode");this.Y5()!==t&&(this.ZSt=this.ZSt&~(31<<26)|t<<26,this.fEt())}Y5(){return(this.ZSt&31<<26)>>26}dD(t,s){const i=s&&this.L3t!==t;i&&this.mz(),this.Wct.PIt(this,this.L3t,t),this.L3t=t,i&&this.KEt(),0!==this.d2()&&this.L3t.yz()}lD(){return this.L3t}HO(){return this.lD().HO()}Sz(t){this.k3t=0|t}uD(){return this.L3t.EJ(),this.k3t}FJ(t){this.N3t=0|t}Ij(){return this.L3t.RJ(),this.N3t}yH(){return this.k3t}EEt(t,s){s?this.ZSt|=t:this.ZSt&=~t}T5(){return 0!=(1&this.ZSt)}M5(t){if(this.EEt(1,t),this.tq())for(const s of this.iX())s.kB()&&s.M5(t)}eB(){return 0!=(8&this.ZSt)}nB(t){t=!!t,this.eB()!==t&&(this.EEt(8,t),t?this.P4():this.QEt())}tPt(t,s){if(this.EEt(32,t),this.Z3t&&this.Z3t.clear(),s.trim()){this.Z3t||(this.Z3t=new Set);for(const i of s.split(" "))i&&this.Z3t.add(i.toLowerCase())}else this.Z3t=null}sPt(t){const s=0!=(32&this.ZSt),i=this.Z3t;if(t&&i)for(const e of i)if(t.has(e))return s;return!s}P4(){if(this.ZSt|=65554,this.Wct.IIt(!0),this.Xc.mD(),this.L3t.X7()&&(this.iPt(this.z3t,this.J3t,!0),this.ZSt&=-3,this.KEt()),0!=(4&this.ZSt)&&this.vi.Rf().dispatchEvent(s),null!==this.iEt){const i=this.iEt.iX();for(let t=0,s=i.length;t<s;++t)i[t].P4()}}iPt(t,s,i){const e=this.a2(),n=this.c2(),r=this.$p(),h=this.hm(),o=this.jk();t.hl(e-this.V3t*r,n-this.H3t*h,r,h),i&&this.qB()&&this.ePt(t),0===o?s.cu(t):(t.offset(-e,-n),s.du(t,this.Hvt(),this.Vvt()),s.offset(e,n),s.pu(t)),t.normalize()}nPt(){const t=this.ZSt;0!=(2&t)&&(this.iPt(this.z3t,this.J3t,!0),this.ZSt=-3&t)}B4(){return this.nPt(),this.z3t}j4(){return this.nPt(),this.J3t}rPt(t){const s=this.a2(),i=this.c2(),e=Math.round(s)-s,n=Math.round(i)-i;return 0==e&&0==n?t:(h.T(t),h.offset(e,n),h)}hPt(t){this.z3t.T(t),this.J3t.cu(this.z3t),this.ZSt&=-3,this.EIt(),this.KEt()}oPt(t){this.EEt(4,t)}aPt(){return 0!=(4&this.ZSt)}M9(t,s,i){return s&&0!==this.C9()?this._9(this.lD().T9()):0===this.d2()||i?t.Nl(this.B4()):this.lPt()}lPt(){const t=this.lD(),s=this.L4();return!(s>=t.sJ())&&(t.Qz(s,r),r.Nl(this.B4()))}_9(t){const s=this.B4(),i=s.pl(),e=s.gl(),n=s.ml(),r=s.yl(),h=this.L4(),o=h+this.C9();return t.ty(i,n,h,e,r,o)}V4(){const t=this.lD();if(t.dJ())return this._9(t.T9());{const s=t.HO();return this.M9(t.tN(),s.x9(),s.p5())}}A9(t){this.EEt(1<<20,t)}R9(t){this.EEt(1<<21,t)}uPt(){return 0!=(this.ZSt&1<<20)}cPt(){return 0!=(this.ZSt&1<<21)}fPt(t){this.X3t=t,this.dPt(),this.qB()&&(this.nEt.pPt=null)}mPt(){return this.X3t}gPt(){return null!==this.X3t||this.qB()}yPt(){return this.wPt(this.$p(),this.hm(),this.jk(),this.Hvt(),this.Vvt())}SPt(t,s,i){let e=0,n=1;return 0!==i&&(e=Math.sin(i),n=Math.cos(i)),this.wPt(t,s,i,e,n)}wPt(n,r,t,h,o){let s=this.Y3t;null===s&&(s={rEt:d.tr(d.Gu),width:NaN,height:NaN,angle:NaN},this.Y3t=s);const a=s.rEt;if(s.width!==n||s.height!==r||s.angle!==t){const l=this.X3t;if(this.qB()){let t=this.j6(),s=this.V6(),i=this.$B(),e=this.nEt.pPt;e||(l?(u.T(l),u.offset(t,s)):u.Au(),e=i.eb(u),this.nEt.pPt=e),i.nb(e,a),a.offset(-t,-s),a.Lu(n,r,h,o)}else l?(a.T(l),a.Lu(n,r,h,o)):a.Du(this.j4(),-this.a2(),-this.c2());s.width=n,s.height=r,s.angle=t}return a}dPt(){this.vPt(!0);const t=this.Y3t;null!==t&&(t.width=NaN)}jB(t,s){if(t=Math.floor(t),s=Math.floor(s),!this.EW().uk().KL())throw new Error("object does not support mesh");this.VB(),this.nEt={bPt:d.tr(d.Ug.E2,t,s),xPt:d.tr(d.Ug.E2,t,s),pPt:null}}qB(){return null!==this.nEt}$B(){if(this.qB())return this.nEt.bPt;throw new Error("no mesh")}MPt(){if(this.qB())return this.nEt.xPt;throw new Error("no mesh")}GPt(t){this.EEt(65536,t)}TPt(){return 0!=(65536&this.ZSt)}vPt(t){this.EEt(1<<17,t)}_Pt(){return 0!=(this.ZSt&1<<17)}ePt(t){const s=this.nEt.bPt,i=Math.min(s.J2(),0),e=Math.min(s.q2(),0),n=Math.max(s.X2(),1),r=Math.max(s.Y2(),1),h=t.width(),o=t.height();t.offsetLeft(i*h),t.offsetTop(e*o),t.Gl((n-1)*h),t.Tl((r-1)*o),this.mx=s.Z2()}VB(){this.nEt&&(this.nEt.bPt.ir(),this.nEt.xPt.ir(),this.nEt=null,this.dPt())}zB(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=i.mode||"absolute";if(!p.has(e))throw new Error("invalid mode");let n="relative"===e,r=i.x,h=i.y,o=i.U5,a="number"==typeof i.u?i.u:n?0:-1,l="number"==typeof i.v?i.v:n?0:-1;if(!this.qB())return!1;const u=this.$B(),c=u.Q2(t,s);if(null===c)return!1;let f=!1;return"number"==typeof o&&c.d2()!==o&&(c.m2(o),f=!0),n&&(r+=t/(u.j2()-1),h+=s/(u.U2()-1)),a=-1!==a||n?(n&&(a+=t/(u.j2()-1)),d.lr(a,0,1)):c.g2(),l=-1!==l||n?(n&&(l+=s/(u.U2()-1)),d.lr(l,0,1)):c.S2(),c.a2()===r&&c.c2()===h&&c.g2()===a&&c.S2()===l?f:(c.l2(r),c.f2(h),c.w2(a),c.v2(l),this.dPt(),!0)}cCt(){return this.vi.cCt()}rB(t,s){return!!this.B4().Wl(t,s)&&!!this.j4().Wl(t,s)&&(this.cCt()?this.vi.s6().ZMt(t,s):!this.gPt()||this.yPt().Wl(t-this.a2(),s-this.c2()))}IPt(){return 0!=(16&this.ZSt)}EIt(){if(this.IPt()&&this.eB()&&0==(256&this.ZSt)){const t=this.B4(),s=this.Wct._It(),i=this.q3t;if(r.set(s.OH(t.pl()),s.DH(t.ml()),s.OH(t.gl()),s.DH(t.yl())),!i.equals(r)){const e=this.vi;i===n?(s.LH(e,null,r),this.q3t=d.tr(d.Rect,r)):(s.LH(e,i,r),i.T(r)),this.ZSt&=-17}}}CPt(){this.ZSt|=16}QEt(){const t=this.q3t;t!==n&&(this.Wct._It().LH(this.vi,t,null),this.q3t=n)}KEt(){const t=this.lD();if(t.X7()&&0==(256&this.ZSt)){const s=t.Nz(),i=this.B4(),e=this.$3t;if(r.set(s.OH(i.pl()),s.DH(i.ml()),s.OH(i.gl()),s.DH(i.yl())),!e.equals(r)){const n=this.vi;e===o?(s.LH(n,null,r),this.$3t=d.tr(d.Rect,r)):(s.LH(n,e,r),e.T(r)),t.Bz()}}}mz(){const t=this.$3t;t!==o&&(this.lD().Nz().LH(this.vi,t,null),this.$3t=o)}PJ(){return this.$3t}X4(){const t=this.vi,s=this.L3t,i=s.fD();i.length&&i.at(-1)===t||(s.pz(t,!1),s.cz(t,!1),this.Xc.mD())}Z4(){const t=this.vi,s=this.L3t,i=s.fD();i.length&&i[0]===t||(s.pz(t,!1),s.dz(t,!1),this.Xc.mD())}Q4(t){const s=this.vi,i=this.L3t;if(i.HO()!==t.HO())throw new Error("layer from different layout");t!==i&&(i.pz(s,!0),this.dD(t),t.cz(s,!0),this.Xc.mD())}sB(t,s){let i=this.vi,e=!1,n=this.L3t;if(t.EN()!==i.EN()){const r=t.aD();if(!r)throw new Error("expected world instance");const h=r.lD(),o=(n.gF()!==h.gF()&&(n.pz(i,!0),this.dD(h),h.cz(i,!0),e=!0),h.LJ(i,t,!!s));(e||o)&&this.Xc.mD()}}C4(){return this.tEt}EPt(t){this.EEt(64,t)}VJ(){return 0!=(64&this.ZSt)}Y9(t,s=null){const i={x:this.a2(),y:this.c2(),w:this.$p(),h:this.hm(),l:this.lD().Az(),zi:this.uD()},e=(0!==this.d2()&&(i.ze=this.d2()),0!==this.jk()&&(i.a=this.mEt()),this.Lz()||(i.c=this.$v.toJSON()),.5!==this.j6()&&(i.oX=this.j6()),.5!==this.V6()&&(i.oY=this.V6()),0!==this.Y5()&&(i.bm=this.Y5()),this.T5()||(i.v=this.T5()),this.eB()||(i.ce=this.eB()),this.aPt()&&(i.be=this.aPt()),this.tEt&&(i.fx=this.tEt.Y9()),0!=(32&this.ZSt));return e&&(i.sfi=e),this.Z3t&&(i.sft=[...this.Z3t].join(" ")),this.iEt&&"visual-state"!==t&&(i.sgi=this.iEt.Y9(t,s),g.has(this))&&(i.sgcd=g.get(this).uEt,i.sgzid=g.get(this).cEt),this.qB()&&(i.mesh=this.$B().G2()),i}x3t(){return{x:this.za,y:this.Ja,z:this.Xv,w:this.B3t,h:this.W3t,a:this.Wo,sgi:this.Ort()?this.Ort().y3t():null}}_3t(t){t&&(this.za=t.x,this.Ja=t.y,this.Xv=t.z,this.B3t=t.w,this.W3t=t.h,this.Wo=t.a,t.sgi&&this.Ort()&&this.Ort().Z9(t.sgi),this.SEt(),this.P4())}kIt(){this.oEt(),this.zEt(),this.$Et(null),this.iEt&&this.iEt.G3t(this.e3t,this.n3t)}pY(t){"visual-state"!==t&&this.zEt()}gY(t,s="full",i=null){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.ZSt)&&this.iEt.gY(t.sgi,i)}qCt(t,s="full",i){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.ZSt)&&(this.iEt.G3t(null,null),this.oEt(),this.P4())}Z9(t,s){if(m=!1,this.l2(t.x),this.f2(t.y),this.im(t.w),this.Xp(t.h),this.Sz(t.zi),this.m2(t.hasOwnProperty("ze")?t.ze:0),this.Wk(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?f.Fa(t.c):t.hasOwnProperty("o")?(f.Xo(this.$v),f.a=t.o):f.jo(1,1,1,1),this.aEt(f),this.qrt(t.hasOwnProperty("oX")?t.oX:.5),this.Xrt(t.hasOwnProperty("oY")?t.oY:.5),this.SetBlendMode(t.hasOwnProperty("bm")?t.bm:0),this.M5(!t.hasOwnProperty("v")||t.v),this.nB(!t.hasOwnProperty("ce")||t.ce),this.oPt(!!t.hasOwnProperty("be")&&t.be),this.tPt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.tEt&&t.hasOwnProperty("fx")&&this.tEt.Z9(t.fx),!t.hasOwnProperty("sgi")&&"visual-state"!==s&&this.e3t)for(const i of this.e3t)i.Fj()||this.Xc.xN(i);if(t.hasOwnProperty("sgi")&&"visual-state"!==s){this.$Et(null);const e=this.iEt,n=t.sgi;e.Z9(n),e.G3t(this.e3t,this.n3t),t.sgcd&&d.le(t.sgzid)&&g.set(this,{uEt:t.sgcd,cEt:t.sgzid})}if(t.hasOwnProperty("mesh")){const r=t.mesh;this.jB(r.cols,r.rows),this.$B().T2(r)}else this.VB();this.P4(),m=!0,this.fEt(),"visual-state"!==s&&this.Xc.PPt(this.EW(),t)}}}{const va=self.Os;va.y_t=class extends va.Kn{constructor(t,s){super();const i=t.ED(),e=i.Kgt(s[1]),n=(i.RPt().zGt(e),this.Xc=i,this.Wct=t,this.TGt=va.DL.g6(e),this.uMt=null,this.APt=null,this.$Tt=e.Instance,this.KH=s[2],this.rr=s[0],this.Dyt=this.Xc.gdt(s[3]),this.TGt.PSt());if(n<2&&(this.uMt=va.tr(e.O_t,this),!(this.uMt instanceof va.GGt)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(va.DL.Jxt(this,n),2<=n){const r=e.O_t??globalThis.Hj;if(this.APt=new r,!(this.APt instanceof globalThis.Hj))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.APt=new globalThis.p6;va.DL.qxt(n),this.Uxt()}static tM(t,s){return va.tr(va.y_t,t,s)}ir(){this.Xc=null,this.TGt=null,this.uMt&&(this.uMt.ir(),this.uMt=null),this.$Tt=null}_vt(){return this.uMt}Uxt(){this.uMt?this.uMt.Uxt():this.APt&&this.APt.qW()}ED(){return this.Xc}mN(){return this.Wct}a6(){return this.TGt}iIt(){return this.$Tt}jc(){return this.rr}Az(){return this.KH}u6(){return this.APt}gdt(){return this.Dyt}}}{const ba=self.Os,xa=self.h6;ba.YIt=class extends ba.Kn{constructor(t){super(),this.Xc=t.runtime,this.pwt=t.l6,this.TGt=this.pwt.a6(),this.vi=t.f6,this.Dg=t.index,this.UIt=null,this.VIt=null,this.TGt.cz(this.vi)}ir(){this.VIt&&(this.VIt.vN(),this.VIt=null),this.TGt.pz(this.vi),this.UIt&&(this.UIt.ir(),this.UIt=null),this.Xc=null,this.pwt=null,this.TGt=null,this.vi=null}Z_t(t){if(this.UIt)throw new Error("already got sdk instance");const s=this.a6().PSt();if(s<2){if(this.UIt=ba.tr(this.pwt.iIt(),this,t),!(this.UIt instanceof ba._Gt))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const i=this.a6().Vxt();this.zxt(i.Instance,t)}}s6(){return this.UIt??this.VIt}d6(){return this.vi}ED(){return this.Xc}c6(){return this.pwt}a6(){return this.TGt}ort(){return this.Dg}PGt(){this.UIt?this.UIt.PGt():this.VIt.$j()}OGt(t,s){this.UIt&&this.UIt.OGt(t,s)}JCt(){return this.UIt?this.UIt.RMt():this.VIt.d4()}G2(t="full"){return this.UIt?this.UIt.G2(t):this.VIt.m4(t)}T2(t,s="full"){if(this.UIt)return this.UIt.T2(t,s);this.VIt.g4(t,s)}static FPt(t,s,i){let e=globalThis.zj,n,r;n=s instanceof e?t.t5(s):s.EGt(),r=i instanceof e?t.t5(i):i.EGt();const h=n.d6(),o=r.d6(),a=h.mN().gF(),l=o.mN().gF();if(a!==l)return a-l;const u=h.OCt(),c=o.OCt();return u!==c?u-c:n.ort()-r.ort()}zxt(t,s){const i=xa,e=t??this.UIt.Vxt(),n=e||i,r=this.a6().PSt();if(ba.DL.Jxt(this,r),ba.DL.JGt(s),this.VIt=new n,ba.DL.qGt(),ba.DL.qxt(r),!e||this.VIt instanceof i)return this.VIt;throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`)}dMt(){return this.VIt||this.zxt()}DMt(){return!!this.VIt}}}{const Ma=self.Os;Ma.O7=class extends Ma.Kn{constructor(t,s){super(),this.A2=t,this.OPt=[],this.DPt=[],this.LPt=new Map,this.kPt=[],this.NPt=[],this.BPt=new Set,this.Sv=!0;for(const i of s){const e=Ma.tr(Ma.WPt,this,i,this.OPt.length);this.OPt.push(e),this.LPt.set(e.jc().toLowerCase(),e),3<=i.length&&this.kPt.push(this.jPt(e,i[2]))}this.ED().UPt(this)}ir(){this.ED().VPt(this);for(const t of this.NPt)t.ir();Ma.Rh(this.NPt),Ma.Rh(this.OPt),Ma.Rh(this.DPt),this.LPt.clear(),Ma.Rh(this.kPt),this.A2=null}HPt(t){this.BPt.add(t)}zPt(t){this.BPt.delete(t)}JPt(t){t.gw()&&(this.NPt=this.OPt.map(t=>{const s=t.QM();return 0<s.GetCustomParametersByteSize()?Ma.tr(Ma.Ug.WebGPUEffectCustomParamsBuffer,s):null}),this.qPt());for(const s of this.BPt)s.JPt(t)}X_t(t){if(t.length){this.OPt=t.concat(this.OPt);for(const s of t)this.LPt.set(s.jc().toLowerCase(),s);for(let t=0,s=this.OPt.length;t<s;++t)this.OPt[t].Iz(t)}}jPt(t,s){t.$Pt(s[0]);const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const e=i[t];if(Array.isArray(e)){const n=Ma.tr(Ma.Lo);n.Fa(e),i[t]=n}}return i}V2(){return this.A2}ED(){return this.A2.ED()}S6(){Ma.Rh(this.DPt);let t=!0;for(const s of this.OPt)s.Npt()&&(this.DPt.push(s),s.QM().kv()||(t=!1));this.Sv=t}Dk(){return this.OPt}uIt(){return 0<this.OPt.length}unt(t){return this.LPt.get(t.toLowerCase())||null}XPt(t){if((t=Math.floor(+t))<0||t>=this.OPt.length)throw new RangeError("invalid effect type index");return this.OPt[t]}y6(t){return this.XPt(t).Npt()}w6(t,s){this.XPt(t).$Pt(s)}kz(){return this.DPt}VJ(){return 0<this.DPt.length}kv(){return this.Sv}lnt(t){return this.kPt[t]}N7(t){return(t<this.NPt.length?this.NPt:this.kPt)[t]}v6(t,s){if(t<0||t>=this.kPt.length)return null;const i=this.kPt[t];return s<0||s>=i.length?null:i[s]}b6(t,s,i){if(t<0||t>=this.kPt.length)return!1;const e=this.kPt[t];if(s<0||s>=e.length)return!1;const n=e[s];if(n instanceof Ma.Lo){if(n.na(i))return!1;n.Xo(i)}else{if(n===i)return!1;e[s]=i}return t<this.NPt.length&&this.NPt[t].SetParameterValue(s,i),!0}qPt(){const i=this.kPt,e=this.NPt;for(let t=0,s=Math.min(i.length,e.length);t<s;++t){const n=e[t],r=i[t];for(let t=0,s=r.length;t<s;++t)n.SetParameterValue(t,r[t])}}static YPt(t){return t&&t instanceof Ma.Lo?{t:"color",v:t.toJSON()}:t}static ZPt(t){if(null===t)return NaN;if("object"!=typeof t)return t;{const s=t.t;if("color"!==s)throw new Error("invalid effect parameter type");{const i=Ma.tr(Ma.Lo);return i.Fa(t.v),i}}}static KPt(t){return t.map(Ma.O7.YPt)}static QPt(t){return t.map(Ma.O7.ZPt)}G2(){return this.OPt.map(t=>({name:t.jc(),active:t.Npt(),params:Ma.O7.KPt(this.kPt[t.gF()])}))}T2(t){for(const s of t){const i=this.unt(s.name);i&&(i.$Pt(s.active),this.kPt[i.gF()]=Ma.O7.QPt(s.params))}this.S6(),this.qPt()}}}{const Ga=self.Os;Ga.WPt=class extends Ga.Kn{constructor(t,s,i){super(),this.F7=t,this.Zc=s[0],this.rr=s[1],this.Dg=i,this.zv=null,this.Zf=!0}ir(){this.F7=null,this.zv=null}$_t(t){const s=Ga.tr(Ga.WPt,t,[this.Zc,this.rr],-1);return s.zv=this.zv,s.Zf=this.Zf,s}JPt(t){const s=t.Mw(this.Zc);if(!s)throw new Error("failed to find shader program '"+this.Zc+"'");this.zv=s}Ok(){return this.F7}jc(){return this.rr}Iz(t){this.Dg=t}gF(){return this.Dg}V2(){return this.F7.V2()}ED(){return this.F7.ED()}$Pt(t){this.Zf=!!t}Npt(){return this.Zf}QM(){return this.zv}tRt(){const i=[];for(let t=0,s=this.zv.tG();t<s;++t){const e=this.zv.sG(t);if("float"===e||"percent"===e)i.push(0);else{if("color"!==e)throw new TypeError("unknown effect parameter type");i.push(Ga.tr(Ga.Lo,1,1,1,1))}}return i}}}{const Ta=self.Os;Ta.sEt=class extends Ta.Kn{constructor(t,s){super(),this.vi=t,this.sRt=s,this.F7=t.mN().Ok(),this.iRt=!0,this.W7=!0,this.eRt=!1,this.nRt=!1,this.rRt=!1,this.hRt=!1,this.fF=Ta.tr(Ta.Ug.cR,t.ED().wL().D7(),{tR:(t,s)=>{const i=s.nF(),e=i.aD();t.Zv(e.L7()),t.rS(e.L4()),i.sb(t),t.rS(0)},sR:t=>{const s=t.JMt(),[i,e]=t.zMt();return{ZA:s,KA:i,QA:e}},iR:t=>this.N7(t)}),this.oRt=[],this.DPt=[],this.Sv=!0,this.kPt=[],this.NPt=[],this.JPt(t.ED().Rv());for(let t=0,s=this.F7.Dk().length;t<s;++t)this.oRt.push(!0);this.S6(),this.F7.HPt(this)}ir(){this.F7.zPt(this);for(const t of this.NPt)t&&t.ir();Ta.Rh(this.NPt),this.fF.ir(),this.fF=null,Ta.Rh(this.oRt),Ta.Rh(this.DPt),Ta.Rh(this.kPt),this.vi=null,this.F7=null}JPt(t){t.gw()&&(this.NPt=this.F7.Dk().map(t=>{const s=t.QM();return 0<s.GetCustomParametersByteSize()?Ta.tr(Ta.Ug.WebGPUEffectCustomParamsBuffer,s):null}))}lEt(t){let s=0;for(const i of t)this.kPt.push(this.jPt(s,i)),++s;this.qPt(),this.S6()}jPt(t,s){this.oRt[t]=s[0];const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const e=i[t];if(Array.isArray(e)){const n=Ta.tr(Ta.Lo);n.Fa(e),i[t]=n}}return i}eCt(){for(const t of this.F7.Dk())this.kPt.push(t.tRt());this.qPt()}V2(){return this.A2}Ok(){return this.F7}mF(){return this.Dz(),this.fF}ED(){return this.vi.ED()}S6(){Ta.Rh(this.DPt);let t=this.sRt,i=this.F7.Dk(),e=this.DPt,n=this.oRt,r=!0;for(let t=0,s=i.length;t<s;++t)if(n[t]){const h=i[t];e.push(h),h.QM().kv()||(r=!1)}this.Sv=r,t.EPt(!!e.length),this.iRt=!0}Dz(){const t=this.vi,s=this.sRt,i=s.Lz(),e=t.uk().$L(),n=0!==s.jk()||0!==s.lD().jk()||s.$p()<0||s.hm()<0,r=t.XMt(),h=t.Lv();(this.iRt||i!==this.W7||e!==this.eRt||n!==this.nRt||r!==this.rRt||h!==this.hRt||this.fF.iA())&&(this.fF.eA(this.DPt.map(t=>t.QM()),{nR:this.DPt.map(t=>t.gF()),rR:!i||h,oR:e,aR:r,lR:n}),this.iRt=!1,this.W7=i,this.eRt=e,this.nRt=n,this.rRt=r,this.hRt=h)}kz(){return this.DPt}lnt(t){return this.kPt[t]}N7(t){return(t<this.NPt.length?this.NPt:this.kPt)[t]}v6(t,s){if(t<0||t>=this.kPt.length)return null;const i=this.kPt[t];return s<0||s>=i.length?null:i[s]}b6(t,s,i){if(t<0||t>=this.kPt.length)return!1;const e=this.kPt[t];if(s<0||s>=e.length)return!1;const n=e[s];if(n instanceof Ta.Lo){if(n.na(i))return!1;n.Xo(i)}else{if(n===i)return!1;e[s]=i}return t<this.NPt.length&&this.NPt[t].SetParameterValue(s,i),!0}qPt(){const i=this.kPt,e=this.NPt;for(let t=0,s=e.length;t<s;++t){const n=e[t],r=i[t];for(let t=0,s=r.length;t<s;++t)n.SetParameterValue(t,r[t])}}kv(){return this.Sv}aRt(){return this.DPt.some(t=>t.QM().Wv())}y6(t){return this.oRt[t]}w6(t,s){this.oRt[t]=!!s}Dk(){return this.F7.Dk()}Y9(){return this.F7.Dk().map(t=>({name:t.jc(),active:this.oRt[t.gF()],params:Ta.O7.KPt(this.kPt[t.gF()])}))}Z9(t){for(const s of t){const i=this.F7.unt(s.name);i&&(this.oRt[i.gF()]=s.active,this.kPt[i.gF()]=Ta.O7.QPt(s.params))}this.S6(),this.qPt()}}}{let _=self.Os,r=[],v=[],h=[],b=_.tr(_.Gu),w=_.tr(_.Gu),x=_.tr(_.Hl),d=_.tr(_.Rect),p=_.tr(_.Rect),m=null,g=null,y=null;_.lRt=class extends _.Kn{constructor(t){super(),this.Xc=t,this.uRt=0,this.cRt=0,this.fRt=[],this.dRt=0,this.pRt=0,this.mRt=0,this.gRt=0,this.yRt=new self.XD(this)}ir(){this.Xc=null}ED(){return this.Xc}xF(){return this.yRt}wRt(){this.pRt=this.dRt,this.dRt=0,this.gRt=this.mRt,this.mRt=0}SRt(){return this.pRt}vRt(){return this.gRt}bRt(t,s){const i=t.aD(),e=s.aD();i&&e&&i.eB()&&e.eB()&&this.fRt.push([t,s])}E2t(s,i,e){for(const[n,r]of this.fRt){let t=null;if(s===n)t=r;else{if(s!==r)continue;t=n}t.D2t(i)&&!e.includes(t)&&e.push(t)}}P2t(t,s){if(this.fRt.length)for(const[i,e]of this.fRt)if(t===i&&s===e||t===e&&s===i)return!0;return!1}xRt(){_.Rh(this.fRt)}ZD(t,s){if(!t||!s||t===s)return!1;const i=t.aD(),e=s.aD();if(!i.eB()||!e.eB())return!1;this.dRt++;const n=i.lD(),r=e.lD(),h=n.TJ(r);return h?this.MRt(i,e):this.GRt(i,e)}MRt(t,s){if(!t.B4().Nl(s.B4()))return!1;if(this.mRt++,!t.j4().gu(s.j4()))return!1;if(t.cCt()&&s.cCt())return!1;if(t.cCt())return this.TRt(t,s);if(s.cCt())return this.TRt(s,t);if(!t.gPt()&&!s.gPt())return!0;const i=t.yPt(),e=s.yPt();return i.ku(e,s.a2()-t.a2(),s.c2()-t.c2())}GRt(i,e){const t=i.cCt(),s=e.cCt();if(t&&!s)return this._Rt(i,e);if(s&&!t)return this._Rt(e,i);if(s||t)return!1;{const n=i.lD(),r=e.lD(),h=(b.T(i.yPt()),w.T(e.yPt()),b.Eu());for(let t=0,s=h.length;t<s;t+=2){const a=t+1,l=h[t],u=h[a],[c,f]=n.hN(l+i.a2(),u+i.c2());h[t]=c,h[a]=f}const o=w.Eu();for(let t=0,s=o.length;t<s;t+=2){const d=t+1,p=o[t],m=o[d],[g,y]=r.hN(p+e.a2(),m+e.c2());o[t]=g,o[d]=y}return b.Fu(),w.Fu(),this.mRt++,b.ku(w,0,0)}}_Rt(t,s){const i=t.lD(),e=s.lD(),n=(m=m||_.tr(_.Gu),g=g||_.tr(_.Rect),y=y||_.tr(_.Hl),s.a2()),r=s.c2(),[h,o]=e.hN(n,r),[a,l]=i.iN(h,o),u=a-n,c=l-r;if(g.T(s.B4()),g.offset(u,c),!t.B4().Nl(g))return!1;if(y.T(s.j4()),y.offset(u,c),this.mRt++,!t.j4().gu(y))return!1;m.T(s.yPt());const f=m.Eu();for(let t=0,s=f.length;t<s;t+=2){const d=t+1;f[t]+=u,f[d]+=c}return m.Fu(),this.TRt(t,s,a,l,m,g,y)}TRt(t,e,s,i,n,r,h){const o=void 0!==r?r:e.B4(),a=t.a2(),l=t.c2(),u=t.EW().s6(),c=void 0!==s?s:e.a2(),f=void 0!==i?i:e.c2(),d=e.gPt(),p=void 0!==h?h:e.j4(),m=v;u.GetCollisionRectCandidates(o,m);for(let t=0,s=m.length;t<s;++t){const g=m[t],y=g.GetRect();if(this.dRt++,o.Bl(y,a,l)&&(x.cu(y),x.offset(a,l),x.gu(p)))if(d){let t=void 0!==n?n:e.yPt(),s=c,i=f;void 0!==n&&(s=e.a2(),i=e.c2());const w=g.GetPoly();if(w){if(this.mRt++,w.ku(t,s-(a+y.pl()),i-(l+y.ml())))return _.Rh(m),!0}else if(b.Du(x,0,0),b.ku(t,s,i))return _.Rh(m),!0}else{const S=g.GetPoly();if(!S)return _.Rh(m),!0;if(b.Du(p,0,0),S.ku(b,-(a+y.pl()),-(l+y.ml())))return _.Rh(m),!0}}return _.Rh(m),!1}IRt(t,o,a){const l=t.xk(),s=this.Xc.QF();if(!s)throw new Error("cannot call outside event");const u=s.gft(),i=new Map,c=t=>{let s=i.get(t);return void 0===s&&(s=t.A5(),i.set(t,s)),s};if(l.Kct()){a||(l.hft(!1),_.Rh(l.oft())),u&&_.Rh(l.aft());for(const e of t.bk()){let n=e.aD(),r=n.lD();if(!(!c(r)||!n.V4())&&o.some(([t,s])=>{const[i,e]=r.iN(t,s,n.L4());return n.rB(i,e)})){if(a)return!1;l.nft(e)}else u&&l.rft(e)}}else{let i,e=!1,h=(!u||s.agt(this.Xc.odt())||this.Xc.Pvt()&&!l.aft().length&&l.oft().length?i=l.oft():(i=l.aft(),e=!0),0);for(let s=0,t=i.length;s<t;++s){let t=i[s],n=t.aD(),r=n.lD();if(!(!c(r)||!n.V4())&&o.some(([t,s])=>{const[i,e]=r.iN(t,s,n.L4());return n.rB(i,e)})){if(a)return!1;e?l.nft(t):i[h++]=t}else e?i[h++]=t:u&&l.rft(t)}a||(i.length=h)}return t.Vgt(),i.clear(),!!a||l.Qct()}CRt(t,s){if(t)for(const i of s.RIt())if(!t.TJ(i))return!1;return!0}Evt(t,s,i,e){if(s.Gz())for(const n of s.Dmt())this.CRt(t,n)?(n.CIt(),n._It().kH(i,e)):_.Vn(e,n.bk());else this.CRt(t,s)?(s.CIt(),s._It().kH(i,e)):_.Vn(e,s.bk())}oL(t,s,i,e){for(const n of s)this.Evt(t,n,i,e)}ERt(t,s,i){const e=this.Xc.XGt();e&&this.oL(t,e.BY(),s,i)}PRt(t,s,i){const e=this.Xc.YGt();e&&this.oL(t,e.BY(),s,i)}sPt(t,s){return t.pCt()&&(!s||s.aD().sPt(t.LSt().get("solidTags")))}tL(t){const s=t.aD();this.ERt(s.lD(),s.B4(),r);for(const i of r)if(this.sPt(i,t)&&this.ZD(t,i))return _.Rh(r),i;return _.Rh(r),null}RRt(t,s){this.ERt(null,t,r);for(const i of r)if(this.sPt(i,s)&&this.ARt(t,i))return _.Rh(r),i;return _.Rh(r),null}FRt(t,s){let i=null;s&&(i=h,_.Rh(i));const e=t.aD();this.PRt(e.lD(),e.B4(),r);for(const n of r)if(n.gCt()&&this.ZD(t,n)){if(!s)return _.Rh(r),n;i.push(n)}return _.Rh(r),i}ORt(s,i,e,n,r){n=n||50;const h=s.aD(),o=h.a2(),a=h.c2();for(let t=0;t<n;++t)if(h.R4(o+i*t,a+e*t),h.P4(),!this.ZD(s,r))return!0;return h.R4(o,a),h.P4(),!1}DRt(s,i,e,n,r,h){n=n||50;let o=s.aD(),a=o.a2(),l=o.c2(),u=null,c=null;for(let t=0;t<n;++t)if(o.R4(a+i*t,l+e*t),o.P4(),!this.ZD(s,u))if(u=this.tL(s))c=u;else if(r&&(u=h?this.ZD(s,h)?h:null:this.FRt(s))&&(c=u),!u)return c&&this.LRt(s,i,e,c,16,!0),!0;return o.R4(a,l),o.P4(),!1}kRt(i,e,n,t){t=t||50;let r=i.aD(),h=r.a2(),o=r.c2(),a=null,l=null;for(let s=0;s<t;++s)for(let t=0;t<2;++t){const u=2*t-1;if(r.R4(h+e*s*u,o+n*s*u),r.P4(),!this.ZD(i,a)){if(!(a=this.tL(i)))return l&&this.LRt(i,e*u,n*u,l,16,!0),!0;l=a}}return r.R4(h,o),r.P4(),!1}LRt(t,s,i,e,n,r){let h=2,o=!1,a=!1,l=t.aD(),u=l.a2(),c=l.c2();for(;h<=n;){const f=1/h;h*=2,l.O4(s*f*(o?1:-1),i*f*(o?1:-1)),l.P4(),this.ZD(t,e)||r&&this.tL(t)?(o=!0,a=!0):(o=!1,a=!1,u=l.a2(),c=l.c2())}a&&(l.R4(u,c),l.P4())}NRt(i,t=100){let e=0,n=i.aD(),r=n.a2(),h=n.c2(),o=0,a=this.tL(i);if(!a)return!0;for(;e<=t;){let t=0,s=0;switch(o){case 0:t=0,s=-1,e++;break;case 1:t=1,s=-1;break;case 2:t=1,s=0;break;case 3:t=1,s=1;break;case 4:t=0,s=1;break;case 5:t=-1,s=1;break;case 6:t=-1,s=0;break;case 7:t=-1,s=-1}if(o=(o+1)%8,n.R4(Math.floor(r+t*e),Math.floor(h+s*e)),n.P4(),!this.ZD(i,a)&&!(a=this.tL(i)))return!0}return n.R4(r,h),n.P4(),!1}BRt(t,s,i,e){const n=t.aD(),r=n.a2(),h=n.c2(),o=Math.max(10,_.pr(s,i,r,h)),a=_.gr(s,i,r,h),l=e||this.tL(t);if(!l)return _.ur(a+Math.PI);let u=l,c=0,f=0,d=_.cr(5),p;for(p=1;p<36;++p){const G=a-p*d;if(n.R4(s+Math.cos(G)*o,i+Math.sin(G)*o),n.P4(),!this.ZD(t,u)&&!(u=e?null:this.tL(t))){c=G;break}}for(36===p&&(c=_.ur(a+Math.PI)),u=l,p=1;p<36;++p){const T=a+p*d;if(n.R4(s+Math.cos(T)*o,i+Math.sin(T)*o),n.P4(),!this.ZD(t,u)&&!(u=e?null:this.tL(t))){f=T;break}}if(36===p&&(f=_.ur(a+Math.PI)),n.R4(r,h),n.P4(),f===c)return f;let m=_.yr(f,c)/2,g;g=_.vr(f,c)?_.ur(c+m+Math.PI):_.ur(f+m);const y=Math.cos(a),w=Math.sin(a),S=Math.cos(g),v=Math.sin(g),b=y*S+w*v,x=y-2*b*S,M=w-2*b*v;return _.gr(0,0,x,M)}WRt(t,s,i,e,n){if(!n)return!1;const r=n.aD();if(!r.eB())return!1;if(this.dRt++,d.set(Math.min(t,i),Math.min(s,e),Math.max(t,i),Math.max(s,e)),!r.B4().Nl(d))return!1;if(n.cCt())return this.jRt(t,s,i,e,n,r);if(this.mRt++,!r.j4().mu(t,s,i,e))return!1;if(!r.gPt())return!0;const h=r.yPt();return h.mu(r.a2(),r.c2(),t,s,i,e)}jRt(i,e,n,r,t,s){const h=s.a2(),o=s.c2(),a=t.s6(),l=v;p.set(i,e,n,r),p.normalize(),a.GetCollisionRectCandidates(p,l);for(let t=0,s=l.length;t<s;++t){const u=l[t],c=u.GetRect();if(this.dRt++,d.Bl(c,h,o)&&(x.cu(c),x.offset(h,o),x.mu(i,e,n,r))){const f=u.GetPoly();if(!f)return _.Rh(l),!0;if(this.mRt++,f.mu(h+c.pl(),o+c.ml(),i,e,n,r))return _.Rh(l),!0}}return _.Rh(l),!1}ARt(t,s){if(!s)return!1;const i=s.aD();if(!i.eB())return!1;if(this.dRt++,!i.B4().Nl(t))return!1;if(s.cCt())return this.URt(t,s,i);if(this.mRt++,x.cu(t),!i.j4().gu(x))return!1;if(!i.gPt())return!0;const e=b,n=(e.cu(t,i.a2(),i.c2()),i.yPt());return e.ku(n,0,0)}URt(i,t,s){const e=s.a2(),n=s.c2(),r=t.s6(),h=v;r.GetCollisionRectCandidates(i,h);for(let t=0,s=h.length;t<s;++t){const o=h[t],a=o.GetRect();if(this.dRt++,i.Bl(a,e,n)){const l=o.GetPoly();if(!l)return _.Rh(h),!0;if(this.mRt++,b.cu(i,0,0),l.ku(b,-(e+a.pl()),-(n+a.ml())))return _.Rh(h),!0}}return _.Rh(h),!1}VRt(t,s){if(t){const i=t.aD();i.eB()&&(this.dRt++,i.B4().Nl(s.rect))&&(t.cCt()?this.HRt(t,i,s):(this.mRt++,i.gPt()?s.zRt(t,i.a2(),i.c2(),i.yPt()):s.JRt(t,i.j4())))}}HRt(i,e,n){const r=e.a2(),h=e.c2(),o=v;i.s6().GetCollisionRectCandidates(n.rect,o);for(let t=0,s=o.length;t<s;t++){const a=o[t],l=a.GetRect();if(this.dRt++,n.rect.Bl(l,r,h)){const u=a.GetPoly();this.mRt++,u?n.zRt(i,r+l.pl(),h+l.ml(),u):n.qRt(i,e.a2(),e.c2(),l)}}_.Rh(o)}iL(t,s){if(t!==this.uRt||s!==this.cRt){this.uRt=t,this.cRt=s;const i=this.Xc.Mz();for(const e of i)if(e.WL()){for(const n of e.vk())n.aD().QEt();e._It().$Rt(t,s),e.IIt();for(const r of e.vk()){const h=r.aD();h.CPt(),h.EIt()}}}}nL(){return[this.uRt,this.cRt]}XRt(t,s){this.uRt=t,this.cRt=s}}}{const _a=self.Os;_a.n_t=class extends _a.Kn{constructor(t,s){super(),this.PH=t,this.RH=s,this.AH=_a.tr(_a.Vu)}ir(){this.AH.ir(),this.AH=null}$Rt(t,s){if(!this.AH.zu())throw new Error("grid not empty");this.PH=t,this.RH=s}FH(t,s,i){let e=this.AH.Ks(t,s);return e||(i?(e=_a.tr(_a.YRt,this,t,s),this.AH.Set(t,s,e),e):null)}OH(t){const s=Math.floor(t/this.PH);return isFinite(s)?s:0}DH(t){const s=Math.floor(t/this.RH);return isFinite(s)?s:0}LH(e,n,r){if(n)for(let i=n.pl(),t=n.gl();i<=t;++i)for(let t=n.ml(),s=n.yl();t<=s;++t)if(!r||!r.Wl(i,t)){const h=this.FH(i,t,!1);h&&(h.u0(e),h.zu())&&this.AH.Ju(i,t)}if(r)for(let i=r.pl(),t=r.gl();i<=t;++i)for(let t=r.ml(),s=r.yl();t<=s;++t)n&&n.Wl(i,t)||this.FH(i,t,!0)._H(e)}kH(t,s){let i=this.OH(t.pl()),e=this.DH(t.ml()),n=this.OH(t.gl()),r=this.DH(t.yl());if(isFinite(n)&&isFinite(r))for(;i<=n;++i)for(let t=e;t<=r;++t){const h=this.FH(i,t,!1);h&&h.CH(s)}}}}{const Ia=self.Os;Ia.YRt=class extends Ia.Kn{constructor(t,s,i){super(),this.SH=t,this.za=s,this.Ja=i,this.vH=Ia.tr(Ia.Yu)}ir(){this.vH.ir(),this.vH=null,this.SH=null}zu(){return this.vH.zu()}_H(t){this.vH.tc(t)}u0(t){this.vH.Ju(t)}CH(t){Ia.Vn(t,this.vH.sc())}}}{const Ca=self.Os;Ca.ZRt=class{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new Ca.Rect,this.KRt=2,this.QRt=null,this.tAt=0,this.sAt=0,this.iAt=0,this.eAt=0,this.nAt=0,this.It=0,this.rAt=1,this.hAt=0,this.oAt=1,this.aAt=0}lAt(){return this.KRt<1+1e-6}Kf(){this.KRt=2}Set(t,s,i,e){return this.x1=t,this.y1=s,this.x2=i,this.y2=e,this.dx=i-t,this.dy=e-s,this.rect.set(t,s,i,e),this.rect.normalize(),this.KRt=2,this.QRt=null,this.tAt=0,this.sAt=0,this.iAt=0,this.eAt=0,this.nAt=0,this.It=0,this.rAt=1,this.hAt=0,this.oAt=1,this.aAt=0,this}uAt(){if(!1!==this.lAt()){const t=this.dx*this.KRt,s=this.dy*this.KRt,i=Math.hypot(t,s),e=t/i,n=s/i,r=(this.It=i-1e-6,this.eAt=this.x1+e*this.It,this.nAt=this.y1+n*this.It,this.tAt=Math.atan2(this.iAt,this.sAt)+Math.PI/2,this.rAt=Math.cos(this.tAt),this.hAt=Math.sin(this.tAt),e*this.rAt+n*this.hAt);if(this.oAt=e-2*this.rAt*r,this.aAt=n-2*this.hAt*r,0<r){const h=Math.PI;this.tAt=Ca.ur(this.tAt+h),this.rAt=-this.rAt,this.hAt=-this.hAt}}}cAt(t,s,i,e,n){const r=Ca.rh(this.x1,this.y1,this.x2,this.y2,s,i,e,n);0<=r&&r<this.KRt&&(this.KRt=r,this.QRt=t.EN(),this.sAt=s-e,this.iAt=i-n)}qRt(t,s,i,e){const n=s+e.pl(),r=s+e.gl(),h=i+e.ml(),o=i+e.yl();this.cAt(t,n,h,r,h),this.cAt(t,r,h,r,o),this.cAt(t,r,o,n,o),this.cAt(t,n,o,n,h)}JRt(t,s){const i=s.Xr(),e=s.Yr(),n=s.Zr(),r=s.Kr(),h=s.Qr(),o=s.th(),a=s.ih(),l=s.eh();this.cAt(t,i,e,n,r),this.cAt(t,n,r,h,o),this.cAt(t,h,o,a,l),this.cAt(t,a,l,i,e)}zRt(i,e,n,t){const r=t.Eu();for(let t=0,s=r.length;t<s;t+=2){const h=(t+2)%s,o=r[t]+e,a=r[t+1]+n,l=r[h]+e,u=r[1+h]+n;this.cAt(i,o,a,l,u)}}}}{const T=self.Os,Ea=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),Pa=new Set(["high","low"]),Ra=self.ys,Gn=Ra.bs,Tn=Ra.Ts,Aa=Gn.create(),Fa=T.tr(T.Hl),I=T.tr(T.Rect);T.fAt=class extends T.Kn{constructor(t){super(),this.Xc=t,this.dAt=[],this.pAt=!1,this.mAt=null,this.gAt=null,this.yAt=null,this.wAt="high-performance",this.SAt=!1,this.vAt=0,this.bAt=0,this.xAt="",this.MAt=0,this.GAt=0,this.TAt=0,this._At=0,this.IAt=0,this.CAt=0,this.gy="normalized",this.EAt=0,this.PAt=1,this.RAt=1e4,this.Jy=!0,this.AAt=0,this.LR=0,this.kR=0,this.FAt="letterbox-scale",this.OAt="letterbox-scale",this.DAt=0,this.LAt=0,this.kAt=Gn.create(),this.NAt="high",this.BAt=this.NAt,this.WAt=!1,this.jAt=[],this.UAt=new Set,this.VAt=self.C3_Shaders,this.HAt=T.tr(T.Ug.WP,{LP:()=>[this.r9(),this.h9()],kP:()=>this.zAt(),NP:t=>this.JAt(t),getTime:()=>this.ED().wO(),BP:()=>this.ED().mD()}),this.qAt=0,this.$At=0,this.XAt=NaN,this.YAt=null,this.ZAt=new Map,this.KAt=NaN,this.QAt=new Map,this.tFt="",this.sFt=1,this.iFt=T.tr(T.Rect),this.eFt="",this.nFt=null,this.rFt=null,this.hFt=0,this.oFt=0,this.aFt=-1,this.lFt=0,this.uFt=t=>this.lFt=t.progress,this.cFt=null,this.fFt={dFt:null,pFt:null,mFt:null},this.gFt=0,this.yFt=0,this.wFt=0,this.SFt="fade-in",this.vFt=null,this.bFt=new Promise(t=>this.vFt=t)}xFt(t){this.wAt=t}MFt(t){this.pAt=!!t}GFt(t){this.gy=t}TFt(){return this.gy}_Ft(t){this.EAt=t}IFt(t,s){this.PAt=t,this.RAt=s}CFt(t){this.SAt=!!t}async Go(t){let s=t.canvas,i=(this.dAt.push({canvas:s,EFt:null}),this.Xc.n4("runtime","window-resize",t=>this.PFt(t)),this.Xc.n4("runtime","fullscreenchange",t=>this.RFt(t)),this.Xc.n4("runtime","fullscreenerror",t=>this.AFt(t)),s.addEventListener("webglcontextlost",t=>this.FFt(t)),s.addEventListener("webglcontextrestored",t=>this.OFt(t)),this.WAt=!!t.isFullscreen,this.xAt=t.cssDisplayMode,navigator.gpu&&this.pAt),e=!1;if(i)try{await this.DFt(!0)}catch(t){this.LFt("WebGPU",t),this.gAt=null}if(!this.Rv())try{await this.kFt(!0)}catch(t){this.LFt("WebGL",t),this.mAt=null}if(this.Rv()||(e=!0),!this.Rv()&&i)try{await this.DFt(!1)}catch(t){this.LFt("WebGPU",t),this.gAt=null}if(!this.Rv())try{await this.kFt(!1)}catch(t){this.LFt("WebGL",t),this.mAt=null}const n=this.Rv();if(!n)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");n.ZS(e),this.gAt&&(this.gAt.NFt=()=>this.BFt(),this.gAt.WFt=()=>this.jFt()),"normalized"===this.gy?n.fw():(n.dw(),n.uw(this.EAt)),this.HI(t.windowInnerWidth,t.windowInnerHeight,!0),await this.JPt()}LFt(t,s){s&&"string"==typeof s.message&&s.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,s)}async DFt(t){const s={ey:this.PAt,ny:this.RAt},i={powerPreference:this.wAt,depth:this.Xc.fJ(),failIfMajorPerformanceCaveat:t,UFt:this.Xc.p9(),VFt:this.Xc.HFt(),QC:this.Xc.zFt()};this.gAt=T.tr(T.Ug.WebGPURenderer,s),await this.gAt.tM(this.dAt[0].canvas,i)}async kFt(t){const s={alpha:!0,powerPreference:this.wAt,KC:"xbox-uwp-webview2"!==this.Xc.pL(),depth:this.Xc.fJ(),QC:this.Xc.zFt(),failIfMajorPerformanceCaveat:t,ey:this.PAt,ny:this.RAt};this.SAt&&(s.t3=1),this.mAt=T.tr(T.Ug.e3,this.dAt[0].canvas,s),await this.mAt.Zy()}async JFt(){if(this.VAt){const t=[];for(const[s,i]of Object.entries(this.VAt)){i.src=i.qFt;const e=T.Ug.WebGPUShaderProgram.SG();t.push(this.gAt.lE(Object.assign({Zx:e,name:s},i)))}await Promise.all(t)}}async $Ft(){if(this.VAt){const s=[];for(const[i,e]of Object.entries(this.VAt)){let t;if(e.XFt&&2<=this.mAt.Ab())e.src=e.XFt,t=T.Ug.Xx.vG();else{if(!e.YFt)throw new Error(`shader '${i}' does not support WebGL 1`);e.src=e.YFt,t=T.Ug.Xx.SG()}s.push(this.mAt.lE(Object.assign({Zx:t,name:i},e)))}await Promise.all(s),this.mAt.uE(),this.mAt.Tw()}this.mAt.MP()&&(this.YAt=T.tr(T.Ug.UC,this.mAt))}async JPt(){this.gAt?await this.JFt():this.mAt&&await this.$Ft();const t=this.Rv();t.XS(this.Jy),t.MP()&&(this.XAt=0);for(const s of this.Xc.ZFt()){for(const i of s.Dk())i.JPt(t);s.JPt(t),s.S6()}this.yAt=new self.D8(this.Xc,t)}ir(){this.Xc=null,this.mAt=null,this.dAt.length=0}RF(){return this.Xc.RF()}PFt(t){const s=this.Xc;if(!s.KFt()){const i=t.devicePixelRatio,e=(this.RF()&&(self.devicePixelRatio=i),s.QFt(i),this.WAt=!!t.isFullscreen,this.xAt=t.cssDisplayMode,this.HI(t.innerWidth,t.innerHeight),s.mD(),new T.Event("window-resize")),n=(e.data=t,s.Rf().jf(e),new T.Event("resize"));n.tOt=this.xL(),n.sOt=this.GL(),n.iOt=this._L(),n.eOt=this.CL(),s.yX(n),s.wX()&&(s.Xdt()||self.C3Debugger.IsDebuggerPaused())&&s.dA()}}RFt(t){this.WAt=!!t.isFullscreen,this.HI(t.innerWidth,t.innerHeight,!0),this.Xc.mD()}AFt(t){this.WAt=!!t.isFullscreen,this.HI(t.innerWidth,t.innerHeight,!0),this.Xc.mD()}HI(t,s,i=!1){if(t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid size");if(this.vAt!==t||this.bAt!==s||i){this.vAt=t,this.bAt=s;const e=this.nOt();"letterbox-scale"===e?this.rOt(t,s):"letterbox-integer-scale"===e?this.hOt(t,s):"off"===e?this.oOt(t,s):this.aOt(t,s),this.lOt(e);for(const{canvas:h}of this.dAt)h.width=this.TAt,h.height=this._At;this.Xc.Kc("canvas","update-size",{marginLeft:this.IAt,marginTop:this.CAt,styleWidth:this.MAt,styleHeight:this.GAt,displayScale:this.Oj()});const n=this.Rv();n.HI(this.TAt,this._At,!0);for(const o of this.jAt)n.yP(o);T.Rh(this.jAt),this.uOt();const r=this.Xc.VO();r.WX(),r.jX()}}uOt(){this.Rv().mw(this.kAt,this.r9()/this.h9())}o9(){return this.kAt}rOt(t,s){const i=this.Xc.EL(),e=this.Xc.FF(),n=this.Xc.DF(),r=e/n,h=t/s;if(r<h){const o=s*r;this.MAt=Math.round(o),this.GAt=s,this.IAt=Math.floor((t-this.MAt)/2),this.CAt=0}else{const a=t/r;this.MAt=t,this.GAt=Math.round(a),this.IAt=0,this.CAt=Math.floor((s-this.GAt)/2)}this.TAt=Math.round(this.MAt*i),this._At=Math.round(this.GAt*i),this.Xc.cOt(e,n)}hOt(t,s){let i=this.Xc.EL(),e=(1!==i&&(t+=1,s+=1),this.Xc.FF()),n=this.Xc.DF(),r=e/n,h=t/s,o;if(r<h){const a=s*r;o=a*i/e}else{const l=t/r;o=l*i/n}1<o?o=Math.floor(o):o<1&&(o=1/Math.ceil(1/o)),this.TAt=Math.round(e*o),this._At=Math.round(n*o),this.MAt=this.TAt/i,this.GAt=this._At/i,this.IAt=Math.max(Math.floor((t-this.MAt)/2),0),this.CAt=Math.max(Math.floor((s-this.GAt)/2),0),this.Xc.cOt(e,n)}aOt(t,s){const i=this.Xc.EL(),e=(this.MAt=t,this.GAt=s,this.TAt=Math.round(this.MAt*i),this._At=Math.round(this.GAt*i),this.IAt=0,this.CAt=0,this.Oj());this.Xc.cOt(this.MAt/e,this.GAt/e)}oOt(t,s){const i=this.Xc.EL();this.MAt=this.Xc.iJ(),this.GAt=this.Xc.eJ(),this.TAt=Math.round(this.MAt*i),this._At=Math.round(this.GAt*i),this.fOt()?(this.IAt=Math.floor((t-this.MAt)/2),this.CAt=Math.floor((s-this.GAt)/2)):(this.IAt=0,this.CAt=0),this.Xc.cOt(this.Xc.iJ(),this.Xc.eJ())}lOt(i){if("high"===this.NAt)this.LR=this.TAt,this.kR=this._At,this.BAt="high";else{let t,s;if(s="off"===this.nOt()?(t=this.Xc.iJ(),this.Xc.eJ()):(t=this.Xc.FF(),this.Xc.DF()),this.TAt<t||this._At<s)this.LR=this.TAt,this.kR=this._At,this.BAt="high";else if(this.LR=t,this.kR=s,this.BAt="low","scale-inner"===i){const e=t/s,n=this.vAt/this.bAt;n<e?this.LR=this.kR*n:e<n&&(this.kR=this.LR/n)}else if("scale-outer"===i){const r=t/s,h=this.vAt/this.bAt;r<h?this.LR=this.kR*h:h<r&&(this.kR=this.LR/h)}}}ED(){return this.Xc}dOt(){return this.dAt[0].canvas}D7(){return this.HAt}fOt(){return this.WAt}pOt(){return this.xAt}mOt(t){if(!Ea.has(t))throw new Error("invalid fullscreen mode");this.FAt=t;const s=this.Xc.VO();s.WX(),s.jX()}Aj(){return this.FAt}gOt(t){if(!Ea.has(t))throw new Error("invalid fullscreen mode");this.OAt=t;const s=this.Xc.VO();s.WX(),s.jX()}yOt(){return this.OAt}nOt(){return this.fOt()?this.yOt():this.Aj()}wOt(t){if(!Pa.has(t))throw new Error("invalid fullscreen scaling quality");this.NAt=t,this.Xc.VO().WX()}SOt(){return this.NAt}m9(){return this.BAt}static vOt(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}Sj(){return this.vAt}vj(){return this.bAt}r9(){return this.LR}h9(){return this.kR}XS(t){this.Jy=!!t}bOt(t){this.AAt=t}dH(){return this.AAt}xOt(){return this.Rv().SC()}FFt(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.jAt=[],this.UAt.clear(),this.HAt.Kv(),this.mAt.Kv(),this.Xc.g$()}BFt(){console.log("[Construct] WebGPU device lost"),this.jAt=[],this.UAt.clear(),this.HAt.Kv(),this.Xc.g$()}async OFt(t){await this.mAt.Qv(),await this.JPt(),await this.Xc.MOt(),console.log("[Construct] WebGL context restored")}async jFt(){await this.JPt(),await this.Xc.MOt(),console.log("[Construct] WebGPU device restored")}GOt(){return this.mAt}TOt(){return this.gAt}Rv(){return this.gAt||this.mAt}sIt(){return this.yAt}yL(){let t="";return t=this.Xc.TOt()?"webgpu":"webgl"+this.Xc.GOt().Ab(),this.Xc.Rv().KS()&&(t+="-software"),t}vL(){return this.Xc.TOt()?this.Xc.TOt().GetAdapterInfoString():this.Xc.GOt().AP()}fN(){return"low"===this.BAt?1/this.Xc.EL():this.Oj()}Oj(){const t=this.nOt();if("off"===t||"crop"===t)return 1;const s=this.Xc.FF(),i=this.Xc.DF(),e=s/i,n=this.TAt/this._At;return"scale-inner"!==t&&e<n||"scale-inner"===t&&n<e?this.GAt/i:this.MAt/s}B9(){return"low"===this.m9()?1:this.Oj()}k9(){return"low"===this.m9()?1:this.Xc.EL()}_Ot(t,s){this.DAt=t,this.LAt=s}bU(s,i,e,t=!0){i=i||this.LR,e=e||this.kR;const n=i/2+this.DAt,r=e/2+this.LAt;if(t){let t=this.o9();i===this.LR&&e===this.kR||(s.mw(Aa,i/e),t=Aa),s.fE(t)}const h=s.Sw(n,r,s.Qy(e),n,r,0,e);s.wE(h)}IOt(t,s=!0){const i=this.xL(),e=this.GL(),n=i/2,r=e/2,h=(s&&t.fE(this.o9()),t.Sw(n,r,t.Qy(e),n,r,0,e));t.wE(h)}_L(){return this.TAt}CL(){return this._At}xL(){return this.MAt}GL(){return this.GAt}eN(){return this.IAt}nN(){return this.CAt}Qq(){return this.dAt.length}COt(){return"undefined"!=typeof OffscreenCanvas&&this.dOt()instanceof OffscreenCanvas&&("Chromium"!==T.ni.ci||124<=T.ni.li)}async b$(e,n=!1){if(e<1)throw new Error("invalid HTML layer count");if(this.dAt.length!==e){let t=this.Xc.VO().WO(),s={count:e,layersDomState:t.Rz().filter(t=>t.E5()).map(t=>t.DJ()),immediate:n,marginLeft:this.IAt,marginTop:this.CAt,styleWidth:this.MAt,styleHeight:this.GAt},i;if(i=this.RF()?await this.Xc.yD("canvas","set-html-layer-count",s):self.c3_runtimeInterface._OnSetHTMLLayerCount(s),e<this.dAt.length)this.dAt.length=e;else for(const r of i.addedCanvases){r.width=this.TAt,r.height=this._At;const h=this.COt()?"bitmaprenderer":"2d",o=r.getContext(h);if(!o)throw new Error(`failed to acquire '${h}' canvas context`);this.dAt.push({canvas:r,EFt:o})}this.Xc.mD()}}pX(t){if(!(t>=this.dAt.length)){const s=this.dOt(),i=this.dAt[t].EFt;this.COt()?i.transferFromImageBitmap(s.transferToImageBitmap()):(i.globalCompositeOperation="copy",i.drawImage(s,0,0))}}g9(s){s.depth=this.Xc.fJ();let t=this.jAt,i=t.findIndex(t=>t.Vx(s)),e;return-1!==i?(e=t[i],t.splice(i,1)):e=this.Rv().fP(s),this.UAt.add(e),e}k7(t){if(!this.UAt.has(t))throw new Error("render target not in use");this.UAt.delete(t),this.jAt.push(t)}zAt(){const t={fb:this.Xc.LF()};return"low"===this.m9()&&(t.width=this.r9(),t.height=this.h9()),this.g9(t)}JAt(t){this.k7(t)}*EOt(){for(const t of this.Xc.VO().kX())for(const s of t.Yk()){const i=this.ZAt.get(s);i&&(yield i)}}c9(t){if(!this.Rv().MP())return null;let s=this.ZAt.get(t);return s||(s={E4:t,name:t.jc(),POt:T.tr(T.Ug.UC,this.mAt),ROt:0,AOt:0,FOt:0},this.ZAt.set(t,s)),s.POt}OOt(){const t=this.Rv();if(t.MP()&&0===this.$At){this.$At=t.qS(),this.KAt=NaN;for(const s of this.EOt())s.ROt=NaN}}DOt(){this.mAt&&this.mAt.MP()&&this.LOt(),this.gAt&&this.gAt.MP()&&this.kOt()}LOt(){if(isNaN(this.KAt)&&(this.KAt=this.YAt.XC(this.qAt,this.$At),!isNaN(this.KAt))){if(this.Xc.wX())for(const t of this.EOt())if(t.ROt=t.POt.XC(this.qAt,this.$At),isNaN(t.ROt))return;if(this.YAt.YC(this.$At),this.XAt=Math.min(this.KAt,1),this.Xc.wX()){const i=new Map;for(const n of this.EOt())n.POt.YC(this.$At),n.AOt=Math.min(n.ROt,1),i.set(n.E4,n.AOt);for(const r of this.EOt()){const h=r.E4,o=i.get(h)||0,a=o-h.S5().reduce((t,s)=>t+(i.get(s)||0),0);r.FOt=T.lr(a,0,1)}const s=this.Xc.WO(),e=this.XAt-s.Rz().reduce((t,s)=>t+(i.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(T.lr(e,0,1),this.XAt,[...this.EOt()])}this.qAt=this.$At,this.$At=0}}NOt(){return this.YAt}kOt(){if(0!==this.$At){for(let t=this.qAt;t<this.$At;++t){const i=this.QAt.get(t);if(i&&!i.RC())return}let t=this.Xc.WO(),h=T.Do(t.qq()+1,0),s=0;for(let t=this.qAt;t<this.$At;++t){const o=this.QAt.get(t);if(o){let i=o.AC(),e=BigInt(0),n=BigInt(0),r=BigInt(0);for(let t=0,s=Math.min(h.length,i.length/2);t<s;++t){const u=i[2*t],c=i[2*t+1],f=(u!==r&&(e===r||u<e)&&(e=u),c>n&&(n=c),c-u),d=Number(f)/1e9;h[t]+=d}const a=n-e,l=Number(a)/1e9;s+=l}}if(this.XAt=T.lr(s,0,1),this.Xc.wX()){const e=t.Yk(),n=new Map;for(let t=0,s=Math.min(e.length,h.length-1);t<s;++t){const g=h[t+1];n.set(e[t],g)}const r=[],p=new Map;for(const[y,w]of n){const S=[...y.b5()].reduce((t,s)=>t+(n.get(s)||0),0);p.set(y,S),r.push({name:y.jc(),FOt:T.lr(w,0,1),AOt:T.lr(S,0,1)})}const m=this.XAt-t.Rz().reduce((t,s)=>t+(p.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(T.lr(m,0,1),this.XAt,r)}for(let t=this.qAt;t<this.$At;++t)this.QAt.delete(t);this.qAt=this.$At,this.$At=0}}BOt(t){this.QAt.set(this.gAt.qS(),t)}EO(){return this.XAt}WOt(t,s,i,e,n,r){return this.tFt=t,this.sFt=s,this.iFt.hl(i,e,n,r),this.nFt||(this.nFt=new Promise(t=>{this.rFt=t})),this.nFt}jOt(){if(this.tFt){let t=this.dOt(),s=this.iFt,i=T.lr(Math.floor(s.pl()),0,t.width),e=T.lr(Math.floor(s.ml()),0,t.height),n=s.width(),r=(n=0===n?t.width-i:T.lr(Math.floor(n),0,t.width-i),s.height());if(r=0===r?t.height-e:T.lr(Math.floor(r),0,t.height-e),(0!==i||0!==e||n!==t.width||r!==t.height)&&0<n&&0<r){const h=T.Go(n,r),o=h.getContext("2d");o.drawImage(t,i,e,n,r,0,0,n,r),t=h}T.To(t,this.tFt,this.sFt).then(t=>{this.eFt&&URL.revokeObjectURL(this.eFt),this.eFt=URL.createObjectURL(t),this.nFt=null,this.rFt(this.eFt)}),this.tFt="",this.sFt=1}}UOt(){return this.eFt}VOt(t){t?this.hFt++:this.hFt--}HOt(){return 0<this.hFt}zOt(t){const s=this.Rv();if(2===t)this.cFt=T.tr(T.Ug.ov,this.Rv()),this.cFt.SI("Arial"),this.cFt.vI(16),this.cFt.DI("center"),this.cFt.kI("center"),this.cFt.HI(300,200);else if(0===t){const i=this.Xc.JOt();i&&i.dU(s).catch(t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t))}else 4===t&&(this.qOt("splash-images/splash-logo.svg").then(t=>{"done"===this.SFt?s.Cx(t):this.fFt.dFt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.$Ot("splash-images/splash-poweredby-512.png").then(t=>{"done"===this.SFt?s.Cx(t):this.fFt.pFt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.$Ot("splash-images/splash-website-512.png").then(t=>{"done"===this.SFt?s.Cx(t):this.fFt.mFt=t}).catch(t=>console.warn("Failed to load splash image: ",t)))}async qOt(t){t=new URL(t,this.Xc.XOt()).toString();const s=await T.yo(t),i=await this.Xc.YOt(s,2048,2048);return this.Rv().cP(i,{yb:"high"})}async $Ot(t){t=new URL(t,this.Xc.XOt()).toString();const s=await T.yo(t);return this.Rv().cP(s,{yb:"high"})}ZOt(){this.Xc.Kc("runtime","hide-cordova-splash")}KOt(){this.oFt=Date.now(),this.Xc.Rf().addEventListener("loadingprogress",this.uFt),this.aFt=requestAnimationFrame(()=>this.QOt());const t=this.Xc.tDt();3!==t&&this.ZOt()}async sDt(){const t=this.Rv(),s=(this.lFt=1,this.Xc.tDt());4===s&&await this.bFt,this.vFt=null,this.bFt=null,-1!==this.aFt&&(cancelAnimationFrame(this.aFt),this.aFt=-1),this.Xc.Rf().removeEventListener("loadingprogress",this.uFt),this.uFt=null,this.cFt&&(this.cFt.ir(),this.cFt=null),this.Xc.iDt(),t.sP(),this.fFt.dFt&&(t.Cx(this.fFt.dFt),this.fFt.dFt=null),this.fFt.pFt&&(t.Cx(this.fFt.pFt),this.fFt.pFt=null),this.fFt.mFt&&(t.Cx(this.fFt.mFt),this.fFt.mFt=null),t.tP(0,0,0,0),t.zS(),this.SFt="done",this.qAt=t.qS(),3===s&&this.ZOt()}QOt(){if(-1!==this.aFt){const t=this.Rv(),s=(t.sP(),this.aFt=-1,this.Xc.vF().WV()),i=this.Xc.tDt();if(3!==i&&(this.IOt(t),t.tP(0,0,0,0),t._E(),t.Tw(),t.CE(null)),0===i)this.eDt(s);else if(1===i)this.nDt(s,120,0);else if(2===i)this.rDt(s);else if(3===i)T.Ih();else{if(4!==i)throw new Error("invalid loader style");this.hDt(s)}t.zS(),this.aFt=requestAnimationFrame(()=>this.QOt())}}rDt(t){t?this.cFt.OI(1,0,0):this.cFt.OI(.6,.6,.6),this.cFt.Qc(Math.round(100*this.lFt)+"%");const s=this.MAt/2,i=this.GAt/2,e=(Fa.Ql(s-150,i-100,150+s,100+i),this.Rv());e.CE(this.cFt.Ox()),e.gS(Fa,this.cFt.bC())}nDt(t,s,i){const e=this.Rv(),n=(e.Rw(),t?e.GE(1,0,0,1):e.GE(.118,.565,1,1),this.MAt/2),r=this.GAt/2,h=s/2;I.hl(n-h,r-4+i,Math.floor(s*this.lFt),8),e.Rect(I),I.hl(n-h,r-4+i,s,8),I.offset(-.5,-.5),I.Il(.5,.5),e.GE(0,0,0,1),e.bS(I),I.Il(1,1),e.GE(1,1,1,1),e.bS(I)}eDt(t){const s=this.Rv(),i=this.Xc.JOt();if(i){const e=i.Ox();if(e){const n=e.$p(),r=e.hm(),h=this.MAt/2,o=this.GAt/2,a=n/2,l=r/2;Fa.Ql(h-a,o-l,h+a,o+l),s.CE(e),s.Hl(Fa),this.nDt(t,n,16+l)}else this.nDt(t,120,0)}else this.nDt(t,120,0)}hDt(t){let s=this.Rv(),i=this.fFt.dFt,e=this.fFt.pFt,n=this.fFt.mFt,r=Date.now(),h=(0===this.gFt&&(this.oFt=r),this.Xc.oDt()||this.Xc.aDt()&&!this.Xc.lDt()),o=h?0:200,a=h?0:3e3,l=1,u=("fade-in"===this.SFt?l=Math.min((r-this.oFt)/300,1):"fade-out"===this.SFt&&(l=Math.max(1-(r-this.wFt)/300,0)),s.Rw(),s.GE(.231*l,.251*l,.271*l,l),I.set(0,0,this.MAt,this.GAt),s.Rect(I),Math.ceil(this.MAt)),c=Math.ceil(this.GAt),f,d;256<this.GAt?(s.GE(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),I.hl(0,.8*c-d/2,f,d),s.Rect(I),t?s.GE(l,0,0,l):s.GE(.161*l,.953*l,.816*l,l),f=u*this.lFt,I.hl(.5*u-f/2,.8*c-d/2,f,d),s.Rect(I),s.GE(l,l,l,l),s.Tw(),e&&(f=1.5*T.lr(.22*c,105,.6*u),d=f/8,I.hl(.5*u-f/2,.2*c-d/2,f,d),s.CE(e),s.Rect(I)),i&&(f=Math.min(.395*c,.95*u),d=f,I.hl(.5*u-f/2,.485*c-d/2,f,d),s.CE(i),s.Rect(I)),n&&(f=1.5*T.lr(.22*c,105,.6*u),d=f/8,I.hl(.5*u-f/2,.868*c-d/2,f,d),s.CE(n),s.Rect(I))):(s.GE(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),I.hl(0,.85*c-d/2,f,d),s.Rect(I),t?s.GE(l,0,0,l):s.GE(.161*l,.953*l,.816*l,l),f=u*this.lFt,I.hl(.5*u-f/2,.85*c-d/2,f,d),s.Rect(I),s.GE(l,l,l,l),s.Tw(),i&&(f=.55*c,d=f,I.hl(.5*u-f/2,.45*c-d/2,f,d),s.CE(i),s.Rect(I))),this.gFt++,"fade-in"===this.SFt&&300<=r-this.oFt&&2<=this.gFt&&(this.SFt="wait",this.yFt=r),"wait"===this.SFt&&r-this.yFt>=a&&1<=this.lFt&&(this.SFt="fade-out",this.wFt=r),("fade-out"===this.SFt&&r-this.wFt>=300+o||h&&1<=this.lFt&&r-this.oFt<500)&&this.vFt()}}}{let U=self.Os,V=self.C3Debugger,i={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""},h=!0;U.uDt=class extends U.Kn{constructor(t){t=Object.assign({},i,t),super(),this.cDt=t.messagePort,this.fDt=t.runtimeBaseUrl,this.dDt=t.previewUrl,this.pDt=!!t.headless,this.mDt=!!t.hasDom,this.gDt=!!t.isInWorker,h=t.ife,this.yDt=!!t.useAudio,this.wDt=t.exportType,this.SDt=t.isNWjs,this.VU=!!t.isiOSCordova,this.vDt=!!t.isiOSWebView,this.bDt=!!t.isWindowsWebView2,this.xDt=!!t.isAnyWebView2Wrapper,this.MDt=!!t.isFBInstantAvailable,this.GDt=!("preview"!==this.wDt||!t.isDebug),this.TDt=this.GDt,this._Dt=this.GDt,this.IDt=0,this.CDt=[],this.EDt=[],this.PDt=!1,this.RDt="",this.ADt="",this.FDt="",this.ODt="",this.DDt=0,this.LDt=0,this.zR=self.devicePixelRatio,this.kDt=0,this.NDt=0,this.BDt=0,this.WDt=0,this.jDt=0,this.UDt=!1,this.Gg=!0,this.VDt=!1,this.HDt=!1,this.zDt=!1,this.JDt=null,this.tH=U.tr(U.BU,this,t),this.iq=U.tr(U.bX,this),this.wft=U.tr(U.m0t,this),this.qDt=U.tr(U.DL,this,t.wrapperComponentIds),this.$Dt=U.tr(U.lRt,this),this.tQ=U.tr(U.UX,this),this.XDt=U.tr(U.rlt,this),this.YDt=U.tr(U.olt,this),this.xlt=U.tr(U.glt,this),this.Sg=U.tr(U.hg,{lg:t=>this.ZDt(t),fg:t=>this.KDt(t)}),this.QDt=new Map,this.tLt=[],this.sLt=new Map,this.iLt=new Map,this.eLt=0,this.nLt=[],this.rLt=new Set,this.hLt=[],this.oLt=[],this.aLt=new Map,this.lLt=!1,this.uLt=!1,this.cLt=0,this.fLt=0,this.dLt=new Map,this.pLt=new Set,this.mLt=new Set,this.gLt=[],this.yLt=[],this.wLt=null,this.SLt=!1,this.vLt="vsync",this.Gb="trilinear",this.bLt=!1,this.xLt=!0,this.MLt=!1,this.GLt=!1,this.TLt=null,this._Lt={ILt:t=>{this.aFt=-1,this.CLt=-1,this.fZ(t)},ELt:t=>{this.CLt=-1,this.fZ(t,!1,"skip-render")},PLt:()=>{this.aFt=-1,this.dA()}},this.aFt=-1,this.CLt=-1,this.RLt=0,this.ALt=0,this.FLt=!1,this.OLt=!1,this.DLt=!1,this.LLt=!0,this.kLt=!0,this.NLt=!1,this.BLt=0,this.WLt=new U.sd(1),this.jLt=()=>Math.random(),this.ULt=0,this.VLt=0,this.HLt=0,this.zLt=0,this.JLt=0,this.KIt=1,this.qLt=1/30,this.$Lt=0,this.XLt=U.tr(U.f0),this.YLt=U.tr(U.f0),this.ZLt=U.tr(U.f0),this.KLt=new Map,this.QLt=-1,this.tkt=0,this.skt=0,this.ikt=-1,this.ekt=0,this.nkt=0,this.rkt=0,this.hkt=!1,this.okt="",this.akt=!1,this.lkt="",this.g4=null,this.ukt="",this.ckt=null,this.fkt=null,this.i_t=U.tr(U.Event.Rf),this.dkt=new Map,this.pkt=new Map,this.mkt=0,this.gkt=!1,this.ykt=!1,this.wkt=!1,this.Skt=[],this.vkt={pretick:U.tr(U.Event,"pretick",!1),tick:U.tr(U.Event,"tick",!1),tick2:U.tr(U.Event,"tick2",!1),instancecreate:U.tr(U.Event,"instancecreate",!1),instancedestroy:U.tr(U.Event,"instancedestroy",!1),beforelayoutchange:U.tr(U.Event,"beforelayoutchange",!1),layoutchange:U.tr(U.Event,"layoutchange",!1)},this.vkt.instancecreate.f6=null,this.vkt.instancedestroy.f6=null,this.Oq=U.tr(U.Event.Rf),this.bkt=null;const s=(t,s)=>U.YIt.FPt(this,t,s);this.xkt=U.tr(U.b0,s),this.Mkt=U.tr(U.b0,s),this.Gkt=U.tr(U.b0,s),this.Tkt=U.tr(U._kt,this,t.jobScheduler),t.canvas&&(this.wLt=U.tr(U.fAt,this)),this.cDt.onmessage=t=>this._OnMessageFromDOM(t.data),this.n4("runtime","visibilitychange",t=>this.Ikt(t)),this.n4("runtime","wrapper-extension-message",t=>this.Ckt(t)),this.n4("runtime","opus-decode",t=>this.UD(t.arrayBuffer)),this.n4("runtime","get-remote-preview-status-info",()=>this.Ekt()),this.n4("runtime","js-invoke-function",t=>this.V0t(t)),this.n4("runtime","go-to-last-error-script",self.goToLastErrorScript),this.n4("runtime","offline-audio-render-completed",t=>this.Pkt(t)),this.i_t.addEventListener("window-blur",t=>this.Rkt(t)),this.i_t.addEventListener("window-focus",()=>this.Akt()),this.tQ.xY(),this.YDt.xY(),this.Fkt=null,this.Okt=new WeakMap,this.Dkt={keyboard:null,ZO:null,KO:null,QO:null},this.Lkt=new WeakMap,this.kkt=[]}static tM(t){return U.tr(U.uDt,t)}ir(){U.Rh(this.tLt),this.sLt.clear(),this.iLt.clear(),this.iq.ir(),this.iq=null,this.wft.ir(),this.wft=null,this.qDt.ir(),this.qDt=null,this.tH.ir(),this.tH=null,this.$Dt.ir(),this.$Dt=null,this.tQ.ir(),this.tQ=null,this.XDt.ir(),this.XDt=null,this.YDt.ir(),this.YDt=null,this.xlt.ir(),this.xlt=null,this.Sg.ir(),this.Sg=null,this.wLt&&(this.wLt.ir(),this.wLt=null),this.i_t.ir(),this.i_t=null,this.Nkt=null}["_OnMessageFromDOM"](t){const s=t.type;if("event"===s)this.Bkt(t);else{if("result"!==s)throw new Error(`unknown message '${s}'`);this.Wkt(t)}}Bkt(t){if(this.wkt){const s=t.component,i=t.handler,e=t.data,n=t.dispatchOpts,r=!(!n||!n.dispatchRuntimeEvent),h=!(!n||!n.dispatchUserScriptEvent),o=t.responseId;if("runtime"===s){if(r){const l=new U.Event(i);l.data=e,this.i_t.jf(l)}if(h){const u=new U.Event(i,!0);for(const[c,f]of Object.entries(e))u[c]=f;this.yX(u)}}const a=this.dkt.get(s);if(a){const d=a.get(i);if(d){let t=null;try{t=d(e)}catch(t){return console.error(`Exception in '${s}' handler '${i}':`,t),void(null!==o&&this.jkt(o,!1,""+t))}null!==o&&(t&&t.then?t.then(t=>this.jkt(o,!0,t)).catch(t=>{console.error(`Rejection from '${s}' handler '${i}':`,t),this.jkt(o,!1,""+t)}):this.jkt(o,!0,t))}else r||h||console.warn(`[Runtime] No DOM handler '${i}' for component '${s}'`)}else r||h||console.warn(`[Runtime] No DOM event handlers for component '${s}'`)}else this.Skt.push(t)}jkt(t,s,i){this.cDt.postMessage({type:"result",responseId:t,isOk:s,result:i})}Wkt(t){const s=t.responseId,i=t.isOk,e=t.result,n=this.pkt.get(s);i?n.resolve(e):n.reject(e),this.pkt.delete(s)}n4(t,s,i){let e=this.dkt.get(t);if(e||(e=new Map,this.dkt.set(t,e)),e.has(s))throw new Error(`[Runtime] Component '${t}' already has handler '${s}'`);e.set(s,i)}Kc(t,s,i,e){this.cDt.postMessage({type:"event",component:t,handler:s,data:i,responseId:null},e)}yD(t,s,i,e){const n=this.mkt++,r=new Promise((t,s)=>{this.pkt.set(n,{resolve:t,reject:s})});return this.cDt.postMessage({type:"event",component:t,handler:s,data:i,responseId:n},e),r}e8(t,s,i,e=-1){this.Kc("runtime","send-wrapper-extension-message",{componentId:t,messageId:s,params:i,asyncId:e})}n8(t,s,i){const e=this.mkt++,n=new Promise((t,s)=>{this.pkt.set(e,{resolve:t,reject:s})});return this.e8(t,s,i,e),n}Ckt(t){if(-1!==t.asyncId){const s=t.asyncId,i=this.pkt.get(s);i.resolve(t.params),this.pkt.delete(s)}else this.Bkt({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}v4(t,s,i){this.n4("wrapper-extension:"+t,s,i)}w4(t){return this.qDt.w4(t)}Ukt(t){if(!this.wX())throw new Error("not in debug mode");this.Kc("runtime","post-to-debugger",t)}async sCt(t){U.Avt(this),this.wX()?await V.sCt(this):self.C3Debugger&&self.C3Debugger.InitPreview(this);const[s]=await Promise.all([this.tH.po("data.json"),this.Vkt(),this.Tkt.sCt()]);if(await this.Hkt(s),await this.zkt(t),this.oDt()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.GOt()){const i=this.GOt();console.info(`[C3 runtime] Hosted in ${this.RF()?"worker":"DOM"}, rendering with WebGL ${i.Ab()} [${i.AP()}]`)}else this.TOt()&&console.info(`[C3 runtime] Hosted in ${this.RF()?"worker":"DOM"}, rendering with WebGPU [${this.TOt().GetAdapterInfoString()}]`);this.Rv().KS()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.wkt=!0;for(const e of this.Skt)this.Bkt(e);U.Rh(this.Skt),this.wLt&&this.wLt.KOt();for(const n of t.runOnStartupFunctions)this.CDt.push(this.Jkt(n));if(await Promise.all([this.tH.NV(),...this.CDt]),U.Rh(this.CDt),!this.tH.WV())return this.wLt&&await this.wLt.sDt(),await this.i_t.Bf(new U.Event("beforeruntimestart")),await this.sP(),this.cDt.postMessage({type:"runtime-ready"}),this;this.wLt&&this.wLt.ZOt()}async Jkt(t){try{await t(this.Fkt)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async Hkt(t){const s=t.project,i=(this.RDt=s[0],this.ADt=s[16],this.FDt=s[31],this.ODt=s[38],s[39]||"loading-logo.png"),e=(this.bLt=!!s[9],this.DDt=this.BDt=s[10],this.LDt=this.WDt=s[11],this.$Dt.XRt(this.DDt,this.LDt),this.kDt=this.DDt/2,this.NDt=this.LDt/2,this.vLt=s[37],this.SLt=!!s[40],this.Gb=s[14],this.VDt=s[15],this.HDt=s[42],this.zDt=s[17],this.UDt=!!s[18],this.jDt=s[19],this.fLt=s[21],this.MLt=s[22],this.tH);if(e.mV(s[45]),e.zV(s[7],s[25]),e.yV(s[8]),e.wV(s[32]),e.vV(s[28]),e.UV(s[29]),0===this.jDt){let t;(t="flat"===e.kD()?e.bV()+i:i)&&(this.JDt=e.RV({url:t}))}this.wLt&&(this.wLt.mOt(U.fAt.vOt(s[12])),this.wLt.wOt(s[23]?"high":"low"),this.wLt.XS(0!==s[24]),this.wLt.xFt(s[34]),this.wLt.bOt(s[41]),this.wLt.MFt(s[13]),this.wLt.GFt(s[30]),this.wLt.IFt(s[46],s[47]),this.wLt._Ft(s[26]),this.wLt.CFt(s[48]));const n=s[43],r=(n&&await this.qkt(n),this.$kt(),this.qDt.VGt(),this.gLt=self.Xkt(),s[2]);for(const l of r[1])this.qDt.HGt(l);for(const u of r[0])this.qDt.UGt(u);this.gLt=self.Xkt(),this.Ykt(),this.qDt.$Gt();for(const c of s[3]){const f=U.dlt.tM(this,this.tLt.length,c);this.tLt.push(f),this.sLt.set(f.jc().toLowerCase(),f),this.iLt.set(f.Az(),f)}for(const d of s[4]){const p=this.tLt[d[0]];p.W_t(d)}for(const m of s[27]){const g=m.map(t=>this.tLt[t]);this.nLt.push(U.tr(U.BIt,this,g))}this.Zkt();for(const y of this.tLt)y.U_t();for(const w of s[5])this.iq.tM(w);const h=s[1];if(h){const S=this.iq.AX(h);S&&this.iq.PX(S)}for(const v of s[35])this.XDt.tM(v);for(const b of s[33])this.tQ.tM(b);for(const x of s[44])this.YDt.tM(x);this.YDt.clt()||(this.YDt.ir(),this.YDt=null);for(const M of s[49])this.xlt.tM(M);this.xlt.vlt()||(this.xlt.ir(),this.xlt=null);for(const G of s[6])this.wft.tM(G);this.wft.J0t(),this.Kkt(),U.Rh(this.gLt),this.Ak();let o="any",a=s[20];1===a?o="portrait":2===a&&(o="landscape"),this.Kc("runtime","set-target-orientation",{targetOrientation:o})}async qkt(t){const s=t.format;"image-sequence"===s?this.TLt=new self.C3ExportToImageSequence(this,t):"image-sequence-gif"===s?this.TLt=new self.C3ExportToGIF(this,t):"webm"===s?this.TLt=new self.C3ExportToWebMVideo(this,t):"mp4"===s&&(this.TLt=new self.C3ExportToMP4Video(this,t)),this.vLt="unlimited-frame",this.wLt.mOt("off"),this.zR=1,self.devicePixelRatio=1,await this.yD("runtime","set-exporting-to-video",{message:this.TLt.GetExportingMessageForPercent(0),duration:this.TLt.B6()})}tDt(){return this.jDt}KFt(){return null!==this.TLt}Qkt(){return this.TLt.B6()}t5t(){return this.TLt.GetFramerate()}s5t(){return this.TLt.sCt({width:this.wLt._L(),height:this.wLt.CL()})}i5t(){const t=this.RLt/this.t5t();return this.TLt.AddFrame(this.wLt.dOt(),t)}e5t(){this.TLt&&this.TLt.lit()}Pkt(t){this.TLt.OnOfflineAudioRenderCompleted(t)}n5t(){return this.TLt.zS()}aDt(){return this.MDt}Eg(){return this.Gg}bD(t){this.CDt.push(t)}M$(t){this.PDt=!!t}r5t(t){this.PDt&&this.EDt.push(t)}E$(){return this.EDt}F_t(){return this.eLt++}H_t(){return this.eLt}UPt(t){this.rLt.add(t)}VPt(t){this.rLt.delete(t)}ZFt(){return this.rLt}async zkt(t){this.wLt&&(await this.wLt.Go(t),this.wLt.zOt(this.jDt))}async Vkt(){const n=this.tH;if(!n.GD("audio/webm; codecs=opus")){let t=null,s=n.gV(),i=s+"opus.wasm.js",e=s+"opus.wasm.wasm";try{t=this.h5t()&&n.xV()?await n.GV(e):await n.wo(e)}catch(t){return void console.info("Failed to fetch Opus decoder WASM; assuming project has no Opus audio.",t)}this.o5t(t,"opus-decoder-wasm"),await this.a5t([i])}}async UD(t){const s=await this.l5t("OpusDecode",{arrayBuffer:t},[t]);return s}async sP(){this.FLt=!0,this.ULt=Date.now();let s=null,t=new Promise(t=>s=t);if(this.UDt){for(const n of this.tLt)n.Gz()||n.Q_t()||!n.WL()||n.Uxt();(async()=>{await this.tH.NV(),await t,this.Gg=!1,this.u5t()})()}else this.Gg=!1;this.tH.BV(),this.wX()&&V.RuntimeInit(h);for(const r of this.iq.JO())r.q$();this.KFt()&&await this.s5t();const i=this.iq.RX(),e=(await i.o$(null,this.Rv()),await i.y$(!0),this.tkt=performance.now(),s(),this.UDt||this.u5t(),await this.yD("runtime","before-start-ticking"));e.isSuspended&&!this.KFt()?(this.BLt++,this.NLt=!0):this.fZ()}u5t(){this.t4(U.W$.B$.N$.c5t,null,null),this.Kc("runtime","register-sw")}Kgt(t){t=Math.floor(t);const s=this.gLt;if(t<0||t>=s.length)throw new Error("invalid object reference");return s[t]}Ykt(){for(const t of self.f5t){const s=U.first(Object.keys(t));this.yLt.push(s)}}gdt(t){t=Math.floor(t);const s=this.yLt;if(t<0||t>=s.length)throw new Error("invalid prop reference");return s[t]}d5t(){return this.mDt}p5t(){return this.pDt}RF(){return this.gDt}XOt(){return this.fDt}m5t(){return this.dDt}qF(){return this.wft}hO(){return this.wft.hO()}hdt(){return this.wft.hdt()}QF(){return this.wft.QF()}odt(){return this.wft.odt()}Pvt(){return 0===this.hdt().kft()}ldt(){return this.wft.ldt()}RPt(){return this.qDt}Xyt(){return this.qDt.Xyt()}Q7(t){if((t=Math.floor(t))<0||t>=this.tLt.length)throw new RangeError("invalid index");return this.tLt[t]}g5t(t){return this.sLt.get(t.toLowerCase())||null}d8(t){return this.iLt.get(t)||null}Ent(t){const s=U.DL.tk(t);return s?s.nk():null}Mz(){return this.tLt}*y5t(){for(const t of this.tLt)t.Gz()||(yield*t.instances())}Rf(){return this.i_t}VF(){return this.Oq}yX(t){t.runtime=this.LL();const s=this.wX()&&!this.wft.Pk();s&&V.StartMeasuringScriptTime(),this.Oq.dispatchEvent(t),s&&V.AddScriptTime()}D$(t){return t.runtime=this.LL(),this.Oq.Bf(t)}FF(){return this.DDt}DF(){return this.LDt}w5t(t,s){if(this.DDt!==t||this.LDt!==s){this.DDt=t,this.LDt=s;const i=this.VO();i.WX(),i.jX()}}iJ(){return this.BDt}eJ(){return this.WDt}cOt(t,s){if(this.BDt!==t||this.WDt!==s){this.BDt=t,this.WDt=s;const i=this.VO();i.WX(),i.jX()}}QFt(t){this.KFt()||(this.zR=t)}EL(){return this.zR}KJ(){return this.kDt}QJ(){return this.NDt}wL(){return this.wLt}r9(){return this.wLt?this.wLt.r9():this.BDt}h9(){return this.wLt?this.wLt.h9():this.WDt}fN(){return this.wLt?this.wLt.fN():1}Oj(){return this.wLt?this.wLt.Oj():1}B9(){return this.wLt?this.wLt.B9():1}k9(){return this.wLt?this.wLt.k9():1}eN(){return this.wLt?this.wLt.eN():0}nN(){return this.wLt?this.wLt.nN():0}S5t(){return this.wLt?this.wLt.xL():0}v5t(){return this.wLt?this.wLt.GL():0}Aj(){return this.wLt?this.wLt.Aj():"off"}g9(t){return this.wLt?this.wLt.g9(t):null}k7(t){this.wLt&&this.wLt.k7(t)}p9(){return this.VDt}HFt(){return this.HDt}zFt(){return this.zDt}EO(){return this.wLt?this.wLt.EO():NaN}Lx(){return"nearest"!==this.LF()}RO(){return this.vLt}AO(t){this.vLt!==t&&(this.vLt=t,-1!==this.aFt||-1!==this.CLt)&&(this.b5t(),this.x5t())}LF(){return this.Gb}k_t(){return this.UDt}JOt(){return this.JDt}iDt(){this.JDt&&(this.JDt.cI(),this.JDt.ir(),this.JDt=null)}VO(){return this.iq}WO(){return this.iq.WO()}NQ(){return this.tQ}M5t(){return this.XDt}RCt(){return this.YDt}Vlt(){return this.xlt}vF(){return this.tH}RV(t){return this.tH.RV(t)}_k(t,s,i,e,n,r){if(r&&this.YDt){if(t instanceof U.dlt&&t.Gz()){const o=t.Dmt(),a=Math.floor(this.BO()*o.length);return this._k(o[a],s,i,e,n,r)}const h=this.YDt.flt(t,r);if(h){const l=this.lz(h,s,!1,i,e,!1,n,void 0,n);return this.YDt.plt(l,r),l}}return this.lz(t,s,!1,i,e,!1,n,void 0,n)}lz(t,s,i,e,n,r,h,o,a){let l=null,u=null;if(t instanceof U.dlt){if((u=t).Gz()){const v=u.Dmt(),b=Math.floor(this.BO()*v.length);u=v[b]}l=u.iz()}else l=t,u=this.Q7(l[1]);const c=u.uk().WL();if(this.Gg&&c&&!u.Q_t())return null;const f=s;c||(s=null);let d;d=i&&!r&&l&&!this.dLt.has(l[2])?l[2]:this.fLt++;const p=l?l[0]:null,m=U.tr(U.Instance,{runtime:this,pN:u,E4:s,tCt:p,nCt:l?l[3]:null,uid:d,tags:l?l[6]:null});this.dLt.set(d,m);let g=null,y=(c&&(g=m.aD(),void 0!==e&&void 0!==n&&(g.l2(e),g.f2(n)),u.IIt(!0)),s&&(a||s.cz(m,!0),s.HO().l$(u)),this.cLt++,!0);if(o){const x=o.mN();if(x.IN()&&u.IN()){const M=u.r$(),G=x.r$();M===G&&(y=!1)}}if(u.IN()&&!i&&!r&&y){const T=new Set;for(const _ of u.r$().H$())if(_!==u){const I=this.G5t(_,g,T);if(I){const C=this.lz(I,f,!1,g?g.a2():e,g?g.c2():n,!0,!1,void 0,a);m.z$(C)}else{const N=this.lz(_,f,!1,g?g.a2():e,g?g.c2():n,!0,!1,void 0,a);m.z$(N)}}for(const E of m.CN()){E.z$(m);for(const P of m.CN())E!==P&&E.z$(P)}}if(c&&!i&&h&&this.T5t(m,p,g,s,e,n,a),u.IN()&&!i&&!r&&h)for(const R of m.CN()){const A=R.aD();if(A){const B=R.uk(),F=R.mN().iz()[0];B.WL()?this.T5t(R,F,A,s,A.a2(),A.c2(),a):this.T5t(R,F,A,s,void 0,void 0,a)}}if(!r&&h){void 0===e&&(e=p[0]),void 0===n&&(n=p[1]);const O=g.aB(),W=e-g.a2()+O.a2(),j=n-g.c2()+O.c2();O.R4(W,j)}u.xIt();const L=l?U.Vh(l[5]):null,k=l?l[4].map(t=>U.Vh(t)):null,w=c&&p&&p[13];if(w&&m.uCt(),m.Z_t(L,k),w){const D=p[13];m.s6().rMt(D[2],D[0],D[1])}this.oLt.push(m),this.lLt=!0,this.wX()&&V.InstanceCreated(m);const S=this.vkt.instancecreate;return S.f6=m,this.i_t.dispatchEvent(S),m}C3t(t){const s=t[0],i=t[1],e=t[2],n=t[6];if(n)return n;const r=this.iq.FX(s),h=r.lD(i);return h.rz(e)}G5t(t,s,i){const e=s?.PCt()??[];for(const n of e){const r=this.C3t(n),h=!!n[4],o=this.Q7(r[1]);if(!i.has(r)&&t===o&&h)return i.add(r),r}}T5t(a,t,s,l,u,c,f){const i=s.XEt(),e=s.PCt();if(a.aD().YEt(i),e){void 0===u&&(u=t[0]),void 0===c&&(c=t[1]);const d=new Set,p=t[0],m=t[1];for(const g of e){let t=g[0],s=g[1],i=g[2],e=g[3],n=!!g[4],r=g[5],h=g[6],o;if(h)o=h;else{const v=this.iq.FX(t),b=v.lD(s);o=b.rz(i)}const y=this.Q7(o[1]),w=a.ACt(y),S=d.has(y);if(w&&!S&&n){const x=a.FCt(y),M=(x.aD().sCt(o[0]),u+o[0][0]-p),G=c+o[0][1]-m;x.aD().R4(M,G),x.aD().YEt(r),a.gB(x,{bB:!!(e>>0&1),MB:!!(e>>1&1),TB:!!(e>>2&1),IB:!!(e>>3&1),EB:!!(e>>4&1),NB:!!(e>>5&1),RB:!!(e>>6&1),OB:!!(e>>7&1),LB:!!(e>>8&1)}),d.add(y)}else{const T=u+o[0][0]-p,_=c+o[0][1]-m,I=this.lz(o,l,!1,T,_,!1,!0,a,f);I.aD().YEt(r),a.gB(I,{bB:!!(e>>0&1),MB:!!(e>>1&1),TB:!!(e>>2&1),IB:!!(e>>3&1),EB:!!(e>>4&1),NB:!!(e>>5&1),RB:!!(e>>6&1),OB:!!(e>>7&1),LB:!!(e>>8&1)})}}}}xN(i){if(!this.pLt.has(i)){let t=i.mN(),s=this.aLt.get(t);if(s){if(s.has(i))return;s.add(i)}else(s=new Set).add(i),this.aLt.set(t,s);if(this.wX()&&V.InstanceDestroyed(i),i.fCt(),this.lLt=!0,i.IN())for(const e of i.CN())this.xN(e);for(const n of i.children())n.BB()&&this.xN(n);if(!this.iq.Rk()&&!this.hkt){const r=this.qF();r.Ck(!0),i.VCt(),r.Ck(!1)}i.HCt(this.iq.Rk())}}Ak(){this.lLt&&(this.uLt=!0,this._5t(),this.I5t(),this.uLt=!1,this.lLt=!1,this.mD())}_5t(){for(const t of this.oLt){const s=t.mN();s.cz(t);for(const i of s.Mdt())i.cz(t),i.xIt()}U.Rh(this.oLt)}I5t(){this.i_t.Gf(!0);for(const[t,s]of this.aLt.entries())this.C5t(t,s),s.clear();this.aLt.clear(),this.i_t.Gf(!1)}C5t(t,s){for(const i of s){const e=this.vkt.instancedestroy,n=(e.f6=i,this.i_t.dispatchEvent(e),this.dLt.delete(i.EN()),this.KLt.delete(i),i.aD());n&&(n.QEt(),n.mz(),n.fCt()),this.pLt.add(i),this.cLt--}U.Wh(t.bk(),s),t.xIt(),this.mLt.add(t);for(const r of t.Mdt())U.Wh(r.bk(),s),r.xIt(),this.mLt.add(r);if(t.uk().WL()){const h=new Set([...s].map(t=>t.aD().lD()));for(const o of h)o.CJ(s)}}GIt(){return this.oLt}*O2t(t){for(const s of this.GIt())t.Gz()?s.mN().Rvt(t)&&(yield s):s.mN()===t&&(yield s)}Y_t(){return this.fLt++}K_t(t,s){this.dLt.set(t,s)}a8(t){this.kLt!==(t=!!t)&&(this.kLt=!!t,this.kLt)&&this.NLt&&(this.c8(!1),this.NLt=!1)}l8(){return this.kLt}g$(){this.i_t.dispatchEvent(U.tr(U.Event,"renderercontextlost")),this.c8(!0);for(const s of this.tLt)!s.Gz()&&s.tIt()&&s.p$();const t=this.WO();t&&t.g$(),U.ZGt.fH(),U.FV.fH()}async MOt(){await this.WO().o$(null,this.Rv()),this.i_t.dispatchEvent(U.tr(U.Event,"renderercontextrestored")),this.c8(!1),this.mD()}Ikt(t){if(this.kLt){const s=t.hidden;this.c8(s),(this.NLt=s)||this.mD()}}Rkt(t){this.oDt()&&this.MLt&&!U.ni.mi&&!t.data.parentHasFocus&&(this.c8(!0),this.GLt=!0)}Akt(){this.GLt&&(this.c8(!1),this.GLt=!1)}x5t(){const t=this._Lt;"vsync"===this.vLt?-1===this.aFt&&(this.aFt=self.requestAnimationFrame(t.ILt)):"unlimited-tick"===this.vLt?(-1===this.CLt&&(this.CLt=U.io(t.ELt)),-1===this.aFt&&(this.aFt=self.requestAnimationFrame(t.PLt))):-1===this.CLt&&(this.CLt=U.io(t.ILt))}b5t(){-1!==this.aFt&&(self.cancelAnimationFrame(this.aFt),this.aFt=-1),-1!==this.CLt&&(U.eo(this.CLt),this.CLt=-1)}dO(){return 0<this.BLt}c8(t){if(!this.KFt()){const s=this.dO(),i=(this.BLt+=t?1:-1,this.BLt<0&&(this.BLt=0),this.dO());if(!s&&i)console.log("[Construct] Suspending"),this.b5t(),this.i_t.dispatchEvent(U.tr(U.Event,"suspend")),this.t4(U.W$.B$.N$.E5t,null,null);else if(s&&!i){console.log("[Construct] Resuming");const e=performance.now();this.VLt=e,this.tkt=e,this.QLt=0,this.skt=0,this.ikt=0,this.ekt=0,this.rkt=0,this.nkt=0,this.i_t.dispatchEvent(U.tr(U.Event,"resume")),this.t4(U.W$.B$.N$.P5t,null,null),this.Xdt()||this.fZ(e)}}}Xj(t){this.xkt.tc(t)}Qj(t){this.Mkt.tc(t)}Zj(t){this.Gkt.tc(t)}Yj(t){this.xkt.u0(t)}t8(t){this.Mkt.u0(t)}Kj(t){this.Gkt.u0(t)}R5t(){const t=globalThis.zj;this.xkt.Q0(!0);for(const s of this.xkt)s instanceof t?s.l4():s.fZ();this.xkt.Q0(!1)}A5t(){const t=globalThis.zj;this.Mkt.Q0(!0);for(const s of this.Mkt)s instanceof t?s.i8():s.RGt();this.Mkt.Q0(!1)}F5t(){const t=globalThis.zj;this.Gkt.Q0(!0);for(const s of this.Gkt)s instanceof t?s.c4():s._Mt();this.Gkt.Q0(!1)}*O5t(){const s=globalThis.zj;this.xkt.Q0(!0);for(const i of this.xkt){let t;t=i instanceof s?i.l4():i.fZ(),U.Oo(t)&&(yield*t)}this.xkt.Q0(!1)}*D5t(){const s=globalThis.zj;this.Mkt.Q0(!0);for(const i of this.Mkt){let t;t=i instanceof s?i.i8():i.RGt(),U.Oo(t)&&(yield*t)}this.Mkt.Q0(!1)}*L5t(){const s=globalThis.zj;this.Gkt.Q0(!0);for(const i of this.Gkt){let t;t=i instanceof s?i.c4():i._Mt(),U.Oo(t)&&(yield*t)}this.Gkt.Q0(!1)}async fZ(a,t,s){this.DLt=!0;const l="background-wake"===s,u="background-wake"!==s&&"skip-render"!==s,c=this.VO(),f=this.wL();if(this.FLt&&(!this.dO()||t||l)){let t=performance.now(),s=(this.OLt=!0,this.k5t(a||0),this.ikt++,this.N5t(),this.B5t()),i=(this.C2t()&&await s,this.i_t.Wf(this.vkt.pretick)),e=(i instanceof Promise&&await i,this.W5t()),n=(this.C2t()&&await e,this.j5t()&&await this.U5t(),c.$O()&&await this.V5t(),this.H5t()),r=(this.C2t()&&await n,c.WO()),h=r.t$(),o=!1;if(-1!==h&&(r.s$(),f.Qq()!==h)){const d=this.wL().b$(h);this.RF()&&(o=!0,await d)}this.Kc("canvas","update-html-layer-dom-state",{layersDomState:r.Rz().filter(t=>t.E5()).map(t=>t.DJ())}),u&&this.dA(),o&&this.Kc("canvas","cleanup-html-layers"),this.KFt()&&(await this.i5t(),this.wO()>=this.Qkt())?this.n5t():(this.dO()||l||this.x5t(),this.RLt++,this.ALt++,this.OLt=!1,this.nkt+=performance.now()-t)}}async B5t(){const t=this.wft,s=this.wX();this.Ak(),t.Ck(!0),this.kdt(this.WO()),s&&V.StartMeasuringTime(),this.C2t()?await t.g1t():t.c1t(),s&&V.AddEventsTime(),this.Ndt(),t.Ck(!1),this.Ak(),t.Ck(!0)}async W5t(){const t=this.wX(),s=this.C2t(),i=this.i_t,e=this.vkt,n=this.bkt;t&&V.StartMeasuringTime(),s?await this.z5t(this.O5t()):this.R5t(),s?await this.z5t(this.D5t()):this.A5t(),t&&V.AddBehaviorTickTime(),t&&V.StartMeasuringTime(),s?await this.J5t(e.tick):i.dispatchEvent(e.tick),t&&V.AddPluginTickTime(),this.wft.Ck(!1),this.yX(n.tick)}async H5t(){const t=this.wft,s=this.i_t,i=this.vkt,e=this.wX(),n=this.C2t();e&&V.StartMeasuringTime(),n?await t.Bdt(this.iq):t.Ldt(this.iq),e&&V.AddEventsTime(),this.$Dt.xRt(),this.N5t(),this.LLt=!1,t.Ck(!0),e&&V.StartMeasuringTime(),n?await this.z5t(this.L5t()):this.F5t(),e&&V.AddBehaviorTickTime(),e&&V.StartMeasuringTime(),n?await this.J5t(i.tick2):s.dispatchEvent(i.tick2),e&&V.AddPluginTickTime(),t.Ck(!1),n&&await t.Ydt()}N5t(){if(0!==this.pLt.size){const t=this.i_t;t.Gf(!0);for(const s of this.mLt)s.r1t().qct(this.pLt);this.mLt.clear(),this.wft.w1t(this.pLt);for(const i of this.pLt)i.ir();this.pLt.clear(),t.Gf(!1)}}async V5t(){let t=this.VO(),s=0;for(;t.$O()&&s++<10;)await this.q5t(t.BX())}k5t(t){let s=0;if(this.KFt())s=1/this.t5t(),this.HLt=s,this.zLt=s;else if(0!==this.VLt){const i=Math.max(t-this.VLt,0);.5<(s=i/1e3)&&(s=0),this.HLt=s,this.zLt=U.lr(s,this.$Lt,this.qLt)}this.VLt=t,this.JLt=this.zLt*this.KIt,this.XLt.tc(this.JLt),this.YLt.tc(s*this.KIt),this.ZLt.tc(this.zLt);for(const[e,n]of this.KLt)n.tc(this.zLt*e.bO());this.wLt&&this.wLt.DOt(),1e3<=t-this.tkt&&(this.tkt+=1e3,1e3<=t-this.tkt&&(this.tkt=t),this.skt=this.QLt,this.QLt=0,this.ekt=this.ikt,this.ikt=0,this.rkt=Math.min(this.nkt/1e3,1),this.nkt=0,this.wLt&&this.wLt.OOt(),this.$Dt.wRt(),this.wX())&&V.Update1sPerfStats()}aCt(t,s){if(s){if(!this.KLt.has(t)){const i=U.tr(U.f0);i.y0(this.XLt),this.KLt.set(t,i)}}else this.KLt.delete(t)}lCt(t){const s=this.KLt.get(t);return s?s.Ks():this.wO()}async q5t(t){const s=this.i_t,i=this.VO(),e=i.WO();await e.X$(),e.m$(t,this.Rv()),e===t&&this.wft.K$(),this.$Dt.xRt(),this.N5t(),s.dispatchEvent(this.vkt.beforelayoutchange),U._f.Vf(!0),await t.o$(e,this.Rv()),U._f.Vf(!1),await t.y$(!1),s.dispatchEvent(this.vkt.layoutchange),this.mD(),this.LLt=!0,this.Ak(),this.e5t()}mD(){this.xLt=!0}GOt(){return this.wLt?this.wLt.GOt():null}TOt(){return this.wLt?this.wLt.TOt():null}Rv(){return this.wLt?this.wLt.Rv():null}dA(){const i=this.wLt;if(i&&!i.xOt()){const e=this.Rv(),t=e.MP(),n=t&&e.QS(),r=t&&e.gw();if(n&&e.lP(),this.xLt||this.KFt()){const h=this.iq.WO(),o=(this.QLt++,e.sP(),this.wX());o&&V.StartMeasuringTime(),this.xLt=!1;let t=null,s=(n&&(t=i.NOt().qC(),e.xP(t)),null);r&&(s=e.StartFrameTiming(2*(1+h.qq())),e.StartMeasuringRenderPassTime(0,1)),this.fJ()&&"low"===i.m9()?e.pE(i.r9(),i.h9()):e.mE(),this.$5t(this.Rv(),h),t&&e.GP(t),r&&(e.StopMeasuringRenderPassTime(),this.wLt.BOt(s)),e.zS(),o&&(V.AddDrawCallsTime(),V.UpdateInspectHighlight()),i&&i.jOt()}else e.$S()}}lX(t){return"low"===this.wL().m9()||t.QS()&&(this.p9()||this.fJ())}$5t(s,i){s.Tw(),s.AE(),s.GE(1,1,1,1),s.dP(null),s.CE(null),s.eP(this.fJ()),this.lX(s)&&i.hX(s);const e=i.Qq();for(let t=1;t<e;++t)i.dX(s,t),s.gw()&&s.Restart();this.lX(s)||i.hX(s),i.fX(s)}t4(t,s,i){if(!this.FLt)return!1;let e=!this.OLt&&!this.wft.t1t(),n=0;e&&(n=performance.now());const r=this.wX(),h=(r&&this.T8(!1),this.wft.Vdt(this.iq,t,s,i));if(e){const o=performance.now()-n;this.nkt+=o,r&&V.AddTriggersTime(o)}return r&&this.T8(!0),h}pMt(t,s,i){if(!this.C2t())return this.t4(t,s,i);if(this.Xdt())throw new Error("called DebugTrigger() while stopped on breakpoint");if(this.OLt||this.wft.t1t())return this.wft.Jdt(this.iq,t,s,i);throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead")}async i4(t,s,i){if(!this.C2t())return this.t4(t,s,i);if(!this.FLt)return!1;if(this.Xdt())return this.wft.qdt(t,s,i);if(!this.WO())return this.wft.Hdt(t,s,i);let e=performance.now(),n=this.wft.Jdt(this.iq,t,s,i),r=n.next();for(;!r.done;)await this.jdt(r.value),r=n.next();return this.dO()||this.wft.t1t()||(await this.wft.Ydt(),this.DLt&&!this.OLt&&this.x5t()),this.nkt+=performance.now()-e,r.value}mMt(t,s,i){const e=this.wX(),n=(e&&this.T8(!1),this.wft.Zdt(this.iq,t,s,i));return e&&this.T8(!0),n}gMt(t,s,i){return this.wft.Kdt(this.iq,t,s,i)}yMt(t){return this.WLt.tc(t)}kdt(t){this.hLt.push(t)}Ndt(){if(!this.hLt.length)throw new Error("layout stack empty");this.hLt.pop()}hD(){return this.hLt.length?this.hLt.at(-1):this.WO()}mO(t){return t&&-1!==t.bO()?this.zLt*t.bO():this.JLt}uZ(){return this.JLt}cZ(){return this.zLt}yO(){return this.HLt}bO(){return this.KIt}xO(t){(isNaN(t)||t<0)&&(t=0),this.KIt=t}DO(t){this.$Lt=Math.max(t,0)}OO(){return this.$Lt}NO(t){this.qLt=Math.max(t,0)}kO(){return this.qLt}MO(){return this.skt}TO(){return this.ekt}IO(){return this.rkt}X5t(){return this.ULt}wO(){return this.XLt.Ks()}Y5t(){return this.YLt.Ks()}vO(){return this.ZLt.Ks()}ott(){return this.RLt}Z5t(){return this.ALt}K5t(){return this.cLt}IF(){return this.RDt}EF(){return this.ADt}Q5t(){return this.FDt}tNt(){return this.ODt}eD(t){if(this.hkt)throw new Error("cannot call while loading state - wait until afterload event");return this.dLt.get(t)||null}U$(){this.dLt.clear();for(const t of this.tLt)if(!t.Gz())for(const s of t.bk())this.dLt.set(s.EN(),s)}oDt(){return"preview"===this.wDt}wX(){return this.GDt}pL(){return this.wDt}mL(){return"nwjs"===this.pL()||this.SDt}lDt(){return"cordova"===this.wDt}sNt(){return"Android"===U.ni.ri&&("cordova"===this.wDt||"playable-ad-single-file"===this.wDt||"playable-ad-zip"===this.wDt||"instant-games"===this.wDt)}h5t(){return this.VU}iNt(){return this.vDt}gL(){return this.bDt}eNt(){return this.xDt}MF(){return this.$Dt}XGt(){return this.qDt.XGt()}YGt(){return this.qDt.YGt()}fJ(){return this.SLt}nNt(){return this.Rv().rw(this.eJ())}Qy(t){return this.Rv().Qy(t||this.eJ())}rNt(){return this.LLt}hNt(t){this.bLt!==(t=!!t)&&(this.bLt=t,this.VO().jX(),this.mD())}NF(){return this.bLt}oNt(t){if(!this.QDt.has(t)){const i=()=>this.aNt(t);this.QDt.set(t,i),t.Rf().addEventListener("animationframeimagechange",i)}const s=this.Sg.dg(t);return s.Cg()||s.Pg().then(()=>this.mD()),s}aNt(t){this.Sg.yg(t)}ZDt(t){const s=[];for(const i of t.fIt())for(const e of i.A6()){const n=e.N6();s.push({source:e,width:n.$p(),height:n.hm(),tag:e.nW()})}return{_g:s}}async KDt(t){const s=U.tr(U.sd),i=[],n=new Map;for(const h of t.fIt())for(const o of h.A6()){const a=o.N6().yTt();n.has(a)||(n.set(a,null),i.push(s.tc(async()=>{const t=await a.gH();n.set(a,t)})))}await Promise.all(i);const e=[];for(const l of t.fIt())for(const u of l.A6())e.push(s.tc(async()=>{const t=u.N6(),s=n.get(t.yTt()),i=await t.wTt(s),e=await createImageBitmap(i);return{Ag:e}}));const r=await Promise.all(e);for(const c of n.values())c instanceof ImageBitmap&&c.close&&c.close();return{_g:r}}lNt(t){this.okt=t,this.akt=!1}uNt(){this.okt="",this.akt=!0}cNt(t){this.lkt=t}Sbt(t){this.g4=t}fNt(){return this.ukt}j5t(){return!!(this.okt||this.akt||this.lkt||null!==this.g4)}async U5t(){if(this.okt&&(this.Ak(),await this.dNt(this.okt),this.pNt()),this.lkt&&(await this.mNt(this.lkt),this.pNt(),this.wX())&&V.StepIfPausedInDebugger(),this.akt){const t=await this.gNt();this.ukt=t,await this.i4(U.W$.B$.N$.yNt,null),this.ukt="",this.pNt()}if(null!==this.g4){this.Ak();try{await this.wNt(this.g4),this.ukt=this.g4,await this.i4(U.W$.B$.N$.SNt,null),this.ukt=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.i4(U.W$.B$.N$.vNt,null)}this.pNt()}}pNt(){this.okt="",this.akt=!1,this.lkt="",this.g4=null}RL(){return this.ckt||(this.ckt=localforage.Ai({name:"c3-localstorage-"+this.Q5t(),description:this.IF()})),this.ckt}bNt(){return this.fkt||(this.fkt=localforage.Ai({name:"c3-savegames-"+this.Q5t(),description:this.IF()})),this.fkt}async dNt(t){const s=await this.gNt();try{await this.bNt().setItem(t,s),console.log("[Construct] Saved state to storage ("+s.length+" chars)"),this.ukt=s,await this.i4(U.W$.B$.N$.yNt,null),this.ukt=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.i4(U.W$.B$.N$.xNt,null)}}async mNt(t){try{const s=await this.bNt().getItem(t);if(!s)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+s.length+" chars)"),await this.wNt(s),this.ukt=s,await this.i4(U.W$.B$.N$.SNt,null),this.ukt=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.i4(U.W$.B$.N$.vNt,null)}}async gNt(){const t={c3save:!0,version:1,rt:{time:this.wO(),timeRaw:this.Y5t(),walltime:this.vO(),timescale:this.bO(),tickcount:this.ott(),next_uid:this.fLt,running_layout:this.WO().Az(),start_time_offset:Date.now()-this.ULt},types:{},layouts:{},events:this.wft.Y9(),timelines:this.tQ.Y9(),user_script_data:null};for(const i of this.tLt)i.Gz()||i.OIt()||(t.types[i.Az().toString()]=i.Y9());for(const e of this.iq.JO())t.layouts[e.Az().toString()]=e.Y9();const s=this.MNt("save");return s.saveData=null,await this.D$(s),t.user_script_data=s.saveData,JSON.stringify(t)}P$(){return this.hkt}async wNt(t){const s=this.VO(),i=JSON.parse(t);if(i.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!i.c3save)throw new Error("not valid C3 save data");if(1<i.version)throw new Error("C3 save data from future version");this.vbt(),this.i_t.dispatchEvent(U.tr(U.Event,"beforeload"));for(const a of this.y5t()){const l=a.mN();l.OIt()||a.pY()}let e=i.rt,n=(this.XLt.Set(e.time),e.hasOwnProperty("timeRaw")&&this.YLt.Set(e.timeRaw),this.ZLt.Set(e.walltime),this.KIt=e.timescale,this.RLt=e.tickcount,this.ULt=Date.now()-e.start_time_offset,e.running_layout),r=!(this.hkt=!0);if(n!==this.WO().Az()){const u=s.FX(n);if(!u)return;await this.q5t(u),r=!0}for(const[c,f]of Object.entries(i.layouts)){const d=parseInt(c,10),p=s.FX(d);p&&p.Z9(f)}const h=new Set;for(const[m,g]of Object.entries(i.types)){const y=parseInt(m,10),w=this.d8(y);!w||w.Gz()||w.OIt()||w.Z9(g,h)}for(const S of this.iq.JO())for(const v of S.Zk())v.K9();if(this.Ak(),this.U$(),this.hkt=!1,r){for(const b of this.y5t())b.R$();for(const[x,M]of Object.entries(i.types)){const G=parseInt(x,10),T=this.d8(G);!T||T.Gz()||T.OIt()||T.kIt(M)}}this.fLt=e.next_uid,this.wft.Z9(i.events);for(const _ of this.tLt)if(!_.Gz()&&_.IN())for(const I of _.bk()){const C=I.V$();for(const E of _.r$().H$())if(E!==_){const P=E.bk();if(C<0||C>=P.length)throw new Error("missing sibling instance");I.z$(P[C])}}this.tQ.Z9(i.timelines),s.WX(),s.jX();for(const R of h)R.UCt();this.bbt(),this.i_t.dispatchEvent(U.tr(U.Event,"afterload")),this.yX(this.MNt("afterload"));for(const[A,F]of Object.entries(i.types)){const O=parseInt(A,10),D=this.d8(O);D&&D.LIt()}const o=this.MNt("load");o.saveData=i.user_script_data,await this.D$(o),this.mD()}GNt(t,s){return t.aD().HEt()-s.aD().HEt()}PPt(t,s){t.aD()&&!this.Lkt.has(t)&&(this.Lkt.set(t,s),this.kkt.push(t))}vbt(){this.Lkt=new WeakMap,U.Rh(this.kkt)}bbt(t="full",s=null){this.kkt.sort(this.GNt);for(const i of this.kkt)i.gY(this.Lkt.get(i),t,s);for(const e of this.kkt)e.qCt(this.Lkt.get(e),t,s);this.vbt()}async a5t(t){const s=await Promise.all(t.map(async t=>{const s=this.lDt()&&this.tH.xV();if(s||"playable-ad-single-file"===this.pL()){const i=await this.tH.yo(t);return URL.createObjectURL(i)}return new URL(t,location.href).toString()}));this.Tkt.TNt(s)}_Nt(t,s){this.Tkt.INt(t,s)}o5t(t,s){this.Tkt.CNt(t,s)}l5t(t,s,i,e){return this.Tkt.l5t(t,s,i,null,null,e)}ENt(t,s,i,e){return this.Tkt.ENt(t,s,i,e)}PNt(){return this.Tkt.RNt()}sD(t,s){this.Kc("runtime","invoke-download",{url:t,filename:s})}async YOt(t,s,i,e,n,r){if(e=e||s,n=n||i,this.RF()){const h=await this.yD("runtime","raster-svg-image",{blob:t,imageWidth:s,imageHeight:i,surfaceWidth:e,surfaceHeight:n,imageBitmapOpts:r});return h.imageBitmap}{const o=await self.C3_RasterSvgImageBlob(t,s,i,e,n);return r?self.createImageBitmap(o,r):o}}async ANt(t){return this.RF()?this.yD("runtime","get-svg-image-size",{blob:t}):self.C3_GetSvgImageSize(t)}FNt(){this.gkt||(this.gkt=!0,this.Kc("runtime","enable-device-orientation"))}ONt(){this.ykt||(this.ykt=!0,this.Kc("runtime","enable-device-motion"))}BO(){return this.jLt()}DNt(t){this.jLt=t}Ekt(){const t=this.Rv();return{fps:this.MO(),tps:this.TO(),cpu:this.IO(),gpu:this.EO(),layout:this.WO()?this.WO().jc():"",renderer:t.QS()?t.AP():t.GetAdapterInfoString()}}Xdt(){return!!this.wX()&&V.Xdt()}jdt(t){return this.C2t()?V.jdt(t):Promise.resolve()}Mgt(){return!!this.C2t()&&V.BreakNext()}LNt(t){this.TDt=!!t,this.kNt()}NNt(){return this.TDt}C2t(){return this._Dt}T8(t){t?this.IDt--:this.IDt++,this.kNt()}kNt(){this._Dt=this.wX()&&this.TDt&&0===this.IDt}jpt(){return this.wX()&&V.jpt()}u9(){return this.wX()&&this.Rv().MP()&&V.u9()}async z5t(t){if(t)for(const s of t)await this.jdt(s)}J5t(t){return this.z5t(this.i_t.Uf(t))}V0t(t){return this.wft.V0t(t.name,t.params)}SD(t){if(this.RF())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}LL(){return this.Fkt}MNt(t){const s=U.tr(U.Event,t,!1);return s.runtime=this.Fkt,s}$kt(){this.Fkt=new self.yF(this),this.bkt={tick:this.MNt("tick")}}Zkt(){const t={};for(const s of this.tLt)t[s.gdt()]={value:s.ek(),enumerable:!0,writable:!1};this.Fkt.HF(t)}Kkt(){const t={};for(const s of this.qF().Gdt())t[s.gdt()]=s.ydt();this.Fkt.zF(t)}YO(){return this.Dkt}ck(t,s){this.Okt.set(t,s)}t5(t){return this.Okt.get(t)}hL(t){if(!(t instanceof self.ak))throw new TypeError("expected IObjectClass");const s=this.t5(t);if(s&&s instanceof U.dlt)return s;throw new Error("invalid IObjectClass")}wk(t){if(!(t instanceof self.dN))throw new TypeError("expected IInstance");const s=this.t5(t);if(s&&s instanceof U.Instance)return s;throw new Error("invalid IInstance")}oD(t){if(!(t instanceof self.YB))throw new TypeError("expected IWorldInstance");const s=this.t5(t);if(s&&s instanceof U.Instance)return s;throw new Error("invalid IInstance")}},self.C3_CreateRuntime=U.uDt.tM,self.C3_InitRuntime=(t,s)=>t.sCt(s)}{const Oa=self.Os;Oa._kt=class extends Oa.Kn{constructor(t,s){super(),this.Xc=t,this.BNt=new Map,this.WNt=0,this.jNt=s.inputPort,s.outputPort.onmessage=t=>this.UNt(t),this.VNt=s.maxNumWorkers,this.HNt=1,this.zNt=!1,this.JNt=!1}async sCt(){}RNt(){return this.VNt}TNt(t){this.jNt.postMessage({type:"_import_scripts",scripts:t})}INt(t,s){this.jNt.postMessage({type:"_send_blob",blob:t,id:s})}CNt(t,s){this.jNt.postMessage({type:"_send_buffer",buffer:t,id:s},[t])}l5t(t,s,i,e,n,r){if(i=i||[],"number"==typeof r&&(r=Math.floor(r))<=0)throw new Error("invalid maxWorkerNum");const h=this.WNt++,o={type:t,isBroadcast:!1,maxWorkerNum:r,jobId:h,params:s,transferables:i},a=new Promise((t,s)=>{this.BNt.set(h,{resolve:t,progress:e,reject:s,qNt:!1,maxWorkerNum:r})});return n&&n.a0(()=>this.$Nt(h)),this.jNt.postMessage(o,i),this.XNt(),a}ENt(t,s,i,e){if(i=i||[],"number"==typeof e&&(e=Math.floor(e))<=0)throw new Error("invalid maxWorkerNum");const n=this.WNt++,r={type:t,isBroadcast:!0,maxWorkerNum:e,jobId:n,params:s,transferables:i};this.jNt.postMessage(r,i)}$Nt(t){const s=this.BNt.get(t);s&&(s.qNt=!0,s.resolve=null,s.progress=null,s.reject=null,this.jNt.postMessage({type:"_cancel",jobId:t}))}UNt(t){const s=t.data,i=s.type,e=s.jobId;switch(i){case"result":this.YNt(e,s.result);break;case"progress":this.ZNt(e,s.progress);break;case"error":this.KNt(e,s.error);break;case"ready":this.QNt();break;default:throw new Error(`unknown message from worker '${i}'`)}}YNt(t,s){const i=this.BNt.get(t);if(!i)throw new Error("invalid job ID");i.qNt||i.resolve(s),this.BNt.delete(t)}ZNt(t,s){const i=this.BNt.get(t);if(!i)throw new Error("invalid job ID");!i.qNt&&i.progress&&i.progress(s)}KNt(t,s){const i=this.BNt.get(t);if(!i)throw new Error("invalid job ID");i.qNt||i.reject(s),this.BNt.delete(t)}QNt(){this.zNt&&(this.zNt=!1,this.HNt++,this.HNt<this.VNt?this.XNt():this.jNt.postMessage({type:"_no_more_workers"}))}t4t(){let t=0,s=[...this.BNt.values()].sort((t,s)=>{const i=t.maxWorkerNum||1/0,e=s.maxWorkerNum||1/0;return i-e});for(const i of s){const e=i.maxWorkerNum||1/0;t<e&&t++}return t}async XNt(){if(!(this.HNt>=this.VNt||this.zNt||this.JNt||this.t4t()<=this.HNt))try{this.zNt=!0;const t=await this.Xc.yD("runtime","create-job-worker");t.outputPort.onmessage=t=>this.UNt(t)}catch(t){this.JNt=!0,this.zNt=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.HNt} so far)`,t)}}}}self.C3_Shaders={},self.C3_Shaders.skymen_BetterCRT={YFt:"#ifdef GL_FRAGMENT_PRECISION_HIGH\n#define highmedp highp\n#else\n#define highmedp mediump\n#endif\nprecision lowp float;\nvarying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform mediump vec2 srcStart;\nuniform mediump vec2 srcEnd;\nuniform mediump vec2 srcOriginStart;\nuniform mediump vec2 srcOriginEnd;\nuniform mediump vec2 layoutStart;\nuniform mediump vec2 layoutEnd;\nuniform lowp sampler2D samplerBack;\nuniform lowp sampler2D samplerDepth;\nuniform mediump vec2 destStart;\nuniform mediump vec2 destEnd;\nuniform mediump vec2 pixelSize;\nuniform mediump float layerScale;\nuniform mediump float layerAngle;\nuniform mediump float devicePixelRatio;\nuniform mediump float zNear;\nuniform mediump float zFar;\nuniform highmedp float seconds;\nuniform lowp float resolutionX;\nuniform lowp float resolutionY;\nuniform lowp float distortIntensity;\nuniform lowp float scanlinesIntensity;\nuniform lowp vec3 colorAdjustment;\nuniform lowp float redOffsetX;\nuniform lowp float redOffsetY;\nuniform lowp float greenOffsetX;\nuniform lowp float greenOffsetY;\nuniform lowp float blueOffsetX;\nuniform lowp float blueOffsetY;\nuniform lowp float barrelDistortionStrength;\nuniform lowp float barrelDistortionZoom;\nuniform lowp float distortionStrength;\nuniform lowp float distortionSpeed;\nuniform lowp float distortionFrequency;\nuniform lowp float bloomIntensity;\nvec2 curve(vec2 uv)\n{\nuv = (uv - 0.5) * (2.0 + barrelDistortionZoom);\nfloat uva = atan(uv.x, uv.y);\nfloat uvd = sqrt(dot(uv, uv));\nfloat k = barrelDistortionStrength;\nuvd = uvd*(1.0 + k*uvd*uvd);\nuv = vec2(sin(uva), cos(uva))*uvd;\nuv = (uv / 2.0) + 0.5;\nreturn uv;\n}\nvoid main(void)\n{\nfloat iResolutionX = resolutionX;\nfloat iResolutionY = resolutionY;\nfloat iTime = seconds;\nvec2 redOffset = vec2(redOffsetX, redOffsetY);\nvec2 greenOffset = vec2(greenOffsetX, greenOffsetY);\nvec2 blueOffset = vec2(blueOffsetX, blueOffsetY);\nvec2 uv = curve(vTex);\nvec3 col;\nfloat x = distortionStrength\n* sin(distortionSpeed * 0.3 * iTime + uv.y * 21.0 * distortionFrequency)\n* sin(distortionSpeed * 0.7 * iTime + uv.y * 29.0 * distortionFrequency)\n* sin(0.3 + distortionSpeed * 0.33 * iTime + uv.y * 31.0 * distortionFrequency)\n* 0.0017;\ncol.r = texture2D(samplerFront, vec2(x + uv.x + redOffset.x, uv.y + redOffset.y)).x + 0.05;\ncol.g = texture2D(samplerFront, vec2(x + uv.x + greenOffset.x, uv.y + greenOffset.y)).y + 0.05;\ncol.b = texture2D(samplerFront, vec2(x + uv.x + blueOffset.x, uv.y + blueOffset.y)).z + 0.05;\ncol.r += bloomIntensity * 0.08 * texture2D(samplerFront, 0.75 * vec2(x + 0.025, -0.027) + vec2(x + uv.x + redOffset.x, uv.y + redOffset.y)).x;\ncol.g += bloomIntensity * 0.05 * texture2D(samplerFront, 0.75 * vec2(x - 0.022, -0.02)  + vec2(x + uv.x + greenOffset.x, uv.y + greenOffset.y)).y;\ncol.b += bloomIntensity * 0.08 * texture2D(samplerFront, 0.75 * vec2(x - 0.02, -0.018)  + vec2(x + uv.x + blueOffset.x, uv.y + blueOffset.y)).z;\ncol = clamp(col * 0.6 + 0.4 * col * col * 1.0, 0.0, 1.0);\nfloat vig = (0.0 + 1.0 * 16.0 * uv.x * uv.y * (1.0 - uv.x) * (1.0 - uv.y));\ncol *= vec3(pow(vig, 0.3));\ncol *= colorAdjustment;\ncol *= 2.8;\nfloat scans = clamp(0.35 + 0.35 * sin(3.5 * iTime + uv.y * iResolutionY * 1.5), 0.0, 1.0);\nfloat s = pow(scans, scanlinesIntensity);\ncol = col * vec3(0.4 + 0.7 * s);\ncol *= 1.0 + 0.01 * sin(110.0 * iTime);\nif (uv.x < 0.0 || uv.x > 1.0) col *= 0.0;\nif (uv.y < 0.0 || uv.y > 1.0) col *= 0.0;\ncol *= 1.0 - distortIntensity * vec3(clamp((mod(gl_FragCoord.x, 2.0) - 1.0) * 2.0, 0.0, 1.0));\ngl_FragColor = vec4(col, 1.0);\n}",XFt:"#version 300 es\nin mediump vec2 vTex;\nout lowp vec4 outColor;\n#ifdef GL_FRAGMENT_PRECISION_HIGH\n#define highmedp highp\n#else\n#define highmedp mediump\n#endif\nprecision lowp float;\nuniform lowp sampler2D samplerFront;\nuniform mediump vec2 srcStart;\nuniform mediump vec2 srcEnd;\nuniform mediump vec2 srcOriginStart;\nuniform mediump vec2 srcOriginEnd;\nuniform mediump vec2 layoutStart;\nuniform mediump vec2 layoutEnd;\nuniform lowp sampler2D samplerBack;\nuniform lowp sampler2D samplerDepth;\nuniform mediump vec2 destStart;\nuniform mediump vec2 destEnd;\nuniform mediump vec2 pixelSize;\nuniform mediump float layerScale;\nuniform mediump float layerAngle;\nuniform mediump float devicePixelRatio;\nuniform mediump float zNear;\nuniform mediump float zFar;\nuniform highmedp float seconds;\nuniform lowp float resolutionX;\nuniform lowp float resolutionY;\nuniform lowp float distortIntensity;\nuniform lowp float scanlinesIntensity;\nuniform lowp vec3 colorAdjustment;\nuniform lowp float redOffsetX;\nuniform lowp float redOffsetY;\nuniform lowp float greenOffsetX;\nuniform lowp float greenOffsetY;\nuniform lowp float blueOffsetX;\nuniform lowp float blueOffsetY;\nuniform lowp float barrelDistortionStrength;\nuniform lowp float barrelDistortionZoom;\nuniform lowp float distortionStrength;\nuniform lowp float distortionSpeed;\nuniform lowp float distortionFrequency;\nuniform lowp float bloomIntensity;\nvec2 curve(vec2 uv)\n{\nuv = (uv - 0.5) * (2.0 + barrelDistortionZoom);\nfloat uva = atan(uv.x, uv.y);\nfloat uvd = sqrt(dot(uv, uv));\nfloat k = barrelDistortionStrength;\nuvd = uvd*(1.0 + k*uvd*uvd);\nuv = vec2(sin(uva), cos(uva))*uvd;\nuv = (uv / 2.0) + 0.5;\nreturn uv;\n}\nvoid main(void)\n{\nfloat iResolutionX = resolutionX;\nfloat iResolutionY = resolutionY;\nfloat iTime = seconds;\nvec2 redOffset = vec2(redOffsetX, redOffsetY);\nvec2 greenOffset = vec2(greenOffsetX, greenOffsetY);\nvec2 blueOffset = vec2(blueOffsetX, blueOffsetY);\nvec2 uv = curve(vTex);\nvec3 col;\nfloat x = distortionStrength * sin(distortionSpeed * 0.3 * iTime + uv.y * 21.0 * distortionFrequency) * sin(distortionSpeed * 0.7 * iTime + uv.y * 29.0 * distortionFrequency) * sin(0.3 + distortionSpeed * 0.33 * iTime + uv.y * 31.0 * distortionFrequency) * 0.0017;\ncol.r = texture(samplerFront, vec2(x + uv.x + redOffset.x, uv.y + redOffset.y)).x + 0.05;\ncol.g = texture(samplerFront, vec2(x + uv.x + greenOffset.x, uv.y + greenOffset.y)).y + 0.05;\ncol.b = texture(samplerFront, vec2(x + uv.x + blueOffset.x, uv.y + blueOffset.y)).z + 0.05;\ncol.r += bloomIntensity * 0.08 * texture(samplerFront, 0.75 * vec2(x + 0.025, -0.027) + vec2(x + uv.x + redOffset.x, uv.y + redOffset.y)).x;\ncol.g += bloomIntensity * 0.05 * texture(samplerFront, 0.75 * vec2(x - 0.022, -0.02) + vec2(x + uv.x + greenOffset.x, uv.y + greenOffset.y)).y;\ncol.b += bloomIntensity * 0.08 * texture(samplerFront, 0.75 * vec2(x - 0.02, -0.018) + vec2(x + uv.x + blueOffset.x, uv.y + blueOffset.y)).z;\ncol = clamp(col * 0.6 + 0.4 * col * col * 1.0, 0.0, 1.0);\nfloat vig = (0.0 + 1.0 * 16.0 * uv.x * uv.y * (1.0 - uv.x) * (1.0 - uv.y));\ncol *= vec3(pow(vig, 0.3));\ncol *= colorAdjustment;\ncol *= 2.8;\nfloat scans = clamp(0.35 + 0.35 * sin(3.5 * iTime + uv.y * iResolutionY * 1.5), 0.0, 1.0);\nfloat s = pow(scans, scanlinesIntensity);\ncol = col * vec3(0.4 + 0.7 * s);\ncol *= 1.0 + 0.01 * sin(110.0 * iTime);\nif (uv.x < 0.0 || uv.x > 1.0) col *= 0.0;\nif (uv.y < 0.0 || uv.y > 1.0) col *= 0.0;\ncol *= 1.0 - distortIntensity * vec3(clamp((mod(gl_FragCoord.x, 2.0) - 1.0) * 2.0, 0.0, 1.0));\noutColor = vec4(col, 1.0);\n}",qFt:"%%FRAGMENTINPUT_STRUCT%%\n/* input struct contains the following fields:\nfragUV : vec2<f32>\nfragPos : vec4<f32>\nfn c3_getBackUV(fragPos : vec2<f32>, texBack : texture_2d<f32>) -> vec2<f32>\nfn c3_getDepthUV(fragPos : vec2<f32>, texDepth : texture_depth_2d) -> vec2<f32>\n*/\n%%FRAGMENTOUTPUT_STRUCT%%\n%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\n/* Uniforms are:\nuAngle: angle of the shine, 0.0-360.0\nuIntensity: how hard to mix the shine with the image, 0.0-1.0\nuColor: the color of the shine, vec4\nuSize: the size of the shine in percent based on diameter, 0.0-1.0\nuProgress: the progress of the shine, 0.0-1.0\nuHardness: how hard the shine is, 0 is smooth, 1 is a hard edge , 0.0-1.0\n*/\nstruct ShaderParams {\nresolutionX : f32,\nresolutionY : f32,\ndistortIntensity : f32,\nscanlinesIntensity : f32,\ncolorAdjustment : vec3<f32>,\nredOffsetX : f32,\nredOffsetY : f32,\ngreenOffsetX : f32,\ngreenOffsetY : f32,\nblueOffsetX : f32,\nblueOffsetY : f32,\nbarrelDistortionStrength : f32,\nbarrelDistortionZoom : f32,\ndistortionStrength : f32,\ndistortionSpeed : f32,\ndistortionFrequency : f32,\nbloomIntensity : f32\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n/* gets replaced with:\nstruct ShaderParams {\nfloatParam : f32,\ncolorParam : vec3<f32>,\n};\n%//%SHADERPARAMS_BINDING%//% var<uniform> shaderParams : ShaderParams;\n*/\n%%C3PARAMS_STRUCT%%\n/* c3Params struct contains the following fields:\nsrcStart : vec2<f32>,\nsrcEnd : vec2<f32>,\nsrcOriginStart : vec2<f32>,\nsrcOriginEnd : vec2<f32>,\nlayoutStart : vec2<f32>,\nlayoutEnd : vec2<f32>,\ndestStart : vec2<f32>,\ndestEnd : vec2<f32>,\ndevicePixelRatio : f32,\nlayerScale : f32,\nlayerAngle : f32,\nseconds : f32,\nzNear : f32,\nzFar : f32,\nisSrcTexRotated : u32\nfn c3_srcToNorm(p : vec2<f32>) -> vec2<f32>\nfn c3_normToSrc(p : vec2<f32>) -> vec2<f32>\nfn c3_srcOriginToNorm(p : vec2<f32>) -> vec2<f32>\nfn c3_normToSrcOrigin(p : vec2<f32>) -> vec2<f32>\nfn c3_clampToSrc(p : vec2<f32>) -> vec2<f32>\nfn c3_clampToSrcOrigin(p : vec2<f32>) -> vec2<f32>\nfn c3_getLayoutPos(p : vec2<f32>) -> vec2<f32>\nfn c3_srcToDest(p : vec2<f32>) -> vec2<f32>\nfn c3_clampToDest(p : vec2<f32>) -> vec2<f32>\nfn c3_linearizeDepth(depthSample : f32) -> f32\n*/\n/*\nfn c3_premultiply(c : vec4<f32>) -> vec4<f32>\nfn c3_unpremultiply(c : vec4<f32>) -> vec4<f32>\nfn c3_grayscale(rgb : vec3<f32>) -> f32\nfn c3_getPixelSize(t : texture_2d<f32>) -> vec2<f32>\nfn c3_RGBtoHSL(color : vec3<f32>) -> vec3<f32>\nfn c3_HSLtoRGB(hsl : vec3<f32>) -> vec3<f32>\n*/\nfn curve(uv: vec2<f32>) -> vec2<f32> {\nvar uv1 = (uv - 0.5) * (2.0 + shaderParams.barrelDistortionZoom);\nlet uva = atan2(uv1.x, uv1.y);\nlet uvd = length(uv1);\nlet k = shaderParams.barrelDistortionStrength;\nuv1 = vec2(sin(uva), cos(uva)) * uvd * (1.0 + k * uvd * uvd);\nreturn (uv1 / 2.0) + 0.5;\n}\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput {\nvar output : FragmentOutput;\nlet iTime = c3Params.seconds;\nlet redOffset = vec2<f32>(shaderParams.redOffsetX, shaderParams.redOffsetY);\nlet greenOffset = vec2<f32>(shaderParams.greenOffsetX, shaderParams.greenOffsetY);\nlet blueOffset = vec2<f32>(shaderParams.blueOffsetX, shaderParams.blueOffsetY);\nvar uv = curve(input.fragUV);\nvar col : vec3<f32>;\nlet x = shaderParams.distortionStrength\n* sin(shaderParams.distortionSpeed * 0.3 * iTime + uv.y * 21.0 * shaderParams.distortionFrequency)\n* sin(shaderParams.distortionSpeed * 0.7 * iTime + uv.y * 29.0 * shaderParams.distortionFrequency)\n* sin(0.3 + shaderParams.distortionSpeed * 0.33 * iTime + uv.y * 31.0 * shaderParams.distortionFrequency)\n* 0.0017;\ncol.r = textureSample(textureFront, samplerFront, vec2<f32>(x + uv.x + redOffset.x, uv.y + redOffset.y)).r + 0.05;\ncol.g = textureSample(textureFront, samplerFront, vec2<f32>(x + uv.x + greenOffset.x, uv.y + greenOffset.y)).g + 0.05;\ncol.b = textureSample(textureFront, samplerFront, vec2<f32>(x + uv.x + blueOffset.x, uv.y + blueOffset.y)).b + 0.05;\ncol.r += shaderParams.bloomIntensity * 0.08 * textureSample(textureFront, samplerFront, vec2<f32>(0.75 * (x + 0.025), 0.75 * -0.027) + vec2<f32>(x + uv.x + redOffset.x, uv.y + redOffset.y)).r;\ncol.g += shaderParams.bloomIntensity * 0.05 * textureSample(textureFront, samplerFront, vec2<f32>(0.75 * (x - 0.022), 0.75 * -0.02)  + vec2<f32>(x + uv.x + greenOffset.x, uv.y + greenOffset.y)).g;\ncol.b += shaderParams.bloomIntensity * 0.08 * textureSample(textureFront, samplerFront, vec2<f32>(0.75 * (x - 0.02), 0.75 * -0.018)  + vec2<f32>(x + uv.x + blueOffset.x, uv.y + blueOffset.y)).b;\ncol = clamp(col * 0.6 + 0.4 * col * col * 1.0, vec3<f32>(0.0), vec3<f32>(1.0));\nlet vig = (0.0 + 1.0 * 16.0 * uv.x * uv.y * (1.0 - uv.x) * (1.0 - uv.y));\ncol *= vec3<f32>(pow(vig, 0.3));\ncol *= shaderParams.colorAdjustment;\ncol *= 2.8;\nlet scans = clamp(0.35 + 0.35 * sin(3.5 * iTime + uv.y * shaderParams.resolutionY * 1.5), 0.0, 1.0);\nlet s = pow(scans, shaderParams.scanlinesIntensity);\ncol = col * vec3<f32>(0.4 + 0.7 * s);\ncol *= 1.0 + 0.01 * sin(110.0 * iTime);\nif (uv.x < 0.0 || uv.x > 1.0) {\ncol *= 0.0;\n}\nif (uv.y < 0.0 || uv.y > 1.0) {\ncol *= 0.0;\n}\ncol *= 1.0 - shaderParams.distortIntensity * vec3<f32>(clamp((fract(input.fragPos.x * 0.5) * 2.0 - 1.0), 0.0, 1.0));\noutput.color = vec4<f32>(col, 1.0);\nreturn output;\n}",_v:!1,Cv:!1,cv:0,pv:0,gv:!1,wv:!1,vv:!1,xv:!1,Gv:!0,parameters:[["resolutionX",0,"float"],["resolutionY",0,"float"],["distortIntensity",0,"percent"],["scanlinesIntensity",0,"percent"],["colorAdjustment",0,"color"],["redOffsetX",0,"percent"],["redOffsetY",0,"percent"],["greenOffsetX",0,"percent"],["greenOffsetY",0,"percent"],["blueOffsetX",0,"percent"],["blueOffsetY",0,"percent"],["barrelDistortionStrength",0,"percent"],["barrelDistortionZoom",0,"percent"],["distortionStrength",0,"float"],["distortionSpeed",0,"percent"],["distortionFrequency",0,"percent"],["bloomIntensity",0,"float"]]},self.C3_Shaders.blurhorizontal={YFt:"varying mediump vec2 vTex;\nuniform mediump sampler2D samplerFront;\nuniform mediump vec2 pixelSize;\nuniform mediump float intensity;\nvoid main(void)\n{\nmediump vec4 sum = vec4(0.0);\nmediump float pixelWidth = pixelSize.x;\nmediump float halfPixelWidth = pixelWidth / 2.0;\nsum += texture2D(samplerFront, vTex - vec2(pixelWidth * 7.0 + halfPixelWidth, 0.0)) * 0.06;\nsum += texture2D(samplerFront, vTex - vec2(pixelWidth * 5.0 + halfPixelWidth, 0.0)) * 0.10;\nsum += texture2D(samplerFront, vTex - vec2(pixelWidth * 3.0 + halfPixelWidth, 0.0)) * 0.13;\nsum += texture2D(samplerFront, vTex - vec2(pixelWidth * 1.0 + halfPixelWidth, 0.0)) * 0.16;\nmediump vec4 front = texture2D(samplerFront, vTex);\nsum += front * 0.10;\nsum += texture2D(samplerFront, vTex + vec2(pixelWidth * 1.0 + halfPixelWidth, 0.0)) * 0.16;\nsum += texture2D(samplerFront, vTex + vec2(pixelWidth * 3.0 + halfPixelWidth, 0.0)) * 0.13;\nsum += texture2D(samplerFront, vTex + vec2(pixelWidth * 5.0 + halfPixelWidth, 0.0)) * 0.10;\nsum += texture2D(samplerFront, vTex + vec2(pixelWidth * 7.0 + halfPixelWidth, 0.0)) * 0.06;\ngl_FragColor = mix(front, sum, intensity);\n}",XFt:"",qFt:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\nstruct ShaderParams {\nintensity : f32\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%C3_UTILITY_FUNCTIONS%%\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar pixelWidth : f32 = c3_getPixelSize(textureFront).x;\nvar front : vec4<f32> = textureSample(textureFront, samplerFront, input.fragUV);\nvar sum : vec4<f32> =\ntextureSample(textureFront, samplerFront, input.fragUV - vec2<f32>(pixelWidth * 7.5, 0.0)) * 0.06 +\ntextureSample(textureFront, samplerFront, input.fragUV - vec2<f32>(pixelWidth * 5.5, 0.0)) * 0.10 +\ntextureSample(textureFront, samplerFront, input.fragUV - vec2<f32>(pixelWidth * 3.5, 0.0)) * 0.13 +\ntextureSample(textureFront, samplerFront, input.fragUV - vec2<f32>(pixelWidth * 1.5, 0.0)) * 0.16 +\nfront * 0.10 +\ntextureSample(textureFront, samplerFront, input.fragUV + vec2<f32>(pixelWidth * 1.5, 0.0)) * 0.16 +\ntextureSample(textureFront, samplerFront, input.fragUV + vec2<f32>(pixelWidth * 3.5, 0.0)) * 0.13 +\ntextureSample(textureFront, samplerFront, input.fragUV + vec2<f32>(pixelWidth * 5.5, 0.0)) * 0.10 +\ntextureSample(textureFront, samplerFront, input.fragUV + vec2<f32>(pixelWidth * 7.5, 0.0)) * 0.06;\nvar output : FragmentOutput;\noutput.color = mix(front, sum, shaderParams.intensity);\nreturn output;\n}",_v:!1,Cv:!1,cv:8,pv:0,gv:!1,wv:!1,vv:!1,xv:!1,Gv:!1,parameters:[["intensity",0,"percent"]]},self.C3_Shaders.blurvertical={YFt:"varying mediump vec2 vTex;\nuniform mediump sampler2D samplerFront;\nuniform mediump vec2 pixelSize;\nuniform mediump float intensity;\nvoid main(void)\n{\nmediump vec4 sum = vec4(0.0);\nmediump float pixelHeight = pixelSize.y;\nmediump float halfPixelHeight = pixelHeight / 2.0;\nsum += texture2D(samplerFront, vTex - vec2(0.0, pixelHeight * 7.0 + halfPixelHeight)) * 0.06;\nsum += texture2D(samplerFront, vTex - vec2(0.0, pixelHeight * 5.0 + halfPixelHeight)) * 0.10;\nsum += texture2D(samplerFront, vTex - vec2(0.0, pixelHeight * 3.0 + halfPixelHeight)) * 0.13;\nsum += texture2D(samplerFront, vTex - vec2(0.0, pixelHeight * 1.0 + halfPixelHeight)) * 0.16;\nmediump vec4 front = texture2D(samplerFront, vTex);\nsum += front * 0.10;\nsum += texture2D(samplerFront, vTex + vec2(0.0, pixelHeight * 1.0 + halfPixelHeight)) * 0.16;\nsum += texture2D(samplerFront, vTex + vec2(0.0, pixelHeight * 3.0 + halfPixelHeight)) * 0.13;\nsum += texture2D(samplerFront, vTex + vec2(0.0, pixelHeight * 5.0 + halfPixelHeight)) * 0.10;\nsum += texture2D(samplerFront, vTex + vec2(0.0, pixelHeight * 7.0 + halfPixelHeight)) * 0.06;\ngl_FragColor = mix(front, sum, intensity);\n}",XFt:"",qFt:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\nstruct ShaderParams {\nintensity : f32\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%C3_UTILITY_FUNCTIONS%%\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar pixelHeight : f32 = c3_getPixelSize(textureFront).y;\nvar front : vec4<f32> = textureSample(textureFront, samplerFront, input.fragUV);\nvar sum : vec4<f32> =\ntextureSample(textureFront, samplerFront, input.fragUV - vec2<f32>(0.0, pixelHeight * 7.5)) * 0.06 +\ntextureSample(textureFront, samplerFront, input.fragUV - vec2<f32>(0.0, pixelHeight * 5.5)) * 0.10 +\ntextureSample(textureFront, samplerFront, input.fragUV - vec2<f32>(0.0, pixelHeight * 3.5)) * 0.13 +\ntextureSample(textureFront, samplerFront, input.fragUV - vec2<f32>(0.0, pixelHeight * 1.5)) * 0.16 +\nfront * 0.10 +\ntextureSample(textureFront, samplerFront, input.fragUV + vec2<f32>(0.0, pixelHeight * 1.5)) * 0.16 +\ntextureSample(textureFront, samplerFront, input.fragUV + vec2<f32>(0.0, pixelHeight * 3.5)) * 0.13 +\ntextureSample(textureFront, samplerFront, input.fragUV + vec2<f32>(0.0, pixelHeight * 5.5)) * 0.10 +\ntextureSample(textureFront, samplerFront, input.fragUV + vec2<f32>(0.0, pixelHeight * 7.5)) * 0.06;\nvar output : FragmentOutput;\noutput.color = mix(front, sum, shaderParams.intensity);\nreturn output;\n}",_v:!1,Cv:!1,cv:0,pv:8,gv:!1,wv:!1,vv:!1,xv:!1,Gv:!1,parameters:[["intensity",0,"percent"]]};{let S=function(t,s){const i=t[1],e=s[1];if("number"==typeof i&&"number"==typeof e)return i-e;{const n=""+i,r=""+e;return n<r?-1:r<n?1:0}},v=(S,self.Os),i=null,e="",n="",r=[],h="",o="",a="",b=v.tr(v.p0t);v.W$.B$=class extends v.Sxt{constructor(t){super(t),this.l0t=this.Xc.qF().M8(),this.$ct=this.Xc.qF().hO(),this.s4t=0,this.i4t=0,this.e4t=new Map}ir(){super.ir()}mD(){this.Xc.mD()}t4(t){this.Xc.t4(t,null,null)}n4t(t,s){return i&&t===e&&s===n||(i=new RegExp(t,s),e=t,n=s),i.lastIndex=0,i}r4t(t,s,i){if(t!==h||s!==o||i!==a){const e=this.n4t(s,i);r=t.match(e),h=t,o=s,a=i}return r}async h4t(t,s){if(s.length){this.s4t+=s.length;const i=[];for(const e of s)i.push(t.l$(e));await v.Zh(i,()=>{this.i4t++}),this.i4t++,this.i4t===this.s4t&&(this.i4t=0,this.s4t=0,this.Xc.t4(v.W$.B$.N$.o4t,null,null))}}a4t(t,s){for(const i of s)0===i.Gk()&&t.d$(i)}l4t(){return b}u4t(s){const i=this.Xc.qF(),t=i.hO(),e=t.b8(),n=e.QF(),r=n.v8(),h=e.Xft(),o=t.x8(n),a=i.M8(),l=a.x8();if(l.f0t(s),h)for(let t=0;t<s&&!l.F8();++t)i.I8(r),l.P8(t),n.C8(e,o),i.E8(r);else for(let t=0;t<s&&!l.F8();++t)l.P8(t),n.C8(e,o);return t.O8(),a.O8(),!1}*c4t(s){const i=this.Xc.qF(),t=i.hO(),e=t.b8(),n=e.QF(),r=n.v8(),h=e.Xft(),o=t.x8(n),a=i.M8(),l=a.x8();if(l.f0t(s),h)for(let t=0;t<s&&!l.F8();++t)i.I8(r),l.P8(t),yield*n.Ogt(e,o),i.E8(r);else for(let t=0;t<s&&!l.F8();++t)l.P8(t),yield*n.Ogt(e,o);return t.O8(),a.O8(),!1}f4t(){const s=this.Xc.qF(),t=s.hO(),i=t.b8(),e=i.QF(),n=e.v8(),r=i.Xft(),h=t.x8(e),o=s.M8(),a=o.x8();if(r)for(let t=0;!a.F8();++t)s.I8(n),a.P8(t),e.C8(i,h)||a.oW(),s.E8(n);else for(let t=0;!a.F8();++t)a.P8(t),e.C8(i,h)||a.oW();return t.O8(),o.O8(),!1}*d4t(){const s=this.Xc.qF(),t=s.hO(),i=t.b8(),e=i.QF(),n=e.v8(),r=i.Xft(),h=t.x8(e),o=s.M8(),a=o.x8();if(r)for(let t=0;!a.F8();++t){s.I8(n),a.P8(t);const l=yield*e.Ogt(i,h);l||a.oW(),s.E8(n)}else for(let t=0;!a.F8();++t){a.P8(t);const u=yield*e.Ogt(i,h);u||a.oW()}return t.O8(),o.O8(),!1}p4t(t,s,i){const e=this.Xc.qF(),n=e.hO(),r=n.b8(),h=r.QF(),o=h.v8(),a=r.Xft(),l=n.x8(h),u=e.M8(),c=u.x8();if(c.G8(t),c.f0t(i),i<s)if(a)for(let t=s;t>=i&&!c.F8();--t)e.I8(o),c.P8(t),h.C8(r,l),e.E8(o);else for(let t=s;t>=i&&!c.F8();--t)c.P8(t),h.C8(r,l);else if(a)for(let t=s;t<=i&&!c.F8();++t)e.I8(o),c.P8(t),h.C8(r,l),e.E8(o);else for(let t=s;t<=i&&!c.F8();++t)c.P8(t),h.C8(r,l);return n.O8(),u.O8(),!1}*m4t(t,s,i){const e=this.Xc.qF(),n=e.hO(),r=n.b8(),h=r.QF(),o=h.v8(),a=r.Xft(),l=n.x8(h),u=e.M8(),c=u.x8();if(c.G8(t),c.f0t(i),i<s)if(a)for(let t=s;t>=i&&!c.F8();--t)e.I8(o),c.P8(t),yield*h.Ogt(r,l),e.E8(o);else for(let t=s;t>=i&&!c.F8();--t)c.P8(t),yield*h.Ogt(r,l);else if(a)for(let t=s;t<=i&&!c.F8();++t)e.I8(o),c.P8(t),yield*h.Ogt(r,l),e.E8(o);else for(let t=s;t<=i&&!c.F8();++t)c.P8(t),yield*h.Ogt(r,l);return n.O8(),u.O8(),!1}g4t(i){const t=i.xk(),s=t.bk();if(0!==s.length){const e=this.Xc.qF(),n=e.hO(),r=n.b8(),h=r.QF(),o=h.v8(),a=r.Xft(),l=n.x8(h),u=e.M8(),c=u.x8(),f=i.IN(),d=b.x8();if(v.Dh(d,s),c.f0t(d.length),a)for(let t=0,s=d.length;t<s&&!c.F8();++t){e.I8(o);const p=d[t];i.xk().lft(p),f&&p.qpt(),c.P8(t),h.C8(r,l),e.E8(o)}else{t.hft(!1);const m=t.oft();v.Rh(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.F8();++t){const g=d[t];m[0]=g,f&&g.qpt(),c.P8(t),h.C8(r,l)}}n.O8(),u.O8(),v.Rh(d),b.O8()}return!1}*y4t(i){const t=i.xk(),s=t.bk();if(0!==s.length){const e=this.Xc.qF(),n=e.hO(),r=n.b8(),h=r.QF(),o=h.v8(),a=r.Xft(),l=n.x8(h),u=e.M8(),c=u.x8(),f=i.IN(),d=b.x8();if(v.Dh(d,s),c.f0t(d.length),a)for(let t=0,s=d.length;t<s&&!c.F8();++t){e.I8(o);const p=d[t];i.xk().lft(p),f&&p.qpt(),c.P8(t),yield*h.Ogt(r,l),e.E8(o)}else{t.hft(!1);const m=t.oft();v.Rh(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.F8();++t){const g=d[t];m[0]=g,f&&g.qpt(),c.P8(t),yield*h.Ogt(r,l)}}n.O8(),u.O8(),v.Rh(d),b.O8()}return!1}w4t(i,t){const s=i.xk(),e=s.bk();if(0!==e.length){const n=this.Xc.qF(),r=n.hO(),h=n.odt(),o=r.b8(),a=o.QF(),l=a.v8(),u=o.Xft(),c=r.x8(a),f=n.M8(),d=f.x8(),p=i.IN(),m=b.x8();v.Rh(m),d.f0t(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],h.XSt(1,t)]);if(m.sort(S),1===t&&m.reverse(),u)for(let t=0,s=m.length;t<s&&!d.F8();++t){n.I8(l);const g=m[t][0];i.xk().lft(g),p&&g.qpt(),d.P8(t),a.C8(o,c),n.E8(l)}else{s.hft(!1);const y=s.oft();v.Rh(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.F8();++t){const w=m[t][0];y[0]=w,p&&w.qpt(),d.P8(t),a.C8(o,c)}}r.O8(),f.O8(),v.Rh(m),b.O8()}return!1}*S4t(i,t){const s=i.xk(),e=s.bk();if(0!==e.length){const n=this.Xc.qF(),r=n.hO(),h=n.odt(),o=r.b8(),a=o.QF(),l=a.v8(),u=o.Xft(),c=r.x8(a),f=n.M8(),d=f.x8(),p=i.IN(),m=b.x8();v.Rh(m),d.f0t(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],h.XSt(1,t)]);if(m.sort(S),1===t&&m.reverse(),u)for(let t=0,s=m.length;t<s&&!d.F8();++t){n.I8(l);const g=m[t][0];i.xk().lft(g),p&&g.qpt(),d.P8(t),yield*a.Ogt(o,c),n.E8(l)}else{s.hft(!1);const y=s.oft();v.Rh(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.F8();++t){const w=m[t][0];y[0]=w,p&&w.qpt(),d.P8(t),yield*a.Ogt(o,c)}}r.O8(),f.O8(),v.Rh(m),b.O8()}return!1}v4t(t,s){let i=this.e4t.get(t);if(!i){if(!s)return null;i={b4t:null,x4t:new Map},this.e4t.set(t,i)}return i}M4t(t,s,i,e,n){s.ZF().Ygt(i,s.iO()),e&&t.E8(n)}*G4t(t,s,i,e,n){yield*s.ZF().Zgt(i,s.iO()),e&&t.E8(n)}}}{const Da=self.Os;Da.W$.B$.O_t=class extends Da.Kn{constructor(t){super(),this.Wct=t,this.Xc=t.ED(),this.nMt=t.uk()}Uxt(){}ir(){this.Wct=null,this.Xc=null,this.nMt=null}}}{const La=self.Os;La.W$.B$.Instance=class extends La.Kn{constructor(t,s){super(),this.vi=t,this.Wct=this.vi.mN(),this.uMt=this.Wct._vt(),this.Xc=this.vi.ED()}ir(){this.vi=null,this.Wct=null,this.uMt=null,this.Xc=null}}}{const C=self.Os,ka=[];C.W$.B$.N$={T4t(){return!0},k$(){return!0},Y$(){return!0},E5t(){return!0},P5t(){return!0},dO(){return this.Xc.dO()},Rmt(){const t=this.Xc.hdt();return!t.Hft()&&!t.Uft()},_4t(){let t=this.Xc.odt(),s=t.LSt(),i=s.get("TriggerOnce_lastTick");void 0===i&&(i=-1,s.set("TriggerOnce_lastTick",-1));const e=this.Xc.ott();return s.set("TriggerOnce_lastTick",e),this.Xc.rNt()||i!==e-1},I4t(t){const s=this.Xc.odt(),i=s.LSt(),e=i.get("Every_lastTime")||0,n=this.Xc.wO(),r=(i.has("Every_seconds")||i.set("Every_seconds",t),i.get("Every_seconds"));return e+r<=n?(i.set("Every_lastTime",e+r),n>=i.get("Every_lastTime")+.04&&i.set("Every_lastTime",n),i.set("Every_seconds",t),!0):(n<e-.1&&i.set("Every_lastTime",n),!1)},q1t(t){const s=this.Xc.qF().Cdt(t);return s&&s.q1t()},oDt(){return this.Xc.oDt()},mi(){return C.ni.mi},c5t(){return!0},C4t(){return!0},E4t(){return!0},yNt(){return!0},xNt(){return!0},SNt(){return!0},vNt(){return!0},P4t(t){return!!this.Xc.eD(t)},R4t(t){switch(t){case 0:return"browser"===C.ni.fi;case 1:return"iOS"===C.ni.ri;case 2:return"Android"===C.ni.ri;case 8:return"cordova"===C.ni.fi;case 9:return"scirra-arcade"===this.Xc.pL();case 10:return"nwjs"===C.ni.fi;case 13:return"windows-uwp"===this.Xc.pL();default:return!1}},A4t(t,s,i){const e=this.n4t(s,i);return e.test(t)},F4t(t,s,i){return C.compare(t,s,i)},O4t(t,s,i){return s<=t&&t<=i},D4t(t,s,i){return C.compare(t.Qit(),s,i)},L4t(t){return!!t.Qit()},k4t(t,s){const i=this.Xc.wO();if(0!==t)return C.compare(i,t,s);{const e=this.Xc.odt(),n=e.LSt();return!n.get("CompareTime_executed")&&s<=i&&(n.set("CompareTime_executed",!0),!0)}},N4t(t){return isNaN(t)},jbt(t,s,i){return C.yr(C.cr(t),C.cr(i))<=C.cr(s)},Ubt(t,s){return C.vr(C.cr(t),C.cr(s))},i2t(t,s,i){let e=C.cr(t),n=C.cr(s),r=C.cr(i),h=!C.vr(r,n);return h?!(!C.vr(e,n)&&C.vr(e,r)):C.vr(e,n)&&!C.vr(e,r)},B4t(t,s){return"number"==typeof t?0===s:1===s},W4t(t){return!!t},T1t(t){return t.toLowerCase()===this.Xc.qF().E1t()},j4t(t,i,e,n){if(!t)return!1;let s=this.l4t(),r=s.x8(),h=t.xk(),o=(C.Dh(r,h.bk()),h.Kct()&&C.Rh(h.aft()),this.Xc.odt()),a=0;for(let t=0,s=r.length;t<s;++t){const u=r[t];r[a]=u,i=o.XSt(1,t),n=o.XSt(3,t),C.compare(i,e,n)?++a:h.rft(u)}C.Ph(r,a),h.uft(r);const l=!!r.length;return C.Rh(r),s.O8(),t.Vgt(),l},U4t(t,s){if(!t)return!1;let i=this.l4t(),e=i.x8(),n=t.xk(),r=(C.Dh(e,n.bk()),n.Kct()&&C.Rh(n.aft()),this.Xc.odt()),h=0;for(let t=0,s=e.length;t<s;++t){const a=e[t];e[h]=a,r.XSt(1,t)?++h:n.rft(a)}C.Ph(e,h),n.uft(e);const o=!!e.length;return C.Rh(e),i.O8(),t.Vgt(),o},V4t(t,i,e){if(!t)return!1;const s=t.xk(),n=s.bk();if(0===n.length)return!1;let r=this.Xc.odt(),h=null,o=0;for(let t=0,s=n.length;t<s;++t){const a=n[t];e=r.XSt(2,t),(null===h||0===i&&e<o||1===i&&e>o)&&(o=e,h=a)}return s.mft(h),t.Vgt(),!0},H4t(t,s){if(!t)return!1;const i=t.xk(),e=i.bk();if((s=Math.floor(s))>=e.length)return!1;const n=e[s];return i.mft(n),t.Vgt(),!0},z4t(t){if(!t)return!1;const s=t.xk(),i=s.bk(),e=Math.floor(this.Xc.BO()*i.length);if(e>=i.length)return!1;const n=i[e];return s.mft(n),t.Vgt(),!0},J4t(t){if(!t)return!1;if(!t.Gk())return!1;const s=t.xk();return s.hft(!0),t.Vgt(),!0},q4t(t,i,e){if(!t)return!1;const n=t.xk(),s=n.bk(),r=this.Xc.QF(),h=r.gft(),o=this.Xc.odt().RSt();n.Kct()?(C.Dh(ka,s),n.Zct(),n.hft(!1)):h?(C.Dh(ka,n.aft()),C.Rh(n.aft())):(C.Dh(ka,n.oft()),C.Rh(n.oft()));for(let t=0,s=ka.length;t<s;++t){const a=ka[t];C.xor(a.aD().rB(i,e),o)?n.nft(a):n.rft(a)}return t.Vgt(),C.xor(!!n.oft().length,o)},$4t(s){if(!s)return!1;let i=s.Gz(),e=null,n=this.Xc.GIt();for(let t=n.length-1;0<=t;--t){const r=n[t];if(i){if(r.mN().Rvt(s)){e=r;break}}else if(r.mN()===s){e=r;break}}if(!e){const h=s.bk();h.length&&(e=h.at(-1))}if(!e)return!1;const t=s.xk();return t.mft(e),s.Vgt(),!0},X4t(t){return this.Xc.C2t()?this.c4t(t):this.u4t(t)},Y4t(){return this.Xc.C2t()?this.d4t():this.f4t()},Z4t(t,s,i){return this.Xc.C2t()?this.m4t(t,s,i):this.p4t(t,s,i)},td(t){return this.Xc.C2t()?this.y4t(t):this.g4t(t)},K4t(t,s,i){return this.Xc.C2t()?this.S4t(t,i):this.w4t(t,i)},Q4t(t){return!!t&&t.T5()},tBt(t){return!!t&&t.A5()},sBt(t){return!!t&&t.E5()},iBt(t){return!!t&&!t.Gk()},eBt(t,s,i){return!!t&&C.compare(100*t.ME(),s,i)},nBt(t){const s=this.Xc.WO();return!!s&&s.$q(t)},o4t(){return!0},rBt(){return 0<this.s4t},hBt(t,s){const i=this.Xc.RCt();return!!i&&!!s&&!!i.flt(t,s)}}}{let m=function(t,s){const i=t[0],e=s[0],n=i-e;if(0!=n)return n;const r=t[1],h=s[1];return r-h},g=function(t,s){return t[1]-s[1]};m,g;const Na=self.Os,Ba=[],Wa=[],ja=Na.tr(Na.Rect),Ua=Na.tr(Na.Lo),Va=[];Na.W$.B$.Pnt={oBt(t,s){t.Net(s)},aBt(t,s){t.ae()&&"number"!=typeof s&&(s=parseFloat(s)),t.Net(t.Qit()+s)},lBt(t,s){t.ae()&&t.Net(t.Qit()-s)},uBt(t,s){t.Net(!!s)},cBt(t){t.Net(!t.Qit())},fBt(t){t.Net(t.rdt())},dBt(t){this.Xc.qF()._dt(t)},pBt(t,s,i,e,n,r){if(t&&s){const h=this.Xc._k(t,s,i,e,n,r);if(h){n&&s.Ik(h);const o=this.Xc.qF(),a=(o.Ck(!0),h.Ek(),o.Ck(!1),new Map);h.xCt(a,t,n);for(const[l,u]of a)l.xk().cft(u)}}},mBt(t,s,i,e,n,r){if(t&&s){const h=this.Xc.g5t(t);h&&Na.W$.B$.Pnt.pBt.call(this,h,s,i,e,n,r)}},xz(n,r,h,o,a,t,l,u,c,f,d){if(n){let s=this.Xc.hD(),i=s;if(t){const p=this.Xc.VO().AX(t);if(!p)return;i=p}let e=null;if(!("number"!=typeof l||0<=l)||(e=i.lD(l))){let t=null;if(!("number"!=typeof u||0<=u)||(t=s.lD(u))){ja.set(r,h,o,a);const m=i.xz(n,ja,e,t,c,f,d);n.xk().uft(m),n.Vgt()}}}},gBt(){const t=this.l0t;t.r0t()&&t.e0t().oW()},$1t(t,s){const i=this.Xc.qF().Cdt(t);i&&(0===s?i.$1t(!1):1===s?i.$1t(!0):i.$1t(!i.q1t()))},yBt(t){this.Xc.xO(t)},wBt(t,s){if(s<0&&(s=0),t){const i=t.xk(),e=i.bk();for(const n of e)n.xO(s)}},SBt(t){if(t){const s=t.xk(),i=s.bk();for(const e of i)e.ON()}},Th(t){if(!(t<0))return this.Xc.qF().a1t().fxt(t),!0},cO(t){return this.Xc.qF().a1t().dxt(t),!0},vBt(){const t=this.Xc.qF();return t.a1t().pxt(t.G1t()),!0},lO(t){this.Xc.qF().lO(t)},async WOt(t,s,i,e,n,r){const h=this.Xc.wL();h&&(this.mD(),await h.WOt(0===t?"image/png":"image/jpeg",s/100,i,e,n,r),await this.Xc.i4(Na.W$.B$.N$.C4t,null))},bBt(t,s){if(!(t<=0||s<=0)){this.Xc.cOt(t,s),this.Xc.hD().j9();const i=this.Xc.wL();i&&("off"!==i.nOt()&&this.Xc.w5t(t,s),i.HI(i.Sj(),i.vj(),!0),this.Xc.mD())}},xBt(t){const s=this.Xc.wL();s&&"off"!==s.nOt()&&(s.wOt(0!==t?"high":"low"),s.HI(s.Sj(),s.vj(),!0))},yit(t){this.Xc.lNt(t)},MBt(){this.Xc.uNt()},GBt(t){this.Xc.cNt(t)},TBt(t){this.Xc.Sbt(t)},_Bt(t){},IBt(){for(const t of this.Xc.VO().JO())t.rX()},CBt(t){this.Xc.hNt(0!==t)},EBt(t,s){this.Xc.NO(1/t),this.Xc.DO(1/s)},PBt(t,s){this.Xc.DO(t),this.Xc.NO(s)},RBt(t){this.Xc.AO(["vsync","unlimited-tick","unlimited-frame"][t])},ABt(t,i){if(t){const s=t.xk(),e=s.bk(),n=Ba,r=Wa,h=this.Xc.hD(),o=t.Gz(),a=t.fwt();for(let t=0,s=e.length;t<s;++t){const l=e[t],u=l.aD();if(u){let t;t=o?l.Mrt(i+l.mN().cwt(a)):l.Mrt(i),n.push([u.lD().gF(),u.uD()]),r.push([l,t])}}if(n.length){n.sort(m),r.sort(g);let i=!1;for(let t=0,s=n.length;t<s;++t){const c=r[t][0],f=h.cD(n[t][0]),d=n[t][1],p=f.fD();p[d]!==c&&((p[d]=c).aD().dD(f,!0),f.pD(c),i=!0)}i&&this.Xc.mD(),Na.Rh(Ba),Na.Rh(Wa)}}},iL(t,s){t=Math.floor(t),s=Math.floor(s),t<=0||s<=0||!Number.isFinite(t)||!Number.isFinite(s)||this.Xc.MF().iL(t,s)},FBt(t){if(!this.Xc.Eg()){const s=this.Xc.VO();s.$O()||s.XO(t)}},OBt(t){if(!this.Xc.Eg()){const s=this.Xc.VO();if(!s.$O()){const i=s.AX(t);i&&s.XO(i)}}},DBt(t){if(!this.Xc.Eg()){const s=this.Xc.VO();if(!s.$O()){const i=s.JO(),e=i.indexOf(s.WO());if((!t||0!==e)&&(t||e!==i.length-1)){const n=i[e+(t?-1:1)];s.XO(n)}}}},LBt(){if(!this.Xc.Eg()){const t=this.Xc.VO();t.$O()||(t.XO(t.WO()),this.Xc.qF().Adt())}},kBt(t,s){t&&t.M5(s)},NBt(t,s){t&&t.I5(s)},BBt(t,s){t&&t.P5(s)},WBt(t,s){t&&t.TE(s/100)},jBt(t,s){t&&t.F5(s)},UBt(t,s){t&&t.D5(s)},VBt(t,s){t&&t.Wk(Na.cr(+s))},HBt(t,s,i){t&&(t.K5(!0),t.Uk(s),t.Hk(i))},zBt(t){t&&t.K5(!1)},JBt(t,s,i){t&&t.nJ(s/100,i/100)},qBt(t,s){t&&t.m2(+s)},$Bt(t,s){if(t){Ua.da(s),Ua.lr();const i=t.Z5();i.na(Ua)||(i.Xo(Ua),this.mD())}},XBt(t,s){t&&t.H5(s)},YBt(t,s){t&&t.SetBlendMode(s)},ZBt(t,s,i){if(t){const e=t.Ok(),n=e.unt(i);if(n){const r=1===s;n.Npt()!==r&&(n.$Pt(r),t.S6(),this.Xc.mD())}}},KBt(t,s,i,e){if(t){const n=t.Ok(),r=n.unt(s);if(r){i=Math.floor(i);const h=r.QM().sG(i);if(h){"color"===h?(Ua.da(e),e=Ua):"percent"===h&&(e/=100);const o=n.b6(r.gF(),i,e);o&&r.Npt()&&this.Xc.mD()}}}},QBt(t,s){t&&t.q5(s)},t6t(t){this.Xc.hD().Nk(+t)},s6t(t){this.Xc.hD().Wk(Na.cr(+t))},i6t(t,s){const i=this.Xc.hD(),e=i.Ok(),n=e.unt(s);if(n){const r=1===t;n.Npt()!==r&&(n.$Pt(r),i.S6(),this.Xc.mD())}},e6t(t,s,i){const e=this.Xc.hD(),n=e.Ok(),r=n.unt(t);if(r){s=Math.floor(s);const h=r.QM().sG(s);if(h){"color"===h?(Ua.da(i),i=Ua):"percent"===h&&(i/=100);const o=n.b6(r.gF(),s,i);o&&r.Npt()&&this.Xc.mD()}}},n6t(t,s){const i=this.Xc.hD();i.l5(t/100,s/100)},r6t(t){const s=this.Xc.hD();0===t?s.f5():s.d5()},h6t(t){const s=this.Xc.hD();s.Uk(t)},o6t(t){const s=this.Xc.hD();s.Hk(t)},a6t(t,s){const i=this.Xc.hD();i.Uk(t),i.Hk(s)},l6t(t){if(t){const s=t.w2t();if(s){const i=s.aD();if(i){const e=this.Xc.hD();e.Uk(i.a2()),e.Hk(i.c2())}}}},s5(t,s,i){const e=this.Xc.hD();try{e.s5(t,s,i)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},e5(t,s,i){if(t){const e=this.Xc.hD();try{e.e5(t,s,i)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}}},r5(t){if(t){const s=this.Xc.hD();s.r5(t)}},o5(){this.Xc.hD().o5()},async u6t(t){const s=this.Xc.WO();if(s&&t&&!this.Xc.Eg()){const i=t.Gz()?t.Dmt():[t];await this.h4t(s,i)}},async c6t(t){await Na.W$.B$.Pnt.u6t.call(this,this.Xc.g5t(t))},f6t(t){const s=this.Xc.WO();if(s&&t){const i=t.Gz()?t.Dmt():[t];this.a4t(s,i)}},d6t(t){Na.W$.B$.Pnt.f6t.call(this,this.Xc.g5t(t))},p6t(){const t=this.Xc.WO();if(t){const s=t.h$();this.a4t(t,s)}},async m6t(t){const s=this.Xc.WO();t&&s&&!this.Xc.Eg()&&await this.h4t(s,t.e$())},async g6t(t){const s=this.Xc.WO(),i=this.Xc.VO().AX(t);i&&s&&!this.Xc.Eg()&&await this.h4t(s,i.e$())},aO(t){const s=this.$ct.rO();if(s)switch(s.oO()){case 1:"number"==typeof t&&s.aO(t);break;case 2:"string"==typeof t&&s.aO(t);break;case 3:s.aO(t)}},y6t(t,s,i){const e=this.v4t(t.toLowerCase(),!0),n=e.x4t,r=s.toLowerCase(),h=(n.has(r)&&console.warn(`[Construct] Function map '${t}' string '${s}' already in map; overwriting entry`),Na.first(n.values())||e.b4t);if(h){const o=0!==h.eO(),a=0!==i.eO();if(o!=a)return void console.error(`[Construct] Function map '${t}' string '${s}' function return type not compatible with other functions in the map; entry ignored`)}n.set(r,i)},w6t(t,s){const i=this.v4t(t.toLowerCase(),!0),e=(i.b4t&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`),Na.first(i.x4t.values())||i.b4t);if(e){const n=0!==e.eO(),r=0!==s.eO();if(n!=r)return void console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`)}i.b4t=s},S6t(t,s,i){const e=this.Xc,n=e.C2t()?Va:null,r=(i=Math.floor(i),this.v4t(t.toLowerCase(),!1));if(!r)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),n;let h=r.x4t.get(s.toLowerCase());if(!h){if(!r.b4t)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; call ignored (consider setting a default)`),n;h=r.b4t,i=0}if(!h.Uu())return n;if(0!==h.eO())return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has a return type so cannot be called`),n;const o=e.qF(),a=o.QF(),l=a.KF(),u=0<l.length,c=(u&&(h.iO()?o.I8(l):o.h1t(l)),[]),f=o.tpt(a);if(f){const p=f.ipt();for(let t=i,s=p.length;t<s;++t)c.push(p[t].Qit())}const d=h.ipt();for(let t=c.length,s=d.length;t<s;++t)c.push(d[t].rdt());return e.C2t()?this.G4t(o,h,c,u,l):this.M4t(o,h,c,u,l)}}}{const E=self.Os;E.W$.B$.Rnt={v6t:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t))&&(t=0),Math.floor(t)},float:function(t){return"string"==typeof t&&(t=parseFloat(t),isNaN(t))?0:t},O(t){return t.toString()},Vt(t){return"string"==typeof t?t.length:0},random(t,s){return void 0===s?this.Xc.BO()*t:this.Xc.BO()*(s-t)+t},Yyt(...t){const s=Math.floor(this.Xc.BO()*t.length);return t[s]},b6t(t,...s){return"number"!=typeof t&&(t=0),s[t=E.lr(Math.floor(t),0,s.length-1)]},pi(){return Math.PI},x6t(){return 1/0},sqrt(t){return Math.sqrt(t)},abs(t){return Math.abs(t)},round(t){return Math.round(t)},M6t(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round((t+Number.EPSILON)*i)/i},floor(t){return Math.floor(t)},ceil(t){return Math.ceil(t)},sign(t){return Math.sign(t)},sin(t){return Math.sin(E.cr(t))},cos(t){return Math.cos(E.cr(t))},tan(t){return Math.tan(E.cr(t))},asin(t){return E.dr(Math.asin(t))},acos(t){return E.dr(Math.acos(t))},atan(t){return E.dr(Math.atan(t))},exp(t){return Math.exp(t)},Xt(t){return Math.log(t)},log10(t){return Math.log10(t)},max(...i){let e=i[0];"number"!=typeof e&&(e=0);for(let s=1,t=i.length;s<t;++s){let t=i[s];"number"==typeof t&&e<t&&(e=t)}return e},min(...i){let e=i[0];"number"!=typeof e&&(e=0);for(let s=1,t=i.length;s<t;++s){let t=i[s];"number"==typeof t&&e>t&&(e=t)}return e},lr(t,s,i){return E.lr(t,s,i)},It(t,s,i,e){return E.pr(t,s,i,e)},angle(t,s,i,e){return E.dr(E.gr(t,s,i,e))},Ft(t,s,i){return E.Ft(t,s,i)},_r(t,s,i){return E._r(t,s,i)},Cr(t,s,i,e){return E.Cr(t,s,i,e)},Er(t,s,i,e,n){return E.Er(t,s,i,e,n)},Pr(t,s,i){return E.Pr(t,s,i)},G6t(t,s){return E.dr(E.yr(E.cr(t),E.cr(s)))},T6t(t,s,i){return E.dr(E.br(E.cr(t),E.cr(s),i))},_6t(t,s,i){return E.dr(E.Sr(E.cr(t),E.cr(s),E.cr(i)))},I6t(t,s,i){return(t|=0)&~(1<<(s|=0))|(i=0!==i?1:0)<<s},C6t(t,s){return(t|=0)^1<<(0|s)},E6t(t,s){return(t|=0)&1<<(0|s)?1:0},P6t(){return"\n"},R6t(t){return"string"==typeof t?t.toUpperCase():""},A6t(t){return"string"==typeof t?t.toLowerCase():""},left(t,s){return"string"==typeof t?t.substr(0,s):""},mid(t,s,i){return"string"!=typeof t?"":i<0?t.substr(s):t.substr(s,i)},right(t,s){return"string"==typeof t?t.substr(Math.max(t.length-s,0)):""},trim(t){return"string"==typeof t?t.trim():""},F6t(t,s,i){if("string"!=typeof t||"string"!=typeof i)return"";let e=t.split(i);return(s=Math.floor(s))<0||s>=e.length?"":e[s]},O6t(t,s){return"string"==typeof t&&"string"==typeof s&&t.length?t.split(s).length:0},find(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(E.re(s),"i")):-1},D6t(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(E.re(s),"")):-1},replace(t,s,i){return"string"==typeof t&&"string"==typeof s&&"string"==typeof i?t.replace(new RegExp(E.re(s),"gi"),i):"string"==typeof t?t:""},L6t(t,...i){let e=t;for(let t=0,s=i.length;t<s;++t)e=e.replaceAll(`{${t}}`,i[t].toString());return e},k6t(t,s,i){const e=this.n4t(s,i);return t?t.search(e):-1},N6t(t,s,i,e){const n=this.n4t(s,i);return t?t.replace(n,e):""},B6t(t,s,i){const e=this.r4t(t.toString(),s,i);return e?e.length:0},W6t(t,s,i,e){e=Math.floor(e);const n=this.r4t(t.toString(),s,i);return!n||e<0||e>=n.length?"":n[e]},j6t(t,s){let i=t<0?"-":"",e=s-(t=t<0?-t:t).toString().length;return(i+="0".repeat(Math.max(e,0)))+t.toString()},U6t(t){return encodeURIComponent(t)},V6t(t){return decodeURIComponent(t)},pO(){return this.Xc.uZ()},timescale(){return this.Xc.bO()},H6t(){return(Date.now()-this.Xc.X5t())/1e3},z6t(){return Date.now()},time(){return this.Xc.wO()},tickcount(){return this.Xc.ott()},J6t(){return this.Xc.K5t()},fps(){return this.Xc.MO()},q6t(){return this.Xc.IO()},$6t(){return this.Xc.EO()},X6t(){return this.Xc.wL()._L()},Y6t(){return this.Xc.wL().CL()},Z6t(){return this.Xc.FF()},K6t(){return this.Xc.DF()},Q6t(){return this.Xc.FF()},tWt(){return this.Xc.DF()},sWt(){return this.Xc.hD().Vk()},iWt(){return this.Xc.hD().zk()},eWt(){return this.Xc.hD().jc()},nWt(){return this.Xc.hD().Bk()},rWt(){return E.dr(this.Xc.hD().jk())},hWt(){return this.Xc.hD().$p()},oWt(){return this.Xc.hD().hm()},aWt(){return 100*this.Xc.hD().Zz()},lWt(){return 100*this.Xc.hD().Kz()},uWt(t){const s=this.Xc.hD().lD(t);return s?s.Yz().pl():0},cWt(t){const s=this.Xc.hD().lD(t);return s?s.Yz().ml():0},fWt(t){const s=this.Xc.hD().lD(t);return s?s.Yz().gl():0},dWt(t){const s=this.Xc.hD().lD(t);return s?s.Yz().yl():0},pWt(t){const s=this.Xc.hD().lD(t);return s?s.Yz().width():0},mWt(t){const s=this.Xc.hD().lD(t);return s?s.Yz().height():0},gWt(t){const s=this.Xc.hD().lD(t);if(s){const i=s.Yz();return(i.pl()+i.gl())/2}return 0},yWt(t){const s=this.Xc.hD().lD(t);if(s){const i=s.Yz();return(i.ml()+i.yl())/2}return 0},wWt(t,s,i){const e=this.Xc.hD().lD(t);return e?e.iN(s,i)[0]:0},SWt(t,s,i){const e=this.Xc.hD().lD(t);return e?e.iN(s,i)[1]:0},vWt(t,s,i){const e=this.Xc.hD().lD(t);return e?e.hN(s,i)[0]:0},bWt(t,s,i){const e=this.Xc.hD().lD(t);return e?e.hN(s,i)[1]:0},xWt(t,s,i,e){const n=this.Xc.hD(),r=n.lD(t),h=n.lD(s);if(!r||!h||r===h)return i;const[o,a]=r.hN(i,e);return h.iN(o,a)[0]},MWt(t,s,i,e){const n=this.Xc.hD(),r=n.lD(t),h=n.lD(s);if(!r||!h||r===h)return e;const[o,a]=r.hN(i,e);return h.iN(o,a)[1]},GWt(t){const s=this.Xc.hD().lD(t);return s?s.O5():0},TWt(t){const s=this.Xc.hD().lD(t);return s?E.dr(s.k5()):0},_Wt(t){const s=this.Xc.hD().lD(t);return s?100*s.ME():0},IWt(t){const s=this.Xc.hD().lD(t);return s?s.L5():0},CWt(t){const s=this.Xc.hD().lD(t);return s?s.Vk():0},EWt(t){const s=this.Xc.hD().lD(t);return s?s.zk():0},PWt(t){const s=this.Xc.hD().lD(t);return s?100*s.B5():0},RWt(t){const s=this.Xc.hD().lD(t);return s?100*s.j5():0},AWt(t){const s=this.Xc.hD().lD(t);return s?s.d2():0},FWt(t){const s=this.Xc.hD().lD(t);return s?s.gF():-1},OWt(){const t=this.Xc.wL();return t?t.UOt():""},DWt(t){const s=this.l0t;if(!s.r0t())return 0;if(t){const i=s.o0t(t);return i?i.gF():0}return s.e0t().gF()},LWt(){return this.Xc.fNt()},kWt(t,s,...i){const e=this.v4t(t.toLowerCase(),!1);if(!e)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let n=e.x4t.get(s.toLowerCase());if(!n){if(!e.b4t)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; returning 0 (consider setting a default)`),0;n=e.b4t}const r=n.eO(),h=n.XF();if(0===r)return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has no return type so cannot be called from an expression; returning 0`),0;if(!n.Uu())return h;const o=this.Xc,a=o.qF(),l=a.QF(),u=l.KF(),c=0<u.length,f=(c&&(n.iO()?a.I8(u):a.h1t(u)),n.ipt());for(let t=i.length,s=f.length;t<s;++t)i.push(f[t].rdt());const d=n.ZF(),p=d.sO(d.KF(),n.iO(),r,h,...i);return c&&a.E8(u),p},NWt(){return this.Xc.vF().jV()},BWt(){return 0===this.s4t?1:this.i4t/this.s4t},renderer(){return this.Xc.TOt()?"webgpu":"webgl"},WWt(){return this.Xc.TOt()?this.Xc.TOt().GetAdapterInfoString():this.Xc.GOt().AP()},jWt(){let t=this.Xc.Rv().nv();return Math.round(100*t/1048576)/100},UWt(t,s,i){return E.kr(t,s,i)},VWt(t,s,i){return E.Br(t/100,s/100,i/100)},HWt(t,s,i,e){return E.Nr(t/100,s/100,i/100,e/100)},zWt(t,s,i){return E.Br(t/255,s/255,i/255)},JWt(t,s,i,e){return E.Nr(t/255,s/255,i/255,e/255)},qWt(){return this.Xc.IF()},$Wt(){return this.Xc.EF()},XWt(){return this.Xc.QF().Jq().jc()},YWt(){return this.Xc.QF().Qmt()}}}{const Ha=self.Os;Ha.W$.ZWt=class extends Ha.Sxt{constructor(t){super(t)}ir(){super.ir()}}}{const za=self.Os;za.W$.ZWt.O_t=class extends za.eMt{constructor(t){super(t)}ir(){super.ir()}Uxt(){}}}{let r=function(s,i,e){if(i<s.length)Ja.Ph(s,i);else if(i>s.length)if("function"==typeof e)for(let t=s.length;t<i;++t)s.push(e());else for(let t=s.length;t<i;++t)s.push(e)};r;const Ja=self.Os,qa=self.Hs,$a=self.dN,Xa=(Ja.W$.ZWt.Instance=class extends Ja.aMt{constructor(t,s){super(t),this.KWt=10,this.QWt=1,this.tjt=1,this.Ku=null,this.sjt=[],this.ijt=[],this.ejt=[],this.njt=-1,s&&(this.KWt=s[0],this.QWt=s[1],this.tjt=s[2]),this.Ku=Ja.Do(this.KWt,()=>Ja.Do(this.QWt,()=>Ja.Do(this.tjt,0)))}ir(){this.Ku=null,super.ir()}rjt(t,s,i){return t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),0<=t&&t<this.KWt&&0<=s&&s<this.QWt&&0<=i&&i<this.tjt?this.Ku[t][s][i]:0}Set(t,s,i,e){t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),0<=t&&t<this.KWt&&0<=s&&s<this.QWt&&0<=i&&i<this.tjt&&(this.Ku[t][s][i]=e)}HI(t,i,e){if(t=Math.floor(t),i=Math.floor(i),e=Math.floor(e),i<0&&(i=0),e<0&&(e=0),this.KWt!==(t=t<0?0:t)||this.QWt!==i||this.tjt!==e){this.KWt=t,this.QWt=i,this.tjt=e;const n=this.Ku;r(n,t,()=>Ja.Do(i,()=>Ja.Do(e,0)));for(let s=0;s<t;++s){r(n[s],i,()=>Ja.Do(e,0));for(let t=0;t<i;++t)r(n[s][t],e,0)}}}$p(){return this.KWt}hm(){return this.QWt}C9(){return this.tjt}hjt(t,s,i,e,n){for(;0<s;){const r=Math.floor(this.Xc.BO()*s);if(--s,0===t){const h=this.rjt(s,e,n),o=this.rjt(r,e,n);this.Set(s,e,n,o),this.Set(r,e,n,h)}else if(1===t){const a=this.rjt(i,s,n),l=this.rjt(i,r,n);this.Set(i,s,n,l),this.Set(i,r,n,a)}else if(2===t){const u=this.rjt(i,e,s),c=this.rjt(i,e,r);this.Set(i,e,s,c),this.Set(i,e,r,u)}}}RMt(){const t="plugins.arr.debugger",s="plugins.arr.properties",i=[{title:t+".array-properties.title",properties:[{name:s+".width.name",value:this.KWt,ojt:t=>this.HI(t,this.QWt,this.tjt)},{name:s+".height.name",value:this.QWt,ojt:t=>this.HI(this.KWt,t,this.tjt)},{name:s+".depth.name",value:this.tjt,ojt:t=>this.HI(this.KWt,this.QWt,t)},{name:s+".elements.name",value:this.KWt*this.QWt*this.tjt}]}],e=[];if(1===this.QWt&&1===this.tjt)for(let s=0;s<this.KWt;++s)e.push({name:"$"+s,value:this.Ku[s][0][0],ojt:t=>this.Ku[s][0][0]=t});else for(let t=0;t<this.KWt;++t)e.push({name:"$"+t,value:this.Ku[t].toString()});return e.length&&i.push({title:t+".array-data.title",properties:e}),i}ajt(){return JSON.stringify({c2array:!0,size:[this.KWt,this.QWt,this.tjt],data:this.Ku})}G2(){return{size:[this.KWt,this.QWt,this.tjt],data:this.Ku}}T2(t){const s=t.size;this.KWt=s[0],this.QWt=s[1],this.tjt=s[2],this.Ku=t.data}ljt(){return 0<=this.njt&&this.njt<this.sjt.length?this.sjt[this.njt]:0}ujt(){return 0<=this.njt&&this.njt<this.ijt.length?this.ijt[this.njt]:0}cjt(){return 0<=this.njt&&this.njt<this.ejt.length?this.ejt[this.njt]:0}Vxt(){return self.fjt}},new WeakMap);self.fjt=class extends $a{constructor(){super(),Xa.set(this,$a.wN().s6())}get width(){return Xa.get(this).$p()}get height(){return Xa.get(this).hm()}get depth(){return Xa.get(this).C9()}kk(t,s=1,i=1){qa.ge(t),qa.ge(s),qa.ge(i),Xa.get(this).HI(t,s,i)}djt(t,s=0,i=0){return qa.ge(t),qa.ge(s),qa.ge(i),Xa.get(this).rjt(t,s,i)}pjt(t,s,i=0,e=0){if(qa.ge(s),qa.ge(i),qa.ge(e),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid type");Xa.get(this).Set(s,i,e,t)}}}{let m=function(t,s,i,e,n,r){t.I8(i);const h=r.mN().xk();h.mft(r.EW()),s.C8(e,n),t.E8(i)};m;const Ya=self.Os;Ya.W$.ZWt.N$={Fvt(t,s,i){return Ya.compare(this.rjt(t,0,0),s,i)},mjt(t,s,i,e){return Ya.compare(this.rjt(t,s,0),i,e)},gjt(t,s,i,e,n){return Ya.compare(this.rjt(t,s,i),e,n)},yjt(t){const s=this.Xc,e=s.qF(),n=s.QF(),r=n.v8(),i=s.hO(),h=i.b8(),o=i.x8(n),a=++this.njt,l=this.sjt,u=this.ijt,c=this.ejt,f=this.KWt,d=this.QWt,p=this.tjt;if(a===this.sjt.length?(l.push(0),u.push(0),c.push(0)):(l[a]=0,u[a]=0,c[a]=0),s.T8(!1),0===t)for(let i=0;i<f;++i)for(let s=0;s<d;++s)for(let t=0;t<p;++t)l[a]=i,u[a]=s,c[a]=t,m(e,n,r,h,o,this);else if(1===t)for(let s=0;s<f;++s)for(let t=0;t<d;++t)l[a]=s,u[a]=t,m(e,n,r,h,o,this);else for(let t=0;t<f;++t)l[a]=t,m(e,n,r,h,o,this);return s.T8(!0),this.njt--,i.O8(),!1},wjt(t,s){return Ya.compare(this.rjt(this.ljt(),this.ujt(),this.cjt()),t,s)},Sjt(e){const t=this.KWt,n=this.QWt,r=this.tjt,h=this.Ku;for(let i=0;i<t;++i)for(let s=0;s<n;++s)for(let t=0;t<r;++t)if(h[i][s][t]===e)return!0;return!1},zu(){return 0===this.KWt||0===this.QWt||0===this.tjt},vjt(t,s,i){let e=0;switch(t){case 0:e=this.KWt;break;case 1:e=this.QWt;break;case 2:e=this.tjt}return Ya.compare(e,s,i)}}}{let r=function(t,s){if("number"==typeof t&&"number"==typeof s)return t-s;{const i=t.toString(),e=s.toString();return i<e?-1:e<i?1:0}};r;const Za=self.Os;Za.W$.ZWt.Pnt={Clear(e){const t=this.KWt,n=this.QWt,r=this.tjt,h=this.Ku;for(let i=0;i<t;++i)for(let s=0;s<n;++s)for(let t=0;t<r;++t)h[i][s][t]=e},HI(t,s,i){this.HI(t,s,i)},l2(t,s){this.Set(t,0,0,s)},R4(t,s,i){this.Set(t,s,0,i)},bjt(t,s,i,e){this.Set(t,s,i,e)},x8(i,e,t){const n=this.KWt,r=this.QWt,s=this.tjt,h=this.Ku;if(0===t){const o=Za.Do(r,()=>Za.Do(s,e));0===i?h.push(o):h.unshift(o),this.KWt++}else if(1===t){for(let t=0;t<n;++t){const a=Za.Do(s,e);0===i?h[t].push(a):h[t].unshift(a)}this.QWt++}else{for(let s=0;s<n;++s)for(let t=0;t<r;++t)0===i?h[s][t].push(e):h[s][t].unshift(e);this.tjt++}},O8(i,t){const e=this.KWt,n=this.QWt,s=this.tjt,r=this.Ku;if(0===t)0!==e&&(0===i?r.pop():r.shift(),this.KWt--);else if(1===t){if(0!==n){for(let t=0;t<e;++t)0===i?r[t].pop():r[t].shift();this.QWt--}}else if(0!==s){for(let s=0;s<e;++s)for(let t=0;t<n;++t)0===i?r[s][t].pop():r[s][t].shift();this.tjt--}},xjt(t){const i=this.KWt,e=this.QWt,s=this.tjt,n=this.Ku;if(0!==i&&0!==e&&0!==s)if(0===t)n.reverse();else if(1===t)for(let t=0;t<i;++t)n[t].reverse();else for(let s=0;s<i;++s)for(let t=0;t<e;++t)n[s][t].reverse()},Mjt(t){const i=this.KWt,e=this.QWt,s=this.tjt,n=this.Ku;if(0!==i&&0!==e&&0!==s)if(0===t)n.sort((t,s)=>r(t[0][0],s[0][0]));else if(1===t)for(let t=0;t<i;++t)n[t].sort((t,s)=>r(t[0],s[0]));else for(let s=0;s<i;++s)for(let t=0;t<e;++t)n[s][t].sort(r)},Gjt(i){const e=this.KWt,n=this.QWt,r=this.tjt;if(0!==e&&0!==n&&0!==r)if(0===i)for(let s=0;s<n;++s)for(let t=0;t<r;++t)this.hjt(i,e,0,s,t);else if(1===i)for(let s=0;s<e;++s)for(let t=0;t<r;++t)this.hjt(i,n,s,0,t);else for(let s=0;s<e;++s)for(let t=0;t<n;++t)this.hjt(i,r,s,t,0)},Ju(i,t){if(!((i=Math.floor(i))<0)){const e=this.KWt,n=this.QWt,s=this.tjt,r=this.Ku;if(0===t)e<=i||(r.splice(i,1),this.KWt--);else if(1===t){if(!(n<=i)){for(let t=0;t<e;++t)r[t].splice(i,1);this.QWt--}}else if(!(s<=i)){for(let s=0;s<e;++s)for(let t=0;t<n;++t)r[s][t].splice(i,1);this.tjt--}}},_H(i,e,t){if(!((e=Math.floor(e))<0)){const n=this.KWt,r=this.QWt,s=this.tjt,h=this.Ku;if(0===t)n<e||(h.splice(e,0,Za.Do(r,()=>Za.Do(s,i))),this.KWt++);else if(1===t){if(!(r<e)){for(let t=0;t<n;++t)h[t].splice(e,0,Za.Do(s,i));this.QWt++}}else if(!(e>s)){for(let s=0;s<n;++s)for(let t=0;t<r;++t)h[s][t].splice(e,0,i);this.tjt++}}},Tjt(t,s,i){const e=t.split(s);this.HI(e.length,1,1);for(let s=0,t=e.length;s<t;++s){let t=e[s];0===i?String(Number(t))===t&&(t=Number(t)):2===i&&(t=Number(t)),this.Set(s,0,0,t)}},_jt(t){let s=null;try{s=JSON.parse(t)}catch(t){return void console.error("[Construct] Failed to parse JSON: ",t)}if(s.c2array){const i=s.size;this.KWt=i[0],this.QWt=i[1],this.tjt=i[2],this.Ku=s.data}},Ijt(t){const s=URL.createObjectURL(new Blob([this.ajt()],{type:"application/json"}));this.Xc.sD(s,t)}}}{const Ka=self.Os;Ka.W$.ZWt.Rnt={rjt(t,s,i){return this.rjt(t,s||0,i||0)},Fbt(){return this.KWt},Obt(){return this.QWt},Cjt(){return this.tjt},Ejt(){return this.ljt()},Pjt(){return this.ujt()},Rjt(){return this.cjt()},Ajt(){return this.rjt(this.ljt(),this.ujt(),this.cjt())},Z0(){return this.rjt(0,0,0)},Fjt(){return this.rjt(this.KWt-1,0,0)},Ojt(i){const e=this.Ku;for(let t=0,s=this.KWt;t<s;++t)if(e[t][0][0]===i)return t;return-1},Djt(s){const i=this.Ku;for(let t=this.KWt-1;0<=t;--t)if(i[t][0][0]===s)return t;return-1},Ljt(t){let s=[];for(let t=0;t<this.KWt;++t)s.push(this.rjt(t,0,0));return s.join(t)},Mbt(){return this.ajt()}}}{const Qa=self.Os;Qa.W$.dnt=class extends Qa.Sxt{constructor(t){super(t)}ir(){super.ir()}}}{const tl=self.Os,sl=self.Hs,il=[],el=(tl.W$.dnt.O_t=class extends tl.eMt{constructor(t){super(t),this.I_t=t.fIt()}ir(){tl.Rh(this.I_t),super.ir()}Uxt(){for(const t of this.I_t)t.CTt(this.Xc)}a$(s){const i={fb:this.Xc.LF()};return Promise.all(this.I_t.map(t=>t.ETt(s,i)))}p$(){for(const t of this.I_t)t.PTt()}c$(){this.kjt()}kjt(){for(const t of this.Wct.vk())t.s6().Njt()}USt(t){tl.W$.dnt.Kbt(this,t)}Ivt(t){il.push({oMt:null,Bjt:!1,instances:[]})}Wjt(t,s,i){const e=il.at(-1);e.oMt=t,e.Bjt=i,e.instances.push(s)}Cvt(t){const s=il.pop(),i=s.oMt,e=s.Bjt;if(i){const n=new Map;for(const r of s.instances)r.xCt(n,i,e);for(const[h,o]of n)h.xk().cft(o)}}jjt(t){const s=this.mN().yIt(t),i=this.ED(),e=s.RTt(0);return e.N6().dU(i.Rv(),{fb:i.LF()}).then(()=>this.kjt()),s}Ujt(t){for(const s of this.Wct.vk())s.s6().Vjt(t);this.mN().wIt(t)}Hjt(t,s){const i=this.Wct.mIt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);let e=i.DTt(s);e<0&&(e+=i.P6()+1);const n=tl.TTt.ITt(this.ED()),r=(i.ATt(n,e),this.ED());n.N6().dU(r.Rv(),{fb:r.LF()}).then(()=>this.kjt());for(const h of this.Wct.vk())h.s6().zjt();return n}Jjt(t,s){const i=this.Wct.mIt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);if(1===i.P6())throw new Error(`cannot remove last frame from animation '${t}'`);let e=i.DTt(s);e<0&&(e+=i.P6()),i.FTt(e);for(const n of this.Wct.vk())n.s6().zjt()}Vxt(){return self.qjt}},new WeakMap);self.qjt=class extends self.ak{constructor(t){super(t),el.set(this,t._vt())}$jt(t){sl.ve(t);const s=el.get(this).mN().mIt(t);return s?s.LTt():null}Xjt(){return el.get(this).mN().pIt().map(t=>t.LTt())}Yjt(t){return sl.ve(t),el.get(this).jjt(t).LTt()}Zjt(t){sl.ve(t),el.get(this).Ujt(t)}Kjt(t,s){if(sl.ve(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");return el.get(this).Hjt(t,s).F6()}Qjt(t,s){if(sl.ve(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");el.get(this).Jjt(t,s)}}}{const P=self.Os,nl=self.Hs,rl=P.tr(P.Rect),hl=P.tr(P.Hl),ol=P.tr(P.Ha),R=(P.W$.dnt.Instance=class extends P.LMt{constructor(t,s){super(t);let i=!0,e="",n=0,r=!0;s&&(i=!!s[0],e=s[1],n=s[2],r=s[3]),this.t8t=this.Wct.mIt(e)||this.Wct.fIt()[0],this.s8t=P.lr(n,0,this.t8t.P6()-1),this.i8t=this.t8t.RTt(this.s8t);const h=this.i8t.N6(),o=(this.e8t=h.Ox(),this.n8t=h.bC(),this.r8t=h.$Mt(),this.WMt(),t.vCt(2,!0),t.vCt(1,0<=this.t8t.M6()),this.h8t=Math.abs(this.t8t.M6()),this.o8t=this.t8t.I6(),this.a8t=P.tr(P.f0),this.l8t=0,this.u8t=0,this.c8t="",this.f8t=-1,this.d8t="",this.p8t=0,this.aD());this.m8t=o.j4(),o.M5(i),o.nB(r),o.qrt(this.i8t.j6()),o.Xrt(this.i8t.V6()),o.fPt(this.i8t.tW()),o.P4(),1===this.Wct.dIt()&&1===this.Wct.fIt()[0].P6()||0===this.h8t||this.IMt()}ir(){this.t8t=null,this.i8t=null,this.e8t=null,this.a8t=null,super.ir()}HMt(){return this.i8t.N6()}Yst(){return!0}fH(){this.e8t=null}VMt(){this.Njt()}sb(t){const s=this.e8t;if(null!==s){t.CE(s);const i=this.aD();i.qB()?this.g8t(i,t):this.y8t(i,t)}}y8t(t,s){let i=this.m8t;this.Xc.NF()&&(i=t.rPt(i)),s.NE(i,this.r8t)}g8t(s,t){const i=s.MPt();if(s.TPt()){s.iPt(rl,hl,!1);let t=hl;this.Xc.NF()&&(t=s.rPt(t)),i.tb(s.$B(),t,this.r8t),s.GPt(!1)}i.sb(t)}w8t(){return this.a8t.Ks()}S8t(){return this.vi.bCt(2)}v8t(t){this.vi.vCt(2,t)}b8t(){return this.vi.bCt(1)}x8t(t){this.vi.vCt(1,t)}M8t(){return this.vi.bCt(4)}G8t(t){this.vi.vCt(4,t)}fZ(){this.d8t&&this.T8t(),0<=this.f8t&&this._8t();const t=this.h8t;if(this.S8t()&&0!==t){const s=this.Xc.mO(this.vi),i=(this.a8t.tc(s),this.w8t()),e=this.i8t,n=e.B6()/t;if(!(i<this.l8t+n)){const r=this.t8t,h=this.o8t,o=r.P6(),a=r.T6(),l=r.G6(),u=r.E6(),c=(this.b8t()?this.s8t++:this.s8t--,this.l8t+=n,this.s8t>=o&&(u?(this.x8t(!1),this.s8t=o-2):!l&&(this.u8t++,this.u8t>=a)?this.I8t(!1):this.s8t=h),this.s8t<0&&(u?(this.s8t=1,this.x8t(!0),l||(this.u8t++,this.u8t>=a&&this.I8t(!0))):!l&&(this.u8t++,this.u8t>=a)?this.I8t(!0):this.s8t=h),this.s8t=P.lr(this.s8t,0,o-1),r.RTt(this.s8t));i>this.l8t+c.B6()/t&&(this.l8t=i),this.C8t(e,c)}}else this.cMt()}I8t(t){this.s8t=t?0:this.t8t.P6()-1,this.v8t(!1),this.c8t=this.t8t.jc(),this.G8t(!0),this.hMt("animationend",!1,{animationName:this.c8t}),this.t4(P.W$.dnt.N$.E8t),this.t4(P.W$.dnt.N$.P8t),this.G8t(!1),this.u8t=0}C8t(i,e,t){if(i!==e){const s=this.aD(),n=i.N6(),r=e.N6(),h=n.$p(),o=n.hm(),a=r.$p(),l=r.hm(),u=(t&&t.onFrameChange?t.onFrameChange(s,h,o,a,l):(h!==a&&s.im(s.$p()*(a/h)),o!==l&&s.Xp(s.hm()*(l/o))),s.qrt(e.j6()),s.Xrt(e.V6()),s.fPt(e.tW()),s.P4(),this.i8t=e,this.e8t=r.Ox(),this.n8t=r.bC(),this.r8t=r.$Mt(),this.EW().ont());for(let t=0,s=u.length;t<s;++t)u[t].OGt(i,e);this.hMt("framechange",!1,{animationName:this.t8t.jc(),R8t:this.s8t}),this.t4(P.W$.dnt.N$.A8t),this.Xc.mD()}}F8t(t){this.v8t(!0),this.l8t=this.w8t(),1===t&&0!==this.s8t&&(this.f8t=0,this.M8t()||this._8t()),this.IMt()}O8t(t,s,i){this.d8t=t,this.p8t=s,this.IMt(),!i&&this.M8t()||this.T8t()}D8t(){return this.t8t}L8t(){return this.d8t||this.t8t.jc()}Vjt(t){P.pn(t,this.L8t())&&this.O8t(this.Wct.SIt().jc(),1,!0)}k8t(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{const s=this.Wct.mIt(this.L8t());if(!s)return;if(-1===(t=s.OTt(t)))return}isFinite(t)&&(this.f8t=t,this.M8t()||this._8t())}zjt(){if(!this.d8t&&-1===this.f8t){const t=this.i8t,s=this.t8t.RTt(P.lr(this.s8t,0,this.t8t.P6()-1));t!==s&&this.C8t(t,s),1<this.t8t.P6()&&0<this.h8t&&this.IMt()}}N8t(){return this.s8t}B8t(){return this.i8t.nW()}W8t(t){this.h8t=Math.abs(t),this.x8t(0<=t),0<this.h8t&&this.IMt()}j8t(){return this.b8t()?this.h8t:-this.h8t}U8t(t){"string"==typeof t&&-1===(t=this.t8t.OTt(t))||(t=P.lr(Math.floor(t),0,this.t8t.P6()-1),this.o8t=t)}V8t(){return this.o8t}T8t(t){const s=this.i8t,i=this.Wct.mIt(this.d8t);if(this.d8t="",i&&(i!==this.t8t||!this.S8t())){this.t8t=i,this.x8t(0<=i.M6()),this.h8t=Math.abs(i.M6()),this.o8t=i.I6(),this.s8t=P.lr(this.s8t,0,this.t8t.P6()-1),1===this.p8t&&(this.s8t=0),this.v8t(!0),this.l8t=this.w8t();const e=this.t8t.RTt(this.s8t);this.C8t(s,e,t)}}_8t(t){const s=this.i8t,i=this.s8t;if(this.s8t=P.lr(Math.floor(this.f8t),0,this.t8t.P6()-1),this.f8t=-1,t||i!==this.s8t){const e=this.t8t.RTt(this.s8t);this.C8t(s,e),this.l8t=this.w8t()}}Njt(){const t=this.i8t.N6();this.e8t=t.Ox(),this.n8t=t.bC(),this.r8t=t.$Mt(),this.aD().GPt(!0)}Ox(){return this.e8t}bC(){return this.n8t}$Mt(){return this.r8t}J6(){return this.i8t.J6()}jvt(t){let s=this.i8t,i=this.aD(),e=null;if("string"==typeof t)e=s.K6(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");e=s.Z6(t-1)}let n=i.L4();if(!e)return[i.a2(),i.c2(),n];if(ol.T(e.qTt()),i.qB()){const[r,h,o]=i.$B().ob(ol.Xa(),ol.Za());ol.set(r,h),n+=o}return ol.offset(-s.j6(),-s.V6()),ol.scale(i.$p(),i.hm()),ol.rotate(i.jk()),ol.offset(i.a2(),i.c2()),[ol.Xa(),ol.Za(),n]}H8t(){return this.aD().yPt().Pu()}z8t(t){t=Math.floor(t);const s=this.aD(),i=s.yPt(),e=i.Pu();if((t=t===e?0:t)<0||e<=t)return[0,0];const n=i.Eu();return[n[2*t+0]+s.a2(),n[2*t+1]+s.c2()]}RMt(){const s=P.W$.dnt.Pnt,t="plugins.sprite.debugger.animation-properties";return[{title:t+".title",properties:[{name:t+".current-animation",value:this.t8t.jc(),ojt:t=>this.FMt(s.J8t,t,0)},{name:t+".current-frame",value:this.s8t,ojt:t=>this.FMt(s.q8t,t)},{name:t+".is-playing",value:this.S8t(),ojt:t=>t?this.FMt(s.$8t,0):this.FMt(s.X8t)},{name:t+".speed",value:this.h8t,ojt:t=>this.FMt(s.Y8t,t)},{name:t+".repeats",value:this.u8t,ojt:t=>this.u8t=t}]}]}G2(){const t={a:this.t8t.Az()},s=(0!==this.l8t&&(t.fs=this.l8t),this.w8t()),i=(0!==s&&(t.at=s),0!==this.s8t&&(t.f=this.s8t),0!==this.h8t&&(t.cas=this.h8t),1!==this.u8t&&(t.ar=this.u8t),0!==this.o8t&&(t.rt=this.o8t),this.S8t()||(t.ap=this.S8t()),this.b8t()||(t.af=this.b8t()),this.aD());return i.eB()&&(t.ce=i.eB()),t}T2(t){const s=this.mN().gIt(t.a),i=(s&&(this.t8t=s),this.l8t=t.hasOwnProperty("fs")?t.fs:0,this.a8t.Set(t.hasOwnProperty("at")?t.at:0),t.hasOwnProperty("f")?t.f:0),e=(this.s8t=P.lr(i,0,this.t8t.P6()-1),this.h8t=t.hasOwnProperty("cas")?t.cas:0,this.u8t=t.hasOwnProperty("ar")?t.ar:1,t.hasOwnProperty("rt")?t.rt:0),n=(this.o8t=P.lr(e,0,this.t8t.P6()-1),this.v8t(!t.hasOwnProperty("ap")||!!t.ap),this.x8t(!t.hasOwnProperty("af")||!!t.af),this.t8t.RTt(this.s8t)),r=(this.i8t=n,this.Njt(),this.aD());r.qrt(n.j6()),r.Xrt(n.V6()),r.fPt(n.tW()),r.nB(!!t.ce),this.S8t()&&this.IMt()}prt(t){const s=this.aD();switch(t){case 3:return s.eB();case 2:return P.lr(this.s8t,0,this.t8t.P6()-1);case 1:return this.t8t.jc()}}vrt(t,s,i){const e=this.aD();switch(t){case 3:e.nB(!!s);break;case 2:{this.v8t(!1);const n=this.t8t.P6()-1,r=s=P.lr(s,0,n),h=this.t8t.RTt(this.s8t),o=this.t8t.RTt(r);this.C8t(h,o,i),this.s8t=P.lr(r,0,n);break}case 1:{this.d8t=s,this.T8t(i);const a=this.t8t.P6();1<a&&0<this.t8t.M6()?this.IMt():this.cMt();break}}}Vxt(){return self.Z8t}},new WeakMap),al=new Map([["current-frame",0],["beginning",1]]);self.Z8t=class extends self.YB{constructor(){super(),R.set(this,self.dN.wN().s6())}z6(){return R.get(this).J6()}q6(t){return this.X6(t)[0]}Y6(t){return this.X6(t)[1]}K8t(t){return this.X6(t)[2]}X6(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return R.get(this).jvt(t)}Q6(){return R.get(this).H8t()}sW(t){return nl.ge(t),R.get(this).z8t(t)[0]}eW(t){return nl.ge(t),R.get(this).z8t(t)[1]}iW(t){return nl.ge(t),R.get(this).z8t(t)}Q8t(){R.get(this).v8t(!1)}tUt(t="current-frame"){nl.ve(t);const s=al.get(t);if(void 0===s)throw new Error("invalid mode");R.get(this).F8t(s)}sUt(t,s="beginning"){nl.ve(t),nl.ve(s);const i=al.get(s);if(void 0===i)throw new Error("invalid mode");const e=R.get(this);if(!e.mN().mIt(t))throw new Error(`animation name "${t}" does not exist`);e.O8t(t,i)}$jt(t){nl.ve(t);const s=R.get(this).mN().mIt(t);return s?s.LTt():null}get animation(){return R.get(this).D8t().LTt()}get animationName(){return R.get(this).L8t()}set R8t(t){nl.ge(t),R.get(this).k8t(t)}get R8t(){return R.get(this).N8t()}set iUt(t){nl.ve(t),R.get(this).k8t(t)}get iUt(){return R.get(this).B8t()}set eUt(t){nl.ge(t),R.get(this).W8t(t)}get eUt(){return R.get(this).j8t()}set nUt(t){nl.ge(t),R.get(this).U8t(t)}get nUt(){return R.get(this).V8t()}get imageWidth(){return R.get(this).HMt().$p()}get imageHeight(){return R.get(this).HMt().hm()}rUt(){const t=R.get(this).HMt();return[t.$p(),t.hm()]}async hUt(t){nl.Ze(t,Blob);const s=R.get(this),i=s.ED(),e=s.HMt(),n=P.tr(P.ZGt);if(n.cTt(i,t),await n.dU(i.Rv(),{fb:i.LF()}),s.er())n.ir();else{e.fTt(n);const r=s._vt();r.kjt(),r.mN().Rf().dispatchEvent(new P.Event("animationframeimagechange")),i.mD()}}oUt(t,s){nl.ve(s),R.get(this).aD().tPt(!!t,s)}}}{const ll=self.Os;ll.W$.dnt.N$={aUt(t){return ll.pn(this.L8t(),t)},lUt(t,s){return ll.compare(this.s8t,t,s)},uUt(t,s){if("string"!=typeof s)return!1;const i=this.i8t.nW();return ll.compare(i.toLowerCase(),t,s.toLowerCase())},cUt(t,s){return ll.compare(this.j8t(),t,s)},P8t(t){return ll.pn(this.c8t,t)},E8t(){return!0},A8t(){return!0},fUt(){return this.aD().$p()<0},dUt(){return this.aD().hm()<0},pUt(){return!0},mUt(){return!0},eB(){return this.aD().eB()}}}{const ul=self.Os;ul.W$.dnt.Pnt={gUt(t,s,i,e,n){if(t&&s){const[r,h]=this.jvt(i),o=this.Xc._k(t,s,r,h,e,n);if(o){if(e&&s.Ik(o),t.uk().HL()){const l=o.aD();l.Wk(this.aD().jk()),l.P4()}const a=this.Xc.qF();a.Ck(!0),o.Ek(),a.Ck(!1),t!==this.Xc.ldt().mN()&&this.uMt.Wjt(t,o,e)}}},X8t(){this.v8t(!1)},$8t(t){this.F8t(t)},J8t(t,s){this.O8t(t,s)},q8t(t){this.k8t(t)},Y8t(t){this.W8t(t)},yUt(t){this.U8t(t)},wUt(s,t){try{0===s?this._vt().jjt(t):this._vt().Ujt(t)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation: `,t)}},SUt(s,t,i){try{0===s?this._vt().Hjt(t,i):this._vt().Jjt(t,i)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation frame: `,t)}},vUt(t){const s=this.aD(),i=s.$p(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.im(e),s.P4())},bUt(t){const s=this.aD(),i=s.hm(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.Xp(e),s.P4())},Nk(t){const s=this.i8t,i=s.N6(),e=this.aD(),n=e.$p()<0?-1:1,r=e.hm()<0?-1:1,h=i.$p()*t*n,o=i.hm()*t*r;e.$p()===h&&e.hm()===o||(e.HI(h,o),e.P4())},async xUt(t,s,i){const e=this.i8t,n=e.N6(),r=this.aD(),h=this.Xc,o=this.uMt;if(n.OV()===t)0===s&&(r.HI(n.$p(),n.hm()),r.P4()),this.t4(ul.W$.dnt.N$.pUt);else{const a=ul.tr(ul.ZGt);try{if(await a.uTt(h,t),!a.hH())throw new Error("image failed to load");if(this.er())return void a.ir();await a.dU(h.Rv(),{fb:h.LF()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.er()||this.t4(ul.W$.dnt.N$.mUt))}this.er()?a.ir():(n.fTt(a),o.kjt(),o.mN().Rf().dispatchEvent(new ul.Event("animationframeimagechange")),h.mD(),0===s&&(r.HI(n.$p(),n.hm()),r.P4()),await this.i4(ul.W$.dnt.N$.pUt))}},MUt(t){this.aD().nB(t)},tPt(t,s){this.aD().tPt(0===t,s)},GUt(t){this.aD().SetBlendMode(t),this.Xc.mD()}}}{const cl=self.Os;cl.W$.dnt.Rnt={TUt(){return this.N8t()},_Ut(){return this.B8t()},IUt(){return this.t8t.P6()},CUt(){return this.t8t.jc()},EUt(){return this.j8t()},PUt(){return this.t8t.M6()},RUt(t){return this.jvt(t)[0]},AUt(t){return this.jvt(t)[1]},FUt(t){return this.jvt(t)[2]},OUt(){return this.J6()},DUt(){return this.HMt().$p()},LUt(){return this.HMt().hm()},kUt(t){return this.z8t(t)[0]},NUt(t){return this.z8t(t)[1]},BUt(){return this.H8t()}}}{const fl=self.Os;fl.W$.Text=class extends fl.Sxt{constructor(t){super(t)}ir(){super.ir()}}}{const dl=self.Os;dl.W$.Text.O_t=class extends dl.eMt{constructor(t){super(t)}ir(){super.ir()}Uxt(){}a$(t){}p$(){}}}{const pl=self.Os,ml=self.Hs,gl=[0,0,0],yl=["left","center","right"],wl=["top","center","bottom"],Sl=["ltr","rtl"],vl=["word","cjk","character"],bl=new pl.Rect,xl=new pl.Hl,Ml=new pl.Lo,Gl=pl.tr(pl.Ha),Tl=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["iconoffsety",null]]),A=(pl.W$.Text.Instance=class extends pl.LMt{constructor(t,s){if(super(t),this.Yc="",this.WUt=!0,this.jUt="Arial",this.UUt=12,this.VUt=0,this.I_=!1,this.C_=!1,this.$v=pl.tr(pl.Lo),this.O_=0,this.D_=0,this.N_="word",this.B_=0,this.HUt="auto",this.zUt=1,this.JUt=null,this.qUt="",this.$Ut=!1,this.XUt=!1,this.YUt=null,this.ZUt=-1,this.KUt=-1,this.QUt=0,this.tVt=pl.tr(pl.Ug.ov,this.Xc.Rv(),{timeout:5}),this.tVt.dI=()=>this.Xc.mD(),this.sVt=()=>this.iVt(),this.eVt=!1,s){this.Yc=s[0],this.WUt=!!s[1],this.jUt=s[2],this.UUt=s[3],this.VUt=s[4],this.I_=!!s[5],this.C_=!!s[6],this.O_=s[8],this.D_=s[9],this.N_=vl[s[10]],this.B_=s[11],this.nVt(this.Xc.d8(s[12]));const i=s[7];this.$v.Uo(i[0],i[1],i[2]),this.aD().M5(s[13]),this.XUt=!!s[15]}this.rVt(),this.hVt()}ir(){this.nVt(null),this.oVt(),this.YUt&&(this.YUt.ir(),this.YUt=null),this.tVt.ir(),this.tVt=null,super.ir()}rVt(){const t=this.tVt;t.Qc(this.Yc),t.yI(this.WUt),this.tVt.v_()&&this.JUt?this.tVt.Jp(this.ED().oNt(this.JUt)):this.tVt.Jp(null),t.wI("nearest"!==this.Xc.LF()),t.SI(this.jUt),t.MI(this.VUt),t.TI(this.I_),t.II(this.C_),t.Zv(this.$v),t.DI(yl[this.O_]),t.kI(wl[this.D_]),t.BI(this.N_),t.jI(Sl[this.B_])}aVt(){let t=this.aD(),s=(this.tVt.vI(this.UUt),this.tVt.xI(t.bEt()),t.lD()),i;"auto"===this.HUt?i=s.JJ(t.L4()):"fixed"===this.HUt&&(i=this.zUt),t.qB()&&i!==this.tVt.zI()&&t.GPt(!0),this.tVt.HI(t.$p(),t.hm(),i)}nVt(t){t&&(t.Gz()||t.uk().constructor!==pl.W$.dnt)||t!==this.JUt&&(this.JUt&&this.JUt.Rf().removeEventListener("animationframeimagechange",this.sVt),this.JUt=t,this.JUt&&this.JUt.Rf().addEventListener("animationframeimagechange",this.sVt),this.rVt(),this.$Ut=!1,this.Xc.mD())}iVt(){this.Xc.aNt(this.JUt),this.Xc.mD(),this.eVt=!0}hVt(){if(this.XUt){let t=this.Yc;this.WUt&&(t=pl.In.Wp(t)),this.YUt?this.YUt.Qc(t):this.YUt=pl.tr(pl.$c,this.Xc,t)}else this.YUt&&(this.YUt.ir(),this.YUt=null)}sb(t){const s=this.aD(),i=(this.aVt(),this.eVt&&(this.eVt=!1,this.tVt.v_())&&this.JUt&&this.tVt.Jp(this.ED().oNt(this.JUt)),this.tVt.Ox());if(i){const e=s.lD();if(0===s.jk()&&0===e.jk()&&0===s.L4()&&!s.qB()&&e.cJ()){const n=s.j4(),[r,h]=e.uN(n.Xr(),n.Yr()),[o,a]=e.uN(n.Qr(),n.th()),l=r-Math.round(r),u=h-Math.round(h),[c,f]=(bl.set(r,h,o,a),bl.offset(-l,-u),xl.cu(bl),t.UE(t.oP()));this.Xc.wL().bU(t,c,f),t.CE(i),t.gS(xl,this.tVt.bC()),e.MU(t)}else t.CE(i),s.qB()?this.g8t(s,t):this.y8t(s,t)}}y8t(t,s){let i=t.j4();this.Xc.NF()&&(i=this.lVt(i)),s.gS(i,this.tVt.bC())}g8t(s,t){const i=s.MPt();if(s.TPt()){s.iPt(bl,xl,!1);let t=xl;this.Xc.NF()&&(t=this.lVt(t)),i.tb(s.$B(),t,this.tVt.bC()),s.GPt(!1)}i.sb(t)}lVt(t){const s=t.Xr()-Math.round(t.Xr()),i=t.Yr()-Math.round(t.Yr());return 0==s&&0==i?t:(xl.T(t),xl.offset(-s,-i),xl)}zMt(){const t=this.tVt.Ox();return t?[t.$p(),t.hm()]:[100,100]}JMt(){return this.tVt.bC()}XMt(){return!1}G2(){const t={t:this.Yc,c:this.$v.toJSON(),fn:this.jUt,ps:this.UUt};return this.WUt&&(t.bbc=this.WUt),0!==this.O_&&(t.ha=this.O_),0!==this.D_&&(t.va=this.D_),"word"!==this.N_&&(t.wr=this.N_),0!==this.VUt&&(t.lho=this.VUt),this.I_&&(t.b=this.I_),this.C_&&(t.i=this.C_),-1!==this.KUt&&(t.tw={st:this.ZUt,en:this.KUt,l:this.QUt}),this.JUt&&(t.ioc=this.JUt.Az()),"fixed"===this.HUt&&(t.fs=this.zUt),t}T2(t){if(this.oVt(),this.Yc=t.t,this.$v.Fa(t.c),this.jUt=t.fn,this.UUt=t.ps,this.WUt=!!t.hasOwnProperty("bbc")&&t.bbc,this.O_=t.hasOwnProperty("ha")?t.ha:0,this.D_=t.hasOwnProperty("va")?t.va:0,t.hasOwnProperty("wr")){const s=t.wr;this.N_="boolean"==typeof s?s?"word":"character":s}else this.N_="word";if(this.VUt=t.hasOwnProperty("lho")?t.lho:0,this.I_=!!t.hasOwnProperty("b")&&t.b,this.C_=!!t.hasOwnProperty("i")&&t.i,t.hasOwnProperty("tw")){const i=t.tw;this.ZUt=i.st,this.KUt=i.en,this.QUt=i.l}if(t.hasOwnProperty("ioc")){const e=this.ED().d8(t.ioc);e&&this.nVt(e)}else this.nVt(null);t.hasOwnProperty("fs")?(this.HUt="fixed",this.zUt=t.fs):this.HUt="auto",this.rVt(),this.hVt(),this.$Ut=!1,-1!==this.KUt&&this.IMt()}prt(t){switch(t){case 0:return this.VI();case 1:return this.WUt;case 2:return this.uVt();case 3:return this.cVt();case 4:return this.fVt();case 5:return this.dVt();case 6:return this.pVt();case 7:return gl[0]=this.$v.Yo(),gl[1]=this.$v.Zo(),gl[2]=this.$v.Ko(),gl;case 8:return this.mVt();case 9:return this.gVt();case 10:return this.yVt();case 15:return this.wVt()}}vrt(t,s){switch(t){case 0:this.SVt(s);break;case 1:this.WUt!==!!s&&(this.WUt=!!s,this.rVt());break;case 2:this.vVt(s);break;case 3:this.bVt(s);break;case 4:this.xVt(s);break;case 5:this.MVt(s);break;case 6:this.GVt(s);break;case 7:const i=this.$v,e=s;i.Yo()===e[0]&&i.Zo()===e[1]&&i.Ko()===e[2]||(this.$v.Uo(e[0],e[1],e[2]),this.rVt());break;case 8:this.TVt(s);break;case 9:this._Vt(s);break;case 10:this.IVt(s)}}AMt(t,s,i,e){0===s&&0===i&&0===e||7===t&&(this.$v.Vo(s,i,e),this.rVt())}SVt(t){this.Yc!==t&&(this.Yc=t,this.tVt.Qc(t),this.hVt(),this.$Ut=!1,this.Xc.mD())}VI(){return this.Yc}CVt(t,s){this.aVt(),this.SVt(t),this.ZUt=this.Xc.vO(),this.KUt=this.ZUt+s/this.EW().AN(),this.QUt=this.tVt.XI(),this.tVt.EI(0),this.IMt()}oVt(){this.ZUt=-1,this.KUt=-1,this.QUt=0,this.tVt.EI(-1),this.cMt()}EVt(){-1!==this.KUt&&(this.oVt(),this.t4(pl.W$.Text.N$.PVt),this.Xc.mD())}vVt(t){this.jUt!==t&&(this.jUt=t,this.tVt.SI(t),this.Xc.mD())}uVt(){return this.jUt}MVt(t){this.I_!==(t=!!t)&&(this.I_=t,this.tVt.TI(t),this.Xc.mD())}dVt(){return this.I_}GVt(t){this.C_!==(t=!!t)&&(this.C_=t,this.tVt.II(t),this.Xc.mD())}pVt(){return this.C_}bVt(t){this.UUt!==t&&(this.UUt=t,this.Xc.mD())}cVt(){return this.UUt}RVt(t){this.$v.na(t)||(this.$v.Xo(t),this.tVt.Zv(this.$v),this.Xc.mD())}AVt(){return this.$v}xVt(t){this.VUt!==t&&(this.VUt=t,this.rVt(),this.Xc.mD())}fVt(){return this.VUt}TVt(t){this.O_!==t&&(this.O_=t,this.rVt(),this.Xc.mD())}mVt(){return this.O_}_Vt(t){this.D_!==t&&(this.D_=t,this.rVt(),this.Xc.mD())}gVt(){return this.D_}FVt(t){this.IVt(vl[t])}IVt(t){this.N_!==t&&(this.N_=t,this.rVt(),this.Xc.mD())}yVt(){return this.N_}OVt(t){this.B_!==t&&(this.B_=t,this.rVt(),this.Xc.mD())}DVt(){return this.B_}LVt(t){this.XUt=!!t,this.hVt()}wVt(){return this.XUt}kVt(t){this.HUt!==t&&(this.HUt=t,this.Xc.mD())}NVt(){return this.HUt}BVt(t){this.zUt!==t&&(this.zUt=t,"fixed"===this.HUt)&&this.Xc.mD()}WVt(){return this.zUt}jVt(){return this.aVt(),this.tVt.JI()}UVt(){return this.aVt(),this.tVt.$I()}VVt(t,s){this.aVt();const i=this.aD(),e=(Gl.set(t-i.a2(),s-i.c2()),Gl.rotate(-i.jk()),Gl.offset(i.$p()*i.j6(),i.hm()*i.V6()),Gl.Tt(i.$p(),i.hm()),Gl.scale(this.tVt.$p(),this.tVt.hm()),this.tVt.ZI(Gl.Xa(),Gl.Za()));if(e){const n=e.Ym("tag");if(n)return n.param}return""}HVt(t,s,i){const e=this.VVt(s,i);return e&&pl.pn(t,e)}zVt(t,s){this.aVt(),s=Math.floor(s);const i=this.tVt.QI(t,s);if(!i)return null;const e=this.aD(),n=this.tVt.FI(),r=i.zm(),h=i.qm()-(i.hm()-i.am())*n,o=i.$p()*n/this.tVt.$p()*e.$p(),a=i.hm()*n/this.tVt.hm()*e.hm();return Gl.set(r,h),Gl.Tt(this.tVt.$p(),this.tVt.hm()),Gl.scale(e.$p(),e.hm()),Gl.offset(-e.$p()*e.j6(),-e.hm()*e.V6()),Gl.rotate(e.jk()),Gl.offset(e.a2(),e.c2()),{x:Gl.Xa(),y:Gl.Za(),width:o,height:a}}JVt(t){return this.aVt(),this.tVt.tC(t)}qVt(t){let s=Tl.get(t);return null===s?"":`</${s||"span"||"span"}>`}$Vt(t,s){let i=Tl.get(t);if(null===i)return"";switch(i=i||"span",t){case"color":return`<${i} style="color: ${s}">`;case"font":return`<${i} style="font-family: '${s}'">`;case"opacity":return`<${i} style="opacity: ${s}%">`;case"size":return`<${i} style="font-size: ${s}pt">`;case"background":return`<${i} style="background-color: ${s}">`;case"hide":return`<${i} style="visibility: hidden">`;case"class":return`<${i} class="${s}">`;case"tag":return`<${i} data-tag="${s}">`;default:return`<${i}>`}}async XVt(){if(!this.$Ut){let t=new pl.In(this.Yc,{xp:!0}).Fp(),s=new Map,n='<span class="c3-text"',i=[],r=(i.push(`font-family: '${this.uVt()}';`),this.dVt()&&i.push("font-weight: bold;"),this.pVt()&&i.push("font-style: italic;"),"character"===this.yVt()&&i.push("word-break: break-all;"),n+=` style="${i.join(" ")}">`,this.JUt?this.ED().oNt(this.JUt):null);if(this.JUt){const o=pl.tr(pl.sd),a=[],l=new Map;for(const c of t)if(c.nm()){const f=c.ig(r);if(f){const d=f.Ng(),p=d.N6().yTt();l.has(p)||(l.set(p,null),a.push(o.tc(async()=>{const t=await p.gH();l.set(p,t)})))}}await Promise.all(a);const u=[];for(const m of t)if(m.nm()){const g=m.ig(r);if(g){const y=g.Ng(),w=y.N6().yTt();u.push(o.tc(async()=>{const t=await y.N6().STt(l.get(w));s.set(g,t)}))}}await Promise.all(u);for(const S of l.values())S instanceof ImageBitmap&&S.close&&S.close()}const h=new Map;for(const v of t){let e=v.Km(),t=[...h.keys()];t.reverse();for(const b of t)e.has(b)&&e.get(b)===h.get(b)||(h.delete(b),n+=this.qVt(b));for(const[x,M]of e)h.has(x)||(h.set(x,M),n+=this.$Vt(x,M));if(v.tm()&&(n+=pl.j1(pl.B1(v.Mm().join("")),"\n","<br>")),v.nm()&&r){const G=v.ig(r);if(G){const T=s.get(G);if(T){let t=[],s="0.2em",i=e.get("iconoffsety");if(i){let t=i.trim();s=t.endsWith("%")?parseFloat(t)/100+"em":t+"px"}t.push("top: "+s),"nearest"===this.Xc.LF()&&t.push("image-rendering: pixelated"),n+=`<img class="c3-text-icon" data-icon="${v.sg()}" width="${G.$p()}" height="${G.hm()}" style="${t.join(";")}" src="${T}">`}}}}const e=[...h.keys()];e.reverse();for(const _ of e)n+=this.qVt(_);n+="</span>",this.qUt=n,this.$Ut=!0}return this.qUt}fZ(){const s=this.Xc.vO();if(s>=this.KUt)this.oVt(),this.t4(pl.W$.Text.N$.PVt),this.Xc.mD();else{let t=pl.Ir(this.ZUt,this.KUt,s,0,this.QUt);(t=Math.floor(t))!==this.tVt.RI()&&(this.tVt.EI(t),this.Xc.mD())}}RMt(){const t="plugins.text";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.VI(),ojt:t=>this.SVt(t)},{name:t+".properties.font.name",value:this.uVt(),ojt:t=>this.vVt(t)},{name:t+".properties.size.name",value:this.cVt(),ojt:t=>this.bVt(t)},{name:t+".properties.line-height.name",value:this.fVt(),ojt:t=>this.xVt(t)},{name:t+".properties.bold.name",value:this.dVt(),ojt:t=>this.MVt(t)},{name:t+".properties.italic.name",value:this.pVt(),ojt:t=>this.GVt(t)}]}]}Vxt(){return self.YVt}},new WeakMap),_l=new Map([["left",0],["center",1],["right",2]]),Il=new Map([["top",0],["center",1],["bottom",2]]),Cl=["ltr","rtl"];new Set(["auto","fixed"]);self.YVt=class extends self.YB{constructor(){super(),A.set(this,self.dN.wN().s6())}get text(){return A.get(this).VI()}set text(t){ml.ve(t);const s=A.get(this);s.oVt(),s.SVt(t)}ZVt(t,s){ml.ve(t),ml.ge(s);const i=A.get(this);i.oVt(),i.CVt(t,s)}KVt(){A.get(this).EVt()}set _U(t){ml.ve(t),A.get(this).vVt(t)}get _U(){return A.get(this).uVt()}set CU(t){A.get(this).MVt(t)}get CU(){return A.get(this).dVt()}set EU(t){A.get(this).GVt(t)}get EU(){return A.get(this).pVt()}set IU(t){ml.ge(t),A.get(this).bVt(t)}get IU(){return A.get(this).cVt()}set QVt(t){if(ml.Le(t),t.length<3)throw new Error("expected 3 elements");Ml.Uo(t[0],t[1],t[2]),A.get(this).RVt(Ml)}get QVt(){const t=A.get(this).AVt();return[t.Yo(),t.Zo(),t.Ko()]}set lineHeight(t){ml.ge(t),A.get(this).xVt(t)}get lineHeight(){return A.get(this).fVt()}set AU(t){ml.ve(t);const s=_l.get(t);if(void 0===s)throw new Error("invalid mode");A.get(this).TVt(s)}get AU(){return yl[A.get(this).mVt()]}set verticalAlign(t){ml.ve(t);const s=Il.get(t);if(void 0===s)throw new Error("invalid mode");A.get(this)._Vt(s)}get verticalAlign(){return wl[A.get(this).gVt()]}set FU(t){if(!vl.includes(t))throw new Error("invalid mode");A.get(this).IVt(t)}get FU(){return A.get(this).yVt()}set OU(t){ml.ve(t);const s=Cl.indexOf(t);if(-1===s)throw new Error("invalid text direction");A.get(this).OVt(s)}get OU(){return Cl[A.get(this).DVt()]}set tHt(t){A.get(this).LVt(!!t)}get tHt(){return A.get(this).wVt()}sHt(t){ml.ge(t);const s=A.get(this);s.kVt("fixed"),s.BVt(t)}iHt(){A.get(this).kVt("auto")}get kU(){return A.get(this).jVt()}get NU(){return A.get(this).UVt()}eHt(){const t=A.get(this);return[t.jVt(),t.UVt()]}nHt(t,s,i){return ml.ve(t),ml.ge(s),ml.ge(i),A.get(this).HVt(t,s,i)}rHt(t,s){return ml.ge(t),ml.ge(s),A.get(this).VVt(t,s)}hHt(t,s=0){return ml.ve(t),ml.ge(s),A.get(this).zVt(t,s)}oHt(t){return ml.ve(t),A.get(this).JVt(t)}aHt(t){const s=A.get(this),i=s.ED().hL(t);s.nVt(i)}lHt(){return A.get(this).XVt()}}}{const El=self.Os;El.W$.Text.N$={uHt(t,s){return s?this.Yc===t:El.pn(this.Yc,t)},cHt(){return-1!==this.KUt},PVt(){return!0},fHt(t,s,i){return this.HVt(t,s,i)}}}{const Pl=self.Os,Rl=Pl.tr(Pl.Lo);Pl.W$.Text.Pnt={Qc(t){this.oVt(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.SVt(t.toString())},dHt(t){this.oVt(),(t=(t="number"==typeof t&&t<1e9?Math.round(1e10*t)/1e10:t).toString())&&this.SVt(this.Yc+t)},pHt(t,s){this.oVt(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.CVt(t.toString(),s)},mHt(t,s){let i=!1,e=!1;switch(s){case 1:i=!0;break;case 2:e=!0;break;case 3:i=!0,e=!0}t===this.jUt&&i===this.I_&&e===this.C_||(this.vVt(t),this.MVt(i),this.GVt(e))},vI(t){this.bVt(t)},gHt(t){Rl.da(t),Rl.lr(),this.RVt(Rl)},yHt(t,s){console.warn("[Text] 'Set web font' action is deprecated and no longer has any effect")},GUt(t){this.aD().SetBlendMode(t),this.Xc.mD()},wHt(){this.EVt()},MI(t){this.xVt(t)},SHt(t){this.TVt(t)},vHt(t){this._Vt(t)},bHt(t){this.FVt(t)},jI(t){this.OVt(t)},xHt(t){this.nVt(t)},MHt(){return this.XVt()},GHt(t){this.LVt(t)},THt(t,s){this.kVt(["auto","fixed"][t]),this.BVt(s)}}}{const Al=self.Os;Al.W$.Text.Rnt={Text(){return this.Yc},_Ht(){return this.WUt?Al.In.Wp(this.Yc):this.Yc},IHt(){return this.jUt},CHt(){return this.UUt},EHt(){return this.jVt()},PHt(){return this.UVt()},RHt(){return this.VUt},AHt(t,s){return this.VVt(t,s)},FHt(t){return this.JVt(t)},OHt(t,s){const i=this.zVt(t,s);return i?i.x:0},DHt(t,s){const i=this.zVt(t,s);return i?i.y:0},LHt(t,s){const i=this.zVt(t,s);return i?i.width:0},kHt(t,s){const i=this.zVt(t,s);return i?i.height:0},NHt(){return this.qUt}}}{const Fl=self.Os;Fl.W$.BHt=class extends Fl.Sxt{constructor(t){super(t)}ir(){super.ir()}}}{let n=function(){return s.hk().s6()};n;const Ol=self.Os,Dl=self.Hs;Ol.W$.BHt.O_t=class extends Ol.eMt{constructor(t){super(t)}ir(){super.ir()}Uxt(){}Vxt(){return self.WHt}};let s=null;self.WHt=class extends self.ak{constructor(t){super(t),(s=t).ED().YO().ZO=this}jHt(t){return n().UHt(t)[0]}VHt(t){return n().UHt(t)[1]}HHt(t){return n().UHt(t)}zHt(t){return n().JHt(t)}qHt(t){Dl.ve(t),n().$Ht(t)}XHt(t){const s=n(),i=s.ED(),e=i.hL(t);s.YHt(e)}}}{let h=self.Os,o=null;h.W$.BHt.Instance=class extends h.aMt{constructor(t,s){super(t,"mouse"),this.ZHt=[!1,!1,!1,!1,!1],this.KHt=0,this.QHt=0,this.t7t=0,this.s7t=0,this.i7t=0,this.e7t=0,this.n7t=0,this.r7t=0,this.h7t=!1,this.o7t=0,this.a7t=0,this.SMt([["pointer-lock-change",t=>this.l7t(t)],["pointer-lock-error",t=>this.u7t(t)]]);const i=this.ED().Rf();this.l0=new h.h0(h.t0.r0(i,"pointermove",t=>this.c7t(t.data)),h.t0.r0(i,"pointerdown",t=>this.f7t(t.data)),h.t0.r0(i,"pointerup",t=>this.d7t(t.data)),h.t0.r0(i,"dblclick",t=>this.p7t(t.data)),h.t0.r0(i,"wheel",t=>this.m7t(t.data)),h.t0.r0(i,"window-blur",()=>this.Rkt()))}ir(){super.ir()}f7t(t){"mouse"===t.pointerType&&(this.KHt=t.pageX-this.Xc.eN(),this.QHt=t.pageY-this.Xc.nN(),this.g7t(t.lastButtons,t.buttons))}c7t(t){this.o7t=t.movementX,this.a7t=t.movementY,this.t4(h.W$.BHt.N$.y7t),this.o7t=0,this.a7t=0,"mouse"===t.pointerType&&(this.KHt=t.pageX-this.Xc.eN(),this.QHt=t.pageY-this.Xc.nN(),this.g7t(t.lastButtons,t.buttons))}d7t(t){"mouse"===t.pointerType&&this.g7t(t.lastButtons,t.buttons)}g7t(t,s){this.w7t(t,s,1,0),this.w7t(t,s,4,1),this.w7t(t,s,2,2),this.w7t(t,s,8,3),this.w7t(t,s,16,4)}w7t(t,s,i,e){!(t&i)&&s&i?this.S7t(e):t&i&&!(s&i)&&this.v7t(e)}S7t(t){this.ZHt[t]=!0,this.t4(h.W$.BHt.N$.b7t),this.t7t=t,this.s7t=0,this.t4(h.W$.BHt.N$.x7t),this.t4(h.W$.BHt.N$.M7t)}v7t(t){this.ZHt[t]&&(this.ZHt[t]=!1,this.t7t=t,this.t4(h.W$.BHt.N$.G7t))}p7t(t){this.t7t=t.button,this.s7t=1,this.t4(h.W$.BHt.N$.x7t),this.t4(h.W$.BHt.N$.M7t)}m7t(t){this.i7t=t.deltaY<0?1:0,this.e7t=t.deltaX,this.n7t=t.deltaY,this.r7t=t.deltaZ,this.t4(h.W$.BHt.N$.T7t)}Rkt(){for(let t=0,s=this.ZHt.length;t<s;++t){if(!this.ZHt[t])return;this.ZHt[t]=!1,this.t7t=t,this.t4(h.W$.BHt.N$.G7t)}}UHt(t){const s=this.Xc.WO(),i=this.KHt,e=this.QHt;if(void 0===t){const n=s.cD(0);return n.H9(i,e)}{const r=s.lD(t);return r?r.iN(i,e):[0,0]}}JHt(t){return t=Math.floor(t),!!this.ZHt[t]}_7t(){return 0<=this.KHt&&0<=this.QHt&&this.KHt<this.Xc.S5t()&&this.QHt<this.Xc.v5t()}$Ht(t){o!==t&&(o=t,this.vMt("cursor",t))}async YHt(t){if(!h.ni.mi&&t){const s=t.w2t();if(s){const i=s.aD(),e=s.HMt();if(i&&e&&o!==e){const n=await(o=e).STt(),r=`url(${n}) ${Math.round(i.j6()*e.$p())} ${Math.round(i.V6()*e.hm())}, auto`;this.vMt("cursor",r)}}}}l7t(t){this.I7t(t["has-pointer-lock"])}u7t(t){this.I7t(t["has-pointer-lock"]),this.t4(h.W$.BHt.N$.C7t)}I7t(t){this.h7t!==t&&(this.h7t=t,this.h7t?this.t4(h.W$.BHt.N$.E7t):this.t4(h.W$.BHt.N$.P7t))}RMt(){const t="plugins.mouse";return[{title:t+".name",properties:[{name:t+".debugger.absolute-position",value:this.KHt+","+this.QHt},{name:t+".debugger.left-button",value:this.ZHt[0]},{name:t+".debugger.middle-button",value:this.ZHt[1]},{name:t+".debugger.right-button",value:this.ZHt[2]},{name:t+".debugger.button-4",value:this.ZHt[3]},{name:t+".debugger.button-5",value:this.ZHt[4]}]},{title:t+".debugger.position-on-each-layer",properties:this.Xc.WO().Yk().map(t=>({name:"$"+t.jc(),value:t.iN(this.KHt,this.QHt).join(", ")}))}]}}}{const Ll=self.Os;Ll.W$.BHt.N$={x7t(t,s){return this.t7t===t&&this.s7t===s},b7t(){return!0},R7t(t){return this.ZHt[t]},G7t(t){return this.t7t===t},A7t(t){const s=this.Xc.odt(),i=s.RSt(),e=[];return this._7t()&&e.push([this.KHt,this.QHt]),Ll.xor(this.Xc.MF().IRt(t,e,i),i)},M7t(t,s,i){if(t!==this.t7t||s!==this.s7t)return!1;if(!this._7t())return!1;const e=this.KHt,n=this.QHt;return this.Xc.MF().IRt(i,[[e,n]],!1)},T7t(t){return 2===t||this.i7t===t},E7t(){return!0},P7t(){return!0},C7t(){return!0},F7t(){return this.h7t},y7t(){return!0}}}{const kl=self.Os,Nl=["auto","pointer","text","crosshair","move","help","wait","none"];kl.W$.BHt.Pnt={O7t(t){this.$Ht(Nl[t])},D7t(t){this.YHt(t)},L7t(t){this.xMt("request-pointer-lock",{unadjustedMovement:t})},k7t(){this.vMt("release-pointer-lock")}}}{const Bl=self.Os;Bl.W$.BHt.Rnt={Rbt(t){return this.UHt(t)[0]},Abt(t){return this.UHt(t)[1]},N7t(){return this.KHt},B7t(){return this.QHt},W7t(){return this.o7t},j7t(){return this.a7t},U7t(){return this.e7t},V7t(){return this.n7t},H7t(){return this.r7t}}}{const Wl=self.Os,jl=[];Wl.W$.Audio=class extends Wl.Sxt{constructor(t){super(t)}z7t(t){jl.push(t)}static async J7t(){await Promise.all(jl),Wl.Rh(jl)}ir(){super.ir()}}}{let s=function(){return i.hk().s6()},t=function(){if(self.C3Audio_DOMInterface)return self.C3Audio_DOMInterface;throw new Error("audio scripting API cannot be used here - make sure the project is using DOM mode, not worker mode")};s,t;const Ul=self.Os,Vl=self.Hs;Ul.W$.Audio.O_t=class extends Ul.eMt{constructor(t){super(t)}ir(){super.ir()}Uxt(){}Vxt(){return self.q7t}};let i=null;self.q7t=class extends self.ak{constructor(t){super(t),i=t}get $7t(){return t().GetAudioContextExtern()}get X7t(){return t().GetDestinationNodeExtern()}get isSilent(){return s().Y7t()}set isSilent(t){s().Z7t(t)}get masterVolume(){return s().K7t()}set masterVolume(t){Vl.ge(t),s().Q7t(t)}tzt(){s().szt()}}}{const Hl=self.Os,zl=["interactive","balanced","playback"];Hl.W$.Audio.Instance=class extends Hl.aMt{constructor(t,s){super(t,"audio"),this.izt=0,this.ezt=[],this.nzt=!0,this.rzt=0,this.hzt=0,this.ozt=!1,this.azt=1,this.lzt=1,this.uzt=[this.Xc.iJ()/2,this.Xc.eJ()/2,600],this.czt=[0,0,-1],this.fzt=[0,1,0],this.dzt=600,this.pzt=1e4,this.mzt=1,this.gzt=null,this.yzt=-1,this.wzt=1,this.Szt=!1,this.vzt=0,this.bzt="suspended",this.xzt=0,this.Mzt=new Map,this.Gzt=0,this.Tzt=0,this._zt=new Map,this.Izt=new Map;let i="interactive";s&&(this.rzt=s[0],this.hzt=s[1],this.ozt=s[2],i=zl[s[3]],this.nzt=s[4],this.azt=s[5],this.lzt=s[6],this.uzt[2]=s[7],this.dzt=s[8],this.pzt=s[9],this.mzt=s[10]),this.Czt=[],this.Ezt=[],this.Pzt=[],this.SMt([["state",t=>this.Rzt(t)],["audiocontext-state",t=>this.Azt(t)],["fxstate",t=>this.Fzt(t)],["trigger",t=>this.Ozt(t)],["buffer-metadata",t=>this.Dzt(t)]]);const e=this.ED().Rf(),n=(this.l0=new Hl.h0(Hl.t0.r0(e,"instancedestroy",t=>this.Lzt(t.f6)),Hl.t0.r0(e,"afterload",()=>this.gY()),Hl.t0.r0(e,"suspend",()=>this.kzt()),Hl.t0.r0(e,"resume",()=>this.Nzt())),"Safari"===Hl.ni.oi),r=this.Xc.iNt(),h=this.Xc.vF().xV(),o="playable-ad-single-file"===this.Xc.pL(),a=n||r||h||o;this.Xc.bD(this.bMt("create-audio-context",{preloadList:this.Xc.vF().ZV().map(t=>({originalUrl:t.originalUrl,url:t.url,type:t.type,fileSize:t.fileSize})),timeScaleMode:this.rzt,latencyHint:i,panningModel:this.azt,distanceModel:this.lzt,refDistance:this.dzt,maxDistance:this.pzt,rolloffFactor:this.mzt,listenerPos:this.uzt,usePlayMusicAsSoundWorkaround:a}).then(t=>{this.vzt=t.sampleRate,this.bzt=t.audioContextState,this.xzt=t.outputLatency})),this.IMt()}ir(){this.gzt=null,super.ir()}Bzt(t){return this.nzt?t.split(" ").filter(t=>!!t):t?[t]:[]}Wzt(s,t){for(const i of t){let t=!1;for(const e of s)if(Hl.pn(e,i)){t=!0;break}if(!t)return!1}return!0}jzt(t,s){return this.Wzt(t,this.Bzt(s))}z7t(t){this.uk().z7t(t)}Lzt(t){this.gzt===t&&(this.gzt=null)}Uzt(t){return Math.pow(10,t/20)}Vzt(t){const s=this.Uzt(t);return isFinite(s)?Math.max(Math.min(s,1),0):0}Hzt(t){return Math.log(t)/Math.log(10)*20}zzt(t){return this.Hzt(Math.max(Math.min(t,1),0))}kzt(){this.ozt||this.vMt("set-suspended",{isSuspended:!0})}Nzt(){this.ozt||this.vMt("set-suspended",{isSuspended:!1})}Rzt(t){const s=t.tickCount,i=(this.xzt=t.outputLatency,this.Czt.filter(t=>t.hasOwnProperty("placeholder")&&(t.placeholder>s||-1===t.placeholder)));this.Czt=t.audioInstances,this.Pzt=t.analysers,0<i.length&&Hl.Vn(this.Czt,i)}Dzt(t){this._zt.set(t.originalUrl,{duration:t.duration})}Azt(t){this.bzt=t.audioContextState}Wnt(){return this.Xc.KFt()?"running":this.bzt}Fzt(t){this.Ezt=t.fxstate}Jzt(t){const s=this.Bzt(t);for(const i of this.Czt)if(this.Wzt(i.tags,s))return i;return null}qzt(t){const s=this.Bzt(t);return this.Czt.some(t=>this.Wzt(t.tags,s)&&t.isPlaying)}$zt(t,s,i,e,n){if(this.qzt(s))return null;const r=this._zt.get(t),h={tags:this.Bzt(s),duration:r?r.duration:0,volume:n,isPlaying:!0,playbackTime:0,playbackRate:1,uid:-1,bufferOriginalUrl:t,bufferUrl:"",bufferType:"",isMusic:i,isLooping:e,isMuted:!1,resumePosition:0,pan:null,placeholder:-1};return this.Czt.push(h),h}Xzt(t){const s=this.Bzt(t);for(const i of this.Czt)this.Wzt(i.tags,s)&&(i.isPlaying=!1)}async Ozt(t){const s=t.type,i=(this.ezt=t.tags,t.aiid);if("ended"===s){for(const e of this.Czt)if(e.aiid===i){e.isPlaying=!1;break}await this.i4(Hl.W$.Audio.N$.Yzt)}else"fade-ended"===s&&await this.i4(Hl.W$.Audio.N$.Zzt)}Kzt(t){return this.jzt(this.ezt,t)}fZ(){const t={timeScale:this.Xc.bO(),gameTime:this.Xc.Y5t(),instPans:this.Qzt(),tickCount:this.Xc.Z5t()};if(this.gzt){const s=this.gzt.aD();this.uzt[0]=s.a2(),this.uzt[1]=s.c2(),t.listenerPos=this.uzt,t.listenerOrientation=[...this.czt,...this.fzt]}this.vMt("tick",t)}tJt(t,s,i,e,n){if(0!==i){const r=Math.sin(i),h=Math.cos(i),o=(t-=e)*r,a=(s-=n)*r,l=t*h,u=s*h;t=l-a,s=u+o,t+=e,s+=n}return[t,s]}Qzt(){return this.Czt.filter(t=>-1!==t.uid).map(t=>this.Xc.eD(t.uid)).filter(t=>t).map(t=>{const s=t.aD(),i=s.lD().jk(),[e,n]=this.tJt(s.a2(),s.c2(),-i,this.uzt[0],this.uzt[1]);return{uid:t.EN(),x:e,y:n,z:s.L4(),angle:s.jk()-i}})}sJt(t,s){for(const i of this.Pzt)if(i.index===s&&Hl.pn(i.tag,t))return i;return null}iJt(t){for(const s of this.Bzt(t)){const i=s.toLowerCase();this.Mzt.set(i,(this.Mzt.get(i)||0)+1)}}Y7t(){return this.Szt}Z7t(t){this.Szt!==(t=!!t)&&(this.Szt=t,this.vMt("set-silent",{isSilent:t}))}K7t(){return this.wzt}Q7t(t){this.wzt!==t&&(this.wzt=t,this.vMt("set-master-volume",{vol:t}))}szt(){this.vMt("stop-all");for(const t of this.Czt)t.isPlaying=!1}eJt(t){return!t.hasOwnProperty("placeholder")&&3!==this.hzt&&!(t.isMusic&&1===this.hzt||!t.isMusic&&2===this.hzt)}G2(){return{isSilent:this.Szt,masterVolume:this.wzt,listenerZ:this.uzt[2],listenerForwardVec:this.czt,listenerUpVec:this.fzt,listenerUid:this.gzt?this.gzt.EN():-1,remoteUrls:[...this.Izt.entries()],playing:this.Czt.filter(t=>this.eJt(t)),effects:this.Ezt,analysers:this.Pzt}}T2(t){if(this.Szt=t.isSilent,this.wzt=t.masterVolume,this.uzt[2]=t.listenerZ,this.gzt=null,this.yzt=t.listenerUid,t.hasOwnProperty("listenerForwardVec")?this.czt=t.listenerForwardVec:this.czt=[0,0,-1],t.hasOwnProperty("listenerUpVec")?this.fzt=t.listenerUpVec:this.fzt=[0,1,0],this.Izt.clear(),t.remoteUrls)for(const[s,i]of t.remoteUrls)this.Izt.set(s,i);this.Czt=t.playing;for(const e of this.Czt)e.hasOwnProperty("tag")&&!e.hasOwnProperty("tags")&&(e.tags=[e.tag].filter(t=>!!t));this.Ezt=t.effects,this.Pzt=t.analysers}gY(){if(-1!==this.yzt&&(this.gzt=this.Xc.eD(this.yzt),this.yzt=-1,this.gzt)){const t=this.gzt.aD();this.uzt[0]=t.a2(),this.uzt[1]=t.c2()}for(const s of this.Czt){const i=this.Xc.vF().YV(s.bufferOriginalUrl);i?(s.bufferUrl=i.url,s.bufferType=i.type):s.bufferUrl=null}for(const e of Object.values(this.Ezt))for(const n of e)if(n.hasOwnProperty("bufferOriginalUrl")){const r=this.Xc.vF().YV(n.bufferOriginalUrl);r&&(n.bufferUrl=r.url,n.bufferType=r.type)}this.vMt("load-state",{saveLoadMode:this.hzt,timeScale:this.Xc.bO(),gameTime:this.Xc.Y5t(),listenerPos:this.uzt,listenerOrientation:[...this.czt,...this.fzt],isSilent:this.Szt,masterVolume:this.wzt,playing:this.Czt.filter(t=>null!==t.bufferUrl),effects:this.Ezt})}RMt(){const t=[];for(const[i,e]of Object.entries(this.Ezt))t.push({name:"$"+i,value:e.map(t=>t.type).join(", ")});const s="plugins.audio.debugger";return[{title:s+".tag-effects",properties:t},{title:s+".currently-playing",properties:[{name:s+".currently-playing-count",value:this.Czt.length},...this.Czt.map((t,s)=>({name:"$#"+s,value:`${t.bufferOriginalUrl} ("${t.tags}") ${Math.round(10*t.playbackTime)/10} / `+Math.round(10*t.duration)/10}))]}]}}}{const Jl=self.Os;Jl.W$.Audio.N$={Yzt(t){return this.Kzt(t)},Zzt(t){return this.Kzt(t)},nJt(){return this.Tzt===this.Gzt},rJt(){return!0},hJt(){return this.Y7t()},oJt(){for(const t of this.Czt)if(t.isPlaying)return!0;return!1},aJt(t){return this.qzt(t)}}}{const F=self.Os,ql=["lowpass","highpass","bandpass","lowshelf","highshelf","peaking","notch","allpass"];F.W$.Audio.Pnt={Play(t,s,i,e,n){const r=F.W$.Audio.Pnt.lJt.call(this,t,s,i,e,n);return this.z7t(r),r},jnt(t,s,i,e){F.W$.Audio.Pnt.lJt.call(this,t,0,s,0,i,e)},async lJt(t,s,i,e,n,r){if(!this.Szt){const h=t[1],o=this.Xc.vF().YV(t[0]);if(o){const a=this.izt,l=(this.izt=0,this.$zt(t[0],n,h,0!==s,this.Vzt(i)));try{await this.bMt("play",{originalUrl:t[0],url:o.url,type:o.type,isMusic:h,tags:this.Bzt(n),isLooping:0!==s,vol:this.Vzt(i),stereoPan:F.lr(e/100,-1,1),pos:r||0,off:a,trueClock:!!self.C3_GetAudioContextCurrentTime})}finally{l&&(l.placeholder=this.Xc.Z5t())}}}},async uJt(t,s,i,e,n,r,h,o,a,l,u){if(!this.Szt){const c=t[1],f=this.Xc.vF().YV(t[0]);if(f){const d=this.izt,p=(this.izt=0,this.$zt(t[0],u,c,0!==s,this.Vzt(i)));try{await this.bMt("play",{originalUrl:t[0],url:f.url,type:f.type,isMusic:c,tags:this.Bzt(u),isLooping:0!==s,vol:this.Vzt(i),pos:0,off:d,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:e,y:n,z:r,angle:F.cr(h),innerAngle:F.cr(o),outerAngle:F.cr(a),outerGain:this.Vzt(l)}})}finally{p&&(p.placeholder=this.Xc.Z5t())}}}},async cJt(t,s,i,e,n,r,h,o){if(!this.Szt&&e){const a=e.w2t();if(a&&a.aD()){const l=a.aD(),u=l.lD().jk(),[c,f]=this.tJt(l.a2(),l.c2(),-u,this.uzt[0],this.uzt[1]),d=t[1],p=this.Xc.vF().YV(t[0]);if(p){const m=this.izt,g=(this.izt=0,this.$zt(t[0],o,d,0!==s,this.Vzt(i)));try{await this.bMt("play",{originalUrl:t[0],url:p.url,type:p.type,isMusic:d,tags:this.Bzt(o),isLooping:0!==s,vol:this.Vzt(i),pos:0,off:m,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:c,y:f,z:l.L4(),angle:l.jk()-u,innerAngle:F.cr(n),outerAngle:F.cr(r),outerGain:this.Vzt(h),uid:a.EN()}})}finally{g&&(g.placeholder=this.Xc.Z5t())}}}}},async fJt(t,s,i,e,n,r){if(!this.Szt){const h=1===t,o=this.Xc.vF().YV(s)||this.Izt.get(s.toLowerCase());if(o){const a=this.izt,l=(this.izt=0,this.$zt(s,r,h,0!==i,this.Vzt(e)));try{await this.bMt("play",{originalUrl:s,url:o.url,type:o.type,isMusic:h,tags:this.Bzt(r),isLooping:0!==i,vol:this.Vzt(e),stereoPan:F.lr(n/100,-1,1),pos:0,off:a,trueClock:!!self.C3_GetAudioContextCurrentTime})}finally{l&&(l.placeholder=this.Xc.Z5t())}}}},async dJt(t,s,i,e,n,r,h,o,a,l,u,c){if(!this.Szt){const f=1===t,d=this.Xc.vF().YV(s)||this.Izt.get(s.toLowerCase());if(d){const p=this.izt,m=(this.izt=0,this.$zt(s,c,f,0!==i,this.Vzt(e)));try{await this.bMt("play",{originalUrl:s,url:d.url,type:d.type,isMusic:f,tags:this.Bzt(c),isLooping:0!==i,vol:this.Vzt(e),pos:0,off:p,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:n,y:r,z:h,angle:F.cr(o),innerAngle:F.cr(a),outerAngle:F.cr(l),outerGain:this.Vzt(u)}})}finally{m&&(m.placeholder=this.Xc.Z5t())}}}},async pJt(t,s,i,e,n,r,h,o,a){if(!this.Szt&&!this.Szt&&n){const l=n.w2t();if(l&&l.aD()){const u=l.aD(),c=u.lD().jk(),[f,d]=this.tJt(u.a2(),u.c2(),-c,this.uzt[0],this.uzt[1]),p=1===t,m=this.Xc.vF().YV(s)||this.Izt.get(s.toLowerCase());if(m){const g=this.izt,y=(this.izt=0,this.$zt(s,a,p,0!==i,this.Vzt(e)));try{await this.bMt("play",{originalUrl:s,url:m.url,type:m.type,isMusic:p,tags:this.Bzt(a),isLooping:0!==i,vol:this.Vzt(e),pos:0,off:g,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:f,y:d,z:u.L4(),angle:u.jk()-c,innerAngle:F.cr(r),outerAngle:F.cr(h),outerGain:this.Vzt(o),uid:l.EN()}})}finally{y&&(y.placeholder=this.Xc.Z5t())}}}}},mJt(t,s){this.vMt("set-looping",{tags:this.Bzt(t),isLooping:0===s})},gJt(t,s){this.vMt("set-muted",{tags:this.Bzt(t),isMuted:0===s})},Nnt(t,s){this.vMt("set-volume",{tags:this.Bzt(t),vol:this.Vzt(s)})},yJt(t,s,i,e){this.vMt("fade-volume",{tags:this.Bzt(t),vol:this.Vzt(s),duration:i,stopOnEnd:0===e})},wJt(t,s){this.vMt("set-stereo-pan",{tags:this.Bzt(t),p:F.lr(s/100,-1,1)})},async SJt(t){const s=t[1],i=this.Xc.vF().YV(t[0]);i&&(this.Gzt++,await this.bMt("preload",{originalUrl:t[0],url:i.url,type:i.type,isMusic:s}),this.Tzt++)},async vJt(t,s){const i=1===t,e=this.Xc.vF().YV(s)||this.Izt.get(s.toLowerCase());e&&(this.Gzt++,await this.bMt("preload",{originalUrl:s,url:e.url,type:e.type,isMusic:i}),this.Tzt++)},yW(t,s){this.vMt("set-playback-rate",{tags:this.Bzt(t),rate:Math.max(s,0)})},oW(t){this.Xzt(t),this.vMt("stop",{tags:this.Bzt(t)})},bJt(){this.szt()},xJt(t,s){this.vMt("set-paused",{tags:this.Bzt(t),paused:0===s})},MJt(t,s){this.vMt("seek",{tags:this.Bzt(t),pos:s})},GJt(t){2===t&&(t=this.Y7t()?1:0),this.Z7t(0===t)},TJt(t){const s=this.Vzt(t);this.Q7t(s)},_Jt(t,s,i,e,n,r,h){const o=ql[s];this.iJt(t),this.vMt("add-effect",{type:"filter",tags:this.Bzt(t),params:[o,i,e,n,r,F.lr(h/100,0,1)]})},IJt(t,s,i,e){this.iJt(t),this.vMt("add-effect",{type:"delay",tags:this.Bzt(t),params:[s,this.Vzt(i),F.lr(e/100,0,1)]})},CJt(t,s,i,e,n,r){this.iJt(t),this.vMt("add-effect",{type:"flanger",tags:this.Bzt(t),params:[s/1e3,i/1e3,e,n/100,F.lr(r/100,0,1)]})},EJt(t,s,i,e,n,r,h){this.iJt(t),this.vMt("add-effect",{type:"phaser",tags:this.Bzt(t),params:[s,i,e,n,r,F.lr(h/100,0,1)]})},PJt(t,s,i,e){const n=this.Xc.vF().YV(s[0]);n&&(this.iJt(t),this.vMt("add-effect",{type:"convolution",tags:this.Bzt(t),bufferOriginalUrl:s[0],bufferUrl:n.url,bufferType:n.type,params:[0===i,F.lr(e/100,0,1)]}))},RJt(t,s){this.iJt(t),this.vMt("add-effect",{type:"gain",tags:this.Bzt(t),params:[this.Vzt(s)]})},AJt(t,s){this.iJt(t),this.vMt("add-effect",{type:"stereopan",tags:this.Bzt(t),params:[F.lr(s/100,-1,1)]})},FJt(t){this.iJt(t),this.vMt("add-effect",{type:"gain",tags:this.Bzt(t),params:[0]})},OJt(t,s,i){this.iJt(t),this.vMt("add-effect",{type:"tremolo",tags:this.Bzt(t),params:[s,F.lr(i/100,0,1)]})},DJt(t,s,i){this.iJt(t),this.vMt("add-effect",{type:"ringmod",tags:this.Bzt(t),params:[s,F.lr(i/100,0,1)]})},LJt(t,s,i,e,n,r){this.iJt(t),this.vMt("add-effect",{type:"distortion",tags:this.Bzt(t),params:[this.Uzt(s),this.Uzt(i),e,this.Uzt(n),F.lr(r/100,0,1)]})},kJt(t,s,i,e,n,r){this.iJt(t),this.vMt("add-effect",{type:"compressor",tags:this.Bzt(t),params:[s,i,e,n/1e3,r/1e3]})},NJt(t,s,i){this.iJt(t),this.vMt("add-effect",{type:"analyser",tags:this.Bzt(t),params:[s,i]})},BJt(t){const s=this.Bzt(t);for(const i of s)this.Mzt.set(i.toLowerCase(),0);this.vMt("remove-effects",{tags:s}),this.Ezt={}},b6(t,s,i,e,n,r){this.vMt("set-effect-param",{tags:this.Bzt(t),index:Math.floor(s),param:i,value:e,ramp:n,time:r})},WJt(t){if(t){const s=t.w2t();s&&s.aD()&&(this.gzt=s)}},jJt(t){this.uzt[2]=t},UJt(t,s,i,e,n,r){this.czt[0]=t,this.czt[1]=s,this.czt[2]=-i,this.fzt[0]=e,this.fzt[1]=n,this.fzt[2]=-r},VJt(t){this.izt=Math.max(t,0)},HJt(t){const s=t[1],i=this.Xc.vF().YV(t[0]);i&&this.vMt("unload",{url:i.url,type:i.type,isMusic:s})},zJt(t,s){const i=1===t,e=this.Xc.vF().YV(s)||this.Izt.get(s.toLowerCase());e&&this.vMt("unload",{url:e.url,type:e.type,isMusic:i})},JJt(){this.vMt("unload-all")},qJt(t,s,i){this.Izt.set(i.toLowerCase(),{url:t,type:s})}}}{const $l=self.Os;$l.W$.Audio.Rnt={$Jt(t){const s=this.Jzt(t);return s?s.duration:0},Ont(t){const s=this.Jzt(t);return s?s.playbackTime:0},Bnt(t){const s=this.Jzt(t);return s?s.playbackRate:0},Dnt(t){const s=this.Jzt(t);return s?this.zzt(s.volume):0},XJt(){return this.zzt(this.K7t())},YJt(t){return this.Mzt.get(t.toLowerCase())||0},ZJt(t,s){const i=this.sJt(t,Math.floor(s));return i?i.binCount:0},KJt(t,s,i){const e=this.sJt(t,Math.floor(s));return!e||(i=Math.floor(i))<0||i>=e.binCount?0:e.freqBins[i]},QJt(t,s){const i=this.sJt(t,Math.floor(s));return i?i.peak:0},t9t(t,s){const i=this.sJt(t,Math.floor(s));return i?i.rms:0},s9t(){return this.vzt},i9t(){return self.C3_GetAudioContextCurrentTime?self.C3_GetAudioContextCurrentTime():performance.now()/1e3},e9t(){return this.xzt},n9t(t,s){return 0==(t=$l.lr(+t,0,100)/100)?-1/0:t<.1?this.zzt($l.Ft(0,this.Vzt(s),10*t)):$l.Ft(s,0,(t-.1)/.9)}}}{const Xl=self.Os;Xl.W$.r9t=class extends Xl.Sxt{constructor(t){super(t)}ir(){super.ir()}}}{const Yl=self.Os;Yl.W$.r9t.O_t=class extends Yl.eMt{constructor(t){super(t)}ir(){super.ir()}Uxt(){}}}{const Zl=self.Os,Kl=self.dN,Ql="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",tu=(Zl.W$.r9t.Instance=class extends Zl.aMt{constructor(t,s){super(t),this.HC=new ArrayBuffer(0),this.h9t=null,this.o9t=null,this.a9t=0===s[0],this.l9t="",this.u9t=!1,this.c9t=[[1,(t,s)=>this.h9t.setInt8(t,s)],[1,(t,s)=>this.h9t.setUint8(t,s)],[2,(t,s)=>this.h9t.setInt16(t,s,this.a9t)],[2,(t,s)=>this.h9t.setUint16(t,s,this.a9t)],[4,(t,s)=>this.h9t.setInt32(t,s,this.a9t)],[4,(t,s)=>this.h9t.setUint32(t,s,this.a9t)],[4,(t,s)=>this.h9t.setFloat32(t,s,this.a9t)],[8,(t,s)=>this.h9t.setFloat64(t,s,this.a9t)]],this.f9t=[[1,t=>this.h9t.getInt8(t)],[1,t=>this.h9t.getUint8(t)],[2,t=>this.h9t.getInt16(t,this.a9t)],[2,t=>this.h9t.getUint16(t,this.a9t)],[4,t=>this.h9t.getInt32(t,this.a9t)],[4,t=>this.h9t.getUint32(t,this.a9t)],[4,t=>this.h9t.getFloat32(t,this.a9t)],[8,t=>this.h9t.getFloat64(t,this.a9t)]],this.d9t()}p9t(t,s){return 0<=t&&t+s<=this.m9t()}g9t(t){const s=this.m9t();return t<0?0:s<=t?s:t}y9t(t){const s=this.m9t();return t<0?0:s<t?s:t}m9t(){return this.HC.byteLength}d9t(){const t=this.HC;this.h9t=new DataView(t),this.o9t=new Uint8Array(t),this.w9t()}w9t(){this.l9t&&(this.u9t=!0)}S9t(){this.l9t&&(URL.revokeObjectURL(this.l9t),this.l9t="")}v9t(){if(this.u9t&&(this.S9t(),this.u9t=!1),!this.l9t){const t=new Blob([this.o9t],{type:""});this.l9t=URL.createObjectURL(t)}return this.l9t}b9t(t){if(!t)return null;const s=t.w2t(this.vi);return s?s.s6():null}x9t(t,s){const i=this.f9t[t][1],e=this.f9t[t][0];return this.p9t(s,e)?i(s):0}M9t(t,s,i){const e=this.c9t[t][1],n=this.c9t[t][0];this.p9t(s,n)&&(e(s,i),this.w9t())}G9t(t,s){if(!(t instanceof ArrayBuffer))throw new TypeError("Source must be an instance of ArrayBuffer");if(s<=t.byteLength)return t.slice(0,s);const i=new Uint8Array(t),e=new Uint8Array(new ArrayBuffer(s));return e.set(i),e.buffer}T9t(t){if(Zl.Ae(t,ArrayBuffer))this.HC=t.slice(0);else{Zl.Nn(t);const s=t.buffer,i=t.byteLength,e=t.byteOffset;this.HC=s.slice(e,e+i)}this.d9t()}_9t(t){Zl.Bn(t,ArrayBuffer),this.HC=t,this.d9t()}I9t(){return this.HC.slice(0)}C9t(){return this.HC}E9t(t,s){let i=new TextDecoder(s||"utf-8");return i.decode(t)}P9t(t){let s=new TextEncoder("utf-8");return s.encode(t).buffer}R9t(s){let t=t=>t<i?s[t]:(n++,0),i=s.length,e=[],n=0,r=0;for(;r<i;){const h=(t(r++)<<16)+(t(r++)<<8)+t(r++);e.push(Ql[h>>>18&63],Ql[h>>>12&63],Ql[h>>>6&63],Ql[63&h])}for(r=e.length-n;r<e.length;)e[r++]="=";return e.join("")}A9t(s){const t=s.indexOf("="),i=s.length,e=i>>2<<2,n=i-e,r=-1<t?i-t:0;if(2<r)throw new Error("Invalid padding");let h=e===t,o=i,a=(h?o=e-r:0==n&&-1<t&&(o-=r),3*o>>2),l=new Uint8Array(a),u=0,c=0,f=()=>{if(u>=o)return 0;const t=s.charCodeAt(u++);if(64<t&&t<91)return t-65;if(96<t&&t<123)return t-71;if(47<t&&t<58)return t+4;if(43===t)return 62;if(47===t)return 63;if(61===t)return 0;throw new Error("Invalid character at column "+(u-1))},d=t=>c<a&&(l[c++]=t);for(;c<a;){const p=(f()<<18)+(f()<<12)+(f()<<6)+f();d(p>>>16&255),d(p>>>8&255),d(255&p)}return l}Vxt(){return self.F9t}},new WeakMap);self.F9t=class extends Kl{constructor(){super(),tu.set(this,Kl.wN().s6())}O9t(t){if(!(t instanceof ArrayBuffer||Zl.Ln(t)))throw new TypeError("invalid parameter");tu.get(this).T9t(t)}D9t(t){if(!(t instanceof ArrayBuffer))throw new TypeError("invalid parameter");tu.get(this)._9t(t)}L9t(){return tu.get(this).I9t()}k9t(){return tu.get(this).C9t()}}}{const su=self.Os;su.W$.r9t.N$={N9t(t,s){return su.compare(this.m9t(),t,s)},B9t(t,s,i,e){return su.compare(this.x9t(t,s),i,e)},W9t(){return!0},j9t(){return!0},U9t(){return!0},V9t(){return!0}}}{const iu=self.Os,eu=["deflate","gzip"];iu.W$.r9t.Pnt={H9t(t){this.a9t=0===t},z9t(t){this.HC=this.G9t(this.HC,t),this.d9t()},J9t(t){try{const s=this.A9t(t);this._9t(s.buffer)}catch(t){console.warn("[BinaryData] Invalid base64 string: ",t)}},q9t(t){const s=this.b9t(t);if(null!==s){const i=s.I9t();this._9t(i)}},$9t(t){const s=this.P9t(t.normalize());this._9t(s)},X9t(t,s,i,e){let n=this.c9t[t][1],r=this.c9t[t][0],h=this.g9t(i),o;if(!((o=-1===e?this.m9t():this.g9t(h+e))<=h)){const a=Math.floor((o-h)/r)*r;o=h+a;for(let t=h;t<o;t+=r)n(t,s);this.w9t()}},y0(t,s,i,e){const n=this.b9t(t);if(null!==n){e=this.y9t(e),s=n.g9t(s);let t;if(!((t=-1===i?n.m9t():n.g9t(s+i))<=s)){const r=this.m9t();if(e+t-s>r){const h=r-e;if((t=s+h)<=s)return}if(n===this)this.o9t.copyWithin(e,s,t);else{const o=n.C9t(),a=new Uint8Array(o,s,t-s);this.o9t.set(a,e)}this.w9t()}}},Net(t,s,i){this.M9t(t,i,s)},async Y9t(t){const s=eu[t];try{const i=new CompressionStream(s),e=new Blob([this.HC]),n=e.stream().pipeThrough(i),r=await new Response(n).arrayBuffer();this._9t(r),await this.i4(iu.W$.r9t.N$.W9t)}catch(t){console.error(`[Binary data] Error compressing data as '${s}': `,t),await this.i4(iu.W$.r9t.N$.j9t)}},async Z9t(t){const s=eu[t];try{const i=new DecompressionStream(s),e=new Blob([this.HC]),n=e.stream().pipeThrough(i),r=await new Response(n).arrayBuffer();this._9t(r),await this.i4(iu.W$.r9t.N$.U9t)}catch(t){console.error(`[Binary data] Error decompressing data as '${s}': `,t),await this.i4(iu.W$.r9t.N$.V9t)}}}}{const nu=self.Os,ru={K9t:0,Q9t:1,tqt:2,sqt:3,iqt:4,eqt:5,nqt:6,rqt:7};nu.W$.r9t.Rnt={OV(){return this.v9t()},hqt(){return this.R9t(this.o9t)},m9t(){return this.m9t()},oqt(t){return this.x9t(ru.K9t,t)},aqt(t){return this.x9t(ru.Q9t,t)},lqt(t){return this.x9t(ru.tqt,t)},uqt(t){return this.x9t(ru.sqt,t)},cqt(t){return this.x9t(ru.iqt,t)},fqt(t){return this.x9t(ru.eqt,t)},dqt(t){return this.x9t(ru.nqt,t)},pqt(t){return this.x9t(ru.rqt,t)},VI(t,s){let i="";if(this.p9t(t,s)){const e=this.o9t.subarray(t,t+s);try{i=this.E9t(e)}catch(t){console.warn("[Binary data] Failed to decode text: ",t)}}return i},mqt(){try{return this.E9t(this.o9t)}catch(t){return console.warn("[Binary data] Failed to decode text: ",t),""}}}}{const hu=self.Os;hu.W$.gqt=class extends hu.Sxt{constructor(t){super(t)}ir(){super.ir()}}}{const ou=self.Os;ou.W$.gqt.O_t=class extends ou.eMt{constructor(t){super(t)}ir(){super.ir()}Uxt(){}}}{const au=self.Os;au.W$.gqt.Instance=class extends au.aMt{constructor(t,s){if(super(t),this.yqt="",this.wqt=0,this.Sqt="",this.vqt=0,this.Xf=-1,this.bqt=new Map,this.xqt=null,this.Mqt="",this.Gqt=!1,this.Tqt=null,this._qt=null,this.Iqt=null,this.SDt=this.Xc.mL(),this.SDt){this.Tqt=N("fs"),this._qt=N("path");const i=self.process||nw.process;this.Iqt=this._qt.dirname(i.execPath)+"\\"}}ir(){super.ir()}async Cqt(t,s,i){console.error(`[Construct] AJAX request to '${s}' (tag '${t}') failed: `,i),this.Sqt=t,await this.i4(au.W$.gqt.N$.Eqt),this.Sqt=t,await this.i4(au.W$.gqt.N$.Pqt)}async Rqt(t){this.Sqt=t,await this.i4(au.W$.gqt.N$.Aqt),this.Sqt=t,await this.i4(au.W$.gqt.N$.Fqt)}async Oqt(t,s){s.lengthComputable&&(this.vqt=s.loaded/s.total,this.Sqt=t,await this.i4(au.W$.gqt.N$.Dqt))}async Lqt(t,s){s.lengthComputable&&(this.vqt=s.loaded/s.total,this.Sqt=t,await this.i4(au.W$.gqt.N$.kqt))}Nqt(i,e,t){if(this.SDt){const s=this.Tqt,n=this.Iqt+e;s.existsSync(n)?s.readFile(n,{encoding:"utf8"},(t,s)=>{t?this.Cqt(i,e,t):(this.yqt=s.replace(/\r\n/g,"\n"),this.Rqt(i))}):this.Cqt(i,e,t)}else this.Cqt(i,e,t)}async Bqt(s,i){const t=this.Xc.vF(),e=this.xqt;this.xqt=null;try{if(e){const n=await t.GV(i);e._9t(n),this.yqt=""}else{const r=await t.TV(i);this.yqt=r.replace(/\r\n/g,"\n")}this.wqt=0,this.Rqt(s)}catch(t){this.Cqt(s,i,t)}}Wqt(o,a,t,l){return new Promise(s=>{const i=t=>{this.Nqt(o,a,t),s()},e=this.xqt;this.xqt=null;try{const n=new XMLHttpRequest;n.onreadystatechange=()=>{if(4===n.readyState){if(e?this.yqt="":this.yqt=(n.responseText||"").replace(/\r\n/g,"\n"),this.wqt=n.status,400<=n.status)this.Cqt(o,a,n.status+n.statusText);else{const t=this.yqt.length||e&&n.response instanceof ArrayBuffer;this.SDt&&!t||!this.SDt&&0===n.status&&!t||(e&&e._9t(n.response),this.Rqt(o))}s()}},n.onerror=i,n.ontimeout=i,n.onabort=i,n.onprogress=t=>this.Oqt(o,t),n.upload.onprogress=t=>this.Lqt(o,t),n.open(t,a),0<=this.Xf&&void 0!==n.timeout&&(n.timeout=this.Xf),n.responseType=e?"arraybuffer":"text",l&&!this.bqt.has("Content-Type")&&("string"!=typeof l?n.setRequestHeader("Content-Type","application/octet-stream"):n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"));for(const[r,h]of this.bqt)try{n.setRequestHeader(r,h)}catch(t){console.error(`[Construct] AJAX: Failed to set header '${r}: ${h}': `,t)}if(this.bqt.clear(),this.Mqt){try{n.overrideMimeType(this.Mqt)}catch(t){console.error("[Construct] AJAX: failed to override MIME type: ",t)}this.Mqt=""}this.Gqt&&(n.withCredentials=!0,this.Gqt=!1),l?n.send(l):n.send()}catch(t){i(t)}})}RMt(){const t="plugins.ajax.debugger";return[{title:t+".title",properties:[{name:t+".last-status-code",value:this.wqt},{name:t+".last-data",value:this.yqt}]}]}G2(){return{lastData:this.yqt,lastStatusCode:this.wqt}}T2(t){this.yqt=t.lastData,this.wqt=t.hasOwnProperty("lastStatusCode")?t.lastStatusCode:0,this.Sqt="",this.vqt=0}}}{const lu=self.Os;lu.W$.gqt.N$={Fqt(t){return lu.pn(this.Sqt,t)},Aqt(){return!0},Pqt(t){return lu.pn(this.Sqt,t)},Eqt(){return!0},Dqt(t){return lu.pn(this.Sqt,t)},kqt(t){return lu.pn(this.Sqt,t)}}}{const uu=self.Os;uu.W$.gqt.Pnt={async Request(t,s){this.Xc.lDt()&&uu.uo(s)&&this.Xc.vF().xV()?await this.Bqt(t,s):await this.Wqt(t,s,"GET",null)},async jqt(t,s){this.Xc.lDt()&&this.Xc.vF().xV()?await this.Bqt(t,s):await this.Wqt(t,s,"GET",null)},async Uqt(t,s,i,e){await this.Wqt(t,s,e,i)},async Vqt(t,s,i,e){if(i){const n=i.w2t(this.vi);if(n){const r=n.s6(),h=r.C9t();await this.Wqt(t,s,e,h)}}},Hqt(t){this.Xf=1e3*t},zqt(t,s){this.bqt.set(t,s)},Jqt(t){if(t){const s=t.w2t(this.vi);s&&(this.xqt=s.s6())}},qqt(t){this.Mqt=t},$qt(t){this.Gqt=!!t}}}{const cu=self.Os;cu.W$.gqt.Rnt={Xqt(){return this.yqt},Yqt(){return this.wqt},Zqt(){return this.vqt},Tag(){return this.Sqt}}}{let t=function(t,o){return class extends t{constructor(){super(),o.set(this,self.dN.wN().s6()),this.Kqt={Qqt:0,t$t:1,s$t:2},this.i$t={e$t:0,n$t:1,r$t:2,h$t:3}}SetSource(t,s,i,e,n){const r=o.get(this),h=r.Xc.sLt.get(t.name.toLowerCase());r.o$t(h,s,i,e,n)}}},s=function(){return class extends fu.LMt{constructor(t,s){super(t),this.a$t=.5,this.l$t=.5,this.u$t=!1,s&&(this.a$t=s[0],this.l$t=s[1],this.u$t=s[2]),this.source=null,this.c$t=null,this.f$t=null,this.d$t=!1,this.p$t=0,this.fallback=3,this.m$t=!1,this.g$t=fu.tr(fu.Hl),this.firstTick=this.u$t,this.y$t=fu.tr(fu.Lo),this.firstTick&&this.IMt(),this.w$t(this.a$t,this.l$t)}w$t(t,s){const i=this.aD();i.qrt(t),i.Xrt(s),this.a$t=t,this.l$t=s,i.P4()}o$t(t,s,i,e,n){const r=t.Sk(this.EW());if(!r)return!1;const h=r.s6();if(!h)return!1;if(fu.W$.dnt&&h instanceof fu.W$.dnt.Instance){this.source=null,this.c$t=null,this.f$t=t,this.d$t=s,this.p$t=i,this.fallback=e,this.m$t=n,this.d$t?(this.source=h,this.IMt()):(this.c$t=h.Ox(),this.g$t.T(h.$Mt()),this.cMt());const o=this.aD(),a=h.aD(),l=h.HMt();return 1===this.p$t?o.HI(a.$p(),a.hm()):2===this.p$t&&o.HI(l.$p(),l.hm()),this.m$t&&this.w$t(a.j6(),a.V6()),0<this.p$t&&o.P4(),!0}}ir(){super.ir()}S$t(){return this.o$t(this.f$t,this.d$t,this.p$t,this.fallback,this.m$t)}v$t(){this.source=null,this.c$t=null,this.f$t=null,this.cMt()}b$t(){this.cMt(),this.Xc.xN(this)}fZ(){if(this.firstTick&&(this.firstTick=!1,this.fEt()),null===this.source)this.cMt();else{if(!this.source.vi){if(0===this.fallback)return void this.b$t();if(1===this.fallback){if(!this.S$t())return void this.b$t()}else if(2===this.fallback){if(!this.S$t())return void this.v$t()}else if(3===this.fallback)return void this.v$t()}if(this.d$t){const t=this.source.aD(),s=this.aD(),i=this.source.HMt();1===this.p$t?s.HI(t.$p(),t.hm()):2===this.p$t&&s.HI(i.$p(),i.hm()),this.m$t&&this.w$t(t.j6(),t.V6()),0<this.p$t&&s.P4()}}}sb(e){if(this.u$t){e.Rw();const t=this.aD(),s=t.j4();if(this.y$t.T(t.$v),this.y$t.ca(),e.Zv(this.y$t),this.Xc.NF()){const i=Math.round(t.a2())-t.a2(),n=Math.round(t.c2())-t.c2();tempQuad.T(s),tempQuad.offset(i,n),e.Hl(tempQuad)}else e.Hl(s)}else{const r=this.c$t||this.source&&this.source.Ox();if(r){let t=this.aD(),s=t.j4(),i=this.source?this.source.HMt().$Mt():this.g$t;e.CE(r),this.Xc.NF()&&(s=t.rPt(s)),e.NE(s,i)}}}G2(){return{}}T2(t){}Vxt(){return gu}fEt(){const t=this.Xc.Rv(),s=this.aD();s.Q3t&&t.zw(s.Q3t);let i;i=this.u$t?t.Ty||"<fill>":t.Gw()||"<default>",s.Q3t=t.jw(i,s.Y5(),s.K3t,s.d2())}x$t(t){(this.u$t=t)&&this.source&&(this.source=null),this.fEt()}M$t(){this.u$t=!1,this.source=null}G$t(t){this.aD().SetBlendMode(t),this.Xc.mD()}}};0;const fu=self.Os,du={id:"skymen_Shell",Pnt:{SetSource:{forward:t=>t.o$t,autoScriptInterface:!1},SetHotspot:{forward:t=>t.w$t,autoScriptInterface:!0},SetBlendMode:{forward:t=>t.G$t,autoScriptInterface:!1},SetUseColor:{forward:t=>t.x$t,autoScriptInterface:!1},Clear:{forward:t=>t.M$t,autoScriptInterface:!1}},N$:{HasSource:{handler:function(){return!(!this.source&&!this.c$t)},autoScriptInterface:!0},KeepsSync:{handler:function(){return!(!this.source&&!this.c$t)&&this.d$t},autoScriptInterface:!0},UsesColorFill:{handler:function(){return this.u$t},autoScriptInterface:!0}},Rnt:{HotspotX:{handler:function(){return this.a$t},autoScriptInterface:!0},HotspotY:{handler:function(){return this.l$t},autoScriptInterface:!0}}},pu=(fu.W$[du.id]=class extends fu.Sxt{constructor(t){super(t)}ir(){super.ir()}},fu.W$[du.id]),mu=(pu.O_t=class extends fu.eMt{constructor(t){super(t)}ir(){super.ir()}Uxt(){}},new WeakMap),gu=t(self.YB,mu);Object.keys(du.Pnt).forEach(i=>{const t=du.Pnt[i];t.autoScriptInterface&&(gu.prototype[i]=function(...t){const s=mu.get(this);pu.Pnt[i].call(s,...t)})}),Object.keys(du.N$).forEach(i=>{const t=du.N$[i];t.autoScriptInterface&&(gu.prototype[i]=function(...t){const s=mu.get(this);return pu.N$[i].call(s,...t)})}),Object.keys(du.Rnt).forEach(i=>{const t=du.Rnt[i];t.autoScriptInterface&&(gu.prototype[i]=function(...t){const s=mu.get(this);return pu.Rnt[i].call(s,...t)})}),pu.Pnt={},pu.N$={},pu.Rnt={},Object.keys(du.Pnt).forEach(t=>{const s=du.Pnt[t];pu.Pnt[t]=function(...t){s.forward?s.forward(this).call(this,...t):s.handler&&s.handler.call(this,...t)}}),Object.keys(du.N$).forEach(t=>{const s=du.N$[t];pu.N$[t]=function(...t){return s.forward?s.forward(this).call(this,...t):s.handler?s.handler.call(this,...t):void 0}}),Object.keys(du.Rnt).forEach(t=>{const s=du.Rnt[t];pu.Rnt[t]=function(...t){return s.forward?s.forward(this).call(this,...t):s.handler?s.handler.call(this,...t):void 0}}),pu.Instance=s()}{const yu=self.Os;yu.Mat.T$t=class extends yu.SGt{constructor(t){super(t)}ir(){super.ir()}}}{const wu=self.Os;wu.Mat.T$t.O_t=class extends wu.GGt{constructor(t){super(t)}ir(){super.ir()}Uxt(){}}}{const Su=self.Os,vu=self.Hs,bu=self.h6,xu=(Su.Mat.T$t.Instance=class extends Su._Gt{constructor(t,s){super(t),this._$t=0,this.I$t=0,this.C$t=0,this.E$t=!0,this.P$t=!0,this.R$t=!1,this.A$t=0,this.F$t=Su.tr(Su.f0),this.O$t=this.vi.aD().ME()||1,s&&(this._$t=s[0],this.I$t=s[1],this.C$t=s[2],this.E$t=!!s[3],this.P$t=!!s[4],this.A$t=this.P$t?0:3),this.P$t&&(0===this._$t?(this.A$t=1,0===this.I$t&&(this.A$t=2)):(this.vi.aD().TE(0),this.Xc.mD())),this.IMt()}ir(){super.ir()}G2(){return{fit:this._$t,wt:this.I$t,fot:this.C$t,d:this.E$t,s:this.A$t,st:this.F$t.Ks(),mo:this.O$t}}T2(t){this._$t=t.fit,this.I$t=t.wt,this.C$t=t.fot,this.E$t=t.d,this.A$t=t.s,this.F$t.Set(t.st),this.O$t=t.mo,3===this.A$t?this.cMt():this.IMt()}fZ(){const t=this.Xc.mO(this.vi),s=(this.F$t.tc(t),this.vi.aD());0===this.A$t&&(s.TE(this.F$t.Ks()/this._$t*this.O$t),this.Xc.mD(),s.ME()>=this.O$t)&&(s.TE(this.O$t),this.A$t=1,this.F$t.Kf(),this.hMt("fadeinend"),this.t4(Su.Mat.T$t.N$.D$t)),1===this.A$t&&this.F$t.Ks()>=this.I$t&&(this.A$t=2,this.F$t.Kf(),this.hMt("waitend"),this.t4(Su.Mat.T$t.N$.L$t)),2===this.A$t&&(0!==this.C$t?(s.TE(this.O$t-this.F$t.Ks()/this.C$t*this.O$t),this.Xc.mD(),s.ME()<=0&&(this.A$t=3,this.F$t.Kf(),this.hMt("fadeoutend"),this.t4(Su.Mat.T$t.N$.k$t),this.E$t)&&this.Xc.xN(this.vi)):(this.A$t=3,this.F$t.Kf())),3===this.A$t&&this.cMt()}N$t(){this.P$t||this.R$t||(this.O$t=this.vi.aD().ME()||1,this.R$t=!0),3===this.A$t&&this.sP()}B$t(){this.sP()}sP(){this.A$t=0,this.F$t.Kf(),0===this._$t?(this.A$t=1,0===this.I$t&&(this.A$t=2)):(this.vi.aD().TE(0),this.Xc.mD()),this.IMt()}W$t(t){this._$t=Math.max(t,0)}j$t(){return this._$t}U$t(t){this.I$t=Math.max(t,0)}V$t(){return this.I$t}H$t(t){this.C$t=Math.max(t,0)}z$t(){return this.C$t}prt(t){switch(t){case 0:return this.j$t();case 1:return this.V$t();case 2:return this.z$t();case 3:return this.E$t}}vrt(t,s){switch(t){case 0:this.W$t(s);break;case 1:this.U$t(s);break;case 2:this.H$t(s);break;case 3:this.E$t=!!s}}RMt(){const t="behaviors.fade";return[{title:"$"+this.c6().jc(),properties:[{name:t+".properties.fade-in-time.name",value:this.j$t(),ojt:t=>this.W$t(t)},{name:t+".properties.wait-time.name",value:this.V$t(),ojt:t=>this.U$t(t)},{name:t+".properties.fade-out-time.name",value:this.z$t(),ojt:t=>this.H$t(t)},{name:t+".debugger.stage",value:[t+".debugger."+["fade-in","wait","fade-out","done"][this.A$t]]}]}]}Vxt(){return self.J$t}},new WeakMap);self.J$t=class extends bu{constructor(){super(),xu.set(this,bu.wN().s6())}q$t(){xu.get(this).N$t()}$$t(){xu.get(this).B$t()}set X$t(t){vu.ge(t),xu.get(this).W$t(t)}get X$t(){return xu.get(this).j$t()}set Y$t(t){vu.ge(t),xu.get(this).U$t(t)}get Y$t(){return xu.get(this).V$t()}set Z$t(t){vu.ge(t),xu.get(this).H$t(t)}get Z$t(){return xu.get(this).z$t()}}}{const Mu=self.Os;Mu.Mat.T$t.N$={k$t(){return!0},D$t(){return!0},L$t(){return!0}}}{const Gu=self.Os;Gu.Mat.T$t.Pnt={K$t(){this.N$t()},Q$t(){this.B$t()},tXt(t){this.W$t(t)},sXt(t){this.U$t(t)},iXt(t){this.H$t(t)}}}{const Tu=self.Os;Tu.Mat.T$t.Rnt={eXt(){return this.j$t()},nXt(){return this.V$t()},rXt(){return this.z$t()}}}{let i=function(t,s){return"number"==typeof t&&"number"==typeof s},e=function(t,s){return i(t,s)?t-s:t},n=function(i,e){if("string"!=typeof i&&"string"!=typeof e)return i&&e?1:0;{let t,s;return t="number"==typeof i?(Math.round(1e10*i)/1e10).toString():i,s="number"==typeof e?(Math.round(1e10*e)/1e10).toString():e,t+s}};i,e,n,0;const _u=self.Os;self.xwt=[()=>-1,()=>0,()=>1,()=>2,()=>-20,()=>"",()=>"Layer 1",t=>{const s=t.Awt(0);return()=>s.nwt()},()=>"Sumario",()=>-10,()=>"pages",t=>{const s=t.Awt(0).Kyt();return()=>n("book_flip.",Math.round(s(1,10)))},t=>{const s=t.Awt(0),i=t.Awt(1).bwt(),e=t.Awt(2).bwt();return()=>s.nwt(i.Qit(),e.Qit())},t=>{const s=t.Awt(0).bwt();return()=>n(s.Qit(),"/5")},t=>{const s=t.Awt(0).bwt();return()=>n(s.Qit(),"/4")},t=>{const s=t.Awt(0).bwt();return()=>n(s.Qit(),"/8")},()=>9,()=>"BetterCRT",t=>{const s=t.Awt(0).Kyt();return()=>s()},()=>1e3,t=>{const s=t.Awt(0),i=t.Awt(1).bwt();return()=>s.nwt(i.Qit(),0)},()=>920,()=>12,t=>{const s=t.Awt(0);return()=>_u.Ft(s.nwt(),75,.1)},t=>{const s=t.Awt(0),i=t.Awt(1).bwt();return()=>e(s.nwt(i.Qit(),0),1)},t=>{const s=t.Awt(0);return()=>_u.Ft(s.nwt(),0,.2)},()=>13]}var t=self.Os;self.Xkt=function(){return[t.W$.ZWt,t.W$.dnt,t.Mat.T$t,t.W$.Text,t.W$.BHt,t.W$.Audio,t.W$.r9t,t.W$.gqt,t.W$.skymen_Shell,t.W$.BHt.N$.M7t,t.Mat.T$t.Pnt.K$t,t.W$.B$.Pnt.uBt,t.W$.B$.N$.D4t,t.W$.skymen_Shell.N$.sbt,t.W$.B$.Pnt.oBt,t.W$.BHt.N$.A7t,t.W$.B$.N$._4t,t.W$.Audio.Pnt.Play,t.W$.BHt.Pnt.O7t,t.W$.B$.N$.T4t,t.W$.B$.Pnt.WBt,t.W$.dnt.Rnt.Opacity,t.W$.Text.Pnt.TE,t.W$.B$.N$.k$,t.W$.gqt.Pnt.jqt,t.Mat.T$t.N$.k$t,t.W$.B$.Pnt.kBt,t.W$.Text.Pnt.M5,t.W$.Audio.Pnt.fJt,t.W$.B$.Rnt.random,t.Mat.T$t.N$.D$t,t.W$.Text.Pnt.Qc,t.W$.ZWt.Rnt.rjt,t.W$.dnt.Pnt.T2t,t.W$.B$.N$.L4t,t.W$.B$.N$.F4t,t.W$.BHt.Rnt.Rbt,t.W$.B$.Pnt.aBt,t.W$.gqt.N$.Fqt,t.W$.ZWt.Pnt._jt,t.W$.gqt.Rnt.Xqt,t.W$.dnt.N$.nbt,t.W$.dnt.Pnt.TE]},self.f5t=[{hXt:0},{T$t:0},{oXt:0},{in:0},{aXt:0},{lXt:0},{uXt:0},{cXt:0},{fXt:0},{dXt:0},{pXt:0},{BHt:0},{Audio:0},{r9t:0},{gqt:0},{mXt:0},{gXt:0},{yXt:0},{id:0},{wXt:0},{page:0},{SXt:0},{vXt:0},{bXt:0}],self.xXt={hXt:class extends self.fjt{},oXt:class extends self.Z8t{},uXt:class extends self.Z8t{},cXt:class extends self.Z8t{},fXt:class extends self.YVt{},dXt:class extends self.YVt{},pXt:class extends self.YVt{},BHt:class extends self.dN{},Audio:class extends self.dN{},r9t:class extends self.F9t{},gqt:class extends self.dN{},mXt:class extends self.YVt{},yXt:class extends self.YVt{},wXt:class extends self.YB{}};